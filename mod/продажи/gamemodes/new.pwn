#pragma dynamic 1000000

#include <a_samp>
#include <..\..\gamemodes\API\colors.inc>
#include <a_mysql>

#include <a_http>
#include <gl_common>

#undef MAX_PLAYERS
#define MAX_PLAYERS 		(25+1)

#undef MAX_VEHICLES
#define MAX_VEHICLES 		(1970)

main(){}

#define CHECKER_NUM     180

#define SRV_IP          "185.189.255.97" // здесь указывать свой айпи сервера

#define MYSQL_HOST      "127.0.0.1" // MySQL Host
#define MYSQL_USER      "gs104368" // MySQL User
#define MYSQL_PASS      "ktapxoyx" // MySQL Pass
#define MYSQL_DB        "gs104368" // MySQL Datebase

#define SERVER_NAME     "BRILLIANT RP | TEST SERVER"
#define MODE_VERSION	"2.4"
#define SERVER_URL   	""
#define GROUP_VK       	"vk.com/weikton"

#define ADMZONE_POS -10.2956, -33.6666, 226.1462 // на вышке москва city

new money_bonus = 500;
new donate_bonus = 0;
new reg_lvl = 1;

#include <sql>
#include <sscanf2>
#include <streamer>
#include <Pawn.RakNet>
#include <foreach>
#include <gvar>
#include <Pawn.CMD>
#include <voicechat>
#include <md5>
#include <customrpc>
#include <wn_brp>
#include <brnotification>

#define SetPlayerData(%0,%1,%2)             pData[%0][%1] = %2
#define AddData(%0,%1,%2,%3)                pData[%0][%1] %2= %3;UpdatePlayerData(%0, "%1", %3);
#define GetName(%0)   						GetNameEx(%0)

#define GetMoney(%0)  		pData[playerid][pMoney]
#define SetMoney(%0,%1)  	GivePlayerMoney(%0, %1)

#define Func::%0(%1) 		forward %0(%1); public %0(%1)
#define GetAdmin(%0) 		pData[%0][pAdmin]

#define SQL_HOST      MYSQL_HOST // MySQL Host
#define SQL_USER      MYSQL_USER // MySQL User
#define SQL_PASS      MYSQL_PASS // MySQL Pass
#define SQL_DB        MYSQL_DB // MySQL Datebase

#define D_SELLCAR 17170

new player_cars_count[MAX_PLAYERS];
new GlobalString[4096+90];
new TqueryString[4096+90];
new AhelpString[6000];

#define OFFER_CARPASS					23

new StringCmd[144];
stock SendCmd(playerid,string[])
{
	format(StringCmd, sizeof(StringCmd), "- Используйте: %s", string);
	SendClientMessage(playerid, -1, StringCmd);
	return 1;
}

new Iterator:streamed_players_in_veh[MAX_VEHICLES]<MAX_PLAYERS-1>;
new Iterator:vehicle_in_stream[MAX_PLAYERS]<MAX_VEHICLES-1>;
new Iterator:Admins<MAX_PLAYERS>;
new Iterator:logged_players<MAX_PLAYERS-1>;
new Iterator:Player_In_Race<MAX_PLAYERS>;

new mute_time[MAX_PLAYERS];

new type_player_systems[MAX_PLAYERS];
new temp_password_check_android[MAX_PLAYERS][32];

new
	SERVER_SELECT_MODE,
	srv;
	
new
	BOOST = 1,
	gmx_time;

#define PLAYER_IN_MOBILE_VERSION		1
#define PLAYER_IN_PC_VERSION			2

native gpci(playerid, const serial[], maxlen);

#define PP_SYNTAX
#include <PawnPlus>
#include <customtune>

#include <..\..\gamemodes\API\systems\sql_systems\sql.inc>
#include <..\..\gamemodes\API\global_defines.inc>
#include <..\..\gamemodes\API\systems\android_checker.inc>

#include <customauth>

new Iterator:Vehicles<MAX_VEHICLES>;

#include <..\..\gamemodes\API\admin\logs_systems.inc>
#include <..\..\gamemodes\API\systems\newyear_systems\newyear_define.inc>
#include <..\..\gamemodes\API\systems\mech_systems\mechanic_define.inc>
#include <..\..\gamemodes\API\systems\family_systems\family_define.inc>
#include <..\..\gamemodes\API\systems\work_miner_systems\miner_define.inc>
#include <..\..\gamemodes\API\systems\work_taxi_systems\work_taxi_define.inc>
#include <..\..\gamemodes\API\systems\work_factory_systems\work_factory_define.inc>
#include <..\..\gamemodes\API\systems\sklad_systems\sklad_define.inc>
#include <..\..\gamemodes\API\systems\organisation_systems\ogranisation_define_all.inc>

#include <customhud>

#include <..\..\gamemodes\API\player\week_players_online.inc>

#include <..\..\gamemodes\API\systems\buisnes_systems\buisnes_systems.inc>
#include <..\..\gamemodes\API\systems\hotel_systems\hotel_defines.inc>
#include <..\..\gamemodes\API\systems\work_trucker_systems\trucker_sync_define.inc>
#include <..\..\gamemodes\API\systems\work_trucker_systems\trucker_define.inc>
#include <..\..\gamemodes\API\systems\vehicles.inc>
#include <..\..\gamemodes\API\player\vars.inc>

#include <..\..\gamemodes\API\systems\house_systems\house_defines.inc>
#include <..\..\gamemodes\API\systems\flate_systems\flate_defines.inc>
#include <..\..\gamemodes\API\systems\flate_systems\entrance_define.inc>
#include <..\..\gamemodes\API\systems\ineractive_films_camera\reg_login_films.inc>
#include <..\..\gamemodes\API\systems\garage_systems\garage_define.inc>
#include <..\..\gamemodes\API\systems\autoschool_systems\autoschool_define.inc>
#include <..\..\gamemodes\API\systems\filling_systems\filling_define.inc>
#include <..\..\gamemodes\API\systems\work_bus_systems\work_bus_define.inc>
#include <..\..\gamemodes\API\texdraws.inc>
#include <..\..\gamemodes\API\player\job_skills.inc>
#include <..\..\gamemodes\API\systems\casino_systems\casino_define.inc>
#include <..\..\gamemodes\API\systems\property_function\property_systems_payday.inc>
#include <..\..\gamemodes\API\systems\property_function\property_systems.inc>
#include <..\..\gamemodes\API\player\offline_message.inc>
#include <..\..\gamemodes\API\systems\phone_systems\phone_defines.inc>
#include <..\..\gamemodes\API\systems\work_samwill_systems\samwill_defines.inc>
#include <..\..\gamemodes\API\systems\pickup_systems\pickup_define.inc>
#include <..\..\gamemodes\API\systems\quest_systems\quest_systems_general.inc>
#include <..\..\gamemodes\API\player\antikill_systems.inc>
#include <..\..\gamemodes\API\systems\game_relax_systems\race_systems_classic\race_define_classic.inc>
#include <..\..\gamemodes\API\systems\game_relax_systems\race_systems_classic\race_define_snow.inc>
#include <..\..\gamemodes\API\systems\mafia_systems\mafia_define.inc>
#include <..\..\gamemodes\API\systems\inventory_systems\inventory_defines.inc>
#include <..\..\gamemodes\API\systems\work_fire_systems\fire_work_define.inc>
#include <..\..\gamemodes\API\systems\work_medic_systems\work_medic_define.inc>
#include <..\..\gamemodes\API\systems\hunter_systems\hunter_systems_define.inc>
#include <..\..\gamemodes\API\systems\teplica_systems\teplica_define.inc>
#include <..\..\gamemodes\API\systems\work_fish_systems\fish_systems_define.inc>
#include <..\..\gamemodes\API\player\player_start_traning.inc>
#include <..\..\gamemodes\API\systems\work_trash_systems\trash_define.inc>
#include <..\..\gamemodes\API\systems\work_bank_systems\bankwork_define.inc>
#include <..\..\gamemodes\API\systems\other_systems_tools.inc>
#include <..\..\gamemodes\API\systems\ammo_menu_systems\ammo_menu_defines.inc>
#include <..\..\gamemodes\API\systems\parking_vehicle_systems\parking_vehicle_define.inc>

#pragma warning disable 203 // Sublime Text 3
#pragma warning disable 204 // Sublime Text 3
#pragma warning disable 213 // Sublime Text 3
#pragma warning disable 214 // Sublime Text 3
#pragma warning disable 219 // Sublime Text 3
#pragma warning disable 239 // Sublime Text 3

native GoogleAuthenticatorCode(key[], tm);

new
	login_timer_p[MAX_PLAYERS];

new
	login_timer_p_2[MAX_PLAYERS];

new
	oldhours;

new bofbi[6];
new botbus[4];
new opencont[MAX_PLAYERS];

new MAFIAREAVEEX[3] = {-1, -1, -1};

new Division[5][50] =
{
	{"Патрульно-постовая служба [ППС]"},
	{"Следственный отдел [СО]"},
	{"Дорожно-патрульная служба [ДПС]"},
	{"Специальный отряд быстрого реагирования [СОБР]"},
	{"Школа Полиции [ШП]"}
};
new DivisionEx[6][10] =
{
	{""},
	{"[ППС]"},
	{"[СО]"},
	{"[ДПС]"},
	{"[СОБР]"},
	{"[ШП]"}
};

new LIMITMP;

new MPPLAYERS;
new Float:MPPOS[3];
new MPINT;
new MPWORLD;

new isDress[MAX_PLAYERS];
new skinsjs[MAX_PLAYERS];

new pInAREA[1000];

new alldays = 0;
new alldaysex;
new GosMoney[6];
new gunwork = 80;
new leswork = 50;
new nalogbiz = 0;
new nalogash = 0;
new nalogbus = 5;
new nalogbus2 = 100;
new pensialvl = 20;

new prezgolos[2];
new pensia = 0;
new ArrestPay = 120;

new HealPay = 150;

new HealPayNew = 0;


new AdPay = 150;

new AdPayNew = 0;


new ArrestPayNew = 0;
new Float:coalzp[3] = { 5.0, 5.0, 5.0};

new PSPAWN[1000];

new BolnicaMenuPl[3][30];

new BolnicaMoney[3] = 0;


new GosMoneyEX2 = 0;
new GosMoneyEX3 = 0;
new GosMoneyEX4 = 0;
new GosMoneyEX5 = 0;

new GosMoneyMVD2 = 0;
new GosMoneyMVD3 = 0;
new GosMoneyMVD4 = 0;
new GosMoneyMVD5 = 0;

new GosMoneyMZ2 = 0;
new GosMoneyMZ3 = 0;
new GosMoneyMZ4 = 0;
new GosMoneyMZ5 = 0;

new GosMoneySMI2 = 0;
new GosMoneySMI3 = 0;
new GosMoneySMI4 = 0;
new GosMoneySMI5 = 0;


new BolnicaMoneyEX[3] = 0;
new BolnicaMoneyEX2[3] = 0;
new BolnicaSklad[3] = 0;

new BolnicaSkladZak[3] = 0;
new BolnicaMed[3][4];
new Text3D:BolnicaText2[3];

enum CustomPacketEnumeration {
	ID_SPAWN_PLAYER_PACKET = 0,
	ID_SHOW_AUTH_DIALOG,
	ID_REFUEL_THE_CAR,
	ID_APPLY_QUEST
};

enum E_CONT_DATA
{
    C_NAME[32], // Название контейнера
    Float: C_SPAWN[4],  // Позиция спавна
    C_TYPE_GIFT,    // 1 - $ 0 - RUB
    C_PRICE,    // Цена
    C_BET,      // Ставка
    Text3D:C_LABEL, // 3dtext
    C_TIMER,
    C_TIME,
    C_LEADER_BET
};

new g_cont[3][E_CONT_DATA] =
{
    {"Уникальный автомобиль", {2489.9519,291.4786,29.4973}, 1, 11000000, INVALID_3DTEXT_ID},
    {"Уникальный скин", {2484.5261,292.4818,29.4973}, 2, 2500000, INVALID_3DTEXT_ID},
    {"донат-рубли", {2478.5671,292.0558,29.4973}, 3, 2000000, INVALID_3DTEXT_ID}
};


new Float:BolnicaPos[8][4] =
{
	{-1045.9708,-1449.9592,23.4042,86.8052},
	{-1046.4969,-1455.7007,23.4042,88.4161},
	{-1051.8315,-1446.6807,23.4042,269.0805},
	{-1057.1686,-1429.9510,23.4042,269.2588},
	{-1052.1849,-1426.9443,23.4042,89.6930},
	{-1052.4025,-1432.9039,23.4042,89.9999},
	{-1052.4006,-1435.7902,23.4042,89.9232},
	{-1057.7828,-1436.2596,23.4042,269.5904}

};


new PlayerHelmet[1000];

new Float: WantedStatus = 0.0;

new ff[MAX_PLAYERS];
new AdminGM[1000];

new PlayerDelo[1000];
new PlayerDelo2[1000];

new PlayerTimerWanted[1000];
new PlayerTimerWantedEx[1000];

new aero;
new aero2;
new a[MAX_PLAYERS];
new a2[MAX_PLAYERS];
new a3[MAX_PLAYERS];
new a4[MAX_PLAYERS];
new a5[MAX_PLAYERS];
new a8[MAX_PLAYERS];
new a9[MAX_PLAYERS];
new a10[MAX_PLAYERS];
new a11[MAX_PLAYERS];
new a12[MAX_PLAYERS];
new a13[MAX_PLAYERS];
new a14[MAX_PLAYERS];
new Offfice;

new PlayerCAM[1000];

new Float:CamCoords2[13][3] = {
	{523.9447,335.4510,1201.8594}, //Камера 1
	{514.9135,335.6270,1201.8594},
	{523.9447,335.4510,1201.8594},
	{514.9135,335.6270,1201.8594},
	{523.9447,335.4510,1201.8594},
	{514.9135,335.6270,1201.8594},
	{523.9447,335.4510,1201.8594}, //Камера 2

	{523.9447,335.4510,1201.8594}, //Камера 3
	{523.9447,335.4510,1201.8594},
	{523.9447,335.4510,1201.8594},
	{523.9447,335.4510,1201.8594},
	{514.9135,335.6270,1201.8594},
	{514.9135,335.6270,1201.8594}
};

new sucmd[13][64] =
{
	{"Нападение"},
	{"Нападение с применением оружия"},
	{"Хулиганство"},
	{"Оружие"},
	{"Взятка"},
	{"Наркотические вещества"},
	{"Транспортные средства"},
	{"Неподчинение"},
	{"Соучастие"},
	{"Проникновение"},
	{"Похищение"},
	{"Теракт"},
	{"Митинги"}
};


#if !defined isnull
	#define isnull(%1) ((!(%1[0])) || (((%1[0]) == '\1') && (!(%1[1]))))
#endif


new PlayerActiveVAR[1000];

stock GetPVarIntNew(playerid,  pvar[])
{
	return GetGVarInt(pvar, playerid);
}

stock Float: GetPVarFloatNew(playerid,  pvar[])
{
	return GetGVarFloat(pvar, playerid);
}

stock SetPVarIntNew(playerid, pvar[], numvr)
{
	if(GetGVarType(pvar, playerid) == 0)	{
		PlayerActiveVAR[playerid] ++;
		new numgvar;
		new Stringvar[64];
		for(new x; x < 1000; x ++)
		{
			format(Stringvar, 64, "plvar_%d", x);
			if(GetGVarType(Stringvar, playerid) == 0)
			{
				numgvar = x;
				break;
			}
		}

		format(Stringvar, 64, "plvar_%d",numgvar);
		SetGVarString(Stringvar, pvar, playerid);
	}
	SetGVarInt(pvar, numvr, playerid);

	if(numvr == 0 && GetGVarType(pvar, playerid) != 0)
	{
		PlayerActiveVAR[playerid] --;
		DeletePVarNew(playerid, pvar);
	}
	return 1;
}


stock SetPVarFloatNew(playerid, pvar[],Float:numvr)
{
	if(GetGVarType(pvar, playerid) == 0)	{
		PlayerActiveVAR[playerid] ++;
		new numgvar;
		new Stringvar[64];
		for(new x; x < 1000; x ++)
		{
			format(Stringvar, 64, "plvar_%d",x);
			if(GetGVarType(Stringvar, playerid) == 0)
			{
				numgvar = x;
				break;
			}
		}

		format(Stringvar, 64, "plvar_%d",numgvar);
		SetGVarString(Stringvar, pvar, playerid);
	}
	SetGVarFloat(pvar, numvr, playerid);
	return 1;
}


stock SetPVarStringNew(playerid, pvar[], numvr[])
{
	if(GetGVarType(pvar, playerid) == 0)	{
		PlayerActiveVAR[playerid] ++;
 		new numgvar;
		new Stringvar[64];
		for(new x; x < 1000; x ++)
		{
			format(Stringvar, 64, "plvar_%d",x);
			if(GetGVarType(Stringvar, playerid) == 0)
			{
				numgvar = x;
				break;
			}
		}

		format(Stringvar, 64, "plvar_%d",numgvar);
		SetGVarString(Stringvar, pvar, playerid);
	}
	SetGVarString(pvar, numvr, playerid);

 	return 1;
}

#define GetPVarStringNew(%0,%1,%2,%3) GetGVarString(%1,%2,%3,%0)

stock DeletePVarNew(playerid, pvar[])
{
  	if(GetGVarType(pvar, playerid) != 0)	{
		PlayerActiveVAR[playerid] --;
   	 	DeleteGVar(pvar, playerid);
 	}
	return 1;
}

stock ClearPVAR(playerid)
{
	new Stringvar[64];
	new deletevar;
	for(new x; x < 1000; x ++)
	{
		format(Stringvar, sizeof(Stringvar), "plvar_%d",x);
		new vartype = GetGVarType(Stringvar, playerid);
		if(vartype != 0)
		{
			new VarName[64];
			GetGVarString(Stringvar , VarName, 64, playerid);
			if(GetGVarType(VarName, playerid) != 0) DeleteGVar(VarName, playerid);
			DeleteGVar(Stringvar, playerid);
 			deletevar ++;
 		}
	}
 	PlayerActiveVAR[playerid] = 0;
	return 1;
}

strtok2(const string[], &index)
{
 	new length = strlen(string);
	while ((index < length) && (string[index] <= ' '))
	{
		index++;
	}

	new offset = index;
	new result[30];
	while ((index < length) && (string[index] > ' ') && ((index - offset) < (sizeof(result) - 1)))
	{
		result[index - offset] = string[index];
		index++;
	}
	result[index - offset] = EOS;
	return result;
}

stock Float:GetPlayerDistanceToPlayer(playerid, targetid)
{
	new Float:x2, Float:y2, Float:z2;
	GetPlayerPos(targetid, x2, y2, z2);
	return GetPlayerDistanceFromPoint(playerid, x2, y2, z2);
}


new crwite[MAX_VEHICLES];

new PDhelp[10];
new Float:PDhelpPos[10][3];

new PLAYERPDELPER[MAX_PLAYERS];

new FormaNum[MAX_PLAYERS];
new FormaPick[MAX_PLAYERS];
new FormaPickEx[MAX_PLAYERS];

new KeyPick[MAX_PLAYERS];
new KeyPickEx[MAX_PLAYERS];

new PlayerForma[MAX_PLAYERS];

new PlayerBot[MAX_PLAYERS];
new PlayerBotEx[MAX_PLAYERS];
new PlayerBotEx2[MAX_PLAYERS];

#define MAX_FW  2
#define MAX_BLOWS 24


new GZBASE;
new PlayerVoen[MAX_PLAYERS];

new PlayerVoenKey[MAX_PLAYERS];

#define SIZETEXT        21
#define MAXSIZETEXT     70

#define OPENSPEED		0.5
#define CLOSESPEED		1
#define COLORZ			0xFFFF0000

new PlayerConnect[MAX_PLAYERS];

new restart = 1;

new pGreenZone[MAX_PLAYERS];

new ServerName[7] = "Россия";

new pRealState[MAX_PLAYERS];
new pRealStateT[MAX_PLAYERS];

#define PRICE_PROD 1


new PlayerSlot[MAX_PLAYERS];

new bool:FALSE = false;
new sRR = 0;


native IsValidVehicle(vehicleid);

new JobTimer[MAX_PLAYERS] = { -1, ... };

new connect_code[15] = { 1, ... };

new PCPlayer[MAX_PLAYERS];

new MoneyBox;
new MoneyBoxArea;
new MoneySumm;

new JetpackBox;
new JetpackArea;
new Jetpacked[MAX_PLAYERS];

#define DIALOGAKICK 13600

new PlayerTempVeh[MAX_PLAYERS];

new tpAnti = 1;
new antiHealCar = 1;
new antiSlapCheat = 1;
new antiTpCar = 0;
new antiCarAshot = 1;
new antiCarTp = 1;

new checkcs[MAX_PLAYERS];
//new admloged[MAX_PLAYERS];
new admpass = 000000;

new NewWVehicle[MAX_PLAYERS];

new WVehicle[MAX_PLAYERS];

new CarHackTimer[MAX_PLAYERS] = { -1, ... };
new PObject[MAX_PLAYERS];
new object2[MAX_PLAYERS] = { -1, ... };

new Float:zPos[MAX_PLAYERS][3];

new PlayerTimer_time,
	MainTimer_time,
	MainTimer2_time,
	OnPlayerUpdate_time,
	Minute_timer,
	hungry_time,
	PlayerTimerMinute_time;

new IsActionTrue = 1;
new IsActionTrue2 = 1;
new IsActionTrue4 = 1;
new IsActionTrue5 = 0;

new ARMYMAKE[2];

#define Ammo_SDPISTOL           12
#define Ammo_DEAGLE             14
#define Ammo_SHOTGUN            8
#define Ammo_MP5                25
#define Ammo_AK47               30
#define Ammo_M4A1				30


//------------------------------------------------------------------------

#define KEY_NUM4				(8192)
#define KEY_NUM6 				(16384)



#define PRICE_DRUGS 100

new num[MAX_PLAYERS];
new object[MAX_PLAYERS] = { -1, ... };

new fonarea[MAX_PLAYERS];

new PlayerCMDHP[MAX_PLAYERS];
new PlayerCMDs[MAX_PLAYERS];


new Float:CamCoords[3][3] = {
	{523.9447,335.4510,1201.8594}, //Камера 1
	{514.9135,335.6270,1201.8594}, //Камера 2
	{523.9447,335.4510,1201.8594} //Камера 3
};


new pNPC[MAX_PLAYERS];

//================================
#define MAX_GZONE 150
new ZoneOnBattle[MAX_GZONE];
new allowedfactions[] = { 3, 4, 5, 6, 7};
new FrakCD;
#define F_BALLAS 3
#define F_GROVE  4
#define F_AZTEC  5
#define F_VAGOS  6
#define F_RIFA   7
#define TABLE_GANGZONE      "gangzone"
new TOTALGZ;
#define MAX_GANGS 20

new IsCapture;
//===============

new ClearAnimationsDelay[MAX_PLAYERS];
new CLEARRR[MAX_PLAYERS];
new KICKED[MAX_PLAYERS];
stock IsKicked(playerid)
{
	return KICKED[playerid];
}

enum DRUGS_DATA
{
	Text3D:MatsText,
	MatsPickup,
	MatsArea,
	bool:DrugsStatus,
	DrugsKG
}


enum ADVERT_DATA
{
	adSenderID,
	adSender[24],
	adCheker[24],
	adRang[24],
	adPhone,
	adText[100],
	adTime,
	adMoney,
	bool:adCheked,
	bool:adBusy,
	bool:adCheking,
	adCheckerID
}


enum CALL_DATA
{
	g_caller,
	g_callee
}


enum TRAY_DATA
{
	trayEat,
	trayAreaID,
	trayPickupID,
	trayTimerID
}

forward AnimationDelay(playerid,id);
forward AbleToSelectCar(playerid);
forward MainTimer2();
forward PlayerPlaySoundDelay(playerid,soundid);

new GZMZ[150][GZINFO];

new Playernarko[MAX_PLAYERS];

new MAX_ARM[MAX_PLAYERS];


stock SetPlayerHealthTemp(playerid,Float:Health)
{
	if(Health > 100) Health = 100.0;
	pData[playerid][pHealth] = 100.0;
	SetPlayerHealth(playerid,Health);

	if(GetPVarIntNew(playerid, "hud_hide") != 1)
	{
		SetPlayerHealth(playerid,Health);
		show_hud_element(playerid);
		SetTimerEx("on_player_update_hud", 1000, false, "i", playerid);
	}

	return true;
}

#if defined _ALS_SetPlayerHealth
	#undef SetPlayerHealth
#else
	#define _ALS_SetPlayerHealth
#endif
#define SetPlayerHealth SetPlayerHealthTemp

callback:: on_player_update_hud(playerid)
{
	show_hud_element(playerid);
}

stock SetPlayerArmourTemp(playerid,Float:Armour)
{
	SetPlayerArmour(playerid,Armour);
	if(Armour > 0)
	{
		MAX_ARM[playerid] = 1;
	}
	else
	{
		RemovePlayerAttachedObject(playerid, 2);
	}
}
#define SetPlayerArmourEx SetPlayerArmourTemp


new gAreas[ARs];
new gGuns[MAX_PLAYERS][13];
new gAmmos[MAX_PLAYERS][13];
new gAmmosMax[MAX_PLAYERS][13];


new gCurHour;
new gCurMinutes;
new gCurDay;

new gCalls[MAX_PLAYERS][CALL_DATA];


new aBus[27];

new aNews[2];

new aRadio[2];
new aRadio1[2];

new gReconnectIP[MAX_PLAYERS][16];
new gReconnectTime[MAX_PLAYERS];

//Скины
enum SKIN_DATA {
	skinID,
	skinPrice,
	skinClass, // 1 - эконом, 2 - средний, 3 - дорогой
	skinSex, // 1 - женский, 2 - мужской
	skinColor // 0 - белый, 1 - черный
}

#define ATM_COUNT 9//К-во банкоматов

new Float:gATMC[ATM_COUNT][3] =
{
	{1831.9957,2522.5786,15.6610},
	{2007.4559,1941.6528,15.5245},
	{758.6151,2581.7715,12.0057},
	{-493.6352,921.3435,12.1426},
	{698.9007,795.0922,11.9979},
	{-2702.7483,16.6767,10.9134},
	{2326.7334,-754.8403,12.8954},
	{2231.1738,-1803.2191,21.7090},
	{2738.7007,-2442.9001,21.8921}
};
new gATMArea[ATM_COUNT];

//Армии
new gArmyWarehouse[3][2];
new Text3D:gArmyWarehouseText[3];

//PD
#define PD_DOOR_COUNT 26
#define PD_DOOR_SPEED 0.8
#define PD_DOOR_DELAY 5000


new Float:camExit[3][4] =
{
	{147.1337,1264.0389,13.2951,80.2502},
	{147.1337,1264.0389,13.2951,80.2502},
	{147.1337,1264.0389,13.2951,80.2502}
};
new gEmCall[4];

//Новости
new gAdvert[MAX_ADVERT_COUNT][ADVERT_DATA];
new gAdvertCount;
new gAdvertTime;
new gNewsDialing[3] = false;
new gNewsDialer[3] = INVALID_PLAYER_ID;
new gNewsDialee[3] = INVALID_PLAYER_ID;
new gNewsDialPrice[3] = 0;
new gNewsDialMoney[3] = 0;
new gNewsDialMoney2[3] = 0;

new gNewsMoney[3] = 0;


//Свадьба
new predlojbrak[MAX_PLAYERS] = 0;
new WeddingTwo[MAX_PLAYERS] = 999;

new last_upd[MAX_PLAYERS];

new NopTP[MAX_PLAYERS];
new ExitOtladka[MAX_PLAYERS];


new StopFlood[MAX_PLAYERS];
new FloodText[MAX_PLAYERS][128];

new gAmmoArea[3];

new gShopPrice[SHOP_OBJECTS] = {450,300,150,150,100,170,500,300,150,200,3000,1500, 10000, 50000, 100000}; //Цены для 24/7
new gShopObject[SHOP_OBJECTS][40] = {"Телефон","Номер SIM-карты","Аптечка (2шт.)","Часы","Букет цветов","Топор","Парашют","Фотоаппарат (50 cнимков)","Телефонная книга",
										"Маленький балончик с краской","Балончик с краской","Ремонтный комплект","Удочка Daiwa Morethan","Удочка Shimano Aspire Ultra","Удочка Sensas Power Pack Match"};

new gArmyArea;

#define MAX_PAGE_ELEMENTS 60
#define MAX_PLAYER_ELEMENT 19

stock GetXYInFrontOfPlayer(playerid, &Float:x, &Float:y, Float:distance)
{
	new Float:a;
	GetPlayerPos(playerid, x, y, a);
	if (IsPlayerInAnyVehicle(playerid)) GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
	else GetPlayerFacingAngle(playerid, a);
	x += (distance * floatsin(-a, degrees));
	y += (distance * floatcos(-a, degrees));
	return 1;
}

stock PlaySoundEx(playerid,soundid, Float:x, Float:y, Float:z, Float:range)
{
	new pWorldX = GetPlayerVirtualWorld(playerid);

	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;
		if(!pTemp[i][pLogined] || !pData[i][pMysqlID] || pWorldX != GetPlayerVirtualWorld(i)) continue;
		if(!IsPlayerInRangeOfPoint(i, range, x, y, z)) continue;
		PlayerPlaySound(i, soundid, 0, 0, 0);
 	}
 	return 1;
}


stock ProxDetector(Float:radius, playerid, string[], color1 = -1, color2 = -1, color3 = -1, color4 = -1, color5 = -1)
{
	new Float: X,
		Float: Y,
		Float: Z,
		virtual_world = GetPlayerVirtualWorld(playerid);
	GetPlayerPos(playerid, X, Y, Z);
	foreach(new i: logged_players)
	{
		if(virtual_world == GetPlayerVirtualWorld(i))
		{
			if(IsPlayerInRangeOfPoint(i, radius/5.0*5.0, X, Y, Z)) SCM(i, color1, string);
			else if(IsPlayerInRangeOfPoint(i, radius/5.0*4.0, X, Y, Z)) SCM(i, color2, string);
			else if(IsPlayerInRangeOfPoint(i, radius/5.0*3.0, X, Y, Z)) SCM(i, color3, string);
			else if(IsPlayerInRangeOfPoint(i, radius/5.0*2.0, X, Y, Z)) SCM(i, color4, string);
			else if(IsPlayerInRangeOfPoint(i, radius/5.0*1.0, X, Y, Z)) SCM(i, color5, string);
		}
	}
	return 1;
}

stock PutPlayerInVehicleEx(playerid, vehicleid, seatid)
{

	SetPVarIntNew(playerid, "first_enter_veh", 1);
	return PutPlayerInVehicle(playerid, vehicleid, seatid);
}

stock SendErr(playerid,string[])
{
 	format(String256f,sizeof(String256f),"• {AC0000}[Ошибка] "cWH"%s",string);
	SCM(playerid,0xFFFFFFFF, String256f);
	return 1;
}

/*stock SendErr(playerid,string[])
{
 	format(String256f,sizeof(String256f),"%s",string);
	EROM(playerid, 0, String256f);
	return 1;
}*/

stock SendSucc(playerid,string[])
{
	format(String256f,sizeof(String256f),"• {00CC00}[Успешно] "cWH"%s",string);
	SCM(playerid,0xFFFFFFFF, String256f);
	return 1;
}

stock SendInf(playerid, string[])
{
 	format(String256f,sizeof(String256f),"• {FFC800}[Подсказка] "cWH"%s",string);
	SCM(playerid,0xFFFFFFFF, String256f);
	return 1;
}

stock SendFInfoMessage(playerid, const message[])
{
	format(String144, sizeof String144,"• [Подсказка] "cWH"%s", message);
	SCM(playerid, 0xFFC800FF, String144);
	return 1;
}

stock TogglePlayerControllableEx(playerid,toggle)
{
	pTemp[playerid][pControllable] = toggle;
	TogglePlayerControllable(playerid,toggle);
}

stock SetPlayerVirtualWorldEx(playerid,worldid)
{
	pTemp[playerid][pWorld] = worldid;
	SetPlayerVirtualWorld(playerid,worldid);
	if(worldid != 0)
	{
		Streamer_SetVisibleItems(STREAMER_TYPE_OBJECT, 600, playerid);
		Streamer_SetRadiusMultiplier(STREAMER_TYPE_OBJECT, 1.0, playerid);
	}
	else
	{
		Streamer_SetVisibleItems(STREAMER_TYPE_OBJECT, 400, playerid);
		Streamer_SetRadiusMultiplier(STREAMER_TYPE_OBJECT, 0.7, playerid);
	}
}

stock SetVehicleParamsExEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective)
{

	SetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
}

stock SetPlayerSkinEx(playerid,skinid)
{
	SetPlayerArmourEx(playerid, 0.0);
	new states = GetPlayerState(playerid);
	if((states == 2 || states == 3 || GetPlayerSpecialAction(playerid) != 0) && !pData[playerid][pJail])
	{
		SetPlayerSpecialAction(playerid ,SPECIAL_ACTION_NONE);
		ClearAnimations(playerid, 1);
		if(IsPlayerInRangeOfPoint(playerid, 50.0, pTemp[playerid][pX],pTemp[playerid][pY],pTemp[playerid][pZ]))
		{
			new Float:dfdsf[3]; GetPlayerPos(playerid,dfdsf[0], dfdsf[1],dfdsf[2]);
			SetPlayerPosDebug(playerid, dfdsf[0], dfdsf[1],dfdsf[2]);
		}
	}
	pTemp[playerid][pCSkin] = skinid;

	return set_player_skin(playerid,skinid);
}


stock SetPlayerSkinNA(playerid,skinid)
{
	if(GetPlayerState(playerid) == 2 || GetPlayerState(playerid) == 3 || GetPlayerSpecialAction(playerid) != 0) {
	SetPlayerSpecialAction(playerid ,SPECIAL_ACTION_NONE);
	if(IsPlayerInRangeOfPoint(playerid, 50.0, pTemp[playerid][pX],pTemp[playerid][pY],pTemp[playerid][pZ])){
	new Float:dfdsf[3]; GetPlayerPos(playerid,dfdsf[0], dfdsf[1],dfdsf[2]);
	SetPlayerPosDebug(playerid, dfdsf[0], dfdsf[1],dfdsf[2]); }}
	SetPlayerArmourEx(playerid, 0.0);
	set_player_skin(playerid,skinid);
}


new sethp[MAX_PLAYERS];

new setpos[MAX_PLAYERS];
new setpos2[MAX_PLAYERS];


stock ShowPlayerDialogEx(playerid,dialogid,style,caption[],info[],button1[],button2[])
{
	if(pTemp[playerid][pDialog] == true && pTemp[playerid][pDialogID] >= dLogin && pTemp[playerid][pDialogID] <= dRegister7) return 1;

	pTemp[playerid][pDialog] = true;
	pTemp[playerid][pDialogID] = dialogid;


	return SPD(playerid,dialogid,style,caption,info,button1,button2);
}

stock PlayerTextDrawDestroyEx(playerid,&PlayerText:textdraw)
{
	PlayerTextDrawDestroy(playerid,textdraw);
	textdraw = PlayerText:INVALID_TEXT_DRAW;
}


#define SetPlayerVirtualWorld SetPlayerVirtualWorldEx
#define SetVehicleParamsEx SetVehicleParamsExEx
#define SetPlayerSkin SetPlayerSkinEx
#define PlayerTextDrawDestroy PlayerTextDrawDestroyEx

stock DestroyDynamic3DTextLabelEx(&Text3D:text)
{
	if(text == Text3D:INVALID_3DTEXT_ID) return 1;
	DestroyDynamic3DTextLabel(text);
	text = Text3D:INVALID_3DTEXT_ID;
	return 1;
}

stock IsValid3DTextLabel(Text3D:textid)
{
	if(textid != Text3D :INVALID_3DTEXT_ID) return 1;
	else return 0;
}


public OnPlayerClickMap(playerid, Float:fX, Float:fY, Float:fZ)
{
	if(GetAdmin(playerid) < 1)
        return true;
        
	if(GetPlayerVehicleID(playerid) > 0)
		SetVehiclePos(GetPlayerVehicleID(playerid), fX, fY, fZ);
		
	SetPlayerPos(playerid, fX, fY, fZ);

	SendInf(playerid, "Вы успешно телепортировались по метке");
	
	return true;
}



forward SetMark(playerid, id);
public SetMark(playerid, id)
{
	pTemp[playerid][Marked] = false;
	if(GetPlayerInterior(id) || GetPlayerVirtualWorld(id) || !random(10)) return SendErr(playerid, "Местоположение преступника определить не удалось. Попробуйте позже.");
	if(pData[id][pWanted] < 2) return SendErr(playerid, "Данный игрок не в розыске или уровень розыска меньше 2");
	if(pTemp[playerid][pGPS]) return SendErr(playerid, "У Вас уже есть метка на радаре");
	new Float:x, Float:y, Float:z;
	GetPlayerPos(id,x,y,z);
	SetPlayerCheckpoint(playerid,x,y,z,4.0);
	WN_showGPS(playerid, 1);
	pTemp[playerid][MarkedEx] = true;

	SendSucc(playerid, "В последний раз нарушитель был обнаружен в отмеченном месте. Чтобы убрать метку введите "cWH"/gps");
	return 1;
}


public OnGameModeInit()
{
	new time = GetTickCount();

	sql_debug(4,5);

	new
		string[18];

	GetServerVarAsString("bind", string, 17);

	new MySQLOpt:options = mysql_init_options();
	mysql_set_option(options, AUTO_RECONNECT, true);
	mysql_set_option(options, POOL_SIZE, 8);
	mysql_log(ERROR);
	
	for(new cont_id; cont_id < sizeof(g_cont); cont_id++) g_cont[cont_id][C_LEADER_BET] = -1;
	
    LoadCont();

	if(!strcmp(string, ""SRV_IP""))
	{
		zConn = sql_connect(SQL_HANDLER_MYSQL,""MYSQL_HOST"", ""MYSQL_USER"", ""MYSQL_PASS"", ""MYSQL_DB""), srv = 1;

		connect_main = mysql_connect(""MYSQL_HOST"", MYSQL_USER, MYSQL_PASS, MYSQL_DB, options);
		
		//connect_logs = mysql_connect("", "", "", "", options), srv = 1;

		SERVER_SELECT_MODE = 1;
	}

	if(srv == 1)
	{
		SendRconCommand ("hostname "SERVER_NAME" ");
	}
	
	if (!zConn)
	{
		print("[MYSQL CONNECTES]: Connected is MYSQL failed. FUCK :(");
		SendClientMessageToAll(CRED,"Произошла техническая ошибка, рестарт сервера...");
		
		SetTimer("GameModeExitDelay",2000,false);
		return 1;
	}

	if(mysql_errno(connect_main) != 1147)
		printf("Local [SQL]: Handle Connection No: %d",
		mysql_errno(connect_main)),
		SetGameModeText("No Handle Connection");

	switch(mysql_errno())
	{
		case 0: print("[MYSQL] Подключение к базе данных удалось. ");
		case 1044: print("[MYSQL] Подключение к базе данных не удалось. Причина: Имя пользователя");
		case 1045: print("[MYSQL] Подключение к базе данных не удалось. Причина: Неверный пароль");
		case 1049: print("[MYSQL] Подключение к базе данных не удалось. Причина: Неизвестное имя БД");
		case 2003: print("[MYSQL] Подключение к базе данных не удалось. Причина: Проблема на стороне хостинга");
		case 2005: print("[MYSQL] Подключение к базе данных не удалось. Причина: Неверный адрес хостинга");
		default: printf("[MYSQL] Подключение к базе данных не удалось. Причина: %d. Проверьте логи", mysql_errno());
	}

	set_charset(connect_main);
	//set_charset(connect_logs);

	new
		restart_time[20];

	gettime(restart_time_hour, restart_time_minute, restart_time_second);
	format(restart_time, 20, "GMX: %02i:%02i:%02i", restart_time_hour, restart_time_minute, restart_time_second);
	SetGameModeText(restart_time);


	debug_mode = DEBUG_MODE_NO_ACTIVE;
	vk_bot_status_server = VK_BOT_ACTIVE;


	sql_set_charset(zConn, "cp1251");
	//sql_set_charset(zConnLog, "cp1251");


	get_day_player_week();


	InitializeVehHandling();
	InitializeVehComponents();
	InitStreamSources();


	Iter_Init(streamed_players_in_veh);
	Iter_Init(vehicle_in_stream);



	sound_zone_stream[0] = CreateStreamSource(-1048.4042,-2487.5723,28.5647, 55.0, 0, 0, "http://dl.b-rp.ru/sound_game/lesopilka_winter.mp3"); // Лесопилка
	
	sound_zone_stream[1] = CreateStreamSource(-766.1666,-2751.3713,-21.8225, 200.0, -1, -1, "http://dl.b-rp.ru/sound_game/zavod.mp3"); // Шахта
	
	sound_zone_stream[2] = CreateStreamSource(1803.4633,1748.1989,15.5142, 75.0, 0, 0, "http://dl.b-rp.ru/sound_game/army.mp3"); // Армия
	
	sound_zone_stream[3] = CreateStreamSource(-2730.0898,-1761.5973,2.3055, 55.0, -1, -1, "http://dl.b-rp.ru/sound_game/hotel_sound.mp3"); // Отель
	
	sound_zone_stream[4] = CreateStreamSource(-903.3563,-2041.9608,25.7742, 35.0, -1, -1, "http://dl.b-rp.ru/sound_game/univermag.mp3"); // Отель

	sound_zone_stream[5] = CreateStreamSource(637.4156,1276.6583,1746.4340, 200.0, -1, -1, "http://dl.b-rp.ru/sound_game/zavod.mp3"); // Завод

	sound_zone_stream[6] = CreateStreamSource(163.6619,-1151.9485,1201.7816, 150.0, -1, -1, "http://air.radiorecord.ru:805/rmx_128"); // Завод



	create_sound_newyear();

 	new global_hour, minute, second;
	gettime(global_hour, minute, second);
	if(minute == 0 && second >= 11 && second <= 16) pay_day = 0;
   	if(minute == 0 && second >= 0 && second <= 10)
   	{
   		pay_day = 1;
	}

	LoadMafiaPickupsWH();
	LoadMafiaWarehouse();
	LoadMafiaSettings();
	load_report_systems();
	load_trash_work_systems();
	load_bankwork_info();
	load_express_heal();
	//load_all_march();

	price_seller_hunter();
	generate_price_fish_payday();

	snow_work_connecting();

	//create_other_element_traning();
	create_realtor_buisnes_other();
	create_fish_other_elements();
	create_green_house_element();
	create_snow_race_area();
	create_race_area();
	create_hospital_pickup();
	create_buisness_pickup();
	create_seat_down_text();
	create_autoschool_pickups();
	create_filling_other_pickup();
	create_bus_pickups();
	create_other_pickup_samwill();
	create_lesopilka_pickup();
	create_int_pickup();
	create_factory_other();
	create_fire_pickups();
	create_work_hospital_pickup();
	create_other_element_newyear();
	create_hunter_system();
	create_all_hunter();
	create_all_textdraws();
	create_parking_other_element();

	create_organisation_element();

	load_election_global();
	load_army_wh_pickups();
	load_army_warehouse();
	load_charity_information();
	load_charity_pickup();
	load_mechanic_server();
	load_house_all();
	load_flate_all();
	load_entrance_all();
	load_hotel_all();
	load_buisnes_all();
	load_garage_all();
	load_hotel_room_all();
	load_filling_all();
	load_casino_server();
	load_trucker_server();
	load_all_config_veh();
	load_all_config_autosalon();
	load_taxi_server();
	load_sklad_server();

	create_pickup_rent_n();
	create_family_other();


	create_vehicles();

	load_reg_login_other();

	create_adm_sp();


	new ho,mo,so;
	gettime(ho,mo,so);
	if(ho < 6)
	{
	 	sql_queryEx(zConn, "UPDATE `accounts` SET `status` = '0', `online` = '0', `atime` = '0', `bankstore2` = '0', `ccode` = '0', `lmt` = '0'", QUERY_THREADED);
	}
	else	{
	 	sql_queryEx(zConn, "UPDATE `accounts` SET `status` = '0', `online` = '0', `ccode` = '0', `lmt` = '0'", QUERY_THREADED);
	}


	SetNameTagDrawDistance(30.0);

	gCurDay = GetDayNumber();

	printf("[Дата] DAY = %d",gCurDay);
	new h;
	gettime(h,gCurMinutes,gCurHour);
	SetWorldTime(h);

	SetTimer("MainTimer3",1010,true);

	SetTimer("PlayerTimer",1000,true);
	SetTimer("PlayerTimerMinute",1000,true);
	SetTimer("timer_every_20_sec", 20000, true);

	SetTimer("gamemode_info_timer", 2500, false);

	SetTimer("hungry_timer_all", 120200, true);

	SetTimer("voice_timer_active", 100, true);

	DisableInteriorEnterExits();
	EnableStuntBonusForAll(0);
	ManualVehicleEngineAndLights();
	LimitGlobalChatRadius(13.0);
	LimitPlayerMarkerRadius(12.0);
	Streamer_SetTickRate(40);


	SendRconCommand("mapname Russia");
	SendRconCommand("weburl "SERVER_URL"");
	SendRconCommand("language Russian");


	SetGameModeText(""MODE_VERSION"");
	
	AddPlayerClass(36,0.0,0.0,5.0,0.0,0,0,0,0,0,0);
	
	create_speed_background();

	CreateDynamicMapIcon(-1121.8977,2299.7429,37.2906, 47, CWHITE); // Рыбалка
	CreateDynamicMapIcon(1204.6575,-575.8943,41.2923, 46, CWHITE); // Теплицы
	CreateDynamicMapIcon(-430.8086,1020.1770,11.3876, 44, CWHITE); // Пожарный
	CreateDynamicMapIcon(-2229.8853,253.9642,24.5337, 43, CWHITE); // усоровозчик
	CreateDynamicMapIcon(1919.4532,2304.0400,15.5697, 59, CWHITE); // Военкомат

	CreateDynamicMapIcon(139.0908,1265.8706,12.0023, 30, CWHITE); // Полицейский департамент (Арзамас)
	CreateDynamicMapIcon(2575.9226,-2416.0994,22.4946, 30, CWHITE); // Полицейский департамент (Южный)
	CreateDynamicMapIcon(-73.8339,855.6837,12.5978, 19, CWHITE); // Мэрия (Арзамас)

	CreateDynamicMapIcon(-117.0529,-140.0708,12.9034, 40, CWHITE);

	CreateDynamicMapIcon(2318.6421,2031.7903,15.9863, 28, CWHITE); // Завод

	CreateDynamicPickup(13724,23, 1894.8308,1186.5237,30.3239,-1,-1,-1, 6.0); // ++++++++++ ++++++++++ ++++++++++ ++++++++++
	gAreas[arSvadba] = CreateDynamicSphere(1894.8308,1186.5237,30.3239 ,1.0); // +++++++++++++++++

	CreateDynamicMapIcon(1879.9982,1170.7963,30.0087,21,CWHITE); // ++++++++++ ++++++++++ ++++++++++ ++++++++++ ++++++++++ ++++++++++
  	CreateDynamic3DTextLabel("/wedding - пожениться\n/divorce - развестись",CYELLOW,1879.9982,1170.7963,30.0087,10.0);// ++++++++++
	CreateDynamicPickup(13724,1, 1879.9982,1170.7963,30.0087,-1,-1,-1, 6.0);

	//И конки на карте


	CreateDynamicMapIcon(2417.9287,-1926.0703,22.0043,61,0); //Иконка ОПГ
	CreateDynamicMapIcon(-286.8448,514.4326,13.2709,61,0); //Иконка ОПГ
	CreateDynamicMapIcon(1800.4529,2200.8169,15.5873,61,0); //Иконка ОПГ

	CreateDynamicMapIcon(2113.0117,-2392.8530,23.0883,22,0); //Иконка больнциы Южный

	CreateDynamicMapIcon(1850.4344,2035.0087,16.9742,12,0); //Иконка банка Батырево
	CreateDynamicMapIcon(2376.6692,-2139.2595,22.0776,12,0); //Иконка банка Юженый
	CreateDynamicMapIcon(363.4449,1366.9894,11.8959,12,0); //Иконка банка Арзамас


	CreateDynamicMapIcon(-508.0185,8.2112,13.7192, 36, 0); // Автошкола главный
	CreateDynamicMapIcon(-560.0300,37.1931,13.7661, 5, 0); // Автошкола ветралет
	CreateDynamicMapIcon(-446.6998,-48.9845,2.7685, 9, 0); // Автошкола лодка
	CreateDynamicMapIcon(-520.7220,22.9250,13.7192, 55, 0); // Автошкола лодка

	CreateDynamicMapIcon(2442.4143,300.7472,28.7189, 59, 0); // Склад Армия

	CreateDynamicMapIcon(1865.0525,1722.0789,15.5220, 59, 0); // Армия
	CreateDynamicMapIcon(524.9210,321.5896,12.3440, 60, 0);	// ФСБ

	CreateDynamicMapIcon(-316.9818,825.0003,13.0635, 23, 0);	// Новости 1
	CreateDynamicMapIcon(2126.5369,-1953.3085,20.2422, 23, 0);	// Новости 1

	CreateDynamicPickup(13724,1,1345.9944,-805.9055,1185.7059); //Пикап столовой

	CreateDynamicPickup(13724,23,671.2724,-11.9494,1202.0065,-1); //Пикап Оружия в АП ++++++++++++++++++++++
	CreateDynamicPickup(13724,1,560.4072,338.5256,1201.8672,-1); //Пикап Оружия в ПД        ++++++++++++++++


	CreateDynamicPickup(13724,1,1280.9224,-214.7976,1201.9819,-1); // фсб

	CreateDynamicPickup(13724,23, 1808.3850,2496.4412,15.8725); //+++++++++++++++++++++++++++++++++++
	CreateDynamicPickup(13724,23, -495.8412,913.1801,12.1554); //+++++++++++++++++++++++++++++++++++
	CreateDynamicPickup(13724,23, 2743.4570, -2452.9899, 21.9000); //+++++++++++++++++++++++++++++++++++
	CreateDynamicPickup(13724,23, -2471.4270,2841.5684,37.7199); //+++++++++++++++++++++++++++++++++++

	CreateDynamicPickup(13724,23, 2503.0061,-2121.6504,23.4458); //+++++++++++++++++++++++++++++++++++
	CreateDynamicPickup(13724,23, -46.2158,925.0621,12.0020); //+++++++++++++++++++++++++++++++++++

	gAreas[arNoobHelp][0] = CreateDynamicSphere(1808.3850,2496.4412,15.8725 ,1.0); /////++++++++++++++++++++++++++
	gAreas[arNoobHelp][1] = CreateDynamicSphere(-495.8412,913.1801,12.1554,1.0); /////++++++++++++++++++++++++++
	gAreas[arNoobHelp][2] = CreateDynamicSphere(2743.4570, -2452.9899, 21.9000,1.0); /////++++++++++++++++++++++++++
	gAreas[arNoobHelp][3] = CreateDynamicSphere(-2471.4270,2841.5684,37.7199,1.0); /////++++++++++++++++++++++++++

	gAreas[arNoobHelp][4] = CreateDynamicSphere(2503.0061,-2121.6504,23.4458,1.0); /////++++++++++++++++++++++++++
	gAreas[arNoobHelp][5] = CreateDynamicSphere(-46.2158,925.0621,12.0020,1.0); /////++++++++++++++++++++++++++


	CreateDynamic3DTextLabel(""cWH"Помощь по игре\n {ffff24}Подойдите для взаимодействия",COLOR_BLUE, 1808.3850,2496.4412,15.8725,15); // +++++++++++++++++++++++++
	CreateDynamic3DTextLabel(""cWH"Помощь по игре\n {ffff24}Подойдите для взаимодействия",COLOR_BLUE, -495.8412,913.1801,12.1554,15); // ++++++++++++++++++++++++
	CreateDynamic3DTextLabel(""cWH"Помощь по игре\n {ffff24}Подойдите для взаимодействия",COLOR_BLUE, 2743.4570, -2452.9899, 21.9000,15); // ++++++++++++++++++++++++
	CreateDynamic3DTextLabel(""cWH"Помощь по игре\n {ffff24}Подойдите для взаимодействия",COLOR_BLUE, -2471.4270,2841.5684,37.7199,15); // ++++++++++++++++++++++++

	CreateDynamic3DTextLabel(""cWH"Помощь по игре\n {ffff24}Подойдите для взаимодействия",COLOR_BLUE, 2503.0061,-2121.6504,23.4458,15); // ++++++++++++++++++++++++
	CreateDynamic3DTextLabel(""cWH"Помощь по игре\n {ffff24}Подойдите для взаимодействия",COLOR_BLUE, -46.2158,925.0621,12.0020,15); // ++++++++++++++++++++++++



	CreateDynamicPickup(13724,23, 1393.0004,-1489.8962,3513.0061,-1,-1,-1, 6.0);
	gAreas[arFoto] = CreateDynamicSphere(1393.0004,-1489.8962,3513.0061  ,1.0);

  	CreateDynamic3DTextLabel(""cWH"Оплата штрафов\n "cBLUE"Встаньте на пикап",0xFFD485FF,542.0425,322.1969,1202.0146,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamicPickup(13724,23, 542.0425,322.1969,1202.0146,-1,-1,-1, 6.0);
	gAreas[arShtraf] = CreateDynamicSphere(542.0425,322.1969,1202.0146,1.1); // +++++++

  	CreateDynamic3DTextLabel(""cWH"Сдача с повинной\n "cBLUE"Встаньте на пикап",0xFFD485FF,539.2349,322.0828,1202.0146,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamicPickup(13724,23,539.2349,322.0828,1202.0146,-1,-1,-1, 6.0);
	gAreas[arSdacha] = CreateDynamicSphere(539.2349,322.0828,1202.0146,1.1);// +++++

  	CreateDynamic3DTextLabel(""cWH"Уровень преступности\n "cBLUE"Встаньте на пикап",0xFFD485FF,533.3000,319.5759,1201.8678,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamicPickup(13724,23,533.3000,319.5759,1201.8678,-1,-1,-1, 6.0);
	gAreas[arWanteds] = CreateDynamicSphere(533.3000,319.5759,1201.8678,1.1);// ++++++

  	CreateDynamic3DTextLabel(""cWH"Управление бюджетом\n "cBLUE"/kazna",0xFFFFFFFF,1518.8760,2808.8669,1701.0144,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  -1, -1);


	CreateDynamicPickup(13724 ,23, -2667.8660,-1821.9010,4.1045,-1,-1,-1, 6.0);
	gAreas[ arAdvTop ] = CreateDynamicSphere(-2667.8660,-1821.9010,4.1045, 1.0); //+++++++++++++++++++++++
  	CreateDynamic3DTextLabel(""cWH"Лучшие сотрудники СМИ\n "cBLUE"Встаньте на пикап",0xFFD485FF, -2667.8660,-1821.9010,4.1045 ,6.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);//+++++++++++++++++++++++


	GZBASE = GangZoneCreate(359.690 , -2527.5291 , 586.4007, -2266.1340); //++++++++++++++++++


	gAreas[arCarMk] = CreateDynamicRectangle(1792.6986, -2288.1182-10, 1753.3698,-2235.0737+50, 0, 0, -1);

	gAreas[arBaseJob] = CreateDynamicSphere( 445.8730,-2386.5933,35.5496  ,1.0); //++++++++++++++++++

	gAreas[arPOSTEX][0] = CreateDynamicSphere(2748.0, -1375.0, 23.08276 ,15.5); //++++++++++++++++++++++++++++++++
	gAreas[arPOSTEX][1] = CreateDynamicSphere(929.32, -2578.0,37.1 ,15.5); //+++++++++++++++++++++++++++++++++++
	gAreas[arPOSTEX][2] = CreateDynamicSphere(-1515.0420,705.0455,33345.9253 ,15.5); // -------------------------!1

	gAreas[arBolka][0] = CreateDynamicSphere(1976.8546, 1855.8671, 1523.5912  ,2.4); // ++++++++++++++++
 	gAreas[arBolka][2] = CreateDynamicSphere(1976.8546, 1861.3759, 1523.5912  ,2.4); // ++++++++++++++++

	gAreas[arSkinVoen] = CreateDynamicSphere(-204.3253,694.1195,1201.9315 ,1.0); // ++++++++
	CreateDynamicPickup(13710,23, -204.3253,694.1195,1201.9315 ,-1); // ++++++++

	gAreas[arSkinVoen2] = CreateDynamicSphere(-204.3253,694.1195,1201.9315 ,60.0); // ++++++++


	//Зоны
	gAreas[arMaskirovka] = CreateDynamicSphere(-1365.1066,-1295.7267,40.5447,1,-1);// ФСБ +++++++++++++++++++++++
	CreateDynamicPickup(13724,23,-1365.1066,-1295.7267,40.5447 ,-1); //++++++++++++++++++++++++++++++++++++++++++++++

	gAreas[arBronArmy] = CreateDynamicSphere(-1582.2589,468.1901,43.3883 ,1.0,-1); //++++++++++++++++++++++++++++++++++++++++++++++
	CreateDynamicPickup(13724,23, -1582.2589,468.1901,43.3883 ,-1); //++++++++++++++++++++++++++++++++++++++++++++++

	CreateDynamicPickup(13724,23, -1827.9923,-1975.2551,-0.5234 , -1); //++++++++++++

	gAreas[arEdaCops] = CreateDynamicSphere(1977.4153,-1931.8326,2032.0712, 1.0);//++++++++++++
	CreateDynamicPickup(13724, 23,1977.4153,-1931.8326,2032.0712,-1);//++++++++++++


 	gAreas[arGunFraction][0] = CreateDynamicSphere(625.9130,-480.4350,1501.748 ,1.0); // МЕРИЯ оружие ++++++++++++++

 	gAreas[arGunFraction][1] = CreateDynamicSphere(671.2724,-11.9494,1202.0065,1.0,3,5); // АП оружие ++++++++++++++

 	gAreas[arGunFraction][2] = CreateDynamicSphere(560.4072,338.5256,1201.8672, 1.0); // МВД оружие ++++++++++++++
 	CreateDynamicPickup(13724,1, 560.4072,338.5256,1201.8672 ,1);

	gAreas[arGunFraction][3] = CreateDynamicSphere(1280.9224,-214.7976,1201.9819, 1.0);// ФСБ Оружие +++++++++++++
	CreateDynamicPickup(13724,1, -1370.5211,-1295.9504,40.5447 ,1);

	gAreas[arGunFraction][4] = CreateDynamicSphere(2029.6033,235.0856,1530.3766  ,1.0); // броня Президент +++++++++++++
	CreateDynamicPickup(13724,1, 2029.6033,235.0856,1530.3766 ,-1);

	bank_area_general = CreateDynamicSphere(-99.4105,711.5267,1600.2032, 1.0, -1);
	CreateDynamicPickup(13724, 23, -99.4105,711.5267,1600.2032, -1);
	bank_area_biz = CreateDynamicSphere(-101.4539,711.5300,1600.2032, 1.0, -1);
	CreateDynamicPickup(13724,23 ,-101.4539,711.5300,1600.2032,-1);

	CreateDynamic3DTextLabel(""cWH"Банковские счета\n "cGR"[Встаньте на пикап]",0xFFD485FF,-99.4105,711.5267,1600.2032,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  -1, -1);
	CreateDynamic3DTextLabel(""cWH"Оплата бизнеса\n "cGR"[Встаньте на пикап]",0xFFD485FF,-101.4539,711.5300,1600.2032,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  -1, -1);

  	CreateDynamic3DTextLabel("Получение номеров",0xFFD485FF, 2392.4795,-1610.7711,1244.1606 ,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  -1, -1);
	gAreas[arGAI] = CreateDynamicSphere(2392.4795,-1610.7711,1244.1606 ,1.0); // +++++++++++++++++++++
	CreateDynamicPickup(13724,1, 2392.4795,-1610.7711,1244.1606  ,-1); // +++++++++++++++++++++


  	CreateDynamic3DTextLabel("Покупка номеров",0xFFD485FF, 2396.3811,-1610.7220,1244.1606 ,8.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  -1, -1);
	gAreas[arGAI2] = CreateDynamicSphere(2396.3811,-1610.7220,1244.1606 ,1.0); // +++++++++++++++++++++
	CreateDynamicPickup(13724,1, 2396.3811,-1610.7220,1244.1606  ,-1); // +++++++++++++++++++++

	gAreas[arGreenZone][0] = CreateDynamicSphere(3000.1010,-3000.7995,1000.7479,20.0,-1,-1); //Отель рецепшн
	gAreas[arGreenZone][1] = CreateDynamicSphere(GREEN_ZONE_HOSPITAL_1,30.0,-1,-1); //Больница

	gAreas[arGreenZone][2] = CreateDynamicSphere(0.5728,-1.1027,1730.9814,50.0, 10,-1); //Автошкола
	gAreas[arGreenZone][3] = CreateDynamicSphere(-507.3358,8.5697,13.7192,100.0, -1,-1); //Автошкола (Улица)
	gAreas[arGreenZone][4] = CreateDynamicSphere(-5.8186,991.9578,1301.0073,70.0, 5,-1); //Казино
	gAreas[arGreenZone][5] = CreateDynamicSphere(-1381.3917,2619.5676,40.3924,200.0, -1,-1); //Шахта
	gAreas[arGreenZone][6] = CreateDynamicSphere(-766.4430,-2741.1121,-22.2516, 75.0, -1,-1); //Шахта внутри
	gAreas[arGreenZone][7] = CreateDynamicSphere(-1041.1113,-2487.4773,28.6180, 75.0, -1,-1); //Лесопилка
	gAreas[arGreenZone][8] = CreateDynamicSphere(2351.5674,2063.9917,15.9863, 150.0, -1,-1); //Завод

	gAreas[arGreenZone][9] = CreateDynamicSphere(-21.5350,345.0196,1601.7495, 30.0, -1,-1); //Автосалон 1
	gAreas[arGreenZone][10] = CreateDynamicSphere(-196.4419,-9.4922,1201.9387, 30.0, -1,-1); //Автосалон 2
	gAreas[arGreenZone][11] = CreateDynamicSphere(-22.3814,-707.8683,1201.9474, 30.0, -1,-1); //Автосалон 3
	gAreas[arGreenZone][12] = CreateDynamicSphere(1772.9125,-2262.1040,11.2208, 50.0, -1,-1); //Авторынок

	gAreas[arGreenZone][13] = CreateDynamicSphere(541.1072,328.6674,1201.9609, 50.0, -1,-1); //Полиция
	gAreas[arGreenZone][14] = CreateDynamicSphere(1499.1921,2800.7280,1701.0078, 50.0, -1,-1); //Правительство

	gAreas[arGreenZone][15] = CreateDynamicSphere(417.9135,1757.6034,14.4013, 50.0, -1,-1); //Больница (Снаружи)
	gAreas[arGreenZone][16] = CreateDynamicSphere(142.9442,1265.2765,12.0023, 50.0, -1,-1); //ПД (Снаружи)
	gAreas[arGreenZone][17] = CreateDynamicSphere(2554.9175,-2415.6580,22.0056, 50.0, -1,-1); //ПД (Снаружи)
	gAreas[arGreenZone][18] = CreateDynamicSphere(-67.7465,864.8994,12.0030, 50.0, -1,-1); //Правительство (Снаружи)

	gAreas[arGreenZone][19] = CreateDynamicSphere(-317.9137,816.2250,13.0635, 50.0, -1,-1); //Радиоцентр (Снаружи)
	gAreas[arGreenZone][20] = CreateDynamicSphere(2128.0393,-1956.7609,20.2422, 50.0, -1,-1); //Радиоцентр (Снаружи)

	gAreas[arGreenZone][21] = CreateDynamicSphere(-97.1196,715.5019,1600.2032,50.0,-1,-1); //Интерьер банка

	gAreas[arGreenZone][22] = CreateDynamicSphere(670.9421,1276.0074,1746.4340,350.0,-1,-1); //Интерьер Завода

	gAreas[arGreenZone][23] = CreateDynamicSphere(1825.2239,2525.8062,15.6610, 250.0, -1,-1); //Спавн 1 (Снаружи)



	gAreas[arGreenZone][24] = CreateDynamicSphere(2501.8269,-2126.1152,23.4458, 50.0, -1,-1); //Спавн 2 (Снаружи)
	gAreas[arGreenZone][25] = CreateDynamicSphere(-42.5737,923.3008,12.0039, 50.0, -1,-1); //Спавн 3 (Снаружи)
	gAreas[arGreenZone][26] = CreateDynamicSphere(-491.3420,917.4787,12.1426, 50.0, -1,-1); //Спавн 3 (Снаружи)

	gAreas[arGreenZone][27] = CreateDynamicSphere(2722.7747,-2447.0801,21.8921, 50.0, -1,-1); //Спавн 3 (Снаружи)
	gAreas[arGreenZone][28] = CreateDynamicSphere(-489.1782,910.8972,12.1426, 50.0, -1,-1); //Спавн 3 (Снаружи)
	gAreas[arGreenZone][29] = CreateDynamicSphere(-2459.5256,2839.0706,38.4074, 50.0, -1,-1); //Спавн 3 (Снаружи)


	gAreas[arGreenZone][30] = CreateDynamicSphere(2051.4778,1869.5864,15.5409, 50.0, -1,-1); // Механики 1
	gAreas[arGreenZone][31] = CreateDynamicSphere(2155.8464,-1848.9753,18.8203, 50.0, -1,-1); // Механики 2
	gAreas[arGreenZone][32] = CreateDynamicSphere(394.4202,786.4327,12.1119, 50.0, -1,-1); // Механики 3


	gAreas[arGreenZone][33] = CreateDynamicSphere(2198.6912,-914.9393,13.9766, 50.0, -1,-1); // ТК 1
	gAreas[arGreenZone][34] = CreateDynamicSphere(1845.2203,2866.6685,12.5721, 50.0, -1,-1); // ТК 2
	gAreas[arGreenZone][35] = CreateDynamicSphere(-2492.9150,-38.8369,13.3416, 50.0, -1,-1); // ТК 3

	gAreas[arGreenZone][36] = CreateDynamicSphere(403.3765,582.0251,12.1451, 50.0, -1,-1); // Такси 1
	gAreas[arGreenZone][37] = CreateDynamicSphere(2424.7224,-1727.2679,21.8600, 50.0, -1,-1); // Такси 2
	gAreas[arGreenZone][38] = CreateDynamicSphere(1729.2919,2476.3213,15.8665, 50.0, -1,-1); // Такси 3

	gAreas[arGreenZone][39] = CreateDynamicSphere(-1509.5198,1608.2966,37.0385, 150.0, -1,-1); // Гонки развлечения

	gAreas[arGreenZone][40] = CreateDynamicSphere(411.1608,1210.0436,12.0006, 150.0, 0,-1); // Автосалон премиум
	gAreas[arGreenZone][41] = CreateDynamicSphere(483.3215,2245.0488,12.0078, 150.0, 0,-1); // Автосалон средний
	gAreas[arGreenZone][42] = CreateDynamicSphere(483.3215,2245.0488,12.0078, 150.0, 0,-1); // Автосалон средний

	gAreas[arGreenZone][43] = CreateDynamicSphere(1110.3234,906.6445,12.2500, 150.0, 0,-1); // Новогодний парк
	gAreas[arGreenZone][44] = CreateDynamicSphere(573.9312,2598.9382,11.6274, 100.0, 0,-1); // Гонки на снегоходах

	gAreas[arGreenZone][45] = CreateDynamicSphere(817.1714,734.9468,12.0000, 150.0, -1,-1); // Снегоуборочные
	gAreas[arGreenZone][46] = CreateDynamicSphere(2571.6501,-2073.1057,21.9609, 50.0, -1,-1); // Снегоуборочные
	gAreas[arGreenZone][47] = CreateDynamicSphere(1770.5961,2230.8611,15.8666, 25.0, -1,-1); // Снегоуборочные
	gAreas[arGreenZone][48] = CreateDynamicSphere(-2485.2212,2787.1094,37.6340, 25.0, -1,-1); // Снегоуборочные
	gAreas[arGreenZone][49] = CreateDynamicSphere(-2243.3950,265.5437,24.5337, 25.0, -1,-1); // Снегоуборочные

	gAreas[arGreenZone][50] = CreateDynamicSphere(-428.7025,737.8206,1201.9314, 55.0, -1,-1); // Резиденция
	gAreas[arGreenZone][51] = CreateDynamicSphere(-201.5989,379.8391,1202.1244, 55.0, -1,-1); // Кафе НГ

	gAreas[arArmyAmmo] = CreateDynamicSphere(-1582.6156,465.8789,43.3883,1.0,-1,-1); // +++ 307.3686,-163.0409,999.5938
	gAreas[arArmyAmmo2] = CreateDynamicSphere(-1582.6156,465.8789,43.3883,1.5,-1,-1); //++++

	gAreas[arArrest][0] = CreateDynamicSphere(156.7531,1239.2628,5.6389,50.0,-1,-1); //LSPD ++++++
	gAreas[arArrest][1] = CreateDynamicSphere(2581.9246,-2416.0530,21.9882,20.0,-1,-1); //SFPD +++++++++
	gAreas[arArrest][2] = CreateDynamicSphere(2581.9246,-2416.0530,21.9882,20.0,-1,-1); //LVPD ++++++++


	hospital_area_heal = CreateDynamicSphere(-1057.5939,-1448.9843,23.4042, 200.0, -1, -1);
	player_in_meria = CreateDynamicSphere(1499.0392,2800.4285,1701.0078, 200.0, -1, -1);

	gArmyArea = CreateDynamicSphere(309.0702,1958.3127,17.6406, 75.0);

 	gEmCall[0] = INVALID_PLAYER_ID;
	gEmCall[1] = INVALID_PLAYER_ID;
	gEmCall[2] = INVALID_PLAYER_ID;
	gEmCall[3] = INVALID_PLAYER_ID;


	bofbi[0] = CreateActor(163 , -1382.7305,-1295.0424,40.5447,316.1796);
	SetActorVirtualWorld(bofbi[0] , 3);
 	ApplyActorAnimation(bofbi[0],  "PED", "ROADCROSS", 4.1, 0, 0, 0, 0, 0); // Pay anim


	gAreas[arPrezInfo] = CreateDynamicSphere(686.0939,-13.6007,1201.8580 ,1.1); //++++++++++++++++++++++++++++++++++++++++
	create_circle_pickup_o(686.0939,-13.6007,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Информация о государстве\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 686.0939,-13.6007,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); //++++++++++++++++++++++++++++++++++++++++


	gAreas[arMinSMI] = CreateDynamicSphere(703.1310,-18.6470,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(703.1310,-18.6470,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Министра Информации\n"cLRED"[Встаньте на пикап]"); //+++++++++++++++++
	CreateDynamic3DTextLabel(String64 , -1, 703.1310,-18.6470,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781

	gAreas[arMinSMI2] = CreateDynamicSphere(703.3113,-22.2653,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(703.3113,-22.2653,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Пресс-секретаря\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 703.3113,-22.2653,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781


	gAreas[arMinMZ] = CreateDynamicSphere(707.5721,-18.0938,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(707.5721,-18.0938,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Министра Здравоохранения\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 707.5721,-18.0938,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781

	gAreas[arMinMZ2] = CreateDynamicSphere(705.3367,-22.5978,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(705.3367,-22.5978,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Советника по МЗ\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 705.3367,-22.5978,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781



	gAreas[arMinMO] = CreateDynamicSphere(707.6450,-22.3340,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(707.6450,-22.3340,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Министра Обороны\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 707.6450,-22.3340,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781

	gAreas[arMinMO2] = CreateDynamicSphere(710.0646,-22.4518,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(710.0646,-22.4518,1201.8580, TRIGGER_LRED);
	format(String128, sizeof(String128), "Управление Советника по Нац. Безопасности\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String128 , -1, 710.0646,-22.4518,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781


	gAreas[arMinMVD] = CreateDynamicSphere(705.2350,-18.3275,1201.8580 ,1.1);  //+++++++++++++++++
	create_circle_pickup_o(705.2350,-18.3275,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Министра Внутренних Дел\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 705.2350,-18.3275,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781

	gAreas[arMinMVD2] = CreateDynamicSphere(709.8006,-18.8989,1201.8580 ,1.1); //+++++++++++++++++
	create_circle_pickup_o(709.8006,-18.8989,1201.8580, TRIGGER_LRED);
	format(String64, sizeof(String64), "Управление Генерального Прокурора\n"cLRED"[Встаньте на пикап]");
	CreateDynamic3DTextLabel(String64 , -1, 709.8006,-18.8989,1201.8580 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1); // 122.3451,-319.7340,1.5781


	format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Южный\n\n\n"cGR"%d рублей",BolnicaMoney[0]); //+++++++++++++++++
	BolnicaText2[0] = CreateDynamic3DTextLabel(String256 ,CWHITE, 2956.9229,1867.4882,1523.33 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, 1); // 122.3451,-319.7340,1.5781

	format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Арзамас\n\n\n"cGR"%d рублей",BolnicaMoney[1]); //+++++++++++++++++
	BolnicaText2[1] = CreateDynamic3DTextLabel(String256 ,CWHITE, 2956.9229,1867.4882,1523.33 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, 2); // 122.3451,-319.7340,1.5781

	format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}п.Батырево\n\n\n"cGR"%d рублей",BolnicaMoney[2]); //+++++++++++++++++
	BolnicaText2[2] = CreateDynamic3DTextLabel(String256 ,CWHITE, 2956.9229,1867.4882,1523.33 , 5.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, 3); // 122.3451,-319.7340,1.5781


	for(new i; i<ATM_COUNT; i++)
	{
		CreateDynamic3DTextLabel("Банкомат сбербанка\n"#cGR"[Нажмите ALT]",-1, gATMC[i][0], gATMC[i][1], gATMC[i][2], 3.0);
		gATMArea[i] = CreateDynamicSphere(gATMC[i][0], gATMC[i][1], gATMC[i][2], 1.0);
	}

	gArmyWarehouseText[0] = CreateDynamic3DTextLabel("_",CWHITE,-520.8585,1922.3552,1514.2389,10.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,0);
	gArmyWarehouseText[1] = CreateDynamic3DTextLabel("_",CWHITE,-520.8585,1922.3552,1514.2389,10.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,1);
	gArmyWarehouseText[2] = CreateDynamic3DTextLabel("_",CWHITE,-520.8585,1922.3552,1514.2389,10.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,2);

	CreateDynamic3DTextLabel("Сборка оружия",CWHITE,1090.3005,1080.1111,2498.8918,8.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,1);
	CreateDynamic3DTextLabel("Сборка оружия",CWHITE,1090.3005,1080.1111,2498.8918,8.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,2);
	CreateDynamic3DTextLabel("Сборка оружия",CWHITE,1090.3005,1080.1111,2498.8918,8.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,3);


	CreateDynamic3DTextLabel("{ffff24}Валерий Александрович -> Квесты\n {ffff24}Подойдите для взаимодействия",0xFFD485FF,1825.0314,2513.5671,15.8682,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamic3DTextLabel("{ffff24}Дмитрий Юрьевич -> Квесты\n {ffffff}Подойдите для взаимодействия",0xFFD485FF,2745.2639,-2443.9131,21.8921,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamic3DTextLabel("{ffff24}Валерий Александрович -> Квесты\n {ffffff}Подойдите для взаимодействия",0xFFD485FF,-481.8147,916.1296,12.1426,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamic3DTextLabel("{ffff24}Валерий Александрович -> Квесты\n {ffffff}Подойдите для взаимодействия",0xFFD485FF,-2465.6338,2842.1604,38.4074,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamic3DTextLabel("{ffff24}Валерий Александрович -> Квесты\n {ffffff}Подойдите для взаимодействия",0xFFD485FF,2503.0015,-2135.9875,23.4458,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);
	CreateDynamic3DTextLabel("{ffff24}Валерий Александрович -> Квесты\n {ffffff}Подойдите для взаимодействия",0xFFD485FF,-42.1520,913.7748,12.0273,3.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID,  0, -1);

  	CreateDynamic3DTextLabel("{ffff24}Иван Николаевич -> Руководитель водителей автобуса\n {ffffff}Подойдите для взаимодействия",CYELLOW,-485.7885,878.8422,12.1426,10.0);// ++++++++++

	CreateActor(82, 1825.0314,2513.5671,15.8682,336.9601);
	CreateActor(82, 2745.2639,-2443.9131,21.8921,145.1803);
	CreateActor(82, -481.8147,916.1296,12.1426,108.2898);
	CreateActor(82, -2465.6338,2842.1604,38.4074,239.5907);
	CreateActor(82, 2503.0015,-2135.9875,23.4458,2.1060);
	CreateActor(82, -42.1520,913.7748,12.0273,19.2269);

	area_quest_npc[0] = create_circle_pickup(1825.1809,2514.2515,15.8682, TRIGGER_LRED);
	area_quest_npc[1] = create_circle_pickup(2744.9702,-2444.5488,21.8921, TRIGGER_LRED);
	area_quest_npc[2] = create_circle_pickup(-482.4053,915.7460,12.1426, TRIGGER_LRED);
	area_quest_npc[3] = create_circle_pickup(-2464.9563,2841.9788,38.4074, TRIGGER_LRED);
	area_quest_npc[4] = create_circle_pickup(2503.0015,-2135.9875,23.4458, TRIGGER_LRED);
	area_quest_npc[5] = create_circle_pickup(-42.1520,913.7748,12.0273, TRIGGER_LRED);

	//Таймеры
	SetTimer("MainTimer2", 1000, true);
	SetTimer("MinuteTimer",60200,true);
	
	for(new i;i<MAX_PLAYERS;i++)
	{
	    ff[i] = -1;
	}
	
	// ============================== NPC и текста ==========================================
	CreateDynamic3DTextLabel("{ffffff}Сервер для тестирования {ff5733}BRILLIANT RP от Weikton", CYELLOW, -457.3457, 920.7246, 11.9472, 10.0); // weikton
	CreateDynamic3DTextLabel("{ffffff}Сервер для тестирования {ff5733}BRILLIANT RP от Weikton", CYELLOW, 2768.0515, -2448.7133, 21.8069, 10.0); // weikton
	CreateDynamic3DTextLabel("{ffffff}Сервер для тестирования {ff5733}BRILLIANT RP от Weikton", CYELLOW, 1827.9323, 2499.7324, 15.6609, 10.0); // weikton
	// ================================= ADM ZONE ===========================================
	CreateDynamic3DTextLabel("{ff5733}Cпец. зона для администрации", CYELLOW, ADMZONE_POS, 8.5); // weikton
	// ============================== Зарплаты ==============================================

  	new Result:salary = sql_queryEx(zConn, "SELECT * FROM `salary` ORDER BY `id`", QUERY_CACHED);
	if(sql_num_rows(salary) != 8) print("К-во гос. зарплат не совпадает с предопределенным количеством");
	else {
		for(new i;i<sql_num_rows(salary);i++)
		{
	  		new fracids = sql_get_field_assoc_int(salary, "id");
	  		fracids --;
	  		if(fracids == 99)
	  		{
		  		FracMO[0] = sql_get_field_assoc_int(salary, "rank1");
		  		FracMO[1] = sql_get_field_assoc_int(salary, "rank2");
		  		FracMO[2] = sql_get_field_assoc_int(salary, "rank3");
		  		FracMO[3] = sql_get_field_assoc_int(salary, "rank4");
		  		FracMO[4] = sql_get_field_assoc_int(salary, "rank5");
		  		FracMO[5] = sql_get_field_assoc_int(salary, "rank6");
		  		FracMO[6] = sql_get_field_assoc_int(salary, "rank7");
		  		FracMO[7] = sql_get_field_assoc_int(salary, "rank8");
		  		FracMO[8] = sql_get_field_assoc_int(salary, "rank9");
		  		FracMO[9] = sql_get_field_assoc_int(salary, "rank10");
		  		FracMO[10] = sql_get_field_assoc_int(salary, "rank11");
		  		FracMO[11] = sql_get_field_assoc_int(salary, "rank12");
		  		FracMO[12] = sql_get_field_assoc_int(salary, "rank13");
		  		FracMO[13] = sql_get_field_assoc_int(salary, "rank14");
		  		FracMO[14] = sql_get_field_assoc_int(salary, "rank15");
		  		FracMO[15] = sql_get_field_assoc_int(salary, "rank16");
	  		}
			else
			{
		  		gFractionSalary[fracids][0] = sql_get_field_assoc_int(salary, "rank1");
		  		gFractionSalary[fracids][1] = sql_get_field_assoc_int(salary, "rank2");
		  		gFractionSalary[fracids][2] = sql_get_field_assoc_int(salary, "rank3");
		  		gFractionSalary[fracids][3] = sql_get_field_assoc_int(salary, "rank4");
		  		gFractionSalary[fracids][4] = sql_get_field_assoc_int(salary, "rank5");
		  		gFractionSalary[fracids][5] = sql_get_field_assoc_int(salary, "rank6");
		  		gFractionSalary[fracids][6] = sql_get_field_assoc_int(salary, "rank7");
		  		gFractionSalary[fracids][7] = sql_get_field_assoc_int(salary, "rank8");
		  		gFractionSalary[fracids][8] = sql_get_field_assoc_int(salary, "rank9");
		  		gFractionSalary[fracids][9] = sql_get_field_assoc_int(salary, "rank10");
		  		gFractionSalary[fracids][10] = sql_get_field_assoc_int(salary, "rank11");
		  		gFractionSalary[fracids][11] = sql_get_field_assoc_int(salary, "rank12");
		  		gFractionSalary[fracids][12] = sql_get_field_assoc_int(salary, "rank13");
		  		gFractionSalary[fracids][13] = sql_get_field_assoc_int(salary, "rank14");
		  		gFractionSalary[fracids][14] = sql_get_field_assoc_int(salary, "rank15");
		  		gFractionSalary[fracids][15] = sql_get_field_assoc_int(salary, "rank16");
	  		}
		  	sql_next_row(salary);
		}
	}

	sql_free_result(salary);



	gAmmoArea[0] = create_circle_pickup(POSITION_AMMO_1, TRIGGER_LBLUE);

	restart = 1;
	SetWeather(1);

	printf("[Игровой Мод]: Игровой мод был загружен за %d мс", GetTickCount()-time);

	return 1;
}

callback:: gmx_reload_automatic()
{

	foreach(new i: logged_players)
	{
		show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_30", 1000);
		
		SendClientMessageToAll(COLOR_ORANGE, "Сейчас будет произведен автоматический рестарт сервера! Завершите все свои работы, и будьте готовы к рестарту!");
		
		GameModeExit();
	}
	
	return true;
}
callback:: gmx_mode()
{
	if(!gmx_time)
		return true;

	gmx_time--;

	if(!gmx_time)
		return gmx_mode_ex();

	if(!(gmx_time % 60) || gmx_time == 30)
	{
		static str[64],
				strg[61];
				
		format(str,sizeof(str), "Внимание! Перезагрузка сервера через "cWH"%s мин.", time_to_string(gmx_time));
		SendClientMessageToAll(COLOR_ORANGE, str);


		foreach(new i: logged_players)
		{
			show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_30", 4000);
		}


		format(strg, sizeof(strg), "Завершите все работы и будьте готовы к перезагрузке сервера!");
		
		
		return SendClientMessageToAll(COLOR_ORANGE, strg);
	}
	return true;
}

callback:: gmx_mode_ex()
{
	foreach(Player, i)
	{
		on_player_disconnect(i);
		clear_chat_for_login(i);
		SCM(i, COLOR_LIGHTRED, !"Происходит рестарт сервера...");
		show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_31", 4000);
	}

	GameModeExit();
	return true;
}



public OnGameModeExit()
{

	DestroyAllDynamicObjects();
	DestroyAllDynamicPickups();
	DestroyAllDynamicCPs();
	DestroyAllDynamicRaceCPs();
	DestroyAllDynamicMapIcons();
	DestroyAllDynamic3DTextLabels();
	DestroyAllDynamicAreas();


	for(new i, idx = all_houses; i < idx; i ++) save_house(i);
	for(new i, idx = all_flates; i < idx; i ++) save_flate(i);
	for(new i, idx = all_apartaments; i < idx; i ++) save_entrance(i);
	for(new i, idx = all_hotels; i < idx; i ++) save_hotel(i);
	for(new i, idx = all_hotel_room; i < idx; i ++) save_hotel_room(i);
	for(new i, idx = all_buisness; i < idx; i ++) save_biz(i);
	for(new i, idx = all_filling; i < idx; i ++) save_fill(i);
	for(new i, idx = all_garage; i < idx; i ++) save_garage(i);


	save_casino(0);
	save_mechanic_base();
	save_sklad_all();
	save_taxi_base();
	save_trucker_base();

	save_election_gov();

	sql_disconnect(zConn);
	//sql_disconnect(zConnLog);
	mysql_close(connect_main);
	//mysql_close(connect_logs);

	return 1;
}

public OnPlayerRequestClass(playerid, classid)
{
	if(!PlayerConnect[playerid]) return 1;

	if(pTemp[playerid][pLogin4] == false)
	{
		if(IsPlayerNPC(playerid)) return SpawnPlayer(playerid);
		pTemp[playerid][pDead] = true; pData[playerid][pHealth] = 0.0;
		SetSpawnInfo(playerid, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
		SpawnPlayer(playerid);
		SCM(playerid, CGRAY, "Данная функция заблокированна");
	}
	if(pTemp[playerid][pLogined] || IsPlayerNPC(playerid)) return SpawnPlayer(playerid);

	SetSpawnInfo(playerid, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);

	SetTimerEx("OnPlayerJoin", 700, false, "i", playerid);
	SetPlayerWeather(playerid , 1);
	return 1;
}

public OnIncomingConnection(playerid, ip_address[], port)
{
	return true;
}

new handler;
public OnPlayerConnect(playerid)
{
	new TickSt = GetTickCount();

	new
	    string[50+(-2+10)+(-2+MAX_PLAYER_NAME)+(-2+8)];
	    
	format
	(
	    string,
	    sizeof(string),
	    ""c_lred"[A] Игрок %s (%d) подключился к серверу.",
	    GetNameEx(playerid),
		playerid
	);
	//SendAdminMessage(COLOR_LIGHTRED, string);
	//PlayerPlayStream(playerid, "http://wh12721.web3.maze-host.ru/enter.mp3");
	


	type_player_systems[playerid] = -1;
	temp_password_check_android[playerid] = "None";

	InitialiseClientCheck(playerid);
	CreateAllStreamSourcesForPlayer(playerid);

	DisablePlayerCheckpoint(playerid);
	DisablePlayerRaceCheckpoint(playerid);

	DeletePVarNew(playerid, "start_traning_new");
	DeletePVarNew(playerid, "rent_taxi_vehicle");

	delete_pvar_drugs(playerid);

	pTemp[playerid][spawn_id] = SPAWN_NONE;
	player_vehicle[playerid] = INVALID_VEHICLE_ID;

	pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;

	pTemp[playerid][offer_action] = 0;

	PlayerConnect[playerid] = 1;
	pTemp[playerid][pInTime] = 0;
	PlayerBot[playerid] = 0;
	PlayerBotEx[playerid] = 0;
	PlayerBotEx2[playerid] = 0;
	timer_key_state_change[playerid] = 0;

	spec_ad[playerid] = INVALID_PLAYER_ID;

	DeletePVarNew(playerid, "circ_veh_menu_active");
	DeletePVarNew(playerid, "hud_hide");
	DeletePVarNew(playerid, "taxi_work_active");

	clear_pvar_fill_station(playerid);
	clear_pvar_fill_disconnect(playerid);
	clear_pvar_buisnes(playerid);
	clear_pvar_all_casino(playerid);
	taxi_clear_data(playerid);

	CountFloodForPlayer[playerid] = 0;

	SetPlayerVirtualWorld(playerid,  playerid + 1);
	ResetPlayerWeapons(playerid);

	if(IsPlayerNPC(playerid))
	{
		print("NPC DEBUG KICK");
		Kick(playerid);
 	}

	if(ControllableTimer[playerid] != -1)
	{
		KillTimer(ControllableTimer[playerid]);
		ControllableTimer[playerid] = -1;
	}

	PlayerCMDHP[playerid] = 0;
	PlayerCMDs[playerid] = 0;
	pTemp[playerid][pWorkSalary] = 0;
	
	player_cars_count[playerid]		= 0;

	PreloadAllAnims(playerid);

	SetPVarIntNew(playerid, "call_taxi_driver", INVALID_PLAYER_ID);
	SetPVarIntNew(playerid, "wait_taxi_driver", INVALID_PLAYER_ID);

	DeletePVarNew(playerid, "taxi_select_phone");
	DeletePVarNew(playerid, "taxi_driver_id");


	pTemp[playerid][pTaxiPass] = INVALID_PLAYER_ID;
	pTemp[playerid][pTaxiStart] = 0.0;
	pTemp[playerid][pTaxiGoing] = false;


 	gCalls[playerid][g_caller] = INVALID_PLAYER_ID;
	gCalls[playerid][g_callee] = INVALID_PLAYER_ID;

	pTemp[playerid][rent_car] = INVALID_VEHICLE_ID;
	pTemp[playerid][rent_car_spawn_timer] = INVALID_TIMER_ID;


 	pData[playerid][pJimmy] = 0;
 	pTemp[playerid][pPlayer] = 0;

	pData[playerid][pReturnMoney] = 0;

	pTemp[playerid][pShowUdpl] = -1;
	pTemp[playerid][pShowUdact] = -1;
	pTemp[playerid][pShowMedpl] = -1;
	pTemp[playerid][pShowMedact] = -1;

	pTemp[playerid][pShowHipl] = -1;
	pTemp[playerid][pShowHiact] = -1;

	pTemp[playerid][pShowPasspl] = -1;
	pTemp[playerid][pShowPassact] = -1;

	pTemp[playerid][pShowListpl] = -1;
	pTemp[playerid][pShowListact] = -1;

	pTemp[playerid][pShowPtspl] = -1;
	pTemp[playerid][pShowPtsact] = -1;


	pTemp[playerid][pShowInv] = -1;
	pTemp[playerid][pShowInvact] = -1;

	pTemp[playerid][pShowSkillact] = -1;
	pTemp[playerid][pShowSkillpl] = -1;
	pTemp[playerid][pShowLicpl] = -1;
	pTemp[playerid][pShowLicact] = -1;

	pTemp[playerid][pAcceptFree] = -1;
	pTemp[playerid][pAcceptFreeact] = -1;

	pTemp[playerid][pStroi] = 0;
	pTemp[playerid][pFarmTime] = 0;
	pTemp[playerid][pAqa] = 0;

	pTemp[playerid][pCarJob] = 0;

	pTemp[playerid][pWMax] = 0;

	pTemp[playerid][pMeshok] = 0;

	pTemp[playerid][pInPrez] = 0;
	pTemp[playerid][pInMer] = 0;
	pTemp[playerid][pSetName] = 0;


	pTemp[playerid][pLogin4] = true;


	num[playerid] = 0;

	if(CarHackTimer[playerid] != -1) {
		KillTimer(CarHackTimer[playerid]);
		CarHackTimer[playerid] = -1;
	}

	ClearPVAR(playerid);
	SetPlayerDataToDefault(playerid);
	clear_player(playerid);

	SetPVarIntNew(playerid,"editadvert",255);
	SetPVarIntNew(playerid, "takedamager", -1);
	SetPVarIntNew(playerid, "takedamagid", -1);
 	SetPVarIntNew(playerid, "PType", 0);
	SetPVarIntNew(playerid, "PColor", 0);

	gCalls[playerid][g_caller] = INVALID_PLAYER_ID;
	gCalls[playerid][g_callee] = INVALID_PLAYER_ID;

	GetPlayerName(playerid,pData[playerid][pNickname],MAX_PLAYER_NAME);

	new ip[16];
	GetPlayerIp(playerid,ip,16);
	new aips = 0;

	if(aips > 5)
	{
		if(!IsPlayerNPC(playerid))
		{
		    format(String256, sizeof(String256), "Слишком много подключений с вашего адреса (%d %s)",aips,ip);
		    SCM(playerid,CGRAY,String256);
		    NewKick(playerid, "Connect");
		    return 0;
		}
	}


	format(pTemp[playerid][pIP],16,"%s",ip);
	new slot = -1;
	foreach(new i: logged_players)
	{
		if(!gReconnectTime[i]) { slot = i; break; }
	}
	if(slot != -1)
	{
		format(gReconnectIP[slot],16,"%s",ip);
		gReconnectTime[slot] = 5;
	}
 	pTemp[playerid][pJoined] = true;

	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[64];
		format(MSG,sizeof(MSG),"[OnPlayerConnect] Задержка %d ms", GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG,8);
		logs_status_server_info(MSG);
	}
    // admloged[playerid] = 0;
   
	// даем долбаебу 10 секунд на принятие
    handler = SetTimerEx("handlerForDevice", 10000, false, "i", playerid);
    SendCustomRPC(playerid, 0x50, CHECKER_NUM);
    //switch(random(4))
    //{
    //    case 0: SendCustomRPC(playerid, 0x50, 180);
    //    case 1: SendCustomRPC(playerid, 0x50, 117);
    //    case 2: SendCustomRPC(playerid, 0x50, 17);
    //    case 3: SendCustomRPC(playerid, 0x50, 100);
    //}
	return 1;
}

forward handlerForDevice(player);
public handlerForDevice(player)
{
   SendClientMessage(player, 0xFFFFFFFF, "Вы пытаетесь подключиться к серверу путем использования {ff0000}стороннего клиента.");
   SendClientMessage(player, 0xFFFFFFFF, "Используйте выданный вам при покупке лаунчер либо обратитесь за помощью: {ff0000}t.me/weiktonmanagment");
   NewKick(player, "Connect");
   return 1;
}

stock on_player_disconnect(playerid)
{
	player_save_accounts(playerid);
	UpdatePlayerData(playerid, "status", 0);

	Iter_Remove(logged_players, playerid);
	KillTimer(pData[playerid][main_timer]);
	save_player_inventory(playerid);
	disconnect_player_inventory(playerid);
	disconnect_police_break(playerid);
	if(Iter_Count(vehicle_in_stream[playerid]) != 0) Iter_Clear(vehicle_in_stream[playerid]);
	admin_unlogin(playerid);

	DeletePVarNew(playerid, "start_traning_new");
	DeletePVarNew(playerid, "player_in_garage_house");
	destroy_truck_trailer(playerid);
	disconnect_trash_work(playerid);
	disconnect_player_in_race(playerid);
	disconnect_player_in_snow_race(playerid);
	exit_sum_casino_bet(playerid);
	leave_crupie_casino(playerid);
	disconnect_report(playerid);
	remove_gvar_report(playerid);
	disconnect_player_bank_work(playerid);
	clear_family_label_text(playerid);
	show_notify_gui(playerid, TEXTDRAW_HIDE);
	offer_cancel(playerid);

	remove_player_vehicle_server(playerid);
	taxi_clear_data(playerid);

	KillTimer(pTemp[playerid][vehicle_speed_timer]);
	KillTimer(pTemp[playerid][timer_mechanic_call]);
	pTemp[playerid][vehicle_speed_timer] = -1;
	end_snow_work(playerid);
	end_all_work(playerid);
	hide_select_spawn(playerid);
	work_bus_unrent(playerid);
	unrent_job_trucker(playerid);
	autosalon_unrent_car(playerid);
	unrent_start_game_transport(playerid);
	hide_phone_general(playerid);
	hide_hud_element(playerid);
	end_trucker_job(playerid);
	end_mechanic_jobs(playerid);
	KillTimer(pTemp[playerid][rent_car_spawn_timer]);
	pTemp[playerid][rent_car] = INVALID_VEHICLE_ID;
	pTemp[playerid][rent_car_spawn_timer] = INVALID_TIMER_ID;
	show_quest_systems_panel(playerid, TEXTDRAW_HIDE);
	StopSpectate(playerid);
	new h,m,s;
	gettime(h,m,s);

 	format(pData[playerid][pSkills],80,"%d,%d,%d,%d,%d,%d",
	pTemp[playerid][pGunSkill][0],pTemp[playerid][pGunSkill][1],pTemp[playerid][pGunSkill][2],
	pTemp[playerid][pGunSkill][3],pTemp[playerid][pGunSkill][4],pTemp[playerid][pGunSkill][5]);
	GetPlayerHealth(playerid, pData[playerid][pHealth]);
	if(pData[playerid][pLicenses][LIC_WEAP]) format(String1024,sizeof(String1024),"UPDATE `accounts` SET `skills`='%s',`health` = '%.2f',`money`='%d',`jail`='%d',`wanted`='%d',`otigral`='%d',`phonemoney`='%d',`status`='0',`online`='0' WHERE `nickname`='%s'", pData[playerid][pSkills], pData[playerid][pHealth],pData[playerid][pMoney],pData[playerid][pJail], pData[playerid][pWanted], pTemp[playerid][pGiveExp],pData[playerid][pPhoneMoney], pData[playerid][pNickname]);
	else format(String1024,sizeof(String1024),"UPDATE `accounts` SET `skills`='%s',`health` = '%.2f',`money`='%d',`jail`='%d',`wanted`='%d',`otigral`='%d',`phonemoney`='%d',`status`='0',`online`='0' WHERE `nickname`='%s'", pData[playerid][pSkills], pData[playerid][pHealth],pData[playerid][pMoney],pData[playerid][pJail], pData[playerid][pWanted], pTemp[playerid][pGiveExp],pData[playerid][pPhoneMoney], pData[playerid][pNickname]);
	sql_queryEx(zConn, String1024, QUERY_THREADED);

	ClearPVAR(playerid);

	SetPlayerDataToDefault(playerid);
	clear_player(playerid);

	return true;
}

public OnPlayerDisconnect(playerid, reason)
{
	PlayerConnect[playerid] = 0;

	pNPC[playerid] = 0;
	


	new
	    string[43+(-2+10)+(-2+MAX_PLAYER_NAME)+(-2+8)];

	format
	(
	    string,
	    sizeof(string),
	    ""c_lred"[A] Игрок %s (%d) вышел с сервера.",
	    GetNameEx(playerid),
		playerid
	);
	//SendAdminMessage(COLOR_LIGHTRED, string);



	if(restart == 0) return 1;
	
	if(!pTemp[playerid][pLogined] || !pTemp[playerid][pJoined]) return 1;
	pTemp[playerid][pJoined] = false;


	new kicked_spec[144];
	new crash_player[256];
	
	switch(reason)
	{
		case 0:
		{
			format(kicked_spec, 144, "%s [%d] покинул игру (краш/обрыв связи) [IP: %s]", pData[playerid][pNickname], playerid, pTemp[playerid][pIP]);
		}
		case 1: format(kicked_spec, 144, "%s [%d] покинул игру [IP: %s]", pData[playerid][pNickname], playerid, pTemp[playerid][pIP]);
		case 2: format(kicked_spec, 144, "%s [%d] был кикнут [IP: %s]", pData[playerid][pNickname], playerid,pTemp[playerid][pIP]);
	}
	
	
	
	print(kicked_spec);

	player_save_accounts(playerid);
	UpdatePlayerData(playerid, "status", 0);

	Iter_Remove(logged_players, playerid);
	KillTimer(pData[playerid][main_timer]);

	new TickSt = GetTickCount();

	DisablePlayerCheckpoint(playerid);
	DisablePlayerRaceCheckpoint(playerid);

	save_player_inventory(playerid);
	disconnect_player_inventory(playerid);
	disconnect_police_break(playerid);

	//PlayerTextDrawHideEx(playerid, background_login[playerid]);

	if(Iter_Count(vehicle_in_stream[playerid]) != 0) Iter_Clear(vehicle_in_stream[playerid]);

	admin_unlogin(playerid);

	DeletePVarNew(playerid, "start_traning_new");
	DeletePVarNew(playerid, "player_in_garage_house");

	destroy_truck_trailer(playerid);
	disconnect_trash_work(playerid);
	disconnect_player_in_race(playerid);
	disconnect_player_in_snow_race(playerid);

	exit_sum_casino_bet(playerid);
	leave_crupie_casino(playerid);
	disconnect_report(playerid);
	remove_gvar_report(playerid);

	disconnect_player_bank_work(playerid);
	clear_family_label_text(playerid);
	show_notify_gui(playerid, TEXTDRAW_HIDE);
	offer_cancel(playerid);

	remove_player_vehicle_server(playerid);

	taxi_clear_data(playerid);

	KillTimer(pTemp[playerid][vehicle_speed_timer]);
	KillTimer(pTemp[playerid][timer_mechanic_call]);

	pTemp[playerid][vehicle_speed_timer] = -1;

	pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
	vehicle_player_count_car_load[playerid] = 0;

	pTemp[playerid][spawn_id] = SPAWN_NONE;

	end_snow_work(playerid);
	end_all_work(playerid);
	hide_select_spawn(playerid);
	work_bus_unrent(playerid);
	unrent_job_trucker(playerid);
	autosalon_unrent_car(playerid);
	unrent_start_game_transport(playerid);
	hide_phone_general(playerid);
	hide_hud_element(playerid);
	end_trucker_job(playerid);
	end_mechanic_jobs(playerid);

	KillTimer(pTemp[playerid][rent_car_spawn_timer]);
	pTemp[playerid][rent_car] = INVALID_VEHICLE_ID;
	pTemp[playerid][rent_car_spawn_timer] = INVALID_TIMER_ID;

	show_quest_systems_panel(playerid, TEXTDRAW_HIDE);

	inventory_params_clear(playerid);
	exit_select_car_autosalon(playerid);


	TextDrawHideForPlayer(playerid, casino_panel[0]);
	TextDrawHideForPlayer(playerid, casino_panel[1]);
	TextDrawHideForPlayer(playerid, casino_panel[2]);

	hide_player_hungry(playerid);

	StopSpectate(playerid);

	PlayerTextDrawDestroy(playerid, player_speed_car[0][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[1][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[2][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[3][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[4][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[5][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[6][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[7][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[8][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[9][playerid]);
	PlayerTextDrawDestroy(playerid, player_speed_car[10][playerid]);


	if(ControllableTimer[playerid] != -1) {
		KillTimer(ControllableTimer[playerid]);
		ControllableTimer[playerid] = -1;
	}

	pTemp[playerid][pLogin4] = true;
	pNPC[playerid] = 0;


	new aderd = GetPVarIntNew(playerid,"editadvert");
	if(aderd < MAX_ADVERT_COUNT && aderd >= 0 && gAdvert[ aderd ][adCheckerID] == playerid)
	{
		gAdvert[ aderd ][adCheking] = false;
	}
	if(PObject[playerid] != 0)
	{
		PObject[playerid] = 0;
		RemovePlayerAttachedObject(playerid, 0);
		RemovePlayerAttachedObject(playerid, 1);
	}
//	admloged[playerid] = 0;



	for(new i = 0; i < MAX_ADVERT_COUNT; i++)
	{
		if(gAdvert[i][adSenderID] == pData[playerid][pMysqlID]) {
			gAdvert[i][adSenderID] = INVALID_PLAYER_ID;
			gAdvert[i][adBusy] = false;
			if(gAdvertCount > 0) gAdvertCount --;
			break;
		}
	}

 	new slot;
	foreach(new i: logged_players)
	{
		if(!gReconnectTime[i]) {slot = i; break;}
	}
	format(gReconnectIP[slot],16,"%s",pTemp[playerid][pIP]);
	gReconnectTime[slot] = 5;
	if(GetPVarIntNew(playerid,"pgunobject"))
	{
		new objectid = GetPVarIntNew(playerid,"pgunobject");
		if(IsValidDynamicObject(objectid)) DestroyDynamicObject(objectid);
	}

	DeletePVarNew(playerid, "show_inventory_player");

	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[0][playerid]);
	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[1][playerid]);
	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[2][playerid]);
	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[3][playerid]);
	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[4][playerid]);
	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[5][playerid]);
	PlayerTextDrawHideEx(playerid, circle_menu_veh_electro[6][playerid]);


	PlayerTextDrawHideEx(playerid, casino_general_p[0][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[1][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[2][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[3][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[4][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[5][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[6][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[7][playerid]);
	PlayerTextDrawHideEx(playerid, casino_general_p[8][playerid]);


	foreach(new d: logged_players)
	{
		if(	pTemp[d][pWantedSu] == playerid +1)
		{
			format(String256f,sizeof(String256f),"Погоня за вами прервана");
			SCM(d,CINFO,String256f);
			pTemp[d][pWantedSu] = 0;
			break;
		}
	}


	if(	pTemp[playerid][pWantedSu] != 0)
	{
		if(pTemp[playerid][pOldVehicleid] != 0)
		{
			SetVehicleParamsForPlayer(pTemp[playerid][pOldVehicleid] , pTemp[playerid][pWantedSu]-1 , 0 , 0);
		}
		format(String256,sizeof(String256),"Подозреваемый "cWH"%s "cBLUE"вышел из игры",pData[playerid][pNickname]);
		SCM(pTemp[playerid][pWantedSu] - 1,CINFO,String256);
		format(String256, sizeof(String256), "{FA1010}Игрок %s вышел при аресте и был отправлен в тюрьму",pData[playerid][pNickname]);
		SendClientMessageToAll(0xFA1010FF, String256);

		pData[playerid][pDrugs] = 0;
		UpdatePlayerData(playerid, "drugs", pData[playerid][pDrugs]);
		pData[playerid][pHDrugs] = 0;
		UpdatePlayerData(playerid, "hdrugs", pData[playerid][pHDrugs]);


		if(GetPlayerMoneyEx(playerid) >=  pData[playerid][pWanted]*ArrestPay/2 && pData[playerid][pWanted] > 0) {
			if(IsACop(pTemp[playerid][pWantedSu] - 1))
			{
				give_money(playerid, pData[playerid][pWanted]* ArrestPay/2, "Премия");

				format(String256,sizeof(String256),"Вы получили премию "cGR"%d рублей",pData[playerid][pWanted]* ArrestPay/2 );
				SCM(pTemp[playerid][pWantedSu] - 1 ,CINFO,String256);
				GosMoney[1] -= pData[playerid][pWanted]* ArrestPay/2;
				SaveNewsMoney();
			}
		}

		pTemp[playerid][pWantedSu] = 0;
		pData[playerid][pJail] = 3000;
		pData[playerid][pWanted] = 0;

	}
	if(pTemp[playerid][pCuffee] != INVALID_PLAYER_ID)
	{
		new id = pTemp[playerid][pCuffee];
		if(id == playerid)
		{
			new cuffer = pTemp[playerid][pCuffer];
			if(pData[playerid][pJail] < 1) {
 			format(String256f,sizeof(String256f),"Арестованный "cWH"%s "cBLUE"вышел из игры",pData[playerid][pNickname]);
			SCM(cuffer,CINFO,String256f);
			format(String256f, sizeof(String256f), "{FA1010}Игрок %s вышел при аресте и был отправлен в тюрьму",pData[playerid][pNickname]);
			SendClientMessageToAll(0xFA1010FF, String256f);

			if(GetPlayerMoneyEx(playerid) >=  pData[playerid][pWanted]*ArrestPay/2 && pData[playerid][pWanted] > 0) {
				if(IsACop(cuffer))
				{
					give_money(playerid, pData[playerid][pWanted]* ArrestPay/2, "Премия");
					format(String256,sizeof(String256),"Вы получили премию "cGR"%d рублей",pData[playerid][pWanted]* ArrestPay/2 );
					SCM(cuffer ,CINFO,String256);
					GosMoney[1] -= pData[playerid][pWanted]* ArrestPay/2;
					SaveNewsMoney();
				}
			}

			}
			pTemp[cuffer][pCuffer] = INVALID_PLAYER_ID;
			pTemp[cuffer][pCuffee] = INVALID_PLAYER_ID;
			pTemp[cuffer][pHolder] = INVALID_PLAYER_ID;

			pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
			pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;

			pData[playerid][pJail] = 3000;
			pData[playerid][pWanted] = 0;
			pData[playerid][pDrugs] = 0;
			UpdatePlayerData(playerid, "drugs", pData[playerid][pDrugs]);
			pData[playerid][pHDrugs] = 0;
			UpdatePlayerData(playerid, "hdrugs", pData[playerid][pHDrugs]);
		}
		else if(IsPlayerConnected(id))
		{
			SetPlayerSpecialAction(id,SPECIAL_ACTION_NONE);
			RemovePlayerAttachedObject(id,0);
			pTemp[id][pCuffer] = INVALID_PLAYER_ID;
			pTemp[id][pCuffee] = INVALID_PLAYER_ID;
			pTemp[id][pHolder] = INVALID_PLAYER_ID;
			pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
			pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;
			SendInf(playerid, "Офицер, надевший на вас наручники, вышел из игры. Наручники сняты");
		}
	}
	if(gCalls[playerid][g_caller] == playerid || gCalls[playerid][g_callee] == playerid)
	{
		new id;
		if(gCalls[playerid][g_caller] == playerid) id = gCalls[playerid][g_callee];
		else if(gCalls[playerid][g_callee] == playerid) id = gCalls[playerid][g_caller];
		else return SendErr(playerid, "Ошибка (#112)");
		SCM(id,CYELLOW,"Собеседник вышел из игры");
		SetPlayerSpecialAction(id,SPECIAL_ACTION_STOPUSECELLPHONE);
		SetTimerEx("ClearPhone",2000,false,"i",id);
		gCalls[playerid][g_caller] = INVALID_PLAYER_ID;
		gCalls[playerid][g_callee] = INVALID_PLAYER_ID;
		gCalls[id][g_caller] = INVALID_PLAYER_ID;
		gCalls[id][g_callee] = INVALID_PLAYER_ID;
		pTemp[playerid][pCall] = false;
		pTemp[id][pCall] = false;
	}
 	for(new i = 0; i<3; i++) {
 		if(gNewsDialee[i] == playerid)
 		{
 			gNewsDialee[i] = INVALID_PLAYER_ID;
 			SCM(gNewsDialer[i], CSYSTEM, "Игрок вышел из игры");
 		}
 		if(gNewsDialer[i] == playerid) {
		PC_EmulateCommand(playerid, "/stopdial");
		gNewsDialer[i] = INVALID_PLAYER_ID;
		}
  	}



	PlayerTimerWanted[playerid] = 0;
	if(PlayerTimerWantedEx[playerid] != 0) {
	KillTimer(PlayerTimerWantedEx[playerid]);
	PlayerTimerWantedEx[playerid] = 0;
	}


	pTemp[playerid][zSteals] = 0;


	new h,m,s;
	gettime(h,m,s);

 	format(pData[playerid][pSkills],80,"%d,%d,%d,%d,%d,%d",
	pTemp[playerid][pGunSkill][0],pTemp[playerid][pGunSkill][1],pTemp[playerid][pGunSkill][2],
	pTemp[playerid][pGunSkill][3],pTemp[playerid][pGunSkill][4],pTemp[playerid][pGunSkill][5]);
	GetPlayerHealth(playerid, pData[playerid][pHealth]);

	if(pData[playerid][pHealth] > 100.0)
	{
		pData[playerid][pHealth] = 100.0;
		SetPlayerHealth(playerid, 100.0);
	}

	if(pData[playerid][pLicenses][LIC_WEAP]) format(String1024,sizeof(String1024),"UPDATE `accounts` SET `skills`='%s',`health` = '%.2f',`money`='%d',`jail`='%d',`wanted`='%d',`otigral`='%d',`phonemoney`='%d',`status`='0',`online`='0' WHERE `nickname`='%s'", pData[playerid][pSkills], pData[playerid][pHealth],pData[playerid][pMoney],pData[playerid][pJail], pData[playerid][pWanted], pTemp[playerid][pGiveExp],pData[playerid][pPhoneMoney], pData[playerid][pNickname]);
	else format(String1024,sizeof(String1024),"UPDATE `accounts` SET `skills`='%s',`health` = '%.2f',`money`='%d',`jail`='%d',`wanted`='%d',`otigral`='%d',`phonemoney`='%d',`status`='0',`online`='0' WHERE `nickname`='%s'", pData[playerid][pSkills], pData[playerid][pHealth],pData[playerid][pMoney],pData[playerid][pJail], pData[playerid][pWanted], pTemp[playerid][pGiveExp],pData[playerid][pPhoneMoney], pData[playerid][pNickname]);
	sql_queryEx(zConn, String1024, QUERY_THREADED);


	ClearPVAR(playerid);

	SetPlayerDataToDefault(playerid);
	clear_player(playerid);


	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[64];
		format(MSG,sizeof(MSG),"[OnPlayerDisconnect] Задержка %dms",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG,8);
		logs_status_server_info(MSG);
	}
	return 1;
}

callback:: OnPlayerLoaded(Result:r, playerid)
{
	new TickSt = GetTickCount();
	if(sql_num_rows(r))
	{
		new query[255], name[24], ip[16];
		GetPlayerName(playerid, name, 24);
		GetPlayerIp(playerid, ip, 16);
		new id = sql_get_field_assoc_int(r, "id");

 		pData[playerid][pMysqlID] = sql_get_field_assoc_int(r, "id");

		sql_get_field_assoc(r, "password",pData[playerid][pPassword]);
		sql_get_field_assoc(r, "pSaltHash",pData[playerid][pSaltHash]);

		pData[playerid][MD5] = sql_get_field_assoc_int(r, "MD5");
		pData[playerid][pSecurityCode] = sql_get_field_assoc_int(r, "security_code");

		sql_get_field_assoc(r, "code",pData[playerid][pCode]);
		sql_get_field_assoc(r, "LastIP",pTemp[playerid][pLastIP]);
		pData[playerid][pCodeIP] = sql_get_field_assoc_int(r, "codeip");
		sql_get_field_assoc(r, "hash",pData[playerid][pHesh]);
		sql_get_field_assoc(r, "gauth",pData[playerid][pGauth]);
		pData[playerid][pGaON] = sql_get_field_assoc_int(r, "gaon");
		pData[playerid][pGaONEX] = sql_get_field_assoc_int(r, "gaonex");
		format(pData[playerid][pMob], 32, "");
		pData[playerid][pCC] = 0;
		sql_get_field_assoc(r, "mob",pData[playerid][pMob]);

		pData[playerid][pCC] = sql_get_field_assoc_int(r, "ccode");
		pData[playerid][pTempID] = id;

		pTemp[playerid][pInTime] = 60;

		clear_chat_for_login(playerid);

		if(SERVER_SELECT_MODE == 1)
		{
			/*SCM(playerid,CBLUE,"Добро пожаловать на "SERVER_NAME" !");
			SCM(playerid,CBLUE,"Наша группа во ВКонтакте: "GROUP_VK", а также сайт: "SERVER_URL"!");*/
			EROM(playerid, 3, "Сервер для тестирований BRILLIANT RP", 6, "", "");
		}

		SPFD(playerid,dLogin, DIALOG_STYLE_PASSWORD,""cBLUE"Авторизация","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!",pData[playerid][pNickname]);

		CheckStatusAccount(playerid, id);
		CheckStatusAccountBan(playerid, id);

		pData[playerid][pFraction] = sql_get_field_assoc_int(r, "fraction");

		WN_showGreenZone(playerid, 2);
		randomCameraForAuthReg(playerid);
		//login_films_police_1_cam(playerid);
		//login_films_people_gop_cam(playerid);
		// random_reg_login_films(playerid);
		//get_player_situation_l_r_s(playerid);
		//get_player_camera_l_r(playerid);

        load_bind_command_player(playerid);
	}
	else {
		/*format(String4096,sizeof(String4096),"");
		strcat(String4096,""cWH"Правила игры на сервере.\n");
		strcat(String4096,""cBLUE"1."cWH" Ник должен быть в виде Имя_Фамилия.\n");
		strcat(String4096,""cBLUE"2."cWH" Revenge Kill (Сокращено RK) запрещён | Варн/Админ Тюрьма на 60 минут\n");
		strcat(String4096,""cBLUE"3."cWH" Mеtagаming (Сокращение MG) запрещён | Бан чата 15-60 минут\n");
		strcat(String4096,""cBLUE"4."cWH" Powergaming (Сокращение PG) запрещён | Кик/Варн/Админ Тюрьма на 30-60 минут.\n");
		strcat(String4096,""cBLUE"5."cWH" Deatmatch (сокращение DM)запрещён. | Кик/варн/админ тюрьма на 60 минут. Последующие нарушения Бан\n");
		strcat(String4096,""cBLUE"6."cWH" DriveBy (сокращение DB) запрещён | Админ тюрьма 30-60 минут,Варн (DB разрешён только пассажирам)\n");
		strcat(String4096,""cBLUE"7."cWH" Spawn Kill (Сокращение SK) запрещён |Админ тюрьма 60 минут,Варн/Бан\n");
		strcat(String4096,""cBLUE"8."cWH" Team Kill (Сокращение TK) запрещён | Варн/Бан\n");
		strcat(String4096,""cBLUE"9."cWH" Repeat Kill (Сокращение RK) запрещён | Админ тюрьма 60-120 минут,Варн\n");
		strcat(String4096,""cBLUE"10."cWH" FastReload или Scroll (Сокращение FR), а так же Fastmoving (Сокращение FM) запрещён | Варн (Т.к. это багоюз)\n");
		strcat(String4096,""cBLUE"11."cWH" Использование Читов/Хаков/Cleo запрещено. | бан на сервере от 10-30 дней до пожизненного.\n");
		strcat(String4096,""cBLUE"12."cWH" Нон рп запрещён! | Админ Тюрьма на 60 минут\n");
		strcat(String4096,""cBLUE"13."cWH" Использовать аптечки,наркотики во время драки или перестрелки запрещено. | Варн\n");
		strcat(String4096,""cBLUE"14."cWH" Флуд в IC и OOC, /s чаты | Бан чата 10-50 минут\n");
		strcat(String4096,""cBLUE"15."cWH" Флуд в Репорт, а так же вопросы типа: Можете дать лицензию, деньги, дом, админку | Бан чата 40-100 минут,Кик,Варн\n");
		strcat(String4096,""cBLUE"16."cWH" Выход из игры во время RP-процесса | Админ тюрьма 60-180 минут,Варн\n");
		strcat(String4096,""cBLUE"17."cWH" Оскорбление/троллинг/клевета | Бан чата,Кик,Варн,Бан аккаунта\n");
		strcat(String4096,""cBLUE"18."cWH" Оскорбление родителей | Бан 15-30 дней\n");
		strcat(String4096,""cBLUE"19."cWH" Реклама посторонних ресурсов (серверов, сайтов, читов) | Пожизненный бан\n\n");
		strcat(String4096,"Правила для аккаунтов:\n");
		strcat(String4096,""cBLUE"1."cWH" Ваш аккаунт - это ваша собственность и ваша отвественность. За утрату аккаунта (взлом,угон)\n");
		strcat(String4096,""cBLUE"2."cWH" Администрация отвественности не несёт и аккаунты игроков не восстанавливает!\n");
		strcat(String4096,""cBLUE"3."cWH" Продажа игровых денег,бизнесов,домов и т.д. за реальные деньги карается удалением аккаунта!\n");
		SPD(playerid,dRegMenu,0,""cBLUE"Правила сервера",String4096,"Далее","Выход");*/

		SPFD(playerid,dRegister,1,""cBLUE"Регистрация игрового аккаунта","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!\nЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
		//login_films_police_1_cam(playerid);
		//login_films_people_gop_cam(playerid);
		randomCameraForAuthReg(playerid);
		//get_player_situation_l_r_s(playerid);
		//get_player_camera_l_r(playerid);

		SetPlayerVirtualWorld(playerid,  playerid + 1);

 	}
	sql_free_result(r);

	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[64];
		format(MSG,sizeof(MSG),"[Загрузка игроков] Задержка %dms",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG,8);
		logs_status_server_info(MSG);
	}

	return 1;
}


callback:: OnPlayerJoin(playerid)
{
	if(!PlayerConnect[playerid]) return 1;

	new TickSt = GetTickCount();
	new query[128];
	TogglePlayerControllable(playerid,0);

	if(PSPAWN[playerid] < 2)
	{
		PSPAWN[playerid] = 2;
		TogglePlayerSpectating(playerid, 1);
	}

	if(!IsARPName(pData[playerid][pNickname]))
	{
		new zStr[126]; format(zStr, 126, "В нике запрещено использование цифр. Используйте ник в формате Имя_Фамилия");
		SendErr(playerid, zStr);

		SendInf(playerid, "Пример: Federico_Voidson");

		NewKick(playerid);

		return true;
	}



	if(type_player_systems[playerid] == PLAYER_IN_MOBILE_VERSION || type_player_systems[playerid] == PLAYER_IN_PC_VERSION)
	{
		pData[playerid][pTempID] = 0;
		sql_escape_string(zConn, pData[playerid][pNickname],pData[playerid][pNickname], 24);
		format(query,sizeof(query),"SELECT * FROM `accounts` WHERE `nickname` = '%s' LIMIT 1",pData[playerid][pNickname]);
		sql_query_format(zConn, query, QUERY_THREADED , "OnPlayerLoaded", "ri", playerid);
		if(GetTickCount() - TickSt > TickMax)
		{
			new MSG[64];
			format(MSG,sizeof(MSG),"[OnPlayerJoin] Задержка %dms",GetTickCount() - TickSt);
			AdminChatEx(0x007fffff,MSG,8);

			logs_status_server_info(MSG);
		}
	}
	ResetPlayerWeapons(playerid);

	return 1;
}

callback:: ToggleControllable(playerid, toggle)
{
	ControllableTimer[playerid] = -1;
	TogglePlayerControllable(playerid, toggle);
	return true;
}

public OnPlayerSpawn(playerid)
{
    new mes[256];
    if(pData[playerid][pAdmin] > 0)
    {
		format(mes, sizeof(mes), "{ffff00}[Оповещение]:{ffffff} Администратор {ffff00}%s(%d уровень){ffffff} зареспавнился в админ-зоне", GetNameEx(playerid), pData[playerid][pAdmin]);
		AdminChat(CGRAY, mes);
	}

	if(GetPVarIntNew(playerid, "spawnlogon") == 0) {
		SetPVarIntNew(playerid, "spawnlogon", 1);
		return 1;
	}
	new TickSt = GetTickCount();
	if(!PlayerConnect[playerid]) return 1;

	for(new i = 0; i < 7; i++) TextDrawHideForPlayer(playerid, circle_menu[i]);

	if(!pTemp[playerid][pLogined] || !pTemp[playerid][pJoined]) {
 		printf("SPAWN KICK");
		return Kick(playerid);
	}
	SetPlayerTeam(playerid, 1);

	exit_sum_casino_bet(playerid);
	leave_crupie_casino(playerid);
	
	PlayerPlayStream(playerid, "");

	if(PSPAWN[playerid] == 2)
	{
		PSPAWN[playerid] = 1;
	}

	PlayerPlaySound(playerid, 1, 0.0, 0.0, 0.0);
	no_animation_player_katok(playerid);

	if(pData[playerid][pFight] != 0)
	{
		SetPlayerFightingStyle (playerid, pData[playerid][pFight]);
	}

    if(pData[playerid][pAdmin] == 0)
	    SendInf(playerid, "Чтобы получить админку, введите /gettest");

	if(pTemp[playerid][spawn_id] == SPAWN_NONE)
	{
		//SelectTextDraw(playerid, COLOR_BLUE);
		//show_select_spawn(playerid);
		//SelectTextDraw(playerid, COLOR_BLUE);

		if(pData[playerid][pAdmin] > 0) {
			// if(!strcmp(GetPlayerName(playerid), "Weikton_Weikton", true))
			//    SetPlayerSkin(playerid, 0);
		
            SetPlayerVirtualWorldEx(playerid, 0);
            //SetPlayerInterior(playerid, 2);
            SetPlayerPosDebug(playerid, ADMZONE_POS);
            set_player_skin(playerid, pData[playerid][pSkin]);
            
		//	SendClientMessage(playerid, COLOR_WHITE, "%s (%d уровень) добро пожаловать, рады снова видеть вас на "cBLUE""SERVER_NAME"!", GetPlayerName(playerid), pData[playerid][pAdmin]);
		//	SendInf(playerid, "Вам было установлено появление в админ-зоне");
		} else {
	    	new frac, house;
	    	
			if(pData[playerid][pFlate] != -1 ||
				pData[playerid][pFlateRent] != -1 ||
		  			pData[playerid][pHotelRoom] != -1 ||
		   				pData[playerid][pHouse] != -1 ||
		    				pData[playerid][pHouseRent] != -1)
				house = 1;
			else
				house = 0;
			
			if(!pData[playerid][pFraction])
				frac = 0;
			else
				frac = 1;

			WN_showSelectSpawn(playerid, house, frac);
		}
	}

	KillTimer(login_timer_p[playerid]);
	KillTimer(login_timer_p_2[playerid]);

	SetPlayerSkills(playerid);

	pTemp[playerid][pDamage] = 0;
	pTemp[playerid][pDamage2] = 0;
	pTemp[playerid][pTakeShots] = 0;

	pTemp[playerid][pOldVehicleid] = 0;
	NewWVehicle[playerid] = 0;
	WVehicle[playerid] = 0;


	pTemp[playerid][pAbletoGun] = 5;
	SetPlayerColor(playerid,0xFFFFFF11);
	pTemp[playerid][pChangingSkin] = false;

	TogglePlayerControllable(playerid,0);
	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid,x,y,z);
	pTemp[playerid][pWork] = 0;
	pTemp[playerid][pInPrez] = 0;
	pTemp[playerid][pInMer] = 0;


	if(pData[playerid][pMoney])
	{
		ResetPlayerMoney(playerid);
  		GivePlayerMoney(playerid,pData[playerid][pMoney]);
	}

	SetPlayerScore(playerid,pData[playerid][pLevel]);

	if(!pData[playerid][pSkin])
	{
		SetPlayerPosDebug(playerid, 78.5720,577.0031,17.6990);
		SetPlayerFacingAngle(playerid, 350.6213);
		SetPlayerCameraPos(playerid, 79.0831,581.2105,17.6732);
		SetPlayerCameraLookAt(playerid, 78.5720,577.0031,17.3990 );

		SetPlayerVirtualWorld(playerid,playerid);
		TogglePlayerControllable(playerid,0);

		pTemp[playerid][pLogin4] = false;

 		pTemp[playerid][pChoosingSkin] = true;

		if(pTemp[playerid][pChoosingSkin] == true)
		{
			DeletePVarNew(playerid,"skinid");

			new skin;

			if(pData[playerid][pSex] == 1)
			{
				switch(random(8))
				{
					case 0: skin = 79;
					case 1: skin = 134;
					case 2: skin = 136;
					case 3: skin = 234;
					case 4: skin = 235;
					case 5: skin = 236;
					case 6: skin = 135;
					case 7: skin = 239;
				}
			}
			else
			{
				switch(random(5))
				{
					case 0: skin = 9;
					case 1: skin = 39;
					case 2: skin = 225;
					case 3: skin = 231;
					case 4: skin = 232;
				}
			}

			pData[playerid][pSkin] = skin;
			pTemp[playerid][pChoosingSkin] = false;

			CancelSelectTextDraw(playerid);
			TogglePlayerControllable(playerid,1);
			UpdatePlayerData(playerid,"skin",skin);
			PSPAWN[playerid] = 1;

			pTemp[playerid][spawn_id] = SPAWN_NONE;

			//HideLoginMap(playerid);
			SpawnPlayer(playerid);
 			CancelSelectTextDraw(playerid);
		}

		return true;
	}
	else
	{
		SetPlayerHealth(playerid, 100);
		pData[playerid][pHealth] = 100.0;

		new ho,mo,so;
		gettime(ho,mo,so);

		if(pData[playerid][pHealth] > 10.0) SetPlayerHealth(playerid, pData[playerid][pHealth]);

 		if(pData[playerid][pJail] && pData[playerid][pPrison] > 3)
		{
			TogglePlayerControllable(playerid,1);
 			SetPlayerVirtualWorld(playerid, 1);
			new camid = random(sizeof(CamCoords2));
 			PlayerCAM[playerid] = camid;
			SetPlayerPosDebug(playerid, CamCoords2[camid][0],CamCoords2[camid][1],CamCoords2[camid][2]);
			SetPlayerFacingAngle(playerid,359.4348);

 			if(pData[playerid][pSex] == 2) {
			   set_player_skin(playerid, 263);
			} else {
			   set_player_skin(playerid, 268);
			}
			if(pData[playerid][pFraction]) SetPlayerColor(playerid,gFractionColor[pData[playerid][pFraction] - 1]);
			SendInf(playerid, "Чтобы посмотреть сколько Вам осталось сидеть в тюрьме, введите команду {FFFF10}/ptime");
			ResetPlayerWeapons(playerid);
			pTemp[playerid][pInHospital] = true;
			SetPlayerInterior(playerid,0);
			SetPlayerTime(playerid , 12, 0);

			pTemp[playerid][spawn_id] = SPAWN_JAIL;

		}
 		else if(pData[playerid][pJail])
		{
			TogglePlayerControllable(playerid,1);
			new prison = pData[playerid][pPrison];
			SetPlayerVirtualWorld(playerid,prison + 1);
			new camid = random(sizeof(CamCoords));
			SetPlayerPosDebug(playerid, CamCoords[camid][0],CamCoords[camid][1],CamCoords[camid][2]);
			SetPlayerFacingAngle(playerid,359.4348);
 			if(pData[playerid][pSex] == 2) {
			  set_player_skin(playerid, 263);
			} else {
			  set_player_skin(playerid, 268);
			}
			if(pData[playerid][pFraction]) SetPlayerColor(playerid,gFractionColor[pData[playerid][pFraction] - 1]);
			SendInf(playerid, "Чтобы посмотреть сколько Вам осталось сидеть в тюрьме, введите команду {FFFF10}/ptime");
			ResetPlayerWeapons(playerid);
			SetPlayerInterior(playerid,0);

			pTemp[playerid][spawn_id] = SPAWN_JAIL;

			if(pData[playerid][pJailKey])		{
				pData[playerid][pJail] = 1;
				pData[playerid][pWanted] = 0;
				SetPlayerWantedLevel(playerid,0);
				pData[playerid][pJailKey] = 0;
				new mes[256];
				format(mes,sizeof(mes),"UPDATE `accounts` SET `jail` = '%d' WHERE `id` = '%d'",pData[playerid][pJail],pData[playerid][pMysqlID]);
				sql_queryEx(zConn, mes, QUERY_THREADED);
				UpdatePlayerData(playerid,"jailkey",pData[playerid][pJailKey]);
				SendInf(playerid, "Вы нашли в карманах ключ от участка и вам удалось выбраться из тюрьмы");
			}

		}

		else if((!pData[playerid][pJail] && (pTemp[playerid][pDead] == true || pTemp[playerid][pInHospital] == true)) || (!pData[playerid][pJail] && pData[playerid][pHealth] < 30.0 && (ho != 5 || (ho == 5 && mo > 7))))
		{
		   	pTemp[playerid][pDead] = false;

			if(pData[playerid][pTurma] > 0 && IsACop(playerid))
			{
 				pTemp[playerid][pInHospital] = true;
				SetPlayerHealth(playerid,5.0);
				SetPlayerPosDebug(playerid, 514.9135,335.6270,1201.8594);
			}
			else
			{
	 			if(pData[playerid][pHospital] == 0)
	 			{
	 				pData[playerid][pHospital] = 1;
	 			}
	 		}

			new
				mestoid = random(7);


			SetPlayerVirtualWorld(playerid, random(1));

			SetPlayerTime(playerid , 12, 0);

			pTemp[playerid][pInHospital] = true;

			pTemp[playerid][spawn_id] = SPAWN_HOSPITAL;

			SetPlayerPosDebug(playerid,BolnicaPos[mestoid][0],BolnicaPos[mestoid][1],BolnicaPos[mestoid][2]);
			SetPlayerFacingAngle(playerid,BolnicaPos[mestoid][3]);
			SetPlayerHealth(playerid,5.0);

			hide_select_spawn(playerid);

			show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:info_gui_hospital_start", 4000);


			set_player_skin(playerid,pData[playerid][pSkin]);
			
			if((pData[playerid][pFraction]-1) < sizeof(gFractionColor) &&  (pData[playerid][pFraction]-1) >= 0) { SetPlayerColor(playerid,gFractionColor[pData[playerid][pFraction]-1]); }
		}
		if(pTemp[playerid][spawn_id] != SPAWN_NONE)
		{
			MafiaWarConnect(playerid);
			SendMafiaNotify(playerid);

			off_messages_checker(playerid);
			//info_newyear_server(playerid);
			if(pTemp[playerid][spawn_id] == SPAWN_HOUSE)
			{
				if(pData[playerid][pFamily] != -1)
				{
					new
						family_ids = pData[playerid][pFamily];

					if(get_family_house(family_ids) != -1 && pData[playerid][pHouse] != -1 &&  pData[playerid][pFlate] == -1 && pData[playerid][pFlateRent] == -1 && pData[playerid][pHotelRoom] == -1
					|| get_family_house(family_ids) != -1 && pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent]&& pData[playerid][pFlate] == -1 && pData[playerid][pFlateRent] == -1 && pData[playerid][pHotelRoom] == -1
					|| get_family_house(family_ids) != -1 && pData[playerid][pFlate] == -1 && pData[playerid][pFlateRent] && pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent] == -1 && pData[playerid][pHotelRoom] == -1
					|| get_family_house(family_ids) != -1 && pData[playerid][pFlate] != -1 && pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent] == -1 && pData[playerid][pHotelRoom] == -1
					|| get_family_house(family_ids) != -1 && pData[playerid][pHotelRoom] != -1 && pData[playerid][pFlate] == -1  && pData[playerid][pFlateRent] == -1 &&  pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent] == -1)
					{
						return SPD(playerid, DIALOG_SELECT_TYPE_HOUSE, DIALOG_STYLE_LIST, !""cBLUE"Выбор дома", "\
						"cBLUE"1. "cWH"Появиться в личном жилье (если имеется)\n\
						"cBLUE"2. "cWH"Появиться в доме семьи", !"Выбрать", !"Закрыть");
					}
					else if(get_family_house(family_ids) != -1)
					{
						spawn_player_house_family(playerid);
					}
					else if(get_family_house(family_ids) == -1)
					{
						spawn_player_house_all(playerid);
					}
				}
				else
				{
					spawn_player_house_all(playerid);
				}
			}
			else if(pTemp[playerid][spawn_id] == SPAWN_JAIL)
			{
				if	(pData[playerid][pTurma] > 0 && IsACop(playerid))
				{
					pTemp[playerid][pInHospital] = true;
					SetPlayerVirtualWorld(playerid , 2);
					SetPlayerPosDebug(playerid, 514.9135,335.6270,1201.8594);
					new fractionid = pData[playerid][pFraction]-1;
					set_player_skin(playerid,pData[playerid][pFractionSkin]);              //}
					SetCameraBehindPlayer(playerid);
					SetPlayerColor(playerid,gFractionColor[fractionid]);
					pTemp[playerid][pInHospital] = true;
				}
			}

			else if(pTemp[playerid][spawn_id] == SPAWN_ORG)
			{
				if(pData[playerid][pFraction])
				{
					new fractionid = pData[playerid][pFraction]-1;
					if(pData[playerid][pSubfraction])
					{
						new frid;
						frid = GetSubfractionID(fractionid);
						new subid = pData[playerid][pSubfraction] - 1;
						SetPlayerVirtualWorld(playerid,gSubfractionSpawnData[frid][subid][1]);
						SetPlayerPosDebug(playerid,gSubfractionSpawnC[frid][subid][0],gSubfractionSpawnC[frid][subid][1],gSubfractionSpawnC[frid][subid][2]);
						SetPlayerFacingAngle(playerid,gSubfractionSpawnC[frid][subid][3]);

						if(pData[playerid][pFraction] == 9)
						{
							//LoadCopMap(playerid, 2);
						}
						if(pData[playerid][pFraction] == 10)
						{
							TogglePlayerControllable(playerid, 0);
							SetPlayerVirtualWorld(playerid, 999);
							SetTimerEx("UnfreezSmi",1000,false,"ii",playerid,gSubfractionSpawnData[frid][subid][1]);
						}
					}
					else
					{
		 				SetPlayerVirtualWorld(playerid,gFractionSpawnData[fractionid][1]);
						if(fractionid == 10 && pData[playerid][pRank] == 11)
						{
							SetPlayerPosEx(playerid, 708.0253,-13.5308,1201.8580,91.7381);
						}
						else
						{
							SetPlayerPosDebug(playerid,gFractionSpawnC[fractionid][0],gFractionSpawnC[fractionid][1],gFractionSpawnC[fractionid][2]);
							SetPlayerFacingAngle(playerid,gFractionSpawnC[fractionid][3]);
						}
						if(fractionid >= 2 && fractionid < 7)
						{
							//LoadGangMap(playerid);
						}
					}
		 			SetPlayerColor(playerid,gFractionColor[fractionid]);
					set_player_skin(playerid,pData[playerid][pFractionSkin]);
					SetCameraBehindPlayer(playerid);
		 			if(pData[playerid][pFraction] == 11 && pData[playerid][pSubfraction] > 0)	{
						pTemp[playerid][pInMer] = 1;
					}
					if(pData[playerid][pFraction] == 11 && !pData[playerid][pSubfraction])	{
						SetPlayerTime(playerid , 12, 0);
						pTemp[playerid][pInPrez] = 1;
					}
					if((pData[playerid][pFraction] == 2 && !pData[playerid][pSubfraction]) || (pData[playerid][pFraction] == 8 && !pData[playerid][pSubfraction])
						|| (pData[playerid][pFraction] == 9 && !pData[playerid][pSubfraction]) || (pData[playerid][pFraction] == 10 && !pData[playerid][pSubfraction])) {
						SetPlayerTime(playerid , 12, 0);
						pTemp[playerid][pInPrez] = 1;
					}
					if(pData[playerid][pFraction] == 2)	{
					pTemp[playerid][pInHospital] = true;
		 			SetPlayerTime(playerid , 12, 0);

					if(pData[playerid][pSubfraction] == 1)
					{
						pData[playerid][pHospital] = 1;
						//LoadHealMap(playerid, 1);
					}
					if(pData[playerid][pSubfraction] == 2)
					{
						pData[playerid][pHospital] = 2;
						//LoadHealMap(playerid, 1);
					}
					if(pData[playerid][pSubfraction] == 3)
					{
						pData[playerid][pHospital] = 3;
						//LoadHealMap(playerid, 1);
					}

					}

				}
			}
			else if(pTemp[playerid][spawn_id] == SPAWN_HOSPITAL)
			{
				if(pTemp[playerid][pInHospital] == true && !pData[playerid][pJail] && pData[playerid][pHospital] > 0)
				{
					new
						mestoid = random(7);

					if(pData[playerid][pHospital] == 1)
					{
						SetPlayerVirtualWorld(playerid, 0);
					}
					else if(pData[playerid][pHospital] == 2)
					{
						SetPlayerVirtualWorld(playerid, 1);
					}

					SetPlayerTime(playerid , 12, 0);

					pTemp[playerid][pInHospital] = true;

					SetPlayerPosDebug(playerid,BolnicaPos[mestoid][0],BolnicaPos[mestoid][1],BolnicaPos[mestoid][2]);
					SetPlayerFacingAngle(playerid,BolnicaPos[mestoid][3]);
					SetPlayerHealth(playerid,5.0);

		 			SetPlayerColor(playerid,0xFFFFFF11);
					set_player_skin(playerid,pData[playerid][pSkin]);                      //}
					SetPlayerVirtualWorld(playerid,0);
					SetPlayerInterior(playerid,0);

					pTemp[playerid][pREGISKL] = false;

					AttachAcsToPlayer(playerid, GetPlayerSkin(playerid));

					if(ControllableTimer[playerid] != -1)
					{
						KillTimer(ControllableTimer[playerid]);
						ControllableTimer[playerid] = - 1;
					}
					TogglePlayerControllable(playerid, false);


					return true;

				}
			}
			else if(pTemp[playerid][spawn_id] == SPAWN_DEFAULT)
			{
	 			SetPlayerColor(playerid,0xFFFFFF11);
				set_player_skin(playerid,pData[playerid][pSkin]);                      //}
				SetPlayerVirtualWorld(playerid, 0);
				SetPlayerInterior(playerid, 0);

				switch(random(5))
				{
					case 0:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, 1816.2080,2534.9136,15.8682,170.4678);
							case 1: SetPlayerPosEx(playerid, 1821.7607,2529.9402,15.8682,130.9559);
							case 2: SetPlayerPosEx(playerid, 1827.5305,2521.0530,15.8682,128.1765);
							case 3: SetPlayerPosEx(playerid, 1831.0558,2515.6040,15.8682,98.5505);
							case 4: SetPlayerPosEx(playerid, 1810.0985,2530.2041,15.8682,218.2233);
							case 5: SetPlayerPosEx(playerid, 1827.8064,2512.5203,15.8682,54.0774);
						}
					}
					case 1:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, 2721.5476,-2440.3926,21.8921,254.1346);
							case 1: SetPlayerPosEx(playerid, 2729.5708,-2434.6582,21.8921,197.9777);
							case 2: SetPlayerPosEx(playerid, 2726.1819,-2458.2495,21.8844,300.7530);
							case 3: SetPlayerPosEx(playerid, 2733.4590,-2460.9331,21.8921,309.7230);
							case 4: SetPlayerPosEx(playerid, 2736.1580,-2447.4272,21.8921,284.6768);
							case 5: SetPlayerPosEx(playerid, 2744.0352,-2453.5293,21.8921,344.1207);
						}

					}
					case 2:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, -488.6964,892.5707,12.1426,304.0402);
							case 1: SetPlayerPosEx(playerid, -489.9566,905.2356,12.1426,274.4773);
							case 2: SetPlayerPosEx(playerid, -491.6602,916.1732,12.1426,268.8239);
							case 3: SetPlayerPosEx(playerid, -491.1354,927.3166,12.1426,256.2217);
							case 4: SetPlayerPosEx(playerid, -489.9982,936.4419,12.1426,224.1320);
							case 5: SetPlayerPosEx(playerid, -485.5179,916.9094,12.1426,269.1711);
						}
					}
					case 3:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, -2461.4609,2833.0483,38.3840,357.0113);
							case 1: SetPlayerPosEx(playerid, -2462.7339,2841.4417,38.4074,169.2405);
							case 2: SetPlayerPosEx(playerid, -2457.5095,2841.4009,38.4074,90.7220);
							case 3: SetPlayerPosEx(playerid, -2470.4102,2829.8721,37.7199,12.7697);
							case 4: SetPlayerPosEx(playerid, -2469.7886,2836.1211,37.7199,90.2460);
							case 5: SetPlayerPosEx(playerid, -2470.9104,2846.5959,37.7199,121.7694);
						}
					}
					case 4:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, 2485.5471,-2134.6130,23.4458,267.0909);
							case 1: SetPlayerPosEx(playerid, 2485.2827,-2129.5100,23.4458,266.4909);
							case 2: SetPlayerPosEx(playerid, 2485.4727,-2123.0449,23.4458,268.2912);
							case 3: SetPlayerPosEx(playerid, 2499.9004,-2117.9941,23.4458,181.0554);
							case 4: SetPlayerPosEx(playerid, 2501.6057,-2126.5283,23.4458,90.1265);
							case 5: SetPlayerPosEx(playerid, 2499.9373,-2131.5916,23.4458,181.1840);
						}
					}
					case 5:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, -47.0770,924.3354,12.0020,252.2801);
							case 1: SetPlayerPosEx(playerid, -39.0355,921.9507,12.0020,92.2425);
							case 2: SetPlayerPosEx(playerid, -45.3944,909.0605,12.1504,251.0798);
							case 3: SetPlayerPosEx(playerid, -54.4851,921.0815,12.0336,246.9108);
							case 4: SetPlayerPosEx(playerid, -56.3439,914.0223,12.1504,275.4315);
							case 5: SetPlayerPosEx(playerid, -34.5945,914.3675,12.0050,75.6610);
						}
					}
					case 6:
					{
						switch(random(5))
						{
							case 0: SetPlayerPosEx(playerid, -488.6964,892.5707,12.1426,304.0402);
							case 1: SetPlayerPosEx(playerid, -489.9566,905.2356,12.1426,274.4773);
							case 2: SetPlayerPosEx(playerid, -491.6602,916.1732,12.1426,268.8239);
							case 3: SetPlayerPosEx(playerid, -491.1354,927.3166,12.1426,256.2217);
							case 4: SetPlayerPosEx(playerid, -489.9982,936.4419,12.1426,224.1320);
							case 5: SetPlayerPosEx(playerid, -485.5179,916.9094,12.1426,269.1711);
						}
					}

				}
				SetCameraBehindPlayer(playerid);
			}
			else if(pTemp[playerid][spawn_id] == SPAWN_LAST_POS)
			{
	 			SetPlayerColor(playerid,0xFFFFFF11);
				set_player_skin(playerid,pData[playerid][pSkin]);

				SetPVarIntNew(playerid, "first_load", 1);

				SetPlayerPosDebug(playerid, pTemp[playerid][crash_pos_x], pTemp[playerid][crash_pos_y], pTemp[playerid][crash_pos_z]);
				SetPlayerVirtualWorld(playerid, pTemp[playerid][crash_virtual_world]);

			}
			else
			{
			 	if(pData[playerid][pAdmin] > 0) {
			 	 	// if(!strcmp(GetPlayerName(playerid), "Weikton_Weikton", true))
			 	 	//    SetPlayerSkin(playerid, 0);

                    SetPlayerVirtualWorldEx(playerid, 0);
                    //SetPlayerInterior(playerid, 2);
			 	 	SetPlayerPosDebug(playerid, ADMZONE_POS);
			 	 	set_player_skin(playerid, pData[playerid][pSkin]);
			 	 	
			 //	    SendClientMessage(playerid, COLOR_WHITE, "%s (%d уровень) добро пожаловать, рады снова видеть вас на "cBLUE""SERVER_NAME"!", GetPlayerName(playerid), pData[playerid][pAdmin]);
			 //	 	SendInf(playerid, "Вам было установлено появление в админ-зоне");
		 	 	} else {
	    	 	 	new frac, house;

			 	 	if(pData[playerid][pFlate] != -1 ||
			 	 		pData[playerid][pFlateRent] != -1 ||
		  	 	 			pData[playerid][pHotelRoom] != -1 ||
		   	 	 				pData[playerid][pHouse] != -1 ||
		     	 					pData[playerid][pHouseRent] != -1)
			 	 		house = 1;
		 	 		else
			 	 		house = 0;

			 	 	if(!pData[playerid][pFraction])
			 	 		frac = 0;
		 	 		else
			 	 		frac = 1;

			 	 	WN_showSelectSpawn(playerid, house, frac);
		 	 	}
			}
		}

		if(pTemp[playerid][spawn_id] != SPAWN_NONE)
		{

			if(pData[playerid][pWanted])
			{
				SetPlayerWantedLevel(playerid,pData[playerid][pWanted]);
			}
			else
			{
				SetPlayerWantedLevel(playerid,0);
			}


			SetPlayerDrunkLevel(playerid, pData[playerid][pDrunk]);
			pTemp[playerid][pREGISKL] = false;

			AttachAcsToPlayer(playerid, GetPlayerSkin(playerid));

			if(ControllableTimer[playerid] != -1)
			{
				KillTimer(ControllableTimer[playerid]);
				ControllableTimer[playerid] = - 1;
			}
			TogglePlayerControllable(playerid, false);


			ControllableTimer[playerid] = SetTimerEx("ToggleControllable", GetPlayerPing(playerid) + 1000, false, "ii", playerid, 1);
		}
	}

	if(GetTickCount() - TickSt > TickMax)
	{
		new
			MSG[55];
		format(MSG,sizeof(MSG),"[OnPlayerSpawn] Задержка %dms",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG,8);

		logs_status_server_info(MSG);
	}
    
	/*if(pData[playerid][pAdmin] > 0)
 	{
		//PC_EmulateCommand(playerid, "/alogin");
		admloged[playerid] = 1;
    }*/
    
	return 1;
}








public OnPlayerDeath(playerid, killerid, reason)
{

	if(pNPC[playerid] != 0 ) return 1;
	if(!pTemp[playerid][pLogined]) return 1;

	kill_on_family_war(playerid, killerid);
	autoschool_end_lesson(playerid);

	//death_params_antikill(playerid, killerid);

	pData[playerid][p_dialog] = -1;

	no_animation_player_katok(playerid);
	PlayerDeathByEnemyPlayer(playerid, killerid);

	exit_sum_casino_bet(playerid);
	leave_crupie_casino(playerid);

	inventory_gui_panel(playerid, TEXTDRAW_HIDE);
	show_fast_menu(playerid, FAST_MENU_GENERAL_PLAYER, TEXTDRAW_HIDE);
	show_fast_menu(playerid, FAST_MENU_GENERAL_MENU, TEXTDRAW_HIDE);
	show_ammo_menu_magazin(playerid, TEXTDRAW_HIDE);

	if(GetPVarIntNew(playerid, "takedamage") > GetTickCount() && killerid == INVALID_PLAYER_ID)
	{
		killerid = GetPVarIntNew(playerid, "takedamager");
		reason = GetPVarIntNew(playerid, "takedamagid");
		SetPVarIntNew(playerid, "takedamage", 0);
		SetPVarIntNew(playerid, "takedamager", -1);
		SetPVarIntNew(playerid, "takedamagid", -1);
	}

	if(	pTemp[playerid][pWantedSu] != 0  )
	{
		new mes[144];
		format(mes,sizeof(mes),"Подозреваемый "cWH"%s "cBLUE"отправлен в КПЗ",pData[playerid][pNickname]);
		SCM(pTemp[playerid][pWantedSu] - 1,CINFO,mes);

		new fractionid = pData[pTemp[playerid][pWantedSu] - 1][pFraction]-1;
		new rank = pData[pTemp[playerid][pWantedSu] - 1 ][pRank];

 		format(mes,sizeof(mes),"[Внимание] %s %s поймал преступника '%s'",gFractionRankName[fractionid][rank-1],pData[ pTemp[playerid][pWantedSu] - 1 ][pNickname],pData[playerid][pNickname]);
  		CopMes(0xff7518FF,mes);
 		pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
		pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;

		pData[playerid][pJail] = 1800;
		pData[playerid][pWanted] = 0;

		pTemp[playerid][pWantedSu] = 0;

		pData[playerid][pDrugs] = 0;
		UpdatePlayerData(playerid, "drugs", pData[playerid][pDrugs]);
		pData[playerid][pHDrugs] = 0;
		UpdatePlayerData(playerid, "hdrugs", pData[playerid][pHDrugs]);

	}

	if(GetPVarIntNew(playerid, "deathtrue") != 0)
	{
		SCM(playerid,CORANGE,"Вы были кикнуты по подозрению в читерстве (#2998)");
		NewKick(playerid);
		return 1;
	}
	RemovePlayerAttachedObject(playerid, 1);
	if(PlayerHelmet[playerid] != 0) {
		PlayerHelmet[playerid] = 0;
		RemovePlayerAttachedObject(playerid, 3);
	}
	if(pTemp[playerid][pPlayer] != 0)
	{
	 	pTemp[playerid][pPlayer] = 0;
		RemovePlayerAttachedObject(playerid, 7);
	}

	PlayerVoen[playerid] = 0;

	pTemp[playerid][pVod] = 0;
	pTemp[playerid][pVodPr] = 0;


	offer_cancel(playerid);
	//taxi_driver_cancel_call(playerid);
	//taxi_cancel_call_client(playerid);

	death_snow_race_player(playerid);

	end_all_work(playerid);

	work_bus_unrent(playerid);
	unrent_job_trucker(playerid);
	autosalon_unrent_car(playerid);
	unrent_start_game_transport(playerid);
	hide_phone_general(playerid);
	end_trucker_job(playerid);
	show_quest_systems_panel(playerid, TEXTDRAW_HIDE);
	exit_select_car_autosalon(playerid);


	SetPVarIntNew(playerid, "deathtrue", 1);
	if(playerid == INVALID_PLAYER_ID) return 1;
	if(IsKicked(playerid)) { return 1;}
	if(killerid < 0 || (killerid >= MAX_PLAYERS && killerid != INVALID_PLAYER_ID)) return 1;
	if(killerid != INVALID_PLAYER_ID && !IsPlayerConnected(killerid)) return 1;

	new TickSt = GetTickCount();
	pTemp[playerid][pDialogID] = 0;

	SetPVarIntNew(playerid,"pdeath_time",GetTickCount()+3500);


	if(killerid != INVALID_PLAYER_ID && playerid >= 0 && playerid < MAX_PLAYERS)
	{
	if(killerid < 1000 && IsAMafia(killerid))
	{
	new Float:px;
	new Float:py;
	new Float:pz;
	GetPlayerPos(playerid,px,py,pz);
	if(px > 1980.8 && px < 2235.0 && py > -214.6 && py < 36.2 && pData[playerid][pFraction] == 8)
	{
	SetPVarIntNew(playerid,"mafkil",1);
	SetPVarFloatNew(playerid,"voenx",px);
	SetPVarFloatNew(playerid,"voeny",py);
	SetPVarFloatNew(playerid,"voenz",pz);

 	}
	}


	if(	pTemp[playerid][pWantedSu] != 0  )
	{
		new mes[144];
		format(mes,sizeof(mes),"Подозреваемый "cWH"%s "cBLUE"отправлен в КПЗ",pData[playerid][pNickname]);
		SCM(pTemp[playerid][pWantedSu] - 1,CINFO,mes);

		new fractionid = pData[pTemp[playerid][pWantedSu] - 1][pFraction]-1;
		new rank = pData[pTemp[playerid][pWantedSu] - 1 ][pRank];

		format(mes,sizeof(mes),"[Внимание] %s %s поймал преступника '%s'",gFractionRankName[fractionid][rank-1],pData[ pTemp[playerid][pWantedSu] - 1 ][pNickname],pData[playerid][pNickname]);
  		CopMes(0xff7518FF,mes);
		pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
		pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;

		pData[playerid][pJail] = 1800;
		pData[playerid][pWanted] = 0;

		pTemp[playerid][pWantedSu] = 0;
		pData[playerid][pDrugs] = 0;
		UpdatePlayerData(playerid, "drugs", pData[playerid][pDrugs]);
		pData[playerid][pHDrugs] = 0;
		UpdatePlayerData(playerid, "hdrugs", pData[playerid][pHDrugs]);

	}
	if(killerid != INVALID_PLAYER_ID && killerid >= 0 && killerid < MAX_PLAYERS && !IsKicked(killerid) && GetPlayerWeapon(killerid) == reason)
	{
	if(pData[killerid][pJail] > 1 && pData[killerid][pPrison] > 3 && pData[killerid][pJail] < 60*60*5 )
	{
		if(IsACop(killerid))
  		{
			pData[killerid][pJail] += 60*30; // 15 min
			format(String256, sizeof(String256), "Вам был добавлен срок за убийство охранника");
			SCM(killerid, 0xFFCC33FF, String256);
		}
		else {
			pData[killerid][pJail] += 60*15; // 15 min
			format(String256, sizeof(String256), "Вам был добавлен срок за убийство заключенного");
			SCM(killerid, 0xFFCC33FF, String256);
		}
 		format(String256,sizeof(String256),"UPDATE `accounts` SET `jail` = '%d' WHERE `id` = '%d'",pData[killerid][pJail],pData[killerid][pMysqlID]);
		sql_queryEx(zConn, String256, QUERY_THREADED);
	}
	}



	foreach(new d: logged_players)
	{
		if(d > MAX_PLAYERS) break;
		if(PLAYERPDELPER[ d ] == playerid+1)
		{
			PLAYERPDELPER[ d ] = 0;
			SendErr(d, "Сотрудник пропал с радара");
			DisablePlayerCheckpoint(d);
		}
	}
	for(new bb = 0; bb < sizeof(PDhelp); bb++)
	{
	if(PDhelp[bb] == playerid+1)
	{
		PDhelp[bb] = 0;
  		new mes[256];
		format(mes,sizeof(mes),"[Внимание] Сотрудник "cBLUE"%s{007FFF} больше не нуждается в помощи",pData[playerid][pNickname]);
		CopMes(CDEPARTMENT,mes);
	}
	}


	if(Playernarko[playerid] > 0)
	{
	SetPlayerWeather(playerid, 0);
	new ho,mo,so;
	gettime(ho,mo,so); //
	SetPlayerTime(playerid,ho,mo);
	}
	Playernarko[playerid] = 0;

	pData[playerid][pMasked] = 0;
	pTemp[playerid][pDead] = true;
	pTemp[playerid][pInHospital] = true;
	PObject[playerid] = 0;

	if (MAX_ARM[playerid] > 0)
	{
		RemovePlayerAttachedObject(playerid, 2);
	}

	pTemp[playerid][pFarmTime] = 0;

 	pTemp[playerid][pCarJob] = 0;

	pTemp[playerid][pAqaPred][0] = 0;
	pTemp[playerid][pAqaPred][1] = 0;
	pTemp[playerid][pAqaPred][2] = 0;

	if(IsACop(playerid))
	{
	if(killerid != INVALID_PLAYER_ID && killerid >= 0 && killerid < MAX_PLAYERS && IsAGang(killerid))
	{
		SetPVarIntNew(playerid, "KillBand", pData[killerid][pFraction]);
	}
	}

	}

	if(killerid >= 0 && killerid < MAX_PLAYERS) {
	if(!IsACop(killerid) && pData[killerid][pFraction] != 8 && pData[killerid][pFraction] != 11)
	{
		if(pData[killerid][pZakon] > -95) {
			pData[killerid][pZakon] -= 6;
			UpdatePlayerData(killerid, "zakon", pData[killerid][pZakon]);
		}
		else pData[killerid][pZakon] = -100;
	}
	if(PlayerTempVeh[playerid] != 0) {
	crwite[ PlayerTempVeh[playerid] ] = GetTickCount() + 5000;
	DestroyVehicle(PlayerTempVeh[playerid]);
	PlayerTempVeh[playerid] = 0;
	if(pData[playerid][pFraction]) SetPlayerColor(playerid,gFractionColor[pData[playerid][pFraction] - 1]);

	}


	if(IsACop(killerid) && pData[playerid][pWanted])
	{
		new fractionid = pData[killerid][pFraction]-1;
		new rank = pData[killerid][pRank];
//		new mes[256];
		format(String256,sizeof(String256),"[Внимание] %s %s нейтрализовал преступника '%s'",gFractionRankName[fractionid][rank-1],pData[killerid][pNickname],pData[playerid][pNickname]);
  		CopMes(0xff7518FF,String256);
		new level = pData[playerid][pWanted];
		new time = level*JAIL_QUATE;
		pData[playerid][pJail] = time;
		pData[playerid][pWanted] = 0;
		SetPlayerWantedLevel(playerid,0);

		format(String256,sizeof(String256),"UPDATE `accounts` SET `jail` = '%d', prison = '%d', wanted = '0' WHERE `id` = '%d'",pData[playerid][pJail],pData[playerid][pPrison],pData[playerid][pMysqlID]);
		sql_queryEx(zConn, String256, QUERY_THREADED);

		PlayerTimerWanted[playerid] = 0;
		if(PlayerTimerWantedEx[playerid] != 0) {
		KillTimer(PlayerTimerWantedEx[playerid]);
		PlayerTimerWantedEx[playerid] = 0;
		}

		pData[playerid][pDrugs] = 0;
		UpdatePlayerData(playerid, "drugs", pData[playerid][pDrugs]);
		pData[playerid][pHDrugs] = 0;
		UpdatePlayerData(playerid, "hdrugs", pData[playerid][pHDrugs]);
	}

	}

	if(playerid >= 0 && playerid < MAX_PLAYERS) {

	pTemp[playerid][pAbletoGun] = 3;
	ResetPlayerWeapons(playerid);

	}

	if(killerid != INVALID_PLAYER_ID && killerid >= 0 && killerid < MAX_PLAYERS && pData[killerid][pJail] < 1)
	{
		if(!IsACop(killerid) && !IsAMafia(killerid) && !IsAGang(killerid) && pData[killerid][pFraction] != 8 && pData[killerid][pFraction] != 11)
		{
			if(pData[killerid][pBiker] > 0 && pData[playerid][pBiker] > 0) {}
			else
			{
				if(pData[killerid][pWanted] < 6) pData[killerid][pWanted] += 2;
				if(pData[killerid][pWanted] > 6) pData[killerid][pWanted] = 6;
				UpdatePlayerData(killerid,"wanted",pData[killerid][pWanted]);
	   			SetPlayerWantedLevel(killerid, pData[killerid][pWanted]);
				format(String256,sizeof(String256),"Вы объявлены в розыск (+2). Причина: убийство.  ((%d))", playerid);
				SCM(killerid,CORANGE,String256);
				format(String256,sizeof(String256),"[Внимание] %s объявлен в розыск (+2). Причина: Убийство.",pData[killerid][pNickname]);
	   			CopMes(CDEPARTMENT,String256);

				for(new d; d < 6; d++) {
				if(pData[killerid][pWantedi][d] == 0) {
				pData[killerid][pWantedi][d] = 151;
				break;
	 			}
				}
				format(pData[killerid][pWantedinf],80,"%d,%d,%d,%d,%d,%d",
				pData[killerid][pWantedi][0],pData[killerid][pWantedi][1],pData[killerid][pWantedi][2],
				pData[killerid][pWantedi][3],pData[killerid][pWantedi][4],pData[killerid][pWantedi][5]);
				format(String1024,sizeof(String1024),"UPDATE `accounts` SET `wantedi`='%s' WHERE `nickname`='%s'", pData[killerid][pWantedinf] , pData[killerid][pNickname]);
				sql_queryEx(zConn, String1024, QUERY_THREADED);
			}
		}
	}

	if(playerid != INVALID_PLAYER_ID && playerid >= 0 && playerid < MAX_PLAYERS)
	{
	if(IsPlayerInDynamicArea(playerid, gArmyArea))
	{
		if(IsPlayerInRangeOfPoint(playerid, 20.0, -1582.2522,461.3610,43.3883) && IsAGang(playerid))
		{
			UpdatePlayerData(playerid,"gunamount",floatround(pData[playerid][pGunAmount]/2));
			UpdatePlayerData(playerid,"ammo",floatround(pData[playerid][pAmmo]/2));
			SendSucc(playerid, "Вы потеряли половину Ваших патрон и ед. оружия");
		}
		pTemp[playerid][zSteals] = 0;

		if(killerid >= 0 && killerid < MAX_PLAYERS)
		{
			if(pData[killerid][pFraction] == 8)
			{
 			}
		}
	}

	if(pTemp[playerid][pCuffee] == playerid)
	{
		new id = playerid;
		new cuffer = pTemp[id][pCuffer];
		SetPlayerSpecialAction(id,SPECIAL_ACTION_NONE);
		RemovePlayerAttachedObject(id,0);
		pTemp[id][pCuffer] = INVALID_PLAYER_ID;
		pTemp[id][pCuffee] = INVALID_PLAYER_ID;
		pTemp[id][pHolder] = INVALID_PLAYER_ID;
		if(cuffer >= 0 && cuffer < MAX_PLAYERS)
		{
			pTemp[cuffer][pCuffee] = INVALID_PLAYER_ID;
			pTemp[cuffer][pCuffer] = INVALID_PLAYER_ID;
			SCM(cuffer,CINFO,"Арестованный умер"); }
		}

	}


	if(GetPlayerWeapon(killerid) == 38 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 27 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 4 && pData[killerid][pAdmin] < 7
	|| GetPlayerWeapon(killerid) == 18 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 27 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 34 && pData[killerid][pAdmin] < 7
	|| GetPlayerWeapon(killerid) == 35 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 36 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 37 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 39 && pData[killerid][pAdmin] < 7
	|| GetPlayerWeapon(killerid) == 40 && pData[killerid][pAdmin] < 7 || GetPlayerWeapon(killerid) == 44 && pData[killerid][pAdmin] < 7)
	{
		anticheat_kick_player(killerid);
	}

	KillOnWar(playerid, killerid);

	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[64];
		format(MSG,sizeof(MSG),"[OnPlayerDeath] Задержка %dms",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG,8);

		logs_status_server_info(MSG);
	}
	return 1;
}







public OnVehicleSpawn(vehicleid)
{
	SetVehicleNumberPlate(vehicleid, vehicle[vehicleid][cPlate]);
	ChangeVehiclePaintjob(vehicleid, vehicle[vehicleid][cPaintJob]);
	SetVehicleMass(vehicleid, transport_config[GetVehicleModel(vehicleid)-399][transport_handling_mass]);
	SetVehicleSpeed(vehicleid, transport_config[GetVehicleModel(vehicleid)-399][transport_max_speed]);
	
	new own = vehicle[vehicleid][cOwnTo];

	switch(own)
	{
		case VEHICLES_AUTOSCHOOL:
		{
			vehicle[vehicleid][cFuel] = 60.0;
			vehicle_engine_status(vehicleid, false);
			vehicle_light_status(vehicleid, false);
		}
		case VEHICLE_YANDEX:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "taxi_work_active"))
				{
					end_working_taxi(i);
				}
			}
		}
		case VEHICLE_UBER:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "taxi_work_active"))
				{
					end_working_taxi(i);
				}
			}
		}
		case VEHICLE_CITY:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "taxi_work_active"))
				{
					end_working_taxi(i);
				}
			}
		}
		case VEHICLES_BUS:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					work_bus_unrent(i);
				}
			}
		}
		case TRUCKER_BASE_STATION_1, TRUCKER_BASE_STATION_2, TRUCKER_BASE_STATION_3:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "trucker_job"))
				{
					end_trucker_job(i);
				}
			}
		}
		case VEHICLE_MECHANIC_1:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					end_mechanic_jobs(i);
				}
			}
		}
		case VEHICLE_MECHANIC_2:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					end_mechanic_jobs(i);
				}
			}
		}
		case VEHICLE_MECHANIC_3:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					end_mechanic_jobs(i);
				}
			}
		}
	}

	return true;
}

public OnVehicleDeath(vehicleid, killerid)
{
	new
		own = vehicle[vehicleid][cOwnTo];

	foreach(new i: logged_players)
	{
		if(vehicle[vehicleid][cOwner] == i)
		{
			SendInf(i, "Ваше транспортное средство было уничтожено!");

			if(GetPVarIntNew(i, "taxi_work_active"))
				return end_working_taxi(i);
		}
	}

	foreach(new i: logged_players)
	{
		if(truck_trailer[i] != INVALID_VEHICLE_ID)
		{
			DeletePVarNew(i, "type_job_trucker");
			DeletePVarNew(i, "trucker_load_miner");
			DeletePVarNew(i, "trucker_load_zavod");
			DeletePVarNew(i, "trucker_load_shop");
			DeletePVarNew(i, "trucker_load_fill_1");
			DeletePVarNew(i, "trucker_load_fill_2");
			DeletePVarNew(i, "trucker_load_samwill");
			DeletePVarNew(i, "player_load_trucker");

			destroy_truck_trailer(i);
			truck_vehicle[i] = INVALID_VEHICLE_ID;
			return SendErr(i, "Вы не привезли груз. Работа аннулирована");
		}
	}

	switch(own)
	{
		case VEHICLE_YANDEX:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "taxi_work_active"))
				{
					end_working_taxi(i);
				}
			}
		}
		case VEHICLE_UBER:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "taxi_work_active"))
				{
					end_working_taxi(i);
				}
			}
		}
		case VEHICLE_CITY:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "taxi_work_active"))
				{
					end_working_taxi(i);
				}
			}
		}
		case VEHICLES_BUS:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					work_bus_unrent(i);
				}
			}
		}
		case TRUCKER_BASE_STATION_1, TRUCKER_BASE_STATION_2, TRUCKER_BASE_STATION_3:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid && GetPVarIntNew(i, "trucker_job"))
				{
					end_trucker_job(i);
				}
			}
		}
		case VEHICLE_MECHANIC_1:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					end_mechanic_jobs(i);
				}
			}
		}
		case VEHICLE_MECHANIC_2:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					end_mechanic_jobs(i);
				}
			}
		}
		case VEHICLE_MECHANIC_3:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car]  == vehicleid)
				{
					end_mechanic_jobs(i);
				}
			}
		}
		case VEHICLE_GOV:
		{
			DestroyVehicle(vehicleid);
		}
		case VEHICLE_FEDERALS:
		{
			DestroyVehicle(vehicleid);
		}
		case VEHICLE_POLICES:
		{
			DestroyVehicle(vehicleid);
		}
		case VEHICLE_NEWS_1:
		{
			DestroyVehicle(vehicleid);
		}
		case VEHICLE_NEWS_2:
		{
			DestroyVehicle(vehicleid);
		}
		case VEHICLE_AUTOSALON_1:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car] == vehicleid)
				{
					autosalon_unrent_car(i);
				}
			}
		}
		case VEHICLE_AUTOSALON_2:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car] == vehicleid)
				{
					autosalon_unrent_car(i);
				}
			}
		}
		case VEHICLE_AUTOSALON_3:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car] == vehicleid)
				{
					autosalon_unrent_car(i);
				}
			}
		}

		case VEHICLE_FIRE:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car] == vehicleid)
				{
					end_fire_job(i);
				}
			}
		}
		case VEHICLE_TRASH_WORK:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car] == vehicleid)
				{
					end_trash_work(i);
				}
			}
		}
		case VEHICLE_BANK_WORK:
		{
			foreach(new i: logged_players)
			{
				if(pTemp[i][rent_car] == vehicleid)
				{
					disconnect_player_bank_work(i);
				}
			}
		}
	}

	return 1;
}

public OnPlayerText(playerid, text[])
{

	if(!pTemp[playerid][pLogined]) return 0;

	new TickSt = GetTickCount();

	if(strlen(text) < 6 || pData[playerid][pLevel] > 3) StopFlood[playerid]--;
	if(pData[playerid][pFraction] == 9)  StopFlood[playerid]--;

    new strpon[256];
    new name[32];
    GetPlayerName(playerid, name, sizeof name);
    format(strpon, sizeof strpon, "Игрок %s сказал : %s", name, text);
    if(ff[playerid] != -1)
        SCM(ff[playerid], -1, strpon);

	if(!strcmp(text, "xD", true) || !strcmp(text, "чВ", true) || !strcmp(text, "ЧВ", true) || !strcmp(text, "ХД", true) || !strcmp(text, "ЧД", true) || !strcmp(text, "xd", true) || !strcmp(text, ":D", true) || !strcmp(text, "))", true) || !strcmp(text, "хД", true) || !strcmp(text, ";D", true)) return MeAction(playerid, "cмеется") & 0;
	else if(!strcmp(text, "+", true))
	{
		if(pData[playerid][pSex] == 1) return MeAction(playerid, "согласен") & 0;
		else return MeAction(playerid, "согласна") & 0;
	}
	else if(!strcmp(text, "-", true))
	{
		if(pData[playerid][pSex] == 1) return MeAction(playerid, "не согласен") & 0;
		else return MeAction(playerid, "не согласна") & 0;
	}
	else if(!strcmp(text, "(", true)) return MeAction(playerid, "грустит") & 0;
	else if(!strcmp(text, "((", true) || !strcmp(text, ":((", true) || !strcmp(text, ";(((", true) || !strcmp(text, ";((", true) || !strcmp(text, ";(", true) || !strcmp(text, "(((", true))
	{
		if(pData[playerid][pSex] == 1) MeAction(playerid, "сильно расстроился");
		else MeAction(playerid, "сильно расстроилась");
		return false;
	}
	else if(!strcmp(text, "=0", true))
	{
		if(pData[playerid][pSex] == 1) MeAction(playerid, "удивился");
		else MeAction(playerid, "удивилась");
		return false;
	}
	else if(!strcmp(text, ")", true) || !strcmp(text, ";)", true) || !strcmp(text, ";))", true) || !strcmp(text, ";)))", true) || !strcmp(text, ")))", true)) return MeAction(playerid, "улыбается") & 0;



	if(gettime() < StopFlood[playerid])
 	{
	SetPVarIntNew(playerid,"sms_flood", GetPVarIntNew(playerid,"sms_flood") +1);
 	SCM(playerid, CGRAY, "Не флудите");
 	if(GetPVarIntNew(playerid,"sms_flood") > 10) { Kick(playerid); }
	return false;
	}
	StopFlood[playerid] = gettime()+CHAT_INTERVAL;
	if(strlen(FloodText[playerid]) > 5 && !strcmp(text, FloodText[playerid], true)) {
		SCM(playerid, CGRAY, "Сообщение слишком похоже на предыдущее"); return false;
	}
	if(strlen(text) > 90) {
		SCM(playerid, CGRAY, "Слишком длинное сообщение"); return false;
	}
	format(FloodText[playerid], 128, text);

	if(pTemp[playerid][pEther] && pData[playerid][pFraction] == 10)
	{
		if(pData[playerid][pMut])
		{
			SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
			return 0;
		}
		if(pTemp[playerid][pMutM])
		{
			SendErr(playerid, "У Вас затычка во рту.");
			return 0;
		}
		new fractionid = pData[playerid][pFraction]-1;
		new frid = GetSubfractionID(fractionid);
		new subid = pData[playerid][pSubfraction] - 1;
		new mes[128];

		format(mes,sizeof(mes),"[%s] %s: %s",gSubfractionName[frid][subid],pData[playerid][pNickname],text);

		foreach(new i: logged_players)
		{
			if(!PlayerConnect[i]) continue;
  			if(pData[i][pRadio] != subid+1) continue;
			SCM(i,CRADIO,mes);
		}
		return 0;
	}
	for(new i = 0; i<3; i++) {
		if(gNewsDialee[i] == playerid && gNewsDialing[i])
		{
			if(pData[playerid][pMut])
			{
				SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
				return 0;
			}
			if(pTemp[playerid][pMutM])
			{
				SendErr(playerid, "У Вас затычка во рту.");
				return 0;
			}
			new mes[128];
			format(mes,sizeof(mes),"[Радио] %s [тел.]: %s",pData[playerid][pNickname],text);
			new subid = pData[gNewsDialer[i]][pSubfraction];
			foreach(new r : Player)
			{
				if(!IsPlayerConnected(r)) continue;
				if(pData[r][pRadio] == subid || r == playerid) SCM(r, CRADIO, mes);
			}
			return 0;
		}
	}
	if(pTemp[playerid][pCall])
	{
		if(pData[playerid][pMut])
		{
			SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
			return 0;
		}
		if(pTemp[playerid][pMutM])
		{
			SendErr(playerid, "У Вас затычка во рту.");
			return 0;
		}
		new id;
		if(gCalls[playerid][g_caller] == playerid) id = gCalls[playerid][g_callee];
		else if(gCalls[playerid][g_callee] == playerid) id = gCalls[playerid][g_caller];
		else return SendErr(playerid, "Ошибка (#112)");
		new mes[128];
		format(mes,sizeof(mes),"[Телефон] %s",text);
		Speech(playerid,mes,LANG_ENGLISH,13.0,0);
		format(mes,sizeof(mes),"[T] %s: %s",pData[playerid][pNickname],text);
		SCM(id,CYELLOW,mes);
		return 0;
	}
	Speech(playerid,text,LANG_ENGLISH);
	if(GetTickCount() - TickSt > TickMax)
	{
		format(String64,sizeof(String64),"[OnPlayerText] Задержка %dms",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,String64);
		logs_status_server_info(String64);
	}

	return 0;
}





public OnPlayerCommandReceived(playerid, cmd[], params[], flags)
{
	if(!pTemp[playerid][pLogined]) return 0;

	if(CountFloodForPlayer[playerid] >= 2)
		return 0;

	CountFloodForPlayer[playerid]++;
	
	//if(!admloged[playerid] && pData[playerid][pAdmin] > 0 && strcmp(cmd, "alogin"))
	    //return SendErr(playerid, "Сначала авторизуйтесь, /alogin!"), 0;

 	if(pData[playerid][p_dialog] != -1)
	 	return SendErr(playerid, "У вас открыт диалог, Вы не можете использовать команды."), false;

	if(GetPVarIntNew(playerid, "bus_in_station") == 1)
		return SendErr(playerid, "Запрещено использовать команды во время остановки автобуса!");

	if(GetPVarIntNew(playerid, "player_load_trucker") == 1)
		return SendErr(playerid, "Запрещено использовать команды при загрузке!");

	if(GetPVarIntNew(playerid, "show_inventory_player"))
		return SendErr(playerid, "Запрещено использовать команды с открытым инвентарём!");

	return 1;
}

public OnPlayerCommandPerformed(playerid, cmd[], params[], result, flags)
{
	if(!pTemp[playerid][pLogined]) return 0;


	if(result == -1) return SendInf(playerid, "Данная команда не существует. Используйте {FFC800}/mn - Список команд"cWH", чтобы узнать список команд сервера.");
	return 0;
}


stock GetLangMaf(playerid)
{
	switch(pData[playerid][pFraction])
	{
		case 13: return LANG_JAPAN;
		case 14: return LANG_ITALIAN;
		case 15: return LANG_SPAIN;
	}
	return LANG_ENGLISH;
}


stock GetLang(playerid)
{
	switch(pData[playerid][pNation])
	{
		case 2: return LANG_JAPAN;
		case 3: return LANG_ITALIAN;
		case 4..6: return LANG_SPAIN;
		case 7: return LANG_RUSSIAN;
		case 8: return LANG_PORTUGAL;
		case 9: return LANG_FRENCH;
	}
	return LANG_ENGLISH;
}


public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{

	new engine, lights, alarm, doors, bonnet, boot, objective;
	GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);


	if(!ispassenger)
	{
		if(pTemp[playerid][rent_car] == vehicleid)
		{
			KillTimer(pTemp[playerid][rent_car_spawn_timer]);
			pTemp[playerid][rent_car_spawn_timer] = INVALID_TIMER_ID;
		}
		pTemp[playerid][rent_car_spawn_timer] = INVALID_TIMER_ID;
	}

	if(GetPVarIntNew(playerid, "miner_job"))
	{
		RemovePlayerFromVehicleEx(playerid);
		ClearAnimations(playerid);
		SendErr(playerid, "Транспортное средство закрыто! Открыть можно с помощью команды /lock!");
		return SendErr(playerid, "Вы не можете сесть в транспорт, когда работаете шахтером!");
	}

	if(GetPVarIntNew(playerid, "factoryjob"))
	{
		RemovePlayerFromVehicleEx(playerid);
		ClearAnimations(playerid);
		SendErr(playerid, "Транспортное средство закрыто! Открыть можно с помощью команды /lock!");
		return SendErr(playerid, "Вы не можете сесть в транспорт, когда работаете на заводе!");
	}

	if(GetPVarIntNew(playerid, "wood_job"))
	{
		RemovePlayerFromVehicleEx(playerid);
		ClearAnimations(playerid);
		SendErr(playerid, "Транспортное средство закрыто! Открыть можно с помощью команды /lock!");
		return SendErr(playerid, "Вы не можете сесть в транспорт, когда работаете на лесопилке!");
	}

	if(doors == 1 && ispassenger == 0 || doors == 1 && ispassenger == 1)
	{
		RemovePlayerFromVehicleEx(playerid);
		ClearAnimations(playerid);
		SendErr(playerid, "Транспортное средство закрыто! Открыть можно с помощью команды /lock!");

		return true;
	}


	return true;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{

	if(GetPVarIntNew(playerid, "reg_in_snow_race") && GetPVarIntNew(playerid, "RaceCP"))
		return leave_snow_race_player(playerid);

	if(GetPVarIntNew(playerid, "RegInRace") && GetPVarIntNew(playerid, "RaceCP"))
		return leave_race_player(playerid);

	player_vehicle_exit(playerid, vehicleid);
	
	StopAudioStreamForPlayer(playerid);
	
	pData[playerid][pRadio] = 0;
    UpdatePlayerData(playerid, "radio", 0);
	SCM(playerid,CDARKGREEN,"Радио выключено");

	//bus_player_leave_vehicle(playerid, vehicleid);
	return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
	new TickSt = GetTickCount();
	pRealState[playerid] = newstate;
	pRealStateT[playerid] = TickSt + 5000;
	pInAREA[playerid] = 0;

	load_army_cancel(playerid, newstate);

	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid,x,y,z);

	if(newstate == PLAYER_STATE_SPAWNED)
	{
	 	if(PSPAWN[playerid] == 0 )
		{
			//Kick(playerid);
			PSPAWN[playerid] = 1;
			SpawnPlayer(playerid);
			print("PSPAWN DEBUG KICK");
		}
		if(PSPAWN[playerid] == 2 )
		{
			TogglePlayerSpectating(playerid,0);
		}

		if(IsPlayerConnected(playerid))
		{
			pTemp[playerid][pMutM] = 0;
			SetPVarIntNew(playerid, "deathtrue", 0);
			SetPVarIntNew(playerid, "takedamager", -1);
			SetPVarIntNew(playerid, "takedamagid", -1);
		}
 	}

	if(newstate == PLAYER_STATE_DRIVER)
	{
		player_vehicle_enter(playerid, GetPlayerVehicleID(playerid));
	}
	if(oldstate == PLAYER_STATE_DRIVER)
	{
		KillTimer(pTemp[playerid][vehicle_speed_timer]);
		hide_speed_player(playerid);

		PlayerTextDrawHide(playerid, player_speed_car[0][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[1][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[2][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[3][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[4][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[5][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[6][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[7][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[8][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[9][playerid]);
		PlayerTextDrawHide(playerid, player_speed_car[10][playerid]);

		PlayerTextDrawDestroy(playerid, player_speed_car[0][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[1][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[2][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[3][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[4][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[5][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[6][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[7][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[8][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[9][playerid]);
		PlayerTextDrawDestroy(playerid, player_speed_car[10][playerid]);

	}


	if(oldstate == PLAYER_STATE_ONFOOT) {



	if(newstate == PLAYER_STATE_ONFOOT)
	{
	 	if(pTemp[playerid][pWantedSu] != 0)
		{
			SetVehicleParamsForPlayer(pTemp[playerid][pOldVehicleid] , pTemp[playerid][pWantedSu]-1 , 0 , 0);
		}
		pTemp[playerid][pOldVehicleid] = 0;
	}


	checkcs[playerid] = 0; ExitOtladka[playerid] = 10; }

	pTemp[playerid][pAbletoGun] = 5;

	if(newstate == PLAYER_STATE_DRIVER && oldstate == PLAYER_STATE_PASSENGER)
	{
		NewKick(playerid);
		return 1;
	}
	if(oldstate == PLAYER_STATE_DRIVER && newstate == PLAYER_STATE_PASSENGER)
	{
		NewKick(playerid);
		return 1;
	}


	if(newstate == PLAYER_STATE_PASSENGER)
	{
		new
			vehicle_id_player = GetPlayerVehicleID(playerid);

		if(vehicle[vehicle_id_player][vehicle_driver] != INVALID_PLAYER_ID)
		{

			new
				driverid = vehicle[vehicle_id_player][vehicle_driver];

			if(pData[driverid][pTaxi] == -1)
				return true;

			if(GetPVarIntNew(playerid, "taxi_job") != 1)
				return true;

			if(pTemp[driverid][pTaxiPass] == INVALID_PLAYER_ID)
			{
				if(GetPlayerMoneyEx(playerid) < pTemp[driverid][pTaxiPrice])
				{

					SendErr(playerid, "У вас не хватает средств для того, чтобы воспользоваться такси.");
					return RemovePlayerFromVehicle(playerid);
				}

				pTemp[driverid][pTaxiStart] = vehicle[vehicle_id_player][cMileage];
				pTemp[driverid][pTaxiPass] = playerid;
				pTemp[driverid][pTaxiGoing] = true;

				taxi_client_timer[playerid] = 0;

				SendSucc(playerid, "Поездка начата, финальная стоимость будет обозначена в конце поездки!");
				SendInf(playerid, "Если в процессе поездки у Вас будет недостаточно денежных средств, то поездка будет завершена!");

				SendSucc(driverid, "Поездка начата, отправляйтесь в точку назначения!");
				SendInf(driverid, "Стоимость поездки будет озвучена в конце поездки!");
				SendInf(driverid, "Если у клиента будет недостаточно денежных средств, поездка будет завершена!");

				SetPVarIntNew(playerid, "taxi_driver_id", driverid);
			}
			else
			{
				SendErr(playerid, "Таксист уже имеет активный заказ! Вызовите другое такси!");
				taxi_driver_cancel_call(driverid);
				RemovePlayerFromVehicle(playerid);
			}
		}
	}

	if(newstate == PLAYER_STATE_WASTED)
	{
 		PSPAWN[playerid] = 1;
		if(pData[playerid][pLevel] < 4)
		{
			 pData[playerid][pHospital] = 1;
		}
		else if(pData[playerid][pLevel] > 3 && pData[playerid][pLevel] < 7)
		{
			 pData[playerid][pHospital] = 2;
		}
		else
		{
			 pData[playerid][pHospital] = 2;
		}

		pTemp[playerid][pInHospital] = true;

		UpdatePlayerData(playerid , "hospital",pData[playerid][pHospital]);


 	}



	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[64];
		format(MSG,sizeof(MSG),"[OPSC] Задержка %dms (%d %d %d)",GetTickCount() - TickSt,newstate,oldstate,playerid);
		AdminChatEx(0x007fffff,MSG);
		logs_status_server_info(MSG);
	}


	return 1;
}

public OnPlayerEnterCheckpoint(playerid)
{
	if(!pTemp[playerid][pLogined]) return 1;

	last_upd[playerid] = GetTickCount() - 400;

	if(pTemp[playerid][pGPS])
	{
		pTemp[playerid][pGPS] = false;
 		PLAYERPDELPER[playerid] = 0;
		SCM(playerid,0x97d324ff,"Вы достигли места назначения");//SendMes
		WN_showGPS(playerid, 2);
		DisablePlayerCheckpoint(playerid);
	}

	if(GetPVarIntNew(playerid, "active_player_house_newyear") == 1)
	{
		ApplyAnimation(playerid,"CAR_CHAT","CAR_Sc4_BL",4.0,1,1,1,0,6000,0);
		SetPVarIntNew(playerid, "house_count_prize_newyear", GetPVarIntNew(playerid, "house_count_prize_newyear")+1);
		DisablePlayerCheckpoint(playerid);
		generate_random_house_newyear(playerid);

		WN_showGPS(playerid, 2);

		return true;
	}

	if(GetPVarIntNew(playerid, "active_player_snow_newyear") == 1)
	{
		ApplyAnimation(playerid,"CAR_CHAT","CAR_Sc4_BL",4.0,1,1,1,0,6000,0);
		SetPVarIntNew(playerid, "count_prize_snow_quest", GetPVarIntNew(playerid, "count_prize_snow_quest")+1);
		DisablePlayerCheckpoint(playerid);
		quest_snow_random_accept(playerid);

		return true;
	}

	if(GetPVarIntNew(playerid, "active_player_gruz_taxi") == 1)
	{
		ApplyAnimation(playerid,"CAR_CHAT","CAR_Sc4_BL",4.0,1,1,1,0,3000,0);
		DisablePlayerCheckpoint(playerid);
		final_gruz_taxi_house(playerid);

		WN_showGPS(playerid, 2);

		return true;
	}

	if(GetPVarIntNew(playerid, "active_player_gruz_taxi_p") == 1)
	{
		ApplyAnimation(playerid,"CAR_CHAT","CAR_Sc4_BL",4.0,1,1,1,0,3000,0);
		DisablePlayerCheckpoint(playerid);
		final_gruz_taxi_people(playerid);

		WN_showGPS(playerid, 2);

		return true;
	}
			
    DisablePlayerCheckpoint(playerid);

	return 1;
}

public OnPlayerLeaveCheckpoint(playerid)
{
	return 1;
}

public OnPlayerEnterDynamicCP(playerid,checkpointid)
{
	if(!pTemp[playerid][pLogined]) return 1;
	new TickSt = GetTickCount();

	if(GetTickCount() - TickSt > TickMax)
	{

		format(String256,sizeof(String256),"[OPEDCH] Задержка %dms",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,String256);
		logs_status_server_info(String256);
	}

	return 1;
}

public OnPlayerEnterRaceCheckpoint(playerid)
{
	if(!pTemp[playerid][pLogined]) return 1;
	if(GetTickCount() < GetPVarIntNew(playerid,"CheckpTick"))
	{
		SetPVarIntNew(playerid,"Checkp", GetPVarIntNew(playerid,"Checkp") + 1);
		if( GetPVarIntNew(playerid,"Checkp") > 20)    							{
		format(String256,sizeof(String256),"[RC] %d kicked (recr.)",playerid);
		AdminChat(0x007fffff,String256);

		logs_status_server_info(String256);

		Kick(playerid);															}
	}
	SetPVarIntNew(playerid,"CheckpTick", GetTickCount() + 250);

	if(GetPVarIntNew(playerid, "bus_job_cp"))
	{
		if(GetPVarIntNew(playerid, "bus_route_1") == 1)
		{
			bus_next_cp(playerid, GetPlayerVehicleID(playerid));
		}
		else if(GetPVarIntNew(playerid, "bus_route_2") == 1)
		{
			bus_next_cp_2(playerid, GetPlayerVehicleID(playerid));
		}
		return true;
	}

	if(GetPVarIntNew(playerid, "autoschool_type"))
	{
		DisablePlayerRaceCheckpoint(playerid);
		return autoschool_route(playerid, GetPlayerVehicleID(playerid), GetPVarIntNew(playerid, "autoschool_route"));
	}

	if(GetPVarIntNew(playerid, "trucker_work_active_gruz"))
	{
		DisablePlayerRaceCheckpoint(playerid);
		return unload_trucker_gruz(playerid);
	}


	if(GetPVarIntNew(playerid, "RaceCP") && GetPVarIntNew(playerid, "RegInRace"))
	{
		DisablePlayerRaceCheckpoint(playerid);
		return race_checkpoint_enter(playerid);
	}

	if(GetPVarIntNew(playerid, "RaceCP") && GetPVarIntNew(playerid, "reg_in_snow_race"))
	{
		DisablePlayerRaceCheckpoint(playerid);
		return snow_race_checkpoint_enter(playerid);
	}

	if(GetPVarIntNew(playerid, "snow_work") && GetPVarIntNew(playerid, "snow_work_cp"))
	{
		DisablePlayerRaceCheckpoint(playerid);
		return snow_work_cp_enter(playerid);
	}

	if(pData[playerid][pJob] == 5 && pTemp[playerid][pGPS])
	{
		DisablePlayerRaceCheckpoint(playerid);
		pTemp[playerid][pGPS] = false;
 		SCM(playerid,0x97d324ff,"Вы достигли места назначения");//SendMes
	}
	if(GetPVarIntNew(playerid, "trash_work") && GetPVarIntNew(playerid, "trash_can"))
	{
		return trash_work_enter_cp(playerid);
	}

	return 1;
}

public OnPlayerLeaveRaceCheckpoint(playerid)
{
	return 1;
}

public OnPlayerEnterDynamicArea(playerid, areaid)
{
	if(!PlayerConnect[playerid]) return 1;

	new time_debug = GetTickCount();

	area_police_ships(playerid, areaid);

	if(GetPVarIntNew(playerid, "show_inventory_player"))
		return true;

	area_trash_work(playerid, areaid);
	area_bankwork_job(playerid, areaid);
	//area_march_quest(playerid, areaid);

	enter_area_express_heal(playerid, areaid);

	for(new i; i < MAX_VEHICLES; i++)
	{
		if(areaid == vehicle_load_sphere[i])
		{
			if(GetPVarIntNew(playerid, "take_army_box") && vehicle_load[i] == 1)
			{
				if(GetVehicleModel(i) == 433)
				{
					if(vehicle_load_count[i] >= 15)
						return SendErr(playerid, "В машине недостаточно места");

					vehicle_load_count[i] ++;
					RemovePlayerAttachedObject(playerid, 0);
					ApplyAnimation(playerid,"CARRY","liftup",1.0,0,1,1,0,0,1);
					DeletePVarNew(playerid, "take_army_box");

					new
						string[40];

					format(string, sizeof(string), ""cBLUE"Ящиков загружено\n"cWH"%d/15", vehicle_load_count[i]);
					UpdateDynamic3DTextLabelText(vehicle_load_text[i], -1, string);

				}
				if(GetVehicleModel(i) == 412 || GetVehicleModel(i) == 529 || GetVehicleModel(i) == 543)
				{
					if(vehicle_load_count[i] >= 5)
						return SendErr(playerid, "В машине недостаточно места");

					vehicle_load_count[i] ++;
					RemovePlayerAttachedObject(playerid, 0);
					ApplyAnimation(playerid,"CARRY","liftup",1.0,0,1,1,0,0,1);
					DeletePVarNew(playerid, "take_army_box");

					new
						string[40];

					format(string, sizeof(string), ""cBLUE"Ящиков загружено\n"cWH"%d/5", vehicle_load_count[i]);
					UpdateDynamic3DTextLabelText(vehicle_load_text[i], -1, string);

				}
			}
			if(!GetPVarIntNew(playerid,"take_army_box") && vehicle_load[i] == 2)
			{
				if(GetVehicleModel(i) == 433)
				{
					if(vehicle_load_count[i] == 0)
						return SendErr(playerid, "В машине отсутствуют боеприпасы");

					vehicle_load_count[i] --;
					ApplyAnimation(playerid,"CARRY","liftup",1.0,0,1,1,0,0,1);
					SetTimerEx("delay_carry",1000,false,"i",playerid);
					SetPVarIntNew(playerid,"take_army_box", 1);
					SetPlayerAttachedObject(playerid, 0, 3014, 6, -0.076000, 0.070000, -0.192999, -105.200119, 0.100001, -8.799991, 0.521999, 1.00, 0.468999);

					new
						string[40];

					format(string, sizeof(string), ""cBLUE"Ящиков загружено\n"cWH"%d/15", vehicle_load_count[i]);
					UpdateDynamic3DTextLabelText(vehicle_load_text[i], -1, string);

				}
				if(GetVehicleModel(i) == 412 || GetVehicleModel(i) == 529 || GetVehicleModel(i) == 543)
				{
					if(vehicle_load_count[i] == 0)
						return SendErr(playerid, "В машине отсутствуют боеприпасы");

					vehicle_load_count[i] --;
					ApplyAnimation(playerid,"CARRY","liftup",1.0,0,1,1,0,0,1);
					SetTimerEx("delay_carry",1000,false,"i",playerid);
					SetPVarIntNew(playerid,"take_army_box", 1);
					SetPlayerAttachedObject(playerid, 0, 3014, 6, -0.076000, 0.070000, -0.192999, -105.200119, 0.100001, -8.799991, 0.521999, 1.00, 0.468999);

					new
						string[40];

					format(string, sizeof(string), ""cBLUE"Ящиков загружено\n"cWH"%d/5", vehicle_load_count[i]);
					UpdateDynamic3DTextLabelText(vehicle_load_text[i], -1, string);

				}
			}
		}
	}

	if(opcode) FormattedMessage(playerid, -1, "area_enter: %d", areaid);
	if(area_info[areaid][a_exist])
	{
		pTemp[playerid][area_item_id] = area_info[areaid][a_item_id];
		pTemp[playerid][area_type] = area_info[areaid][a_item_type];

		if(!IsPlayerInAnyVehicle(playerid))
		{
			switch(area_info[areaid][a_item_type])
			{

				case FILLING_ENTER: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case HOTEL_ROOM_EXIT: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case GARAGE_ENTER: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case GARAGE_EXIT_P: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case RENT_START_GAME:
				{
					SetPVarIntNew(playerid, "player_in_rent_zone", 1);
					return alt_info_player(playerid, TEXTDRAW_SHOW);
				}
				case B_ENTER: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case B_EXIT: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case HOTEL_ENTER: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case HOTEL_EXIT: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case H_ENTER: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case H_EXIT: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case FLATE_ENTER:
				{
					return alt_info_player(playerid, TEXTDRAW_SHOW);
				}
				case FLATE_EXIT:
				{
					return alt_info_player(playerid, TEXTDRAW_SHOW);
				}
				case HOUSE_SAFE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case HOUSE_WARDROBE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case FLATE_WARDROBE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case FLATE_SAFE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case CASINO_ENTER: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case CASINO_EXIT: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case BUY_CAR_ZONE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case RENT_CAR_ZONE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case BUY_CLOTHES_ZONE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case GARAGE_PANEL_CHANGE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case BUY_ACCESSORIES_ZONE: return alt_info_player(playerid, TEXTDRAW_SHOW);
				case ENTER_QUEST_TEPLICA: return alt_info_player(playerid, TEXTDRAW_SHOW);
			}
		}
		return true;
	}

    if(areaid >= filling_trigger_1_fill[0] && areaid <= filling_trigger_1_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);
			SetPVarIntNew(playerid, "fuel_station_id", 0);

			SetPVarIntNew(playerid, "fuel_station_type", 1);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_1_eng[0] && areaid <= filling_trigger_1_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);
				SetPVarIntNew(playerid, "fuel_station_id", 0);

				SetPVarIntNew(playerid, "fuel_station_id", 1);
				SetPVarIntNew(playerid, "fuel_station_type", 1);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);

			}
		}
		return true;
	}

	else if(areaid >= filling_trigger_2_fill[0] && areaid <= filling_trigger_2_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);
			SetPVarIntNew(playerid, "fuel_station_id", 0);

			SetPVarIntNew(playerid, "fuel_station_id", 1);
			SetPVarIntNew(playerid, "fuel_station_type", 2);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_2_eng[0] && areaid <= filling_trigger_2_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 1);
				SetPVarIntNew(playerid, "fuel_station_type", 2);


				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}


	else if(areaid >= filling_trigger_3_fill[0] && areaid <= filling_trigger_3_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);
			SetPVarIntNew(playerid, "fuel_station_id", 0);

			SetPVarIntNew(playerid, "fuel_station_id", 2);
			SetPVarIntNew(playerid, "fuel_station_type", 2);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_3_eng[0] && areaid <= filling_trigger_3_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 2);
				SetPVarIntNew(playerid, "fuel_station_type", 2);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}

	else if(areaid >= filling_trigger_4_fill[0] && areaid <= filling_trigger_4_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);
			SetPVarIntNew(playerid, "fuel_station_id", 0);

			SetPVarIntNew(playerid, "fuel_station_id", 3);
			SetPVarIntNew(playerid, "fuel_station_type", 2);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_4_eng[0] && areaid <= filling_trigger_4_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 3);
				SetPVarIntNew(playerid, "fuel_station_type", 2);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}

	else if(areaid >= filling_trigger_5_fill[0] && areaid <= filling_trigger_5_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);

			SetPVarIntNew(playerid, "fuel_station_id", 4);
			SetPVarIntNew(playerid, "fuel_station_type", 1);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_5_eng[0] && areaid <= filling_trigger_5_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 4);
				SetPVarIntNew(playerid, "fuel_station_type", 1);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}

	else if(areaid >= filling_trigger_6_fill[0] && areaid <= filling_trigger_6_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);

			SetPVarIntNew(playerid, "fuel_station_id", 5);
			SetPVarIntNew(playerid, "fuel_station_type", 2);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_6_eng[0] && areaid <= filling_trigger_6_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 5);
				SetPVarIntNew(playerid, "fuel_station_type", 2);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}

	else if(areaid >= filling_trigger_7_fill[0] && areaid <= filling_trigger_7_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);
			SetPVarIntNew(playerid, "fuel_station_id", 6);
			SetPVarIntNew(playerid, "fuel_station_type", 1);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_7_eng[0] && areaid <= filling_trigger_7_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 6);
				SetPVarIntNew(playerid, "fuel_station_type", 1);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}

	else if(areaid >= filling_trigger_8_fill[0] && areaid <= filling_trigger_8_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			SetPVarIntNew(playerid, "in_fuel_station", 1);
			SetPVarIntNew(playerid, "fuel_station_id", 7);
			SetPVarIntNew(playerid, "fuel_station_type", 1);

			PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
			PlayerTextDrawShow(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_8_eng[0] && areaid <= filling_trigger_8_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				SetPVarIntNew(playerid, "tesla_charge", 1);
				SetPVarIntNew(playerid, "in_fuel_station", 1);

				SetPVarIntNew(playerid, "fuel_station_id", 7);
				SetPVarIntNew(playerid, "fuel_station_type", 1);

				PlayerTextDrawSetString(playerid, player_info_td[playerid], "brilliantother:notify_player_use_h");
				PlayerTextDrawShow(playerid, player_info_td[playerid]);


			}
		}
		return true;
	}

	/*else if(areaid >= hunter_zone_damage[0] && areaid <= hunter_zone_damage[79])
	{
		new
			Float:health;
		GetPlayerHealth(playerid, health);
		SetPlayerHealth(playerid, health-25.0);

		show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_32", 3500);

		SendInf(playerid, "На Вас напал медведь и вы потеряли здоровье!");
		return true;
	}*/

	else if(areaid == green_house_exit_1 || areaid == green_house_exit_2 || areaid == green_house_exit_3)
		return exit_green_house(playerid);

	else if(areaid == gAreas[arCarMk])
	{
		SendInf(playerid, "Добро пожаловать на Авторынок. Введите {dedcef}/price [Цена]"cWH" для установки таблички");
		return 1;
	}

	else if(areaid == gAreas[arBase])
	{
		PlayerVoen[playerid] = 1;
		return 1;
 	}

	else if(areaid == charity_pickup)
	{
		return charity_menu(playerid);
	}

	else if(areaid >= gAreas[arGreenZone][0] && areaid <= gAreas[arGreenZone][49])
	{
		if(GetPVarIntNew(playerid, "player_in_garage_house") == 1)
			return true;

		WN_showGreenZone(playerid, 1);
		pGreenZone[playerid] = 1;
		return 1;
	}
	//else {
	//    WN_showGreenZone(playerid, 2);
	//
	//	return 1;
	//}

	if(!IsPlayerInAnyVehicle(playerid))
	{

		area_snow_work_enter(playerid, areaid);

		if(areaid == as_pick_car)
			return dialog_autoschool_dialog_lic(playerid, AS_CAR);

		else if(areaid == election_pickup[0] || areaid == election_pickup[1] || areaid == election_pickup[2])
			return election_person_player(playerid);

		else if(areaid == pickup_int_apartament[0])
			return enter_apartament_1(playerid);
		else if(areaid == pickup_int_apartament[1])
			return exit_apartament_1(playerid);
		else if(areaid == pickup_int_apartament[2])
			return show_eleveator_moscow_city(playerid);

		else if(areaid == fire_clothes)
			return fire_work_panel_p(playerid, TEXTDRAW_SHOW);

		else if(areaid == fire_weapon)
			return fire_extinguisher(playerid);

		else if(areaid == arArmyMakegun)
		{
			if(pData[playerid][pFraction] != 8)// Проверка на армию
				return SendErr(playerid, "Сборка оружия доступна только военнослужающим");

			SPD(playerid, DIALOG_ARMY_SELECT_GUN, DIALOG_STYLE_TABLIST_HEADERS,
			!""cBLUE"Армия "cWH"",
			!""cGREY"Оружие\t"cGREY"Патрон\t"cGREY"Боеприпасов\n\
			"cBLUE"Desert Eagle\t"cWH"50\t"cWH"180\n\
			"cBLUE"MP5\t"cWH"150\t"cWH"200\n\
			"cBLUE"ShotGun\t"cWH"50\t"cWH"280\n\
			"cBLUE"Rifle\t"cWH"50\t"cWH"380\n\
			"cBLUE"AK-47\t"cWH"150\t"cWH"300\n\
			"cBLUE"M4\t"cWH"150\t"cWH"300\
			", !"Выбрать", !"Закрыть");
		}

		else if(areaid == pickup_spawn_mafia[0])
			return spawn_mafia_1_vehicle(playerid);
		else if(areaid == pickup_spawn_mafia[1])
			return spawn_mafia_2_vehicle(playerid);
		else if(areaid == pickup_spawn_mafia[2])
			return spawn_mafia_3_vehicle(playerid);


		else if(areaid == actor_seller_no_legal_h)
			return show_sell_hunter_no_legal(playerid);

		else if(areaid == actor_seller_hunter)
			return show_sell_hunter_legal(playerid);


		else if(areaid == mechanic_vehicle_rent[0] || areaid == mechanic_vehicle_rent[1] || areaid == mechanic_vehicle_rent[2])
		{
			return show_dialog_rent_mech_car(playerid);
		}


		else if(areaid == green_house_pickup_1 || areaid == green_house_pickup_2 || areaid == green_house_pickup_3)
			return show_player_green_house_st(playerid, TEXTDRAW_SHOW);


		else if(areaid == MafiaStoreArea[0])
		{
			if(pData[playerid][pFraction] != 13)
				return SendErr(playerid, "У вас нет доступа к складу ОПГ");
			ShowDialogMafiaWH(playerid, 0);
		}
		else if(areaid == MafiaStoreArea[1])
		{
			if(pData[playerid][pFraction] != 14)
				return SendErr(playerid, "У вас нет доступа к складу ОПГ");
			ShowDialogMafiaWH(playerid, 1);
		}
		else if(areaid == MafiaStoreArea[2])
		{
			if(pData[playerid][pFraction] != 15)
				return SendErr(playerid, "У вас нет доступа к складу ОПГ");
			ShowDialogMafiaWH(playerid, 2);
		}

		else if(areaid == arArmyKitchen)
		{
			if(pData[playerid][pFraction] != 8)// Проверка на армию
				return SendErr(playerid, "Армейская столовая доступна только военнослужающим");

			SPD(playerid, DIALOG_ARMY_KITCHEN, DIALOG_STYLE_LIST,
			!""cBLUE"Армейская столовая",
			""cBLUE"- "cWH"Перловая каша\n\
			"cBLUE"- "cWH"Овсяная каша\n\
			"cBLUE"- "cWH"Суп\n\
			"cBLUE"- "cWH"Борщ\n\
			"cBLUE"- "cWH"Картофельное пюре с котлетой\n\
			"cBLUE"- "cWH"Макароны с сосиской\n\
			"cBLUE"- "cWH"Компот из сухофруктов", !"Выбрать", !"Закрыть");
		}

		else if(areaid == army_area)
		{
			if(GetPVarIntNew(playerid, "take_army_box"))
			{
				RemovePlayerAttachedObject(playerid, 0);
				ApplyAnimation(playerid,"CARRY","liftup",1.0,0,1,1,0,0,1);
				DeletePVarNew(playerid, "take_army_box");

				army_info[army_patrons] += 500;
				army_info[army_guns] += 500;

				update_text_army();
				save_army_warehouse();
				return 1;
			}
			else if(pData[playerid][pFraction] == 8)
				return SendErr(playerid, "Недоступно");
			else if(IsAMafia(playerid))
			{
				take_army_patrons(playerid);
			}
			else
				return 1;
		}

		else if(areaid == realtor_agency_pickup)
			return open_menu_realtor_buisnes(playerid);

		else if(areaid == pickup_mafia_ext[0])
		{
			return enter_mafia_apart_1(playerid);
		}
		else if(areaid == pickup_mafia_ext[1])
		{
			return enter_mafia_apart_2(playerid);
		}
		else if(areaid == pickup_mafia_ext[2])
		{
			return enter_mafia_apart_3(playerid);
		}

		else if(areaid == pickup_mafia_ext[3])
		{
			return exit_mafia_apart_1(playerid);
		}
		else if(areaid == pickup_mafia_ext[4])
		{
			return exit_mafia_apart_2(playerid);
		}
		else if(areaid == pickup_mafia_ext[5])
		{
			return exit_mafia_apart_3(playerid);
		}

		else if(areaid == traning_start_player_area[0])
		{
			SetPVarIntNew(playerid, "traning_position_spawn", 1);
			return show_message_traning_player(playerid);
		}
		else if(areaid == traning_start_player_area[1])
		{
			SetPVarIntNew(playerid, "traning_position_spawn", 2);
			return show_message_traning_player(playerid);
		}
		else if(areaid == traning_start_player_area[2])
		{
			SetPVarIntNew(playerid, "traning_position_spawn", 3);
			return show_message_traning_player(playerid);
		}
		else if(areaid == traning_start_player_area[3])
		{
			SetPVarIntNew(playerid, "traning_position_spawn", 4);
			return show_message_traning_player(playerid);
		}
		else if(areaid == traning_start_player_area[4])
		{
			SetPVarIntNew(playerid, "traning_position_spawn", 5);
			return show_message_traning_player(playerid);
		}

		else if(areaid == pickup_start_job_hospital)
			return take_medick_element(playerid);

		else if(areaid == number_gai_free)
		{
            return start_new_number_get(playerid);
		    /*SPD(playerid, 7373, DIALOG_STYLE_MSGBOX,
				!"Оформление гос номеров на транспнорт",
				!""cWH"Вы уверены что желаете оформить гос номера на Ваше транспортное средство?\n\
				"cWH"Стоимость оформления государственных номеров: {66CC33}5000 рублей",
				"Далее", "Отмена");*/

            //SendCustomRPC(playerid, 0x41, GetPlayerMoneyEx(playerid));
			//return true;
		}

		else if(areaid == arRegistrInRace)
		{
			if(GetPVarIntNew(playerid, "RegInRace"))
				return SendErr(playerid, "Вы уже участвуете в гонке");

			if(!pData[playerid][pLicenses][LIC_DRIVING])
				return SendErr(playerid, "У Вас нет лицензии на авто");

			if(race_info[race_status] != 1)
				return SendErr(playerid, "Регистрация на гонку сейчас закрыта");

			if(race_info[race_count] == race_info[race_maxcount])
				return SendErr(playerid, "Все места на гонку заняты");


			return gui_interface_race_start(playerid, TEXTDRAW_SHOW);

		}
		else if(areaid == arSnowRaceRegister)
		{
			if(GetPVarIntNew(playerid, "reg_in_snow_race"))
				return SendErr(playerid, "Вы уже участвуете в гонке на снегодоходах!");

			if(!pData[playerid][pLicenses][LIC_DRIVING])
				return SendErr(playerid, "У Вас нет лицензии на авто");

			if(snow_race_info[snow_status] != 1)
				return SendErr(playerid, "Регистрация на гонку сейчас закрыта");

			if(snow_race_info[snow_count] == snow_race_info[snow_maxcount])
				return SendErr(playerid, "Все места на гонку заняты");


			return gui_interface_race_snow_start(playerid, TEXTDRAW_SHOW);
		}

		/*else if(areaid == pickup_in_newyear[0])
			return enter_ded_moroz_int(playerid);
		else if(areaid == pickup_in_newyear[1])
			return exit_ded_moroz_int(playerid);
		else if(areaid == pickup_in_newyear[2])
			return enter_kafe_neywear(playerid);
		else if(areaid == pickup_in_newyear[3])
			return exit_kafe_neywear(playerid);	*/


		else if(areaid == green_house_pickup)
			return show_menu_start_teplica(playerid, TEXTDRAW_SHOW);

		else if(areaid == newyear_rent_katok)
			return rent_katok_menus(playerid, TEXTDRAW_SHOW);

		else if(areaid == arClubBar)
		{

			SPD(playerid, DIALOG_CLUB_BUY_MENU_BAR, DIALOG_STYLE_TABLIST_HEADERS,
			!""cBLUE"Бар",
			!""cGREY"Название\t"cGREY"Цена\n\
			"cWH"Виски-кола\t"cGR"340 рублей\n\
			"cWH"Водка\t"cGR"150 рублей\n\
			"cWH"Пина Колада\t"cGR"350 рублей\n\
			"cWH"Мохито\t"cGR"380 рублей\n\
			"cWH"Кровавая Мэри\t"cGR"320 рублей\n\
			"cWH"Текила Бум\t"cGR"300 рублей", !"Купить", !"Отмена");
		}

		else if(areaid == area_cafe_newyear)
		{
			return select_menu_cafe_newyear(playerid);
		}

		else if(areaid == newyear_box)
			return menu_select_prize_newyear(playerid, TEXTDRAW_SHOW);

		else if(areaid == newyear_quest_ivan)
			return dialog_ivan_quest_newyear(playerid);

		else if(areaid == area_quest_npc[0])
		{
			InterpolateCameraPos(playerid, 1826.073608, 2518.645019, 16.682556, 1823.953857, 2515.229248, 16.394119, 1500);
			InterpolateCameraLookAt(playerid, 1825.205810, 2513.758056, 16.078477, 1826.905883, 2511.214599, 15.984715, 1500);
			show_dialog_quest_manual(playerid);
		}
		else if(areaid == area_quest_npc[1])
		{
			InterpolateCameraPos(playerid, 2741.020507, -2447.592773, 22.616384, 2746.396728, -2446.956787, 22.577634, 1500);
			InterpolateCameraLookAt(playerid, 2744.693847, -2444.237304, 22.119144, 2744.072021, -2442.559814, 22.063941, 1500);
			show_dialog_quest_manual(playerid);
		}
		else if(areaid == area_quest_npc[2])
		{
			InterpolateCameraPos(playerid, -487.150512, 913.366943, 13.303121, -482.404876, 913.134216, 12.920878, 1500);
			InterpolateCameraLookAt(playerid, -482.749420, 915.518188, 12.301968, -482.092071, 918.072753, 12.204789, 1500);
			show_dialog_quest_manual(playerid);
		}
		else if(areaid == area_quest_npc[3])
		{
			InterpolateCameraPos(playerid, -2461.413330, 2840.408935, 38.815898, -2465.021240, 2840.051269, 38.902103, 1500);
			InterpolateCameraLookAt(playerid, -2466.248291, 2841.671142, 38.643108, -2465.217529, 2845.043945, 38.712787, 1500);
			show_dialog_quest_manual(playerid);
		}
		else if(areaid == area_quest_npc[4])
		{
			InterpolateCameraPos(playerid, 2500.436523, -2131.290771, 24.237628, 2500.650390, -2134.509521, 24.062538, 1500);
			InterpolateCameraLookAt(playerid, 2503.002441, -2135.546386, 23.685569, 2505.046386, -2136.818115, 23.474882, 1500);
			show_dialog_quest_manual(playerid);
		}
		else if(areaid == area_quest_npc[4])
		{
			InterpolateCameraPos(playerid, -47.086795, 917.025390, 12.631688, -41.098640, 916.386901, 12.595339, 1500);
			InterpolateCameraLookAt(playerid, -42.527366, 915.000732, 12.296495, -43.721305, 912.134826, 12.392251, 1500);
			show_dialog_quest_manual(playerid);
		}

		else if(areaid == area_buy_weapon_lic)
		{
			if(pData[playerid][pLicenses][LIC_WEAP])
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendErr(playerid, "У Вас уже имеется лицензия на оружия");
			}

			new
				message[256];

			format(message, sizeof(message), "\nВы действительно хотите купить лицензию\n\
				на оружие за "cGR"%d рублей"cWH"?", WEAP_LIC_PRICE);

			SPD(playerid, DIALOG_BUY_WEAP_LIC, 0, !""cBLUE"МВД | "cWH"Покупка лицензии на оружие", message, !"Купить", "Отмена");
		}

		else if(areaid == pickup_int_army[0])
			return enter_army_1(playerid);
		else if(areaid == pickup_int_army[1])
			return exit_army_1(playerid);

		else if(areaid == pickup_int_army[2])
			return enter_army_2(playerid);
		else if(areaid == pickup_int_army[3])
			return exit_army_2(playerid);

		else if(areaid == pickup_int_army[4])
			return enter_army_3(playerid);
		else if(areaid == pickup_int_army[5])
			return exit_army_3(playerid);

		else if(areaid == pickup_spawn_car_army_1)
			return spawn_army_2_vehicle(playerid);
		else if(areaid == pickup_spawn_car_army_2)
			return spawn_army_3_vehicle(playerid);
		else if(areaid == pickup_spawn_car_army_3)
			return spawn_army_1_vehicle(playerid);


		else if(areaid == pickup_int_zavod[0])
			return enter_zavod(playerid);
		else if(areaid == pickup_int_zavod[1])
			return exit_zavod(playerid);

		else if(areaid == pickup_spawn_car_hospital_1)
		{
			if(pData[playerid][pFraction] != 2 && pData[playerid][pSubfraction] != 1)
			{
				SendErr(playerid, "Доступно только сотрудникам Больницы г. Арзамас!");
				return true;
			}
			return spawn_hospital_1_vehicle(playerid);
		}
		else if(areaid == pickup_spawn_car_hospital_2)
		{
			if(pData[playerid][pFraction] != 2 && pData[playerid][pSubfraction] != 2)
			{
				SendErr(playerid, "Доступно только сотрудникам Больницы г. Южный!");
				return true;
			}
			return spawn_hospital_2_vehicle(playerid);
		}
		else if(areaid == pickup_spawn_car_news_1)
		{
			if(pData[playerid][pFraction] != 10)
			{
				SendErr(playerid, "Вы не работаете в Радиоцентре Ритм!");
				return true;
			}
			return spawn_news_1_vehicle(playerid);
		}

		else if(areaid == pickup_spawn_car_news_2)
		{
			if(pData[playerid][pFraction] != 10 || pData[playerid][pSubfraction] == 0)
			{
				SendErr(playerid,"Вы не являетесь сотрудником СМИ!");
				return true;
			}
			return spawn_news_2_vehicle(playerid);
		}

		else if(areaid == pickup_int_news[0])
			return enter_news_1(playerid);
		else if(areaid == pickup_int_news[1])
			return exit_news_1(playerid);

		else if(areaid == pickup_int_news[2])
			return enter_news_2(playerid);
		else if(areaid == pickup_int_news[3])
			return exit_news_2(playerid);

		else if(areaid == pickup_int_federal[0])
			return enter_federal_arzamas(playerid);

		else if(areaid == pickup_int_federal[1])
			return exit_federal_arzamas(playerid);

		else if(areaid == pickup_int_federal[2])
			return exit_federal_arzamas_2(playerid);

		else if(areaid == pickup_int_federal[3])
			return enter_federal_arzamas_2(playerid);

		else if(areaid == pickup_spawn_car_gov[0] || areaid == pickup_spawn_car_gov[1])
			return spawn_gov_vehicle(playerid);

		else if(areaid == pickup_spawn_car_federal)
		{
			if(pData[playerid][pFraction] != 12)
			{
				SendErr(playerid, "Доступно только ФСБ!");
				return true;
			}
			return spawn_federal_vehicle(playerid);
		}

		else if(areaid == pickup_spawn_car_police[0] || areaid == pickup_spawn_car_police[1])
		{

			if(!IsACop(playerid))
			{
				SendErr(playerid, "Доступно только полицейским!");
				return true;
			}
			return spawn_police_vehicle(playerid);
		}

		else if(areaid == area_taxi_work_yandex)
			return show_info_taxi_company_work(playerid, TAXI_COMPANY_YANDEX);

		else if(areaid == area_taxi_work_uber)
			return show_info_taxi_company_work(playerid, TAXI_COMPANY_UBER);

		else if(areaid == area_taxi_work_city)
			return show_info_taxi_company_work(playerid, TAXI_COMPANY_CITY);

		else if(areaid == autosalon_area_info_2[0])
			return info_car_autosalon_luxe(playerid, 1);
		else if(areaid == autosalon_area_info_2[1])
			return info_car_autosalon_luxe(playerid, 2);
		else if(areaid == autosalon_area_info_2[2])
			return info_car_autosalon_luxe(playerid, 3);
		else if(areaid == autosalon_area_info_2[3])
			return info_car_autosalon_luxe(playerid, 8);
		else if(areaid == autosalon_area_info_2[4])
			return info_car_autosalon_luxe(playerid, 4);
		else if(areaid == autosalon_area_info_2[5])
			return info_car_autosalon_luxe(playerid, 5);
		else if(areaid == autosalon_area_info_2[6])
			return info_car_autosalon_luxe(playerid, 6);
		else if(areaid == autosalon_area_info_2[7])
			return info_car_autosalon_luxe(playerid, 7);

		else if(areaid == autosalon_area_info_1[0])
			return info_car_autosalon_middle(playerid, 1);
		else if(areaid == autosalon_area_info_1[1])
			return info_car_autosalon_middle(playerid, 2);
		else if(areaid == autosalon_area_info_1[2])
			return info_car_autosalon_middle(playerid, 4);
		else if(areaid == autosalon_area_info_1[3])
			return info_car_autosalon_middle(playerid, 3);

		else if(areaid == bank_area_general)
		{
			SPD(playerid, dBankMenu, 2, ""cBLUE"Банк", \
			""cBLUE"1."cWH" Мои счета\n\
			"cBLUE"2."cWH" Открыть новый счёт", !"Принять", !"Отмена");
			return true;
		}

		else if(areaid == trucker_skin_pickup[0])
		{
			return show_info_start_job(playerid, TRUCKER_BASE_STATION_2);
		}
		else if(areaid == trucker_skin_pickup[1])
		{
			return show_info_start_job(playerid, TRUCKER_BASE_STATION_1);
		}
		else if(areaid == trucker_skin_pickup[2])
		{
			return show_info_start_job(playerid, TRUCKER_BASE_STATION_3);
		}


		else if(areaid == pickup_int_pd_2[0])
			return enter_police_dep_2_1(playerid);

		else if(areaid == pickup_int_pd_2[1])
			return exit_police_dep_2_22(playerid);

		else if(areaid == pickup_int_pd_2[2])
			return enter_police_dep_2_2(playerid);

		else if(areaid == pickup_int_pd_2[3])
			return enter_police_dep_3_2(playerid);

		else if(areaid == pickup_int_pd_2[4])
			return exit_police_dep_2_2(playerid);

		else if(areaid == pickup_int_pd_2[5])
			return exit_police_dep_3_2(playerid);



		else if(areaid == pickup_int_pd[0])
			return enter_police_dep(playerid);

		else if(areaid == pickup_int_pd[1])
			return exit_police_dep(playerid);

		else if(areaid == pickup_int_pd[2])
			return enter_police_dep_2(playerid);

		else if(areaid == pickup_int_pd[3])
			return enter_police_dep_3(playerid);

		else if(areaid == pickup_int_pd[4])
			return exit_police_dep_2(playerid);

		else if(areaid == pickup_int_pd[5])
			return exit_police_dep_3(playerid);


		else if(areaid == pickup_int_meria[0])
			return enter_meria_arzamas(playerid);

		else if(areaid == pickup_int_meria[1])
			return exit_meria_arzamas(playerid);


		else if(areaid == pickup_int_bank_1[0])
			return enter_bank(playerid, INTERIOR_BANK_1);
		else if(areaid == pickup_int_bank_2[0])
			return enter_bank(playerid, INTERIOR_BANK_2);
		else if(areaid == pickup_int_bank_3[0])
			return enter_bank(playerid, INTERIOR_BANK_3);

		else if(areaid == pickup_int_bank_1[1])
			return exit_bank(playerid, INTERIOR_BANK_1);
		else if(areaid == pickup_int_bank_2[1])
			return exit_bank(playerid, INTERIOR_BANK_2);
		else if(areaid == pickup_int_bank_3[1])
			return exit_bank(playerid, INTERIOR_BANK_3);

		else if(areaid == pickup_int_school[0])
			return enter_autoschool(playerid);
		else if(areaid == pickup_int_school[1])
			return exit_autoschool(playerid);

		else if(areaid == pickup_int_voenkomat[0])
			return enter_voenkomat(playerid);
		else if(areaid == pickup_int_voenkomat[1])
			return exit_voenkomat(playerid);

		else if(areaid == wood_job_invite_are)
			return dialog_wood_job(playerid);

		else if (areaid >= wood_postion_area[0] && areaid <= wood_postion_area[sizeof wood_postion_area - 1])
			return wood_select_player(playerid);

		else if (areaid == newyear_area_ice_1[0] || areaid == newyear_area_ice_1[1] || areaid == newyear_area_ice_1[2]
		|| areaid == newyear_area_ice_1[3] || areaid == newyear_area_ice_1[4] || areaid == newyear_area_ice_1[5] || areaid == newyear_area_ice_1[6]
		|| areaid == newyear_area_ice_1[7] || areaid == newyear_area_ice_1[8] || areaid == newyear_area_ice_1[9])
			return active_animation_player_katok(playerid);

		else if (areaid == newyear_area_ice_2[0] || areaid == newyear_area_ice_2[1] || areaid == newyear_area_ice_2[2]
		|| areaid == newyear_area_ice_2[3] || areaid == newyear_area_ice_2[4] || areaid == newyear_area_ice_2[5] || areaid == newyear_area_ice_2[6]
		|| areaid == newyear_area_ice_2[7] || areaid == newyear_area_ice_2[8] || areaid == newyear_area_ice_2[9])
			return active_animation_player_katok(playerid);

		else if (areaid == newyear_area_ice_3[0] || areaid == newyear_area_ice_3[1] || areaid == newyear_area_ice_3[2]
		|| areaid == newyear_area_ice_3[3] || areaid == newyear_area_ice_3[4] || areaid == newyear_area_ice_3[5] || areaid == newyear_area_ice_3[6]
		|| areaid == newyear_area_ice_3[7] || areaid == newyear_area_ice_3[8] || areaid == newyear_area_ice_3[9] || areaid == newyear_area_ice_3[10]
		|| areaid == newyear_area_ice_3[11] || areaid == newyear_area_ice_3[12] || areaid == newyear_area_ice_3[13] || areaid == newyear_area_ice_3[14]
		|| areaid == newyear_area_ice_3[15] || areaid == newyear_area_ice_3[16] || areaid == newyear_area_ice_3[17] || areaid == newyear_area_ice_3[19]
		|| areaid == newyear_area_ice_3[20] || areaid == newyear_area_ice_3[21] || areaid == newyear_area_ice_3[22] || areaid == newyear_area_ice_3[23]
		|| areaid == newyear_area_ice_3[24])
			return active_animation_player_katok(playerid);

		else if (areaid == newyear_area_ice_4[0] || areaid == newyear_area_ice_4[1] || areaid == newyear_area_ice_4[2]
		|| areaid == newyear_area_ice_4[3] || areaid == newyear_area_ice_4[4] || areaid == newyear_area_ice_4[5] || areaid == newyear_area_ice_4[6]
		|| areaid == newyear_area_ice_4[7] || areaid == newyear_area_ice_4[8] || areaid == newyear_area_ice_4[9] || areaid == newyear_area_ice_4[10] || areaid == newyear_area_ice_4[11])
			return active_animation_player_katok(playerid);


		else if(areaid >= area_factory_mith[0] && areaid <= area_factory_mith[12])
		{
			if(!GetPVarIntNew(playerid, "factoryjob"))
				return true;

			if(GetPVarIntNew(playerid, "active_sklad_factory"))
				return true;


			change_work_factory_click_mith(playerid);
			return generate_work_factory_mith(playerid);
		}
		else if(areaid >= area_factory_furniture[0] && areaid <= area_factory_furniture[15])
		{
			if(!GetPVarIntNew(playerid, "factoryjob"))
				return true;

			if(GetPVarIntNew(playerid, "active_sklad_factory"))
				return true;


			change_work_factory_click(playerid);
			return generate_work_factory_furniture(playerid);
		}

		else if(areaid == area_factory_mith_sklad || areaid == area_factory_mith_sklad2)
			return unload_factory_job_mith(playerid);

		else if(areaid == area_factory_furniture_sklad || areaid == area_factory_furniture_sklad2)
			return unload_factory_job_furniture(playerid);

		else if(areaid == area_factory_clothes)
			return dialog_factory_job(playerid);

		else if(areaid == wood_unloading_job_area)
			return samwill_unloadloadig_wood(playerid);

		else if(areaid == as_pick_car_rent)
			return create_school_exam_veh(playerid);

		else if(areaid == as_pick_boat)
			return dialog_autoschool_dialog_lic(playerid, AS_BOAT);

		else if(areaid == as_pick_fly)
			return dialog_autoschool_dialog_lic(playerid, AS_FLY);

		else if(areaid >= as_tables[0] && areaid <= as_tables[9])
			return dialog_autoschool_exam(playerid);

		else if(areaid >= fish_position_player[0] && areaid <= fish_position_player[4])
			return fish_panel_general_panel(playerid, TEXTDRAW_SHOW);

		else if(areaid == as_pick_info)
			return show_select_autoschool_exam(playerid);

		else if(areaid == actor_fish_general)
			return show_sell_fish_player(playerid);

		else if(areaid == bus_trigger)
			return select_bus_work_route(playerid);

		else if(areaid == area_enter_miner_1[0])
		{
			SetPVarIntNew(playerid, "miner_enter", 1);
			return enter_area_miner_1(playerid);
		}

		else if(areaid == area_enter_miner_1[1])
		{
			SetPVarIntNew(playerid, "miner_enter_type_1", 2);
			SetPVarIntNew(playerid, "miner_enter", 1);
			return enter_area_miner_1(playerid);
		}

		else if(areaid == area_exit_miner_1[0])
		{
			if(GetPVarIntNew(playerid, "miner_enter") == 1)
			{
				return exit_miner_tonnel_1(playerid);
			}
			else
			{
				return exit_miner_tonnel_2(playerid);
			}
		}

		else if(areaid == area_exit_miner_1[1])
		{
			SetPVarIntNew(playerid, "miner_enter_type_1", 2);

			if(GetPVarIntNew(playerid, "miner_enter") == 1)
			{
				return exit_miner_tonnel_1(playerid);
			}
			else
			{
				return exit_miner_tonnel_2(playerid);
			}
		}

		else if(areaid == area_enter_miner_2[0])
		{
			SetPVarIntNew(playerid, "miner_enter", 2);
			SetPVarIntNew(playerid, "miner_enter_type_1", 2);
			return enter_area_miner_2(playerid);
		}

		else if(areaid == area_enter_miner_2[1])
		{
			SetPVarIntNew(playerid, "miner_enter", 2);
			SetPVarIntNew(playerid, "miner_enter_type_1", 2);
			return enter_area_miner_2(playerid);
		}

		else if(areaid >= area_lift_load_miner[0] && areaid <= area_lift_load_miner[2])
			return next_stap_miner_konveer(playerid);

		else if(areaid >= area_konveer_miner[0] && areaid <= area_konveer_miner[12])
			return start_player_miner_konveer(playerid);

		else if(areaid >= area_sklad_miner_street[0] && areaid <= area_sklad_miner_street[5])
			return enter_pickup_sklad(playerid);

		else if(areaid == area_clothes_pickup_miner)
		{
			return dialog_miner_job(playerid);
		}

		else if(areaid >= area_miner_start[0] && areaid <= area_miner_start[8])
			return start_player_miner_mining(playerid);

		else if(areaid >= area_complect_miner[0] && areaid <= area_complect_miner[3])
			return start_player_miner_sort(playerid);



		else if(areaid >= hotel_lift[0] && areaid <= hotel_lift[3])
		{
			ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
			return get_level_hotel_lift(playerid);
		}

		else if(areaid == hotel_reception)
		{
			new
				h = GetPVarIntNew(playerid, "hotel_number_vw");

			return menu_reseption(playerid, h);
		}

		else if(areaid == family_pickup)
			return info_family_pickup(playerid);

		else if(areaid == trucker_station[0][trucker_base_pickup])
			return show_trucker_station_menu(playerid, 0);

		else if(areaid == trucker_station[1][trucker_base_pickup])
			return show_trucker_station_menu(playerid, 1);

		else if(areaid == trucker_station[2][trucker_base_pickup])
			return show_trucker_station_menu(playerid, 2);


		else if(areaid == taxi_company[TAXI_COMPANY_YANDEX][taxi_company_pickup])
			return show_taxi_station_menu(playerid, TAXI_COMPANY_YANDEX);
		else if(areaid == taxi_company[TAXI_COMPANY_UBER][taxi_company_pickup])
			return show_taxi_station_menu(playerid, TAXI_COMPANY_UBER);
		else if(areaid == taxi_company[TAXI_COMPANY_CITY][taxi_company_pickup])
			return show_taxi_station_menu(playerid, TAXI_COMPANY_CITY);

		else if(areaid == mechanic[0][mechanic_base_pickup])
			return show_mechanic_station_menu(playerid, 0);

		else if(areaid == mechanic[1][mechanic_base_pickup])
			return show_mechanic_station_menu(playerid, 1);

		else if(areaid == mechanic[2][mechanic_base_pickup])
			return show_mechanic_station_menu(playerid, 2);

		else if(areaid == mechanic_skin_pickup[0])
		{
			if(pData[playerid][pMech] != 0)
				return SendErr(playerid, "Вы не являетесь механиком на данном СТО");


			return job_mechanic_station(playerid, 0);
		}
		else if(areaid == mechanic_skin_pickup[1])
		{
			if(pData[playerid][pMech] != 1)
				return SendErr(playerid, "Вы не являетесь механиком на данном СТО");

			return job_mechanic_station(playerid, 1);
		}

		else if(areaid == mechanic_skin_pickup[2])
		{
			if(pData[playerid][pMech] != 2)
				return SendErr(playerid, "Вы не являетесь механиком на данном СТО");

			return job_mechanic_station(playerid, 2);
		}

		else if(areaid == gAmmoArea[0])
		{
			if(GetPlayerState(playerid) != 1)
				return 1;

			if(!(pData[playerid][pLicenses][LIC_WEAP]))
				return SendErr(playerid, "У Вас нет лицензии на оружие!");

			show_ammo_menu_magazin(playerid, TEXTDRAW_SHOW);
			return 1;
		}

		else if(areaid == magazing_univermag)
		{
			new
				str[1500];

			if(strlen(str) < 1) strcat(str, ""cGREY"Товар\t"cGREY"Стоимость\n");

			for(new x=0; x < SHOP_OBJECTS; x++)
			{
				format(str,sizeof(str),"%s"cBLUE"%d. "cWH"%s\t"cGR"%d рублей\n",str, x+1, gShopObject[x],gShopPrice[x]);

			}
			SPD(playerid,dShop, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Универмаг:",str,"Купить","Выход");

		}
		else if(areaid == fastfood_magazing[0] || areaid == fastfood_magazing[1] || areaid == fastfood_magazing[2] || areaid == fastfood_magazing[3] ||
		areaid == fastfood_magazing[4])
		{


			//new id = pTemp[playerid][pSelectedBusinessID];

			if(GetPlayerVirtualWorld(playerid) == 20)
			{
				format(String512, sizeof(String512), "\
					"cGREY"Продукт\t"cGREY"Стоимость\n\
					"cBLUE"1. "cWH"Гамбургер\t"cGR"%d рублей\n\
					"cBLUE"2. "cWH"Салат\t"cGR"%d рублей\n\
					"cBLUE"3. "cWH"Пицца\t"cGR"%d рублей\n\
					"cBLUE"4. "cWH"Вода\t"cGR"%d рублей\n\
					"cBLUE"5. "cWH"Доширак\t"cGR"%d рублей", BUISNESS_FASTFOOD_1_PRICE, BUISNESS_FASTFOOD_2_PRICE,
					BUISNESS_FASTFOOD_3_PRICE, BUISNESS_FASTFOOD_4_PRICE, 19);
				SPD(playerid, DIALOG_BUY_FASTFOOD_PRODUCT, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Закусочная", String512, !"Выбрать", !"Закрыть");

			}
			else
			{
				SPD(playerid,dRestoran,2, !""cBLUE"Ресторан:",""cBLUE"1. "cWH"Напитки\n"cBLUE"2. "cWH"Салаты\n"cBLUE"3. "cWH"Горячие блюда\n"cBLUE"4. "cWH"Десерты", !"Выбрать", !"Выход");
			}
		}

		else if(areaid == bar_pickup)
		{
			//new
				//id = pTemp[playerid][pSelectedBusinessID];

		}

		else if(areaid == gAreas[arGunFraction][1])
		{
			if(pData[playerid][pAdmin] > 1 && pData[playerid][pAdmin] < 7) return SendErr(playerid, "У Вас нет доступа к служебному инвентарю");
			if(pData[playerid][pFraction] == 11 && pData[playerid][pRank] >= 2 && pData[playerid][pRank] <= 3)
			SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n\
			"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
			else return SendErr(playerid, "У Вас нет доступа к служебному инвентарю");
		}
		else if(pData[playerid][pFraction] == 9 && areaid == gAreas[arGunFraction][2])
		{
			if(pData[playerid][pAdmin] > 1 && pData[playerid][pAdmin] < 7)
				return SendErr(playerid, "У Вас нет доступа к служебному инвентарю");

			SPD(playerid, dDutyGunFbi, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Винтовка M4\n"cBLUE"7. "cWH"Дымовые шашки (3 шт.)\n"cBLUE"8. "cWH"Щит", "Принять", "Отмена");
			//ShowGuncMenu2(playerid);
	 		return 1;
		}


		else if(areaid == gAreas[arGunFraction][3])
		{
			if(pData[playerid][pFraction] != 12) return SendErr(playerid, "У Вас нет доступа к служебному инвентарю");
			if(pData[playerid][pAdmin] > 1 && pData[playerid][pAdmin] < 6)return SendErr(playerid, "У Вас нет доступа к служебному инвентарю");
			SPD(playerid, dDutyGunFbi, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Винтовка M4\n"cBLUE"7. "cWH"Дымовые шашки (3 шт.)\n"cBLUE"8. "cWH"Щит", "Принять", "Отмена");
			return 1;
		}
		else if(areaid == gAreas[arGunFraction][4])
		{
			if(pData[playerid][pFraction] != 11 || pData[playerid][pSubfraction] > 0) return SendErr(playerid, "У Вас нет доступа к этому");
			if(pData[playerid][pRank] != 11 && pData[playerid][pRank] != 9) return SendErr(playerid, "У Вас нет доступа к этому");
			new Float:AHeal;
		 	GetPlayerArmour(playerid , AHeal);
		 	if(AHeal > 1) {
				SetPlayerArmourEx(playerid, 0.0);
				SendInf(playerid, "Вы сняли бронежилет");
			}
			else
			{
				SetPlayerArmourEx(playerid, 100.0);
				SendInf(playerid, "Вы надели бронежилет");
			}
			return 1;
		}

	 	else if(areaid == gAreas[arMaskirovka])
		{
			PC_EmulateCommand(playerid, "/maskirovka");
			return 1;
		}
		else if(areaid == gAreas[arBronArmy])
		{
			if(pData[playerid][pFraction] != 8) return SendErr(playerid, "Недоступно");
			SetPlayerArmourEx(playerid, 100);
			SendInf(playerid, "Вы надели бронежилет");
			return 1;
		}

		else if(areaid == gAreas[arNoobHelp][0] || areaid == gAreas[arNoobHelp][1] || areaid == gAreas[arNoobHelp][2] || areaid == gAreas[arNoobHelp][3]
		|| areaid == gAreas[arNoobHelp][4] || areaid == gAreas[arNoobHelp][5])
		{
			return show_dialog_faq(playerid);
		}


		else if (areaid == gAreas[arSkinVoen])
		{
			if(GetPlayerState(playerid) == 1) {
			if(pData[playerid][pFraction] != 0) return SendErr(playerid, "Вы состоите в организации.");
			if(GetPVarIntNew(playerid,"priskin") != 0)
			{
			return SPD(playerid, dVskinMenu, 0, ""cBLUE"Военкомат", "\n\n"cWH"Вы хотите снять форму призывника?\n\n", "Да", "Отмена");
	  		}
	  		else {
			return SPD(playerid, dVskinMenu, 0, ""cBLUE"Военкомат", "\n\n"cWH"Вы хотите получить форму призывника?\n\n", "Да", "Отмена");
			}
			}
			return 1;
		}


		else if(areaid == gAreas[arGAI])
		{


			format(String1024, sizeof(String1024), ""cBLUE"1."cWH" Выдача номеров для личного транспорта");
			SPD(playerid,dGaiMenu,2,""cBLUE"Получение номеров",String1024,"Выбрать","Отмена");

			return 1;
		}


		else if(areaid == gAreas[arSvadba])
		{
			return SPD(playerid, dSvadbaMenu, DIALOG_STYLE_LIST, ""cBLUE"Аренда свадебных костюмов", ""cWH""cBLUE"1. "cWH"Костюм жениха \t{35D3A3}P5000\n"cWH""cBLUE"2. "cWH"Платье невесты \t{35D3A3}P5000\n"cWH""cBLUE"3. "cWH"Костюм священика \t{35D3A3}P5000", "Купить", "Отмена");
		}

		else if(areaid == hospital_2_enter_pickup)
			return enter_hospital_2_general(playerid);

		else if(areaid == hospital_2_exit_pickup)
			return exit_hospital_2_general(playerid);

		else if(areaid == hospital_advert)
		{
			SPD(playerid,dAdvInf2,2,""cBLUE"Лучшие сотрудники больниц",""cBLUE"1. "cWH"Больница г.Южный\n"cBLUE"2. "cWH"Больница г.Арзамас\n"cBLUE"3. "cWH"Больница п.Батырево\n{99CCFF}-  "cWH"Общий рейтинг","Далее","Закрыть");
			return 1;
		}
		else if(areaid == hospital_exit_pickup)
		{
			exit_hospital_pickup(playerid);
			return true;
		}
		else if(areaid == hospital_enter_pickup)
		{
			enter_hospital_pickup(playerid);
			return true;
		}

		else if(areaid == hospital_enter_pickup_2)
		{
			enter_hospital_pickup_2(playerid);
			return true;
		}
		else if(areaid == hospital_exit_pickup_2)
		{
			exit_hospital_pickup_2(playerid);
			return true;
		}

		else if(areaid == hospital_enter_pickup_3)
		{
			enter_hospital_pickup_krisha(playerid);
			return true;
		}
		else if(areaid == hospital_exit_pickup_3)
		{
			exit_hospital_pickup_krisha(playerid);
			return true;
		}
		else if(areaid == bank_area_biz)
		{
			return show_bank_pay_property(playerid);
		}

		else if(areaid == gAreas[ arAdvTop ])
		{
			SPD(playerid,dAdvInf,2,""cBLUE"Лучшие сотрудники",""cBLUE"1. "cWH"Радиоцентр г.Южный\n"cBLUE"2. "cWH"Радиоцентр г.Эдово\n"cBLUE"3. "cWH"Радиоцентр г.Арзамас\n{99CCFF}-  "cWH"Общий рейтинг","Далее","Закрыть");
			return 1;
		}

		else if(areaid == gAreas[arShtraf])//
		{
			if(pData[playerid][pUnemployment] > 0)
			{
			format(String256,sizeof(String256),"\n"cWH"Оплатить штрафы в размере "cBLUE"%d рублей"cWH"?\n",pData[playerid][pUnemployment]);
			return SPD(playerid, dShtrafMenu, DIALOG_STYLE_MSGBOX, ""cBLUE"Оплата Штрафов", String256, "Оплатить", "Отмена");
			}
			else	{
			return SendErr(playerid, "У Вас нет неоплаченных штрафов");
			}
		}
		else if(areaid == gAreas[arWanteds])
		{
			new wantedplayers, jailplayers;
			foreach(new d: logged_players)
			{
			if(pData[d][pWanted]) wantedplayers ++;
			if(pData[d][pJail]) jailplayers ++;
			}
			new Float: wwantedpercent = WantedStatus + float(wantedplayers)/10.0;
			if(wwantedpercent < 3.0)
			{
			format(String256,sizeof(String256),"\n\n\n"cWH"Уровень преступности {61C200}%.1f%%"cWH"\nЗаключенных: {0000FF}%d"cWH"\n\n\n",wwantedpercent,jailplayers);
			}
			else if(wwantedpercent >= 3.0 && wwantedpercent < 8.0)
			{
			format(String256,sizeof(String256),"\n\n\n"cWH"Уровень преступности {0000FF}%.1f%%"cWH"\nЗаключенных: {0000FF}%d"cWH"\n\n\n",wwantedpercent,jailplayers);
			}
			else if(wwantedpercent >= 8.0 && wwantedpercent < 13.0)
			{
			format(String256,sizeof(String256),"\n\n\n"cWH"Уровень преступности {FFFF33}%.1f%%"cWH"\nЗаключенных: {0000FF}%d"cWH"\n\n\n",wwantedpercent,jailplayers);
			}
			else if(wwantedpercent >= 13.0 && wwantedpercent < 18.0)
			{
			format(String256,sizeof(String256),"\n\n\n"cWH"Уровень преступности {FF9900}%.1f%%"cWH"\nЗаключенных: {0000FF}%d"cWH"\n\n\n",wwantedpercent,jailplayers);
			}
			else {
			format(String256,sizeof(String256),"\n\n\n"cWH"Уровень преступности {FF0000}%.1f%%"cWH"\nЗаключенных: {0000FF}%d"cWH"\n\n\n",wwantedpercent,jailplayers);
			}
			return SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, ""cBLUE"Уровень преступности", String256, "Закрыть", "");

		}

		else if(areaid == gAreas[arSdacha])
		{
			if(pData[playerid][pJail] > 0) return SendErr(playerid, "Вы уже получили срок");
			if(pData[playerid][pWanted] > 0)
			{
			new time = floatround((pData[playerid][pWanted] * JAIL_QUATE/2) / 60);
			if(pData[playerid][pWanted] < 3)
			{
			format(String256,sizeof(String256),"\n"cWH"Вы хотите сдаться с повинной?\nВаш срок "cBLUE"%d минут\n",time);
			}
			else {
			format(String256,sizeof(String256),"\n"cWH"Вы хотите сдаться с повинной?\nВаш срок определит суд\n");
			}
			return SPD(playerid, dSdachaMenu, DIALOG_STYLE_MSGBOX, ""cBLUE"Сдача с повинной", String256, "Сдаться", "Отмена");
			}
			else	{
			return SendErr(playerid, "У Вас нет розыска");
			}
		}

		else if(areaid == gAreas[arHBhp])
		{
			GetPlayerHealth(playerid, pData[playerid][pHealth]);
			if(pData[playerid][pHealth] < 99)
			{
				SetPlayerHealth(playerid,100.0);
				MeAction(playerid,"поел(а)");
			}
			return 1;
		}

		else if(areaid == gAreas[arNYex])
		{
	 	}

		else if(areaid == gAreas[arHBtp][0])
		{
			SetPlayerPosDebug(playerid , 478.6084,1776.1862,12.020);
			return 1;
		}
	 	else if(areaid == gAreas[arHBtp][1])
		{
			SetPlayerPosDebug(playerid , 477.2392,1781.3264,12.0200 );
			return 1;
		}


		else if( areaid == gAreas[arSmi])
		{
		new wv = GetPlayerVirtualWorld(playerid)-2;
		SetPlayerInterior(playerid,0);
		PSPAWN[ playerid ] = 1;
		TogglePlayerSpectating(playerid, 1);



		if(wv+1 == 0) {
		SetPVarIntNew(playerid,"pspawnban",3);
		}
		else {
		SetPVarIntNew(playerid,"pspawnban",wv+1); }
		pTemp[playerid][pSpectating] = true;
		pTemp[playerid][pSpectator] = playerid;
		pTemp[playerid][pSpectatee] = playerid;
		pTemp[playerid][pSpecOn] = 1;
		new Float:x,Float:y, Float:z, Float: Healt;
		GetPlayerPos(playerid,x,y,z);
		GetPlayerHealth(playerid,Healt);
		SetPVarFloatNew(playerid,"shpeal",Healt);
		pData[playerid][pHealth] = Healt;
		SetPVarFloatNew(playerid,"oldx", 608.0657 );
		SetPVarFloatNew(playerid,"oldy", 1470.5984 );
		SetPVarFloatNew(playerid,"oldz", 1509.5081);
		SetPVarIntNew(playerid,"oldskin",GetPlayerSkin(playerid));
		SetPVarIntNew(playerid,"oldint",GetPlayerInterior(playerid));
		SetPVarIntNew(playerid,"oldworld",GetPlayerVirtualWorld(playerid));

		if(wv < 0) wv = 2;
		//HideSmiMap(playerid);
		if(pData[playerid][pFraction] == 10)
		{

		}
		else
		{
				}
		}




		else if(areaid == gAreas[EATMB][1])
		{
			GetPlayerHealth(playerid, pData[playerid][pHealth]);
			if(pData[playerid][pHealth] < 99){
				SetPlayerHealth(playerid,100.0);
				MeAction(playerid,"поел(а)");
			}
			return 1;
		}


		else if (areaid == gAreas[arPrezInfo])
		{
				format(String256, sizeof(String256), ""cWH"Государство "cBLUE"%s", ServerName);
				format(String1024, sizeof(String1024), ""cBLUE"1."cWH" Информация о государстве\n"cBLUE"2."cWH" Оценить работу Администрации Президента");
				SPD(playerid,dPrezInfo,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				return 1;
		}

		else if(areaid == gAreas[arMinSMI])
		{
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11 &&  pData[playerid][pSubfraction] == 0)
			{
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ: "cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат сотрудников\n"cBLUE"3."cWH" Список сотрудников\n"cBLUE"4."cWH" Регулирование стоимости объявлений",GosMoney[3]);
				SPD(playerid,dMinSMI,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Министру Средств Массовой Информации");
			}
			return 1;
		}
		else if(areaid == gAreas[arMinSMI2])
		{
			if(pData[playerid][pFraction] == 11 && pData[playerid][pRank] == 7 &&  pData[playerid][pSubfraction] == 0)// &&  pData[playerid][pRank] == 13
			{
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ: "cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат сотрудников\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулирование стоимости объявлений",GosMoney[3]);
				SPD(playerid,dMinSMIEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Пресс-секретарю");
			}
			return 1;
		}


	// МЗ
		else if(areaid == gAreas[arMinMZ])
		{
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11 &&  pData[playerid][pSubfraction] == 0 )
			{
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат сотрудников\n"cBLUE"3."cWH" Список сотрудников\n"cBLUE"4."cWH" Регулировка максимальной цены лечения",GosMoney[4]);
				SPD(playerid,dMinMZ,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Министру Здравоохранения");
			}
			return 1;
		}
		else if(areaid == gAreas[arMinMZ2])
		{
			if(pData[playerid][pFraction] == 11 && pData[playerid][pRank] == 8 &&  pData[playerid][pSubfraction] == 0)// &&  pData[playerid][pRank] == 13
			{
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат сотрудников\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулировка максимальной цены лечения",GosMoney[4]);
				SPD(playerid,dMinMZEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Советнику по Министерству Здравоохранения");
			}
			return 1;
		}

	// МО
		else if(areaid == gAreas[arMinMO])
		{
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11  &&  pData[playerid][pSubfraction] == 0)
			{
				format(String256, sizeof(String256), ""cWH"Министерство обороны");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства обороны и армий:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию военнослужащим\n"cBLUE"2."cWH" Регулировка зарплат армии\n"cBLUE"3."cWH" Список военнослужащих\n"cBLUE"4."cWH" Закупка боеприпасов",GosMoney[2]);
				SPD(playerid,dMinMO,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Министру Обороны");
			}
			return 1;
		}
		else if(areaid == gAreas[arMinMO2])
		{
			if(pData[playerid][pFraction] == 11  && pData[playerid][pRank] == 6 &&  pData[playerid][pSubfraction] == 0 )// &&  pData[playerid][pRank] == 13
			{
				format(String256, sizeof(String256), ""cWH"Министерство обороны");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства обороны и армий:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат армии\n"cBLUE"2."cWH" Список военнослужащих",GosMoney[2]);
				SPD(playerid,dMinMOEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Советнику по Нац. Безопасности");
			}
			return 1;
		}
	// МВД

		else if(areaid == gAreas[arMinMVD])
		{
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11  &&  pData[playerid][pSubfraction] == 0 )
			{
				format(String256, sizeof(String256), ""cWH"Министерство Внутренних дел");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат полицейских департаментов\n"cBLUE"3."cWH" Список сотрудников\n"cBLUE"4."cWH" Регулировка премии за пойманного преступника",GosMoney[1]);
				SPD(playerid,dMinMVD,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Министру Внутренних Дел");
			}
			return 1;
		}
		else if(areaid == gAreas[arMinMVD2])
		{
			if(pData[playerid][pFraction] == 11  && pData[playerid][pRank] == 5 &&  pData[playerid][pSubfraction] == 0)// &&  pData[playerid][pRank] == 13
			{
				format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат полицейских департаментов\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулировка премии за пойманного преступника",GosMoney[1]);
				SPD(playerid,dMinMVDEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Ген. Прокурору");
			}
			return 1;
		}
		else if(areaid == hospital_glav_menu)
		{
			if(pData[playerid][pFraction] == 2 && IsALeader(playerid) && pData[playerid][pSubfraction] != 0)
			{
				format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
				format(String1024, sizeof(String1024), ""cBLUE"1."cWH" Заказать медикаменты {B3CC99}[Заказано: %d]\n"cBLUE"2."cWH" Выдать премию всем сотрудникам\n"cBLUE"3."cWH" Выдать премию сотруднику", BolnicaSkladZak[pData[playerid][pSubfraction]-1]);
				SPD(playerid,dGlavMed,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			else {
				return SendErr(playerid,"Доступно только Главному Врачу Больницы");
			}
			return 1;
		}


		else if(areaid == gAreas[arPrezText4])
		{
			if( (pData[playerid][pFraction] == 11 && pData[playerid][pRank] > 3 && pData[playerid][pSubfraction] == 0))
			{
				SendInf(playerid, "Используйте "cGR"/otvet "cWH"для ответа на телефонные звонки горячей линии");
			}
			return 1;
		}
		foreach(new i: Player)
		{
			if(areaid == CarMarketArea[i])
			{
				format(String1024, sizeof(String1024), "\n"cWH"Информация об автомобиле:\n\n\
					"cWH"Продавец: "cBLUE"%s\n\
					"cWH"Автомобиль: "cBLUE"%s\n\
					"cWH"Класс автомобиля:" cBLUE"%s\n\
					"cWH"Маск.скорость: "cBLUE"%d КМ/Ч\n\
					"cWH"Тип топлива: "cBLUE"%s\n\
					"cWH"Объём бака: "cBLUE"%d литров\n\
					"cWH"Пробег: "cBLUE"%d км\n\n\
					"cWH"Цена: "cGR"%i\n\n\
					"cWH"Вы действительно хотите купить данное транспортное средство?", pData[CMarketInfo[i][mOwnerid]][pNickname],
					transport_config[GetVehicleModel(CMarketInfo[i][mID])-400][transport_name],
					get_class_veh(GetVehicleModel(CMarketInfo[i][mID])-400),
					transport_config[GetVehicleModel(CMarketInfo[i][mID])-400][transport_max_speed],
					get_fuel_type_veh(GetVehicleModel(CMarketInfo[i][mID])-400),
					transport_config[GetVehicleModel(CMarketInfo[i][mID])-400][transport_tank],
					floatround(vehicle[CMarketInfo[i][mID]][cMileage]),

					CMarketInfo[i][mPrice]);
				SPD(playerid, DIALOG_ACCEPT_BUY_CAR_RINOK, DIALOG_STYLE_MSGBOX, !""cBLUE"Покупка автомобиля", String1024, !"Купить", !"Отмена");

				SetPVarIntNew(playerid, "buy_car_id_player", i);
			}

		}
	}
	if(debug_mode)
	{
		printf("[OnPlayerEnterDynamicArea]: Времени затрачено: <%d мс>" , GetTickCount() - time_debug);

	}

	return 1;
}

public OnPlayerLeaveDynamicArea(playerid, areaid)
{
	new time_debug = GetTickCount();

	if(opcode) FormattedMessage(playerid, -1, "area_leave: %d", areaid);
	if(area_info[areaid][a_exist])
	{
		switch(area_info[areaid][a_item_type])
		{

			case FILLING_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case HOTEL_ROOM_EXIT: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case GARAGE_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case GARAGE_EXIT_P: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case RENT_START_GAME:
			{
				DeletePVarNew(playerid, "player_in_rent_zone");
				return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			}
			case B_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case B_EXIT: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case HOTEL_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case HOTEL_EXIT: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case H_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case H_EXIT: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case FLATE_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case FLATE_EXIT: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case HOUSE_SAFE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case HOUSE_WARDROBE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case FLATE_WARDROBE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case FLATE_SAFE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case CASINO_ENTER: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case CASINO_EXIT: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case BUY_CAR_ZONE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case RENT_CAR_ZONE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case BUY_CLOTHES_ZONE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case GARAGE_PANEL_CHANGE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case BUY_ACCESSORIES_ZONE: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
			case ENTER_QUEST_TEPLICA: return alt_info_player(playerid, TEXTDRAW_HIDE), pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
		}
		pTemp[playerid][area_item_id] = pTemp[playerid][area_type] = -1;
	}


	if(areaid == gAreas[arBase])
	{
		if(PlayerVoen[playerid] > 1)
		{
			SCM(playerid,CWHITE,"Вы закончили охрану объекта");
		}
		PlayerPlaySound(playerid,0,0.0,0.0,0.0);
		PlayerVoen[playerid] = 0;
	}

	else if(areaid == gAreas[arCarMk])
	{
		stop_sell_car_player(playerid);
	}

	else if(areaid >= filling_trigger_1_fill[0] && areaid <= filling_trigger_1_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);
		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_1_eng[0] && areaid <= filling_trigger_1_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	else if(areaid >= filling_trigger_2_fill[0] && areaid <= filling_trigger_2_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_2_eng[0] && areaid <= filling_trigger_2_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);


			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}


	else if(areaid >= filling_trigger_3_fill[0] && areaid <= filling_trigger_3_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_3_eng[0] && areaid <= filling_trigger_3_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);


			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	else if(areaid >= filling_trigger_4_fill[0] && areaid <= filling_trigger_4_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		return true;
	}
	else if(areaid >= filling_trigger_4_eng[0] && areaid <= filling_trigger_4_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);


			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	else if(areaid >= filling_trigger_5_fill[0] && areaid <= filling_trigger_5_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_5_eng[0] && areaid <= filling_trigger_5_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);


			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	else if(areaid >= filling_trigger_6_fill[0] && areaid <= filling_trigger_6_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_6_eng[0] && areaid <= filling_trigger_6_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);


			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	else if(areaid >= filling_trigger_7_fill[0] && areaid <= filling_trigger_7_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_7_eng[0] && areaid <= filling_trigger_7_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);
			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}


	else if(areaid >= filling_trigger_8_fill[0] && areaid <= filling_trigger_8_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_8_eng[0] && areaid <= filling_trigger_8_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			if(GetVehicleModel(GetPlayerVehicleID(playerid)) == TYPE_TESLA_1)
			{
				PlayerTextDrawHideEx(playerid, player_info_td[playerid]);
			}
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	else if(areaid >= filling_trigger_1_fill[0] && areaid <= filling_trigger_1_fill[3])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			DeletePVarNew(playerid, "in_fuel_station");
			DeletePVarNew(playerid, "fuel_station_id");
		}
		clear_pvar_fill_station(playerid);
		return true;
	}
	else if(areaid >= filling_trigger_1_eng[0] && areaid <= filling_trigger_1_eng[1])
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			DeletePVarNew(playerid, "tesla_charge");
			DeletePVarNew(playerid, "in_fuel_station");
			DeletePVarNew(playerid, "fuel_station_id");
		}
		clear_pvar_fill_station(playerid);
		return true;
	}

	if( areaid == gAreas[arSkinVoen2])
	{
		if(GetPVarIntNew(playerid,"priskin") != 0)
		{
		set_player_skin(playerid,pTemp[playerid][pCSkin]);
		SetPVarIntNew(playerid,"priskin", 0);
		SCM(playerid,CWHITE,"Вы сняли форму "cLRED"призывника"cWH"");
		}

	}



	if(areaid == gAreas[arArmyAmmo2])
	{
		pTemp[playerid][pArmarea] = 0;
 	}


	/*else if(areaid == mechanic_repair_box_1[0])
	{
		mechanic_box[0][0][mechanic_active_id] = -1;
		update_mechanic_box(0);
	}
	else if(areaid == mechanic_repair_box_1[1])
	{
		mechanic_box[0][1][mechanic_active_id] = -1;
		update_mechanic_box(1);
	}
	else if(areaid == mechanic_repair_box_1[2])
	{
		mechanic_box[0][2][mechanic_active_id] = -1;
		update_mechanic_box(2);
	}
	else if(areaid == mechanic_repair_box_1[3])
	{
		mechanic_box[0][3][mechanic_active_id] = -1;
		update_mechanic_box(3);
	}*/


	if(areaid == gArmyArea)
	{
		if(pTemp[playerid][zSteals])
		{
			UpdatePlayerData(playerid,"gunamount",pData[playerid][pGunAmount]);
			UpdatePlayerData(playerid,"ammo",pData[playerid][pAmmo]);
			pTemp[playerid][zSteals] = 0;
		}
	}

	for(new i=0;i<sizeof(gAreas[arGreenZone]);i++)
	{
		if(areaid == gAreas[arGreenZone][i])
		{
			pGreenZone[playerid] = 0;
			WN_showGreenZone(playerid, 2);
		}
	}

	foreach(new strip : Player)
	{
		if(fonarea[strip] != 0 &&  fonarea[strip] == areaid)
		{
			StopAudioStreamForPlayer(playerid);
		}
	}

	if(debug_mode)
	{
		printf("[OnPlayerLeaveDynamicArea]: Времени затрачено: <%d мс>" , GetTickCount() - time_debug);
	}
	return 1;
}

public OnRconCommand(cmd[])
{

	return 1;
}

public OnPlayerRequestSpawn(playerid)
{
	if(IsPlayerNPC(playerid))
	{
		SpawnPlayer(playerid);
		return 1;
	}
	if(!pTemp[playerid][pLogined]) return 0;
	return 1;
}



public OnPlayerPickUpDynamicPickup(playerid, pickupid)
{

	if(pNPC[playerid] != 0 ) return 1;

	if(!pTemp[playerid][pLogined]) return 1;


	return 1;
}


public OnPlayerPickUpPickup(playerid, pickupid)
{

	if(!PlayerConnect[playerid]) return 1;
	if(!pTemp[playerid][pLogined]) return 1;

	last_upd[playerid] = GetTickCount() - 400;

	foreach(Player, foplayerid)
	{
		if(pickupid == KeyPick[foplayerid] && KeyPickEx[foplayerid] != 0)
		{
		 	PlayerVoenKey[playerid] = 1;
			PlayerPlaySound(playerid, 1137 , 0.0, 0.0, 0.0);
	 		format(String256, sizeof(String256), "* %s поднял(а) пропуск", pData[playerid][pNickname]);
			ProxDetector(10.0, playerid, String256, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		 	FormaEx(foplayerid);
	 		ApplyAnimation(playerid,	"BOMBER", "BOM_Plant", 2, 0, 0, 0, 0, 0);
		}

	}
	
	
	return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{

	return 1;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{

	return 1;
}

public OnVehicleRespray(playerid, vehicleid, color1, color2)
{

	return 1;
}

public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
{

	return 1;
}
public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{

	if(!IsPlayerConnected(playerid) || IsKicked(playerid))
		return true;

	key_table_casino(playerid, newkeys, oldkeys);
	key_take_army_box(playerid, newkeys);
	key_trash_can(playerid, newkeys);
	key_bank_work(playerid, newkeys);

	switch(GetPlayerState(playerid))
	{
		case PLAYER_STATE_ONFOOT:
		{
			switch(pTemp[playerid][area_type])
			{

				case GARAGE_PANEL_CHANGE:
				{
					if(newkeys == KEY_WALK)
					{
						if(GetPlayerVirtualWorld(playerid) != pData[playerid][pGarage])
							return SendErr(playerid, "Вы не находитесь в своём гараже для управления!");


						return PC_EmulateCommand(playerid, "/garage");
					}
				}
				case H_G_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						exit_house_garage(playerid, GetPlayerVirtualWorld(playerid));
					}
				}
				case BUY_CLOTHES_ZONE:
				{
					if(newkeys == KEY_WALK)
					{
						return dialog_show_select_clothes(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case BUY_ACCESSORIES_ZONE:
				{
					if(newkeys == KEY_WALK)
					{
						return dialog_show_select_aks(playerid, pTemp[playerid][area_item_id]);
					}
				}
				/*case ENTER_QUEST_TEPLICA:
				{
					if(newkeys == KEY_WALK)
					{
						enter_quest_teplica(playerid);
					}
				}*/
				case BUY_CAR_ZONE:
				{
					if(newkeys == KEY_WALK)
					{
						return dialog_show_select_autosalon(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case RENT_CAR_ZONE:
				{
					if(newkeys == KEY_WALK)
					{
						return dialog_show_autosalon_rent(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case CASINO_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						return select_menu_enter_casino(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case CASINO_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						return exit_casino(playerid);
					}
				}
				case FILLING_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						return show_filling_menu(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case HOTEL_ROOM_ENTER:
				{
					return info_hotel_room(playerid, pTemp[playerid][area_item_id]);
				}
				case HOTEL_ROOM_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						return exit_hotel_room(playerid, GetPVarIntNew(playerid, "number_hotel_id"));
					}
				}

				case GARAGE_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						return info_garage(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case GARAGE_EXIT_P:
				{
					if(newkeys == KEY_WALK)
					{
						return exit_garage_p(playerid, GetPlayerVirtualWorld(playerid));
					}
				}

				case RENT_START_GAME:
				{
					if(newkeys == KEY_WALK)
					{
						return rent_vehicle_player_n(playerid);
					}
				}


				case PARKING_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						exit_parking(playerid, GetPlayerVirtualWorld(playerid));
					}
				}
				case PARKING_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						enter_parking(playerid, pTemp[playerid][area_item_id]);
					}
				}

				case B_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						new
							biz = pTemp[playerid][area_item_id];

						if(buisness[biz][buisnes_type] == BUISNES_PRODUCTION)
						{
							return show_buisnes_select_info(playerid, BUISNES_PRODUCTION, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_BAR)
						{
							return show_buisnes_select_info(playerid, BUISNES_BAR, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AMMO_1)
						{
							return show_buisnes_select_info(playerid, BUISNES_AMMO_1, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AMMO_2)
						{
							return show_buisnes_select_info(playerid, BUISNES_AMMO_2, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_RESTORAN)
						{
							return show_buisnes_select_info(playerid, BUISNES_RESTORAN, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_FASTFOOD)
						{
							return show_buisnes_select_info(playerid, BUISNES_FASTFOOD, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_CLUB)
						{
							return show_buisnes_select_info(playerid, BUISNES_CLUB, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AUTOSALON_1)
						{
							return select_menu_enter_autosalon(playerid, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AUTOSALON_2)
						{
							return select_menu_enter_autosalon(playerid, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AUTOSALON_3)
						{
							return select_menu_enter_autosalon(playerid, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_CLOTHES)
						{
							return select_menu_enter_clothes(playerid, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_ACCESSORIES)
						{
							return select_menu_enter_aks(playerid, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_RIELTOR_AGENCY)
						{
							return select_menu_enter_realter(playerid, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_PARKING)
						{
							return select_menu_parking_biz(playerid, biz);
						}
					}
				}
				case B_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						new
							biz = pTemp[playerid][area_item_id];

						if(buisness[biz][buisnes_type] == BUISNES_PRODUCTION)
						{
							return exit_buisnes(playerid, BUISNES_PRODUCTION, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_BAR)
						{
							return exit_buisnes(playerid, BUISNES_BAR, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AMMO_1)
						{
							return exit_buisnes(playerid, BUISNES_AMMO_1, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AMMO_2)
						{
							return exit_buisnes(playerid, BUISNES_AMMO_2, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_RESTORAN)
						{
							return exit_buisnes(playerid, BUISNES_RESTORAN, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_FASTFOOD)
						{
							return exit_buisnes(playerid, BUISNES_FASTFOOD, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_CLUB)
						{
							return exit_buisnes(playerid, BUISNES_CLUB, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AUTOSALON_1)
						{
							return exit_buisnes(playerid, BUISNES_AUTOSALON_1, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AUTOSALON_2)
						{
							return exit_buisnes(playerid, BUISNES_AUTOSALON_2, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_AUTOSALON_3)
						{
							return exit_buisnes(playerid, BUISNES_AUTOSALON_3, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_CLOTHES)
						{
							return exit_buisnes(playerid, BUISNES_CLOTHES, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_ACCESSORIES)
						{
							return exit_buisnes(playerid, BUISNES_ACCESSORIES, biz);
						}
						if(buisness[biz][buisnes_type] == BUISNES_RIELTOR_AGENCY)
						{
							return exit_buisnes(playerid, BUISNES_RIELTOR_AGENCY, biz);
						}
					}
				}


				case APARTAMENT_ENTER:
				{
					if(timer_key_state_change[playerid])
						return true;

					enter_apartament(playerid, pTemp[playerid][area_item_id]);

					return true;
				}
				case APARTAMENT_EXIT:
				{
					if(timer_key_state_change[playerid])
						return true;

					exit_apartament(playerid, GetPlayerVirtualWorld(playerid)-1);

					return true;
				}
				case HOTEL_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						return select_menu_enter_hotel(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case HOTEL_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						new
							h_ids = GetPVarIntNew(playerid, "hotel_number_vw");

						return exit_hotel(playerid, h_ids);
					}
				}
				case H_ENTER:
				{
					ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
					return house_info(playerid, pTemp[playerid][area_item_id]);
				}
				case H_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						return house_panel_change(playerid, GetPlayerVirtualWorld(playerid));
					}
				}
				case H_G_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						enter_house_garage(playerid, pTemp[playerid][area_item_id]);
					}

				}


				case FLATE_ENTER:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						return flate_info(playerid, pTemp[playerid][area_item_id]);
					}
				}
				case FLATE_EXIT:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);


						return flate_panel_change(playerid, GetPlayerVirtualWorld(playerid));
					}
				}
				case HOUSE_SAFE:
				{
					if(newkeys == KEY_WALK)
					{
						return show_house_safe_code(playerid);
					}
				}
				case HOUSE_WARDROBE:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						return show_wardrobe_menu(playerid);
					}
				}
				case FLATE_WARDROBE:
				{
					if(newkeys == KEY_WALK)
					{
						ApplyAnimation(playerid, "PED", "ATM", 4.1, 0, 1, 1, 0, 1, 1);
						return show_wardrobe_menu_flate(playerid);
					}
				}
				case FLATE_SAFE:
				{
					if(newkeys == KEY_WALK)
					{
						return show_flate_safe_code(playerid);
					}
				}
			}
			if(newkeys == KEY_WALK)
			{
				if(GetPVarIntNew(playerid, "player_seat_down") == 1)
				{
					if(timer_key_state_change[playerid])
						return true;

					timer_key_state_change[playerid] += 1;

					ApplyAnimation(playerid,"ped","SEAT_up", 4, 0, 0, 0, 0, 0);
					DeletePVarNew(playerid, "player_seat_down");
					return 1;
				}
				for(new i; i < sizeof(seat_down_all); i ++)
				{
					if(IsPlayerInRangeOfPoint(playerid, 1.0, seat_down_all[i][0], seat_down_all[i][1], seat_down_all[i][2]))
					{

						if(timer_key_state_change[playerid])
							return true;

						timer_key_state_change[playerid] += 1;


						SetPlayerPos(playerid, seat_down_all[i][0], seat_down_all[i][1], seat_down_all[i][2]);
						SetPlayerFacingAngle(playerid, seat_down_all[i][3]);
						ApplyAnimation(playerid, "PED", "SEAT_down", 4.1, 0, 0, 0, 1, 0, 1);
						SetPVarIntNew(playerid,"player_seat_down", 1);
						return true;
					}
				}
				for(new i;i<ATM_COUNT;i++)
				{
					if(IsPlayerInDynamicArea(playerid,gATMArea[i]))
					{
						if(GetPVarIntNew(playerid, "bank_work") && GetPVarIntNew(playerid, "bank_work_atm")-1 == i)
						{
							if(GetPVarIntNew(playerid, "bank_work_type") == 1 && GetPVarIntNew(playerid, "bank_work_role") == 2)
							{
								if(GetPVarIntNew(playerid, "bank_work_take_money"))
								{
									format(String64, sizeof(String64), "Вы положили в банкомат %i рублей", GetPVarIntNew(playerid, "bank_work_take_money"));
									SendSucc(playerid, String64);

									new
										oldcount = GetPVarIntNew(playerid, "bank_money_give"),
										partner = GetPVarIntNew(playerid, "bank_work_partner")-1,
										salary = floatround(GetPVarIntNew(playerid, "bank_work_take_money")*0.002);

									SetPVarIntNew(playerid, "bank_money_give", oldcount + GetPVarIntNew(playerid, "bank_work_take_money"));
									SetPVarIntNew(partner, "bank_money_give", oldcount + GetPVarIntNew(playerid, "bank_work_take_money"));

									final_gruz_bank_people(playerid);
									final_gruz_bank_people(partner);

									DeletePVarNew(playerid, "bank_work_take_money");

									DestroyDynamicPickup(bank_work_pickup[GetPVarIntNew(playerid, "bank_work_vehid")]);
									DestroyDynamicArea(bank_work_sphere[GetPVarIntNew(playerid, "bank_work_vehid")]);

									RemovePlayerAttachedObject(playerid, 0);

									new
										old_atm = GetPVarIntNew(playerid, "bank_work_atm")-1;

									DeletePVarNew(playerid, "bank_work_atm");
									DeletePVarNew(partner, "bank_work_atm");
									DeletePVarNew(playerid, "bank_work_vehid");

									if(GetPVarIntNew(playerid, "no_money_in_car"))
									{
										full_bank_work_count(playerid, partner, 2);
									}
									else
									{
										give_next_atm(playerid, partner, old_atm);
									}
									DeletePVarNew(playerid, "no_money_in_car");
									return true;
								}
								else
								{
									return SendErr(playerid, "Для начала возьмите деньги из машины");
								}
							}
							if(GetPVarIntNew(playerid, "bank_work_type") == 2 && GetPVarIntNew(playerid, "bank_work_role") == 2)
							{
								if(GetPVarIntNew(playerid, "bank_work_take_money"))
								{
									return SendErr(playerid, "Отнесите деньги в машину");
								}
								else
								{
									new
										money = RandomEx(50000,1000000);


									SetPVarIntNew(playerid, "bank_work_take_money", money);

									format(String64, sizeof(String64), "Вы взяли с банкомата %i рублей", money);
									SendSucc(playerid, String64);
									SendInf(playerid, "Отнесите их в инкассаторскую машину");

									SetPlayerAttachedObject(playerid, 0, 18189, 5, 0.123000, -0.029000, -0.057999, 0.000000, -93.900001, 14.600000, 1.000000, 1.00, 1.000000);
									return true;
								}
							}
						}
						pTemp[playerid][pOff]++;
						SPD(playerid,DIALOG_GENERAL_ATM,2,"Банкомат","Информация о счете\nСнять деньги со счета\nПоложить деньги на счет\nПополнить баланс мобильного\nУправление кассой","OK","Отмена");
					}
				}
				for(new i = 0; i < sizeof(hunter); i++)
				{
					if(!hunter[i][hKilled])
						continue;

					if(!IsPlayerInRangeOfPoint(playerid, 2.0, hunter[i][hPosX], hunter[i][hPosY], hunter[i][hPosZ]))
						continue;

					SendSucc(playerid, "Вы успешно подобрали мясо! Теперь оно находится у Вас в инвентаре!");

					ApplyAnimation(playerid,"BOMBER","BOM_Plant_Crouch_In", 4.0, 0, 0, 0, 0, 0, 1);


					if(hunter[i][hunter_model] == 18177)
					{
						give_inventory_items(playerid, 336, RandomEx(1, 5));
						SendSucc(playerid, "Мясо Лося было добавлено Вам в инвентарь! (( /inv ))");

						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_26", 2500);
					}
					else if(hunter[i][hunter_model] == 18178)
					{
						give_inventory_items(playerid, 337, RandomEx(1, 5));
						SendSucc(playerid, "Мясо Зайца было добавлено Вам в инвентарь! (( /inv ))");

						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_27", 2500);
					}
					else if(hunter[i][hunter_model] == 18179)
					{
						give_inventory_items(playerid, 338, RandomEx(1, 5));
						SendSucc(playerid, "Мясо Кабана было добавлено Вам в инвентарь! (( /inv ))");

						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_28", 2500);
					}
					else if(hunter[i][hunter_model] == 18180)
					{
						give_inventory_items(playerid, 339, RandomEx(1, 5));
						SendSucc(playerid, "Мясо Медведя было добавлено Вам в инвентарь! (( /inv ))");

						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_29", 2500);
					}


					destroy_hunter(i);
					break;
				}
 				if(pData[playerid][pFraction] == 2)
				{
					if(call_hospital_id != -1)
					{
						if(IsPlayerInRangeOfPoint(playerid, 5.0, hospital_help[call_hospital_id][actor_hospital_x], hospital_help[call_hospital_id][actor_hospital_y], hospital_help[call_hospital_id][actor_hospital_z]))
						{
							return help_actor_panel(playerid);
						}
					}
				}

				//open_door_player(playerid);
			}


		}
		case PLAYER_STATE_DRIVER:
		{
			if(PRESSED(KEY_ACTION))
				return PC_EmulateCommand(playerid, "/en");

			if(PRESSED(KEY_NO))
				return vehicle_light_status(GetPlayerVehicleID(playerid), !vehicle[GetPlayerVehicleID(playerid)][cLight]);

			if(PRESSED(KEY_VEHICLE_HORN))
			{

				switch(pTemp[playerid][area_type])
				{
					case GARAGE_ENTER:
					{
						return enter_garage_p_car(playerid, pTemp[playerid][area_item_id]);
					}
					case GARAGE_EXIT_C:
					{
						return exit_garage_p_car(playerid, GetPlayerVirtualWorld(playerid));
					}
					case PARKING_EXIT:
					{
						return exit_parking(playerid, GetPlayerVirtualWorld(playerid));
					}
					case PARKING_ENTER:
					{
						return enter_parking(playerid, pTemp[playerid][area_item_id]);
					}
					case H_G_EXIT_V:
					{
						if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
						{
							if(newkeys == KEY_CROUCH)
							{
								new
									h = GetPlayerVirtualWorld(playerid);

								exit_house_garage_vehicle(playerid, h);
							}
						}
					}
					case H_G_ENTER:
					{
						if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
						{
							if(newkeys == KEY_CROUCH)
							{
								enter_house_garage_vehicle(playerid, pTemp[playerid][area_item_id]);
							}
						}
					}
				}
				if(IsPlayerInRangeOfPoint(playerid, 2.0, 2061.4761,1883.7048,15.5409))
				{
					SetPVarIntNew(playerid, "box_mech_type", 0);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_1);

					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_1, 0);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 2061.5144,1878.2296,15.5409))
				{
					SetPVarIntNew(playerid, "box_mech_type", 1);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_1);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_1, 1);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 2061.4758,1873.2306,15.5409))
				{
					SetPVarIntNew(playerid, "box_mech_type", 2);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_1);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_1, 2);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 2061.7471,1868.0739,15.5409))
				{
					SetPVarIntNew(playerid, "box_mech_type", 3);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_1);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_1, 3);
				}


				if(IsPlayerInRangeOfPoint(playerid, 2.0, 2180.9019,-1820.7839,18.8105))
				{
					SetPVarIntNew(playerid, "box_mech_type", 0);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_2);

					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_2, 0);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 2181.4124,-1830.0486,18.8149))
				{
					SetPVarIntNew(playerid, "box_mech_type", 1);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_2);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_2, 1);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 2180.8872,-1838.2864,18.8148))
				{
					SetPVarIntNew(playerid, "box_mech_type", 2);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_2);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_2, 2);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 2180.6902,-1847.0455,18.8148))
				{
					SetPVarIntNew(playerid, "box_mech_type", 3);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_2);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_2, 3);
				}



				if(IsPlayerInRangeOfPoint(playerid, 2.0, 403.7483,792.8860,12.1119))
				{
					SetPVarIntNew(playerid, "box_mech_type", 0);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_3);

					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_3, 0);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 401.9188,787.9308,12.1119))
				{
					SetPVarIntNew(playerid, "box_mech_type", 1);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_3);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_3, 1);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 400.0770,782.6754,12.1119))
				{
					SetPVarIntNew(playerid, "box_mech_type", 2);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_3);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_3, 2);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 2.0, 398.6227,778.3241,12.1119))
				{
					SetPVarIntNew(playerid, "box_mech_type", 3);
					SetPVarIntNew(playerid, "box_mech_type_2", MECHANIC_BASE_STATION_3);


					return show_client_box_menu(playerid, MECHANIC_BASE_STATION_3, 3);
				}

				else if(IsPlayerInRangeOfPoint(playerid, 14.0, TRUCKER_MINER_LOAD))
				{
					return enter_load_zone_miner(playerid);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 14.0, TRUCKER_ZAVOD_LOAD))
				{
					return enter_load_zone_zavod(playerid);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 14.0, TRUCKER_SHOP_LOAD))
				{
					return enter_load_zone_shop(playerid);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 14.0, TRUCKER_FUEL_LOAD))
				{
					if(GetPVarIntNew(playerid, "trucker_load_fill_1") == 1)
						return enter_load_zone_fill_1(playerid);

					if(GetPVarIntNew(playerid, "trucker_load_fill_1") == 2)
						return enter_load_zone_fill_2(playerid);
				}
				else if(IsPlayerInRangeOfPoint(playerid, 14.0, TRUCKER_SAMWILL_LOAD))
				{
					return enter_load_zone_samwill(playerid);
				}

			}

		}

	}

	if(PRESSED(KEY_VEHICLE_HORN))
	{
		if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			if(GetPVarIntNew(playerid, "in_fuel_station") == 1)
			{
				new
					carid = GetPlayerVehicleID(playerid);

				if(GetPVarIntNew(playerid, "tesla_charge") != 1)
				{
					if(vehicle[carid][cEngine] == 1)
						return EROM(playerid, 0, "Перед заправкой требуется заглушить двигатель", 5, "", "");
						

					if(vehicle[carid][cFuel] == transport_config[GetVehicleModel(carid)-400][transport_tank])
						return EROM(playerid, 0, "Ваш автомобиль полностью заправлен", 5, "", "");
				}
				else
				{
					if(vehicle[carid][cEngine] == 1)
						return EROM(playerid, 0, "Перед зарядкой требуется заглушить автомобиль", 5, "", "");

					if(vehicle[carid][cEnergy] == transport_config[GetVehicleModel(carid)-400][transport_tank])
						return EROM(playerid, 0, "Ваш автомобиль полностью заряжен", 5, "", "");
				}


				if(pData[playerid][pSettings][10] == 1)
				{
					KillTimer(pTemp[playerid][vehicle_speed_timer]);
					pTemp[playerid][vehicle_speed_timer] = -1;

					hide_speed_player(playerid);

					PlayerTextDrawHide(playerid, player_speed_car[0][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[1][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[2][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[3][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[4][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[5][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[6][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[7][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[8][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[9][playerid]);
					PlayerTextDrawHide(playerid, player_speed_car[10][playerid]);
				}

				//if(GetPVarIntNew(playerid, "tesla_charge") != 1)
				//{
				//	new filling_type = GetPVarIntNew(playerid, "fuel_station_type");
				//	filling_panel_car(playerid, filling_type, TEXTDRAW_SHOW);
				//}
				//else
				//{
				//	charge_panel_car(playerid, TEXTDRAW_SHOW);
				//}
				
				new type_price_fuel;
				new fill_id = GetPVarIntNew(playerid, "fuel_station_id");
				new type = filling[fill_id][filling_type_name];

	            if(GetPVarIntNew(playerid, "fuel_station_type") == 1) type_price_fuel = filling[fill_id][filling_price_fuel_1];
	            if(GetPVarIntNew(playerid, "fuel_station_type") == 2) type_price_fuel = filling[fill_id][filling_price_fuel_2];
	            if(GetPVarIntNew(playerid, "fuel_station_type") == 3) type_price_fuel = filling[fill_id][filling_price_fuel_3];
	            if(GetPVarIntNew(playerid, "fuel_station_type") == 4) type_price_fuel = filling[fill_id][filling_price_fuel_4];

				new price_fuel = GetPVarIntNew(playerid, "price_fuel_final");
				if(GetPVarIntNew(playerid, "tesla_charge") != 1)
				{
					new filling_type = GetPVarIntNew(playerid, "fuel_station_type");

					WN_showAZS(playerid, filling_type, transport_config[GetVehicleModel(carid)-400][transport_tank], vehicle[carid][cFuel], type_price_fuel, GetPlayerMoneyEx(playerid));
				}
				else
				{
					WN_showAZS(playerid, 3, transport_config[GetVehicleModel(carid)-400][transport_tank], vehicle[carid][cEnergy], type_price_fuel, GetPlayerMoneyEx(playerid));
				}
				
				return true;
			}
			else
			{

			}
		}
	}



	else if(PRESSED(KEY_WALK))
		return check_engine_pos_car(playerid);

	else if(PRESSED(KEY_WALK))
		return check_bagage_pos_car(playerid);

	else if(newkeys == KEY_NO)
	{
		//show_circle_menu_veh(playerid);
		offer_cancel(playerid);

	}

	else if(newkeys == KEY_YES)
	{

		offer_accept(playerid);

   		if(pTemp[playerid][pShowHiact] == playerid)
		{
			new actplayerid = pTemp[playerid][pShowHipl];
			pTemp[playerid][pShowHipl] = -1;
			pTemp[playerid][pShowHiact] = -1;
			if(GetPlayerDistanceToPlayer(actplayerid,playerid) < 5.0)
			{
				new Float:angleX;
				GetPlayerFacingAngle(playerid, angleX);
				SetPlayerFacingAngle(actplayerid, angleX + 180);
			   	format(String256, sizeof(String256), "%s пожал(а) руку %s", pData[actplayerid][pNickname] , pData[playerid][pNickname]);
			   	ProxDetector(5.0, playerid, String256, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
			   	ApplyAnimation(playerid,"GANGS","hndshkfa",4.0,0,0,0,0,0);
			   	ApplyAnimation(actplayerid,"GANGS","hndshkfa",4.0,0,0,0,0,0);
			}
		}
		else
		{
			show_fast_menu(playerid, FAST_MENU_GENERAL_MENU, TEXTDRAW_SHOW);
		}

	}

	else if(PRESSED(KEY_SPRINT))
	{
		if(pData[playerid][pAdmin])
		{
			if(spec_ad[playerid] != INVALID_PLAYER_ID)
			{
				new
					specid = spec_ad[playerid];

				UpdateSpectateInfo(playerid, specid);
			}
		}

	}

	else if(PRESSED(KEY_JUMP))
	{
		if(pData[playerid][pAdmin])
		{
			if(spec_ad[playerid] != INVALID_PLAYER_ID)
			{
				StopSpectate(playerid);
			}
		}
	}

	if(pTemp[playerid][pControllable] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
	{
		if(PRESSED (KEY_FIRE) || PRESSED (KEY_FIRE | KEY_HANDBRAKE) || PRESSED (KEY_SECONDARY_ATTACK | KEY_HANDBRAKE))
		{
			new Float:pvc[3];
		 	GetPlayerVelocity(playerid, pvc[0], pvc[1], pvc[2]);

			for(new i=0;i<sizeof(gAreas[arGreenZone]);i++)
			{
				if(IsPlayerInDynamicArea(playerid,gAreas[arGreenZone][i]))
				{

					if(!IsPlayerInRangeOfPoint(playerid, 25.0, fire_info[fire_id][fire_x], fire_info[fire_id][fire_y], fire_info[fire_id][fire_z]))
					{
						if(pData[playerid][pJob] != SKILL_FIRE)
						{

							if((i != 27 || (i == 27 && GetPlayerWeapon(playerid) > 10)) && pData[playerid][pAdmin] < 1 && !GetPVarIntNew(playerid, "player_in_rent_zone") && !GetPVarIntNew(playerid, "player_in_garage_house")) {
						 	if( pvc[2] < -0.01 ||  (GetPlayerWeapon(playerid) < 24 && IsACop(playerid)) || (i == 29 && pData[playerid][pFraction] == 11) || (i == 31 && pTemp[playerid][hotelEnter] == 0)) {

							}
							else 					{
							ClearAnimations(playerid);
							ApplyAnimation(playerid,"FAT","IDLE_tired",3.0,1,0,0,1,3000);
							ClearAnimationsDelay[playerid] = 3;
		 					pTemp[playerid][pDM] += 1;
							if(pTemp[playerid][pDM] >= 5)
							{
								SCM(playerid,CBADINFO,"Вы были кикнуты за ДМ");
								NewKick(playerid);
							}
							else
							{
								new mes[64];
								format(mes,sizeof(mes),""cWH"ДМ в зеленых зонах запрещен (%d/5).",pTemp[playerid][pDM]);
								SPD(playerid,dMes,0,""cBLUE"Предупреждение",mes,"Далее","");
							}

							}
							}
						}
					}
				}
			}
		}
	}

	if((newkeys & KEY_SECONDARY_ATTACK && pTemp[playerid][pAnimation] == 1) && pTemp[playerid][pTazer] < 1)
	{
		new Float:pvcs[3];
	 	GetPlayerVelocity(playerid, pvcs[0], pvcs[1], pvcs[2]);
	 	if( pvcs[2] < -0.01){}
		else
		{
			ClearAnimations(playerid);
			pTemp[playerid][pAnimation] = 0;
		}
	}

	if(newkeys == KEY_SECONDARY_ATTACK)
	{

		if(pTemp[playerid][pSmokeUp] > 0  )
		{
				SetPlayerSpecialAction(playerid , 0);
				pTemp[playerid][pSmokeUp] = 0;
				if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_SMOKE_CIGGY || pRealState[playerid] == 2 || pRealState[playerid] == 3) {
				MeAction(playerid,"выбросил сигарету");
				}
		}
	}
	if (newkeys & KEY_FIRE)
	{
		if(pTemp[playerid][pSmokeUp] > 0 && GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_SMOKE_CIGGY )
		{
		if(pTemp[playerid][pSmokeUpTime] < GetTickCount())
		{

			pTemp[playerid][pSmokeUpTime] = GetTickCount() + 5000;
			pTemp[playerid][pSmokeUp] ++;

			new Float:health;
			GetPlayerHealth(playerid, health);

			if(health < 100.0)
			{
				SetPlayerHealth(playerid, health+ 2.0);
			}

			if(pTemp[playerid][pSmokeUp] > 6)
			{
				SetPlayerSpecialAction(playerid , 0);
				pTemp[playerid][pSmokeUp] = 0;
				MeAction(playerid,"выбросил окурок");
			}

		}
		}

	}
	if (newkeys == KEY_SPRINT)
	{

		if(pTemp[playerid][pSmokeUp] > 0 && pRealState[playerid] == 1 )
		{
				SetPlayerSpecialAction(playerid , 0);
				pTemp[playerid][pSmokeUp] = 0;
				if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_SMOKE_CIGGY) {
				MeAction(playerid,"выбросил сигарету");
				}
		}


	}
	if(predlojbrak[playerid] == 1)
	{
		if(newkeys == KEY_YES)
		{
			if(GetPVarIntNew(WeddingTwo[playerid], "brakid") != playerid)
			{
	   			predlojbrak[playerid] = 0;
	   			return 1;
	   		}
			new string[128];
	  		SFCM(playerid,-1,"Вы вступили в брак с %s", pData[WeddingTwo[playerid]][pNickname]);
	  		SFCM(WeddingTwo[playerid],-1,"Ваше предожение вступить в брак принято. Ваша супруга: %s",pData[playerid][pNickname]);
			format(string, sizeof(string), "%s и %s вступили в брак", pData[WeddingTwo[playerid]][pNickname], pData[playerid][pNickname]);
			SendClientMessageToAll(0xcc33ffff, string);
			new sendername[32],giveplayer[32];
			new giveplayerid = WeddingTwo[playerid];
			GetPlayerName(playerid, sendername,MAX_PLAYER_NAME);
			GetPlayerName(giveplayerid, giveplayer,MAX_PLAYER_NAME);
			strmid(pData[playerid][pDivorce], giveplayer, 0, strlen(giveplayer), 32);
			strmid(pData[giveplayerid][pDivorce], sendername, 0, strlen(sendername), 32);
			new query[128];
			format(query,sizeof(query),"UPDATE `accounts` SET divorce = '%s',married = 1 WHERE id = '%d'",sendername,pData[giveplayerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			format(query,sizeof(query),"UPDATE `accounts` SET divorce = '%s',married = 1 WHERE id = '%d'",giveplayer,pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			pData[giveplayerid][pMarried] = 1;
			pData[playerid][pMarried] = 1;
			predlojbrak[playerid] = 0;
			SetPVarIntNew(playerid,"prbrakt", GetTickCount() + 60000*25);
		}
		else if(newkeys == KEY_NO)
		{
			if(WeddingTwo[playerid] < MAX_PLAYERS && WeddingTwo[playerid] >= 0 && GetPVarIntNew(WeddingTwo[playerid], "brakid") != playerid)
			{
	   			predlojbrak[playerid] = 0;
	   			return 1;
	   		}
			SCM(playerid,-1,"Вы отвергли предложение вступить в брак");
			SCM(WeddingTwo[playerid],-1,"Вам отвергли предложение вступить в брак");
			predlojbrak[playerid] = 0;
		}
	}
 	if(pTemp[playerid][pCuffee] == playerid)
	{
		if(!IsPlayerInAnyVehicle(playerid))
		{
			if((newkeys & KEY_JUMP || newkeys & KEY_FIRE || newkeys & KEY_CROUCH || (newkeys & KEY_HANDBRAKE && newkeys & KEY_SECONDARY_ATTACK)) && pTemp[playerid][pControllable])
			{
				ClearAnimations(playerid,1);
 				ApplyAnimation(playerid,"FAT","IDLE_tired",3.0,1,0,0,0,3000,1);
 				SendErr(playerid, "Вы не можете использовать это действие так как Вы в наручниках.");
			}
		}
	}

	if(newkeys & KEY_JUMP && newkeys & KEY_SPRINT)
	{
		if(pRealState[playerid] == 1 && pTemp[playerid][pTazer] < 1)
		{
			new index = GetPlayerAnimationIndex(playerid);
			if(index == 1224 || index == 1247 || index == 1257 || index == 1249 || index == 1196 || index == 1249)
			{
				new keys,ud,lr;
				GetPlayerKeys(playerid,keys,ud,lr);
				if(ud != 0 || lr != 0) ClearAnimations(playerid);
			}
		}
	}

	if(newkeys & KEY_YES)
	{


		if(pTemp[playerid][pAcceptFreeact] == playerid)
		{
			new acter = pTemp[playerid][pAcceptFree];
			if(pData[acter][pFraction] == 11 && pData[acter][pRank] == 6 && pData[acter][pSubfraction] != 0) {
			if(GetPlayerDistanceToPlayer(acter,playerid) > 5.0 || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(acter) || pData[playerid][pJail]  < 1 || !IsPlayerConnected(acter))
			{
			pTemp[playerid][pAcceptFreeact] = -1;
			pTemp[playerid][pAcceptFree] = -1;
			}
			else
			{
			if(GetPlayerMoneyEx(playerid) < 5000)
			{
			SCM(playerid, COLOR_LIGHTRED , "У вас недостаточно денег на освобождение");
			pTemp[playerid][pAcceptFreeact] = -1;
			pTemp[playerid][pAcceptFree] = -1;
			return 1;
			}

			pData[playerid][pJail] = 1;

			give_money(playerid, -5000,"Освобождение из тюрьмы");
			give_money(playerid, 500, "Освобождение из тюрьмы");
			GosMoney[0] += 3500;
			SaveNewsMoneyEx();

			format(String256, sizeof(String256), "Вы выпустили %s из тюрьмы", pData[playerid][pNickname]);
			SCM(acter, COLOR_LIGHTRED, String256);
			format(String256, sizeof(String256), "Адвокат %s выпустил Вас из тюрьмы.",pData[acter][pNickname]);
			SCM(playerid, COLOR_LIGHTRED , String256);


			new fractionid = pData[acter][pFraction]-1;
			new mesid[128];
			format(mesid,sizeof(mesid),"[R] Адвокат %s выпустил %s из тюрьмы",pData[acter][pNickname],pData[playerid][pNickname]);
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(IsPlayerConnected(i) && pData[i][pFraction] == fractionid+1 &&
				pData[i][pSubfraction] == pData[acter][pSubfraction]) SCM(i,0x5da130FF,mesid);
			}
			pTemp[playerid][pAcceptFreeact] = -1;
			pTemp[playerid][pAcceptFree] = -1;


			}


			}
			else
			{
			pTemp[playerid][pAcceptFreeact] = -1;
			pTemp[playerid][pAcceptFree] = -1;
			}


		}

		if(GetPVarIntNew(playerid,"sexoffee") == playerid && GetPVarIntNew(playerid,"sexoffer") != playerid)
		{
			new offer = GetPVarIntNew(playerid,"sexoffer");
			new price = 1500;
			new value = GetPVarIntNew(playerid,"sexvalue");
			if(GetPVarIntNew(offer,"sexoffee") == playerid)
			{
				if(GetPlayerMoneyEx(playerid) < price) {
				SetPVarIntNew(playerid,"sexoffee",-1);
				SetPVarIntNew(playerid,"sexoffer",-1);
				SetPVarIntNew(playerid,"sexvalue",0);
				SetPVarIntNew(offer,"sexoffee",0);
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendErr(playerid, "У Вас недостаточно денег");
				}
				SetPVarIntNew(playerid,"sexoffee",-1);
				SetPVarIntNew(playerid,"sexoffer",-1);
				SetPVarIntNew(playerid,"sexvalue",0);
				SetPVarIntNew(offer,"sexoffee",0);
		  		pData[playerid][pSex] = value;
				UpdatePlayerData(playerid,"sex",pData[playerid][pSex]);

				give_money(playerid, -price, "Смена пола");
				give_money(offer, price, "Проведение операции по смене пола");
			   	new mes[128]; format(mes,sizeof(mes),"провел операцию по смене пола %s", pData[playerid][pNickname]);
				MeAction(offer,mes);
			}
		}


		if(GetPVarIntNew(playerid,"drugoffee") == playerid && GetPVarIntNew(playerid,"drugoffer") != playerid)
		{
			new offer = GetPVarIntNew(playerid,"drugoffer");
			new price = GetPVarIntNew(playerid,"drugprice");
			new value = GetPVarIntNew(playerid,"drugvalue");
			if(GetPVarIntNew(offer,"drugoffee") == playerid)
			{
				SetPVarIntNew(playerid,"drugoffee",0);
				SetPVarIntNew(playerid,"drugoffer",0);
				SetPVarIntNew(playerid,"drugvalue",0);
				SetPVarIntNew(playerid,"drugprice",0);
				SetPVarIntNew(offer,"drugoffee",0);
				if(pData[offer][pDrugs] < value) return SendErr(playerid, "У продавца закончились наркотики");
				if(GetPlayerMoneyEx(playerid) < price)
				{
					show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
					return SendErr(playerid, "У Вас недостаточно денег для покупки");
				}
				if(pData[playerid][pDrugs]+value > 500 + pData[playerid][pUpgrade][1]*500) return SendErr(playerid, "У Вас не может быть более 0.5(1 с улучшением) кг  наркотиков");

				give_money(playerid, -price, "Продажа наркотиков");
				give_money(offer, price, "Продажа наркотиков");

				pData[offer][pDrugs] -= value;
				UpdatePlayerData(offer,"drugs",pData[offer][pDrugs]);
				pData[playerid][pDrugs] += value;
				UpdatePlayerData(playerid,"drugs",pData[playerid][pDrugs]);
				new mes[64];
				if(pData[playerid][pSex] == 2) {
				format(mes,sizeof(mes),"продала наркотики %s", pData[playerid][pNickname]);
				}
				else {
				format(mes,sizeof(mes),"продал наркотики %s", pData[playerid][pNickname]);
				}
				MeAction(offer,mes);
			}
		}

		if(GetPVarIntNew(playerid,"drugoffee2") == playerid && GetPVarIntNew(playerid,"drugoffer2") != playerid)
		{
			new offer = GetPVarIntNew(playerid,"drugoffer2");
			new price = GetPVarIntNew(playerid,"drugprice2");
			new value = GetPVarIntNew(playerid,"drugvalue2");
			if(GetPVarIntNew(offer,"drugoffee2") == playerid)
			{
				SetPVarIntNew(playerid,"drugoffee2",0);
				SetPVarIntNew(playerid,"drugoffer2",0);
				SetPVarIntNew(playerid,"drugvalue2",0);
				SetPVarIntNew(playerid,"drugprice2",0);
				SetPVarIntNew(offer,"drugoffee2",0);
				if(pData[offer][pHDrugs] < value) return SendErr(playerid, "У продавца закончились наркотики");
				if(GetPlayerMoneyEx(playerid) < price)
				{
					show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
					return SendErr(playerid, "У Вас недостаточно денег для покупки");
				}
				if(pData[playerid][pHDrugs]+value > 50 + pData[playerid][pUpgrade][1]*50) return SendErr(playerid, "У Вас не может быть более 50(100 с улучшением) гр. наркотиков");
				give_money(playerid, -price, "Продажа наркотиков");
				give_money(offer, price, "Продажа наркотиков");
				pData[offer][pHDrugs] -= value;
				UpdatePlayerData(offer,"hdrugs",pData[offer][pHDrugs]);
				pData[playerid][pHDrugs] += value;
				UpdatePlayerData(playerid,"hdrugs",pData[playerid][pHDrugs]);
				new mes[64];
				if(pData[playerid][pSex] == 2) {
				format(mes,sizeof(mes),"продала наркотики %s", pData[playerid][pNickname]);
				}
				else
				{
				format(mes,sizeof(mes),"продал наркотики %s", pData[playerid][pNickname]);
				}
				MeAction(offer,mes);
			}
		}

	}
	if(newkeys & KEY_NO)
	{

		if(pTemp[playerid][pShowMedact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowMedpl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowMedact] = -1;
			pTemp[playerid][pShowMedpl] = -1;
		}
		else
		{

		}
		if(pTemp[playerid][pShowUdact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowUdpl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowUdact] = -1;
		}
		if(pTemp[playerid][pShowHiact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowHipl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowHiact] = -1;
		}
		else
		{
			show_fast_menu(playerid, FAST_MENU_GENERAL_PLAYER, TEXTDRAW_SHOW);
		}
		if(pTemp[playerid][pShowListact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowListpl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowListact] = -1;
		}

		if(pTemp[playerid][pShowPassact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowPasspl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowPassact] = -1;
		}
		if(pTemp[playerid][pShowPtsact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowPtspl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowPtsact] = -1;
		}
		if(pTemp[playerid][pShowInvact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowInv],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowInvact] = -1;
		}
		if(pTemp[playerid][pShowSkillact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowSkillpl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowSkillact] = -1;
		}
		if(pTemp[playerid][pShowLicact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pShowLicpl],-1,"Игрок отказался от предложения");
			pTemp[playerid][pShowLicact] = -1;
		}
		if(pTemp[playerid][pAcceptFreeact] == playerid)
		{
			SCM(playerid,-1,"Вы отказались от предложения");
			SCM(pTemp[playerid][pAcceptFree],-1,"Игрок отказался от предложения");
			pTemp[playerid][pAcceptFreeact] = -1;
			pTemp[playerid][pAcceptFree] = -1;
		}

		if(playerid == pTemp[playerid][pSellPhoneOffee])
		{
			new offerid = pTemp[playerid][pSellPhoneOffer];
			SendErr(playerid, "Вы отказались от покупки телефона");
			SCM(offerid,CGRAY,"Покупатель отказался покупать телефона");
			if(pTemp[offerid][pSellPhoneOffer] == playerid) {
			pTemp[offerid][pSellPhoneOffer] = INVALID_PLAYER_ID;
			}
			pTemp[playerid][pSellPhoneOffer] = INVALID_PLAYER_ID;
			pTemp[playerid][pSellPhoneOffee] = INVALID_PLAYER_ID;
 			pTemp[playerid][pSellPhonePrice] = 0;
			pTemp[playerid][pSellPhoneNomer] = 0;
 		}
		if(playerid == pTemp[playerid][pSellBiletOffee])
		{
			new offerid = pTemp[playerid][pSellBiletOffer];
			SendErr(playerid, "Вы отказались от покупки билета");
			SCM(offerid,CGRAY,"Покупатель отказался покупать билет");
			pTemp[offerid][pSellBiletOffer] = INVALID_PLAYER_ID;
			pTemp[playerid][pSellBiletOffer] = INVALID_PLAYER_ID;
			pTemp[playerid][pSellBiletOffee] = INVALID_PLAYER_ID;
			pTemp[playerid][pSellBiletPrice] = 0;
 		}

		if(GetPVarIntNew(playerid, "sexoffee") == playerid && GetPVarIntNew(playerid,"sexoffer") != playerid)
		{
			new offer = GetPVarIntNew(playerid,"sexoffer");
			if(GetPVarIntNew(offer,"sexoffee") == playerid)
			{
				SetPVarIntNew(playerid,"sexoffee",-1);
				SetPVarIntNew(playerid,"sexoffer",-1);
				SetPVarIntNew(offer,"sexoffee",0);
				SCM(playerid,CBLUE,"Вы отказались от смены пола");
				SCM(offer,CBLUE,"Клиент отказался от смены пола");
			}
			else
			{
				show_fast_menu(playerid, FAST_MENU_GENERAL_PLAYER, TEXTDRAW_SHOW);
			}
		}

		if(GetPVarIntNew(playerid,"bizoffee") == playerid && GetPVarIntNew(playerid,"bizoffer") != playerid)
		{
			new offer = GetPVarIntNew(playerid,"bizoffer");
			if(GetPVarIntNew(offer,"bizoffee") == playerid)
			{
				SetPVarIntNew(playerid,"bizoffee",0);
				SetPVarIntNew(playerid,"bizoffer",0);
				SetPVarIntNew(playerid,"biztype",0);
				SetPVarIntNew(playerid,"bizprice",0);
				SetPVarIntNew(offer,"bizoffee",0);
				SCM(playerid,CBLUE,"Вы отказались от покупки бизнеса для крышевания");
				SCM(offer,CBLUE,"Клиент отказался от покупки бизнеса для крышевания");
			}
		}
		if(GetPVarIntNew(playerid,"bbizoffee") == playerid && GetPVarIntNew(playerid,"bbizoffer") != playerid)
		{
			new offer = GetPVarIntNew(playerid,"bbizoffer");
			if(GetPVarIntNew(offer,"bbizoffee") == playerid)
			{
				SetPVarIntNew(playerid,"bbizoffee",0);
				SetPVarIntNew(playerid,"bbizoffer",0);
				SetPVarIntNew(playerid,"bbiztype",0);
				SetPVarIntNew(playerid,"bbizprice",0);
				SetPVarIntNew(offer,"bbizoffee",0);
				SCM(playerid,CBLUE,"Вы отказались от покупки компании для крышевания");
				SCM(offer,CBLUE,"Клиент отказался от покупки компании для крышевания");
			}
		}
	}


	return 1;
}

public OnRconLoginAttempt(ip[], password[], success)
{
	if(!success)
	{
		format(String256,sizeof(String256),"banip %s",ip);
		SendRconCommand(String256);
		SendRconCommand("reloadbans");
	}

	return 1;
}

public OnPlayerUpdate(playerid)
{
	pTemp[playerid][pAFK] = 0;
	pTemp[playerid][pIsAFK] = false;


 	OPTICK = GetTickCount();
	pState = pRealState[playerid];
	pWeapon = GetPlayerWeapon(playerid);

	new PlayerStateUpdate = GetPlayerState(playerid);

	if(PlayerStateUpdate==1)
	{

		if(GetPlayerAnimationIndex(playerid) == 1129 || GetPlayerAnimationIndex(playerid) == 1208)//проверка на анимации
	 	{
			if(GetPVarIntNew(playerid, "hud_hide") != 1)
			{
				show_hud_element(playerid);
			}
		}
		if(pState == PLAYER_STATE_ONFOOT)
		{
			new index;

			if(OPTICK > last_upd[playerid])
			{

				if(pTemp[playerid][pCuffee] == playerid && pTemp[playerid][pControllable] )
				{
					GetPlayerKeys(playerid,newkeysU,udU,lrU);
					if(  (udU || lrU) && !(newkeysU & KEY_WALK || newkeysU & KEY_SPRINT))
					{
						GetAnimationName(index, String32, sizeof(String32), String64, sizeof(String64));
						if( strcmp(String64, "IDLE_tired", true) )
						{
					   	 	if(GetPVarIntNew(playerid,"naruch") == 0)
							{
								ApplyAnimation(playerid,"FAT","IDLE_tired",3.0,1,0,0,0,3000);
								SCM(playerid,CGRAY,"Вы не можете бегать в наручниках. Зажмите клавишу ходьбы и идите шагом.");
								SetPVarIntNew(playerid,"naruch",1);
							}
							else ApplyAnimation(playerid,"FAT","IDLE_tired",3.0,1,0,0,0,3000);
						}
					}
				}
			}
		}
	}
	else if(PlayerStateUpdate==2)
	{
		check_truck_work_trailer(playerid);
	}


	OnPlayerUpdate_time = GetTickCount()- OPTICK;

	if(OnPlayerUpdate_time > TickMax)
	{
		new MSG[144];
		format(MSG,sizeof(MSG),"[OnPlayerUpdate] Задержка таймер составил -  %d мс!", OnPlayerUpdate_time);
		AdminChatEx(0x007fffff,MSG);
		logs_status_server_info(MSG);
	}
	return 1;
}

public OnActorStreamIn(actorid, forplayerid)
{

	return true;
}
public OnPlayerStreamIn(playerid, forplayerid)
{
	if(pData[forplayerid][pSettings][3] == 0)
	{
		ShowPlayerNameTagForPlayer(playerid, forplayerid, 0);
		ShowPlayerNameTagForPlayer(forplayerid, playerid, 0);
	}
	else
	{
		ShowPlayerNameTagForPlayer(playerid, forplayerid, 1);
		ShowPlayerNameTagForPlayer(forplayerid, playerid, 1);
	}

	return 1;
}

public OnPlayerStreamOut(playerid, forplayerid)
{
	if(	pTemp[playerid][pWantedSu] == forplayerid+1)
	{
			if(pData[playerid][pWanted] > 0 && GetPlayerInterior(playerid) == 0) {
				}
			if(GetPlayerState(playerid) == 2 || GetPlayerState(playerid) == 3)
			{
			SetVehicleParamsForPlayer( GetPlayerVehicleID(playerid)  , forplayerid , 0 , 0);
			}
			new mes[260];
			format(mes,sizeof(mes),"Погоня за вами прервана");
			SCM(playerid,CINFO,mes);
			SCM(forplayerid,CINFO,"Погоня прервана");
			pTemp[playerid][pWantedSu] = 0;
	}
	return 1;
}

public OnVehicleStreamIn(vehicleid, forplayerid)
{
	Iter_Add(streamed_players_in_veh[vehicleid], forplayerid);
	Iter_Add(vehicle_in_stream[forplayerid], vehicleid);

	sc_OnVehicleStreamIn(vehicleid, forplayerid);
	return 1;
}

public OnVehicleStreamOut(vehicleid, forplayerid)
{
	sc_OnVehicleStreamIn(vehicleid, forplayerid);
	Iter_Remove(streamed_players_in_veh[vehicleid], forplayerid);
	Iter_Remove(vehicle_in_stream[forplayerid], vehicleid);
	return 1;
}
new don_string[150];

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
    if(dialogid == 3999)
    {
		    if(!response)
		        return true;
		        
			switch(listitem)
			{
			    case 0:
			    {
			        SendClientMessageToAll(COLOR_LIGHTRED, "Сервер был выключен администрацией! Ожидайте новостей в оф. группе проекта!");
			    
			        SendRconCommand("exit");
			    }
			    case 1:
				{
					gmx_mode_ex();
				}
				case 2:
				{
                    IsActionTrue2 = 1;
                    
					SendClientMessageToAll(COLOR_LIGHTRED, ""cBLUE"- Администратор включил X2 СЕРВЕР на целый день!");
				}
				case 3:
				{
                    IsActionTrue2 = 0;

					SendClientMessageToAll(COLOR_LIGHTRED, ""cBLUE"- Администратор выключил X2 СЕРВЕР!");
				}
				case 4:
				{
				    new
				        technical_job = 0;
				        
				    if(!technical_job)
					{
						technical_job = 1;

						SendRconCommand("password vogliooo");

						SendAdminMessage(COLOR_LIGHTRED, "[SERVER] Пароль для входа: vogliooo");

						SendClientMessageToAll(COLOR_LIGHTRED, ""cBLUE"- Администратор поставил сервер на технические работы! Ожидайте новостей в оф. группе проекта!");

						foreach(new i:Player)
							Kick(i);
					}
					else
					{
					    technical_job = 0;
					    
						SendRconCommand("password");
						
						SendClientMessageToAll(COLOR_LIGHTRED, ""cBLUE"- Администратор снял сервер с технических работ!");
					}
				}
				case 5:
				{
					new
					    count;
					    
					for(new i = 0,j = MAX_VEHICLES; i < j;i++)
	    			{
	        			if(!vehicle[i][cIsCreated])
							continue;
						if(IsVehicleOccupied(i) || !IsValidVehicle(i))
							continue;
							
						DestroyVehicle(i);
						vehicle[i][cIsCreated] = false;
						count++;
						vehicle_is_rent(i);
			    	}
				}
			}
		}
    dialog_container(playerid, dialogid, response, listitem, inputtext);
	//printf("[DEBUG][OnDialogResponse] player_name: %s | playerid: %d | dialogid: %d | listitem: %d | inputtext: %s | pData: %d", pData[playerid][pNickname], playerid, dialogid, listitem, inputtext, pData[playerid][p_dialog]);

	/*format(String256, sizeof(String256), "[OnDialogResponse] player_name: %s | playerid: %d | dialogid: %d | listitem: %d | pData: %d", pData[playerid][pNickname], playerid, dialogid, listitem, inputtext, pData[playerid][p_dialog]);
	logs_player_dialog(playerid, pData[playerid][pMysqlID], String256);*/

	if(pData[playerid][p_dialog] != dialogid)
	{
		pData[playerid][p_dialog] = -1;
		return true;
	}
	pData[playerid][p_dialog] = -1;

	if(strlen(inputtext) && (strfind(inputtext,"`") != -1 || strfind(inputtext,"%") != -1 || strfind(inputtext,"\\") != -1 || strfind(inputtext,"=") != -1)  && dialogid != dAdvertList)
	{
		if(pData[playerid][pAdmin] < 8)
		{
			return SCM(playerid,-1,"Ошибка. Вы использовали запрещенные символы.");
		}
	}

	for (new i = strlen(inputtext); i > -1; i--)
	{
		if (inputtext[i] == '%') inputtext[i] = '#';
		if (inputtext[i] == '{') inputtext[i] = '(';
		else if (inputtext[i] == '}') inputtext[i] = ')';
	}

	new time_debug = GetTickCount();

	//dialog_march_quest_all(playerid, dialogid, response, listitem, inputtext);
	dialog_faq_all(playerid, dialogid, response, listitem);
	dialog_medcard(playerid, dialogid, response);
	dialog_all_fast_menu_player(playerid, dialogid, response, listitem, inputtext);
	dialog_security(playerid, dialogid, response, listitem, inputtext);
	dialog_bank_work(playerid, dialogid, response, inputtext);
	dialog_all_player_vehicle(playerid, dialogid, response, listitem, inputtext);
	dialog_all_realtor_agency(playerid, dialogid, response, listitem, inputtext);
	dialog_all_fish(playerid, dialogid, response, listitem, inputtext);
	dialog_all_green_house(playerid, dialogid, response, listitem, inputtext);
	dialog_police_commad(playerid, dialogid, response, listitem);
	dialog_report_systems(playerid, dialogid, response, inputtext);
	dialog_all_hunter(playerid, dialogid, response, listitem, inputtext);
	dialog_all_inventory(playerid, dialogid, response, listitem, inputtext);
	dialog_all_fire(playerid, dialogid, response, listitem, inputtext);
	dialog_all_election(playerid, dialogid, response, listitem, inputtext);
	dialog_all_promo_admin(playerid, dialogid, response, listitem, inputtext);
	dialog_charity(playerid, dialogid, response, listitem, inputtext);
	dialog_army_cancel(playerid, dialogid, response);
	ShowArmyGunDialog(playerid, dialogid, response, listitem);
	ShowArmyKitchenDialog(playerid, dialogid, response, listitem);
	ShowBizwarDialog(playerid, dialogid, response, listitem, inputtext);
	ShowMafiaWHDialog(playerid, dialogid, response, listitem, inputtext);
	dialog_selling_snow(playerid, dialogid, response);
	dialog_new_year(playerid, dialogid, response);
	dialog_snow_work(playerid, dialogid, response);
	show_dialog_mechanic_accept(playerid, dialogid, response, inputtext);
	dialog_sell_simcard(playerid, dialogid, response);
	dialog_all_sell_property(playerid, dialogid, response, listitem, inputtext);
	dialog_all_army(playerid, dialogid, response, listitem, inputtext);
	dialog_all_hospital(playerid, dialogid, response, listitem, inputtext);
	dialog_all_news(playerid, dialogid, response, listitem, inputtext);
	dialog_all_federal(playerid, dialogid, response, listitem, inputtext);
	dialog_all_police(playerid, dialogid, response, listitem, inputtext);
	dialog_all_gov(playerid, dialogid, response, listitem, inputtext);
	dialog_all_navigator(playerid, dialogid, response, listitem);
	dialog_all_taxi(playerid, dialogid, response, listitem, inputtext);
	dialog_all_vehicle_config(playerid, dialogid, response, listitem, inputtext);
	dialog_all_trucker(playerid, dialogid, response, listitem, inputtext);
	dialog_all_phone(playerid, dialogid, response, listitem, inputtext);
	dialog_all_miner(playerid, dialogid, response, listitem, inputtext);
	dialog_all_family(playerid, dialogid, response, listitem, inputtext);
	dialog_all_casino(playerid, dialogid, response, listitem, inputtext);
	dialog_all_off_message(playerid, dialogid, response, listitem);
	dialog_all_bus_work(playerid, dialogid, response, listitem);
	dialog_all_property(playerid, dialogid, response, listitem, inputtext);
	dialog_veh_engine_st(playerid, dialogid, response, listitem);
	dialog_bind_command(playerid, dialogid, response, listitem, inputtext);
	dialog_all_buisnes(playerid, dialogid, response, listitem, inputtext);
	dialog_all_hotel(playerid, dialogid, response, listitem, inputtext);
	dialog_all_mechanic(playerid, dialogid, response, listitem, inputtext);
	dialog_all_garage(playerid, dialogid, response, listitem);
	dialog_all_house(playerid, dialogid, response, listitem, inputtext);
	dialog_house_items(playerid, dialogid, response, listitem, inputtext);
	dialog_house_wardrobe(playerid, dialogid, response, listitem, inputtext);
	dialog_flate_wardrobe(playerid, dialogid, response, listitem);
	dialog_flate_items(playerid, dialogid, response, listitem, inputtext);
	dialog_all_flate(playerid, dialogid, response, listitem, inputtext);
	dialog_fish(playerid, dialogid, response, listitem);
	dialog_autoschool(playerid, dialogid, response, inputtext);
	dialog_all_fill(playerid, dialogid, response, listitem, inputtext);
	dialog_promocode_friend(playerid, dialogid, response, listitem, inputtext);
	dialog_new_number(playerid, dialogid, listitem, response, inputtext);

	switch(dialogid)
	{
		case D_SELLCAR:
		{
	     	new
				seller = pTemp[playerid][pSellCarOffer];

	     	if(!response)
	    	{
	        	SendInf(seller, "Игрок отказался от покупки Т/С");
	        	SendInf(playerid, "Вы отказались от покупки Т/С");

	        	pTemp[seller][pSellCarID] 		=
	        	pTemp[seller][pSellCarPrice] 	= 0;

	        	pTemp[seller][pSellCarOffer] 	=
				pTemp[playerid][pSellCarOffer] 	= INVALID_PLAYER_ID;

                return 1;
	    	}

	    	SellCarToPlayer(seller, playerid);

			return 1;
   		}
	    case 4000:
	    {
	        if(!response)
	            return true;
	        new id = spec_ad[playerid];
	        if(!IsPlayerConnected(id)) 
		       return SendErr(playerid,"Неверный ID");
            new mes[128];
	       new nick[24];
	       if(pData[id][pAdmin] > pData[playerid][pAdmin]) 
	       {
              format(mes,sizeof(mes),"Администратор %s попытался кикнуть Администратора %s",pData[playerid][pNickname],pData[id][pNickname]);
		      AdminChat(CGRAY,mes);
		      return 1;
	       }
	       if(pData[id][pAdmin] == 7 && pData[playerid][pAdmin] < 8) 
		       return SendClientMessage(playerid, -1, "Данный игрок является старшим администратором!");

	       GetPlayerName(id,nick,24);
	       format(mes,sizeof(mes),"Администратор %s кикнул игрока %s. Причина: %s",pData[playerid][pNickname],nick,inputtext);
	       SendAdminMessage(COLOR_LIGHTRED,mes,id);
           logs_admin(playerid, pData[playerid][pMysqlID], mes);
	       show_notify_gui(id, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_33", 4000);
           NewKick(id);
	       pData[ playerid ][pScoreGame][11] += 2;
	       UpdatePlayerData( playerid , "game12", pData[ playerid ][ pScoreGame ][11] );
	       StopSpectate(playerid);
	       return true;
	    }
	    case 4001:
	    {
		if(!response)
			    return true;
	    if(pData[playerid][pAdmin] < 4) 
		return NoCMD(playerid);

	    new id = spec_ad[playerid];

	if(!IsPlayerConnected(id) || IsKicked(id))
		return SendErr(playerid,"Неверный ID");

	if(!pData[id][pMysqlID]) 
		return SendErr(playerid,"Этот игрок не зарегистрирован");

	if(pData[id][pAdmin] == 7 && pData[playerid][pAdmin] < 8) 
		return SendClientMessage(playerid, -1, "Данный игрок является старшим администратором!");

	if(pData[id][pAdmin] == 8 && pData[playerid][pAdmin] < 8) 
		return SendClientMessage(playerid, -1, "Данный игрок является старшим администратором!");

	new 
		mes[266];

	ResetPlayerWeaponsEx(id);
	pData[id][pWarnc]++;

	if(pData[id][pWarnc]-1 > 0)
	{
	 	pData[id][pWarn] += WARN_TIME;
	}
	else
	{
		pData[id][pWarn] = gCurDay + WARN_TIME;
	} 

	format(mes,sizeof(mes),"UPDATE `accounts` SET `warn` = '%i', `warnc` = '%i', `fraction` = '0', `subfraction` = '0',`rank` = '0',`fwarn` = '0', `fractionskin` = '0' WHERE `id` = '%d'",pData[id][pWarn],pData[id][pWarnc],pData[id][pMysqlID]);
	sql_queryEx(zConn, mes, QUERY_THREADED);

	if(pData[id][pWarnc] < 3) 
	{
		format(String144,sizeof(String144),"Администратор %s выдал предупреждение игроку %s [%i/3]. Причина: %s",pData[playerid][pNickname],pData[id][pNickname],pData[id][pWarnc],inputtext);
		logs_admin(playerid, pData[playerid][pMysqlID], String144);

		show_notify_gui(id, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_35", 4000);
	}
	else
	{
	    format(mes,sizeof(mes),"UPDATE `accounts` SET `warn` = '0', `warnc` = '0' WHERE `id` = '%d'", pData[id][pMysqlID]);
		sql_queryEx(zConn, mes, QUERY_THREADED);

		format(String144,sizeof(String144),"Администратор %s забанил игрока %s (3 предупреждения). Причина: %s",pData[playerid][pNickname],pData[id][pNickname],inputtext);
		logs_admin(playerid, pData[playerid][pMysqlID], String144);


		new
			date[35], 
			h, m, s, 
			day, month, year;  

		gettime(h, m, s);
		getdate(year, month, day);
		format(date, sizeof(date),"%d-%02d-%d %02d:%02d:%02d", year, month, day, h, m, s);

		OnlineBanAccount(playerid, id, inputtext, date, 10);

	}
	SendClientMessageToAll(COLOR_LIGHTRED, String144);
	NewKick(id);
	StopSpectate(playerid);
	return true;
	    }
	    case 4002:
	    {
		    if(!response)
			    return true;
		    mute_time[spec_ad[playerid]] = strval(inputtext);
		    return SPD(playerid, 4004, DIALOG_STYLE_INPUT, "Выдача мута", "Введите причину мута:", "Мут", "Отмена");
		}
		case 4004:
		{
			if(!response)
			    return true;
			if(pData[playerid][pAdmin] < 2) 
		return NoCMD(playerid);

	new id = spec_ad[playerid];
	 if( pData[id][pMut] > 0)
	{
		format(String256, sizeof( String256), "Время бана чата игрока: %d мин",pData[id][pMut]);
		SendInf(playerid, String256);
	}

	new time = mute_time[spec_ad[playerid]];
	if(time < 10 || time > 180) 
		return SendErr(playerid,"Введите время от 10 до 180 минут");
	if(pData[id][pMut] > 0) 
		return SendClientMessage(playerid, -1, "Данному игроку уже выдан бан чата!");
	if(pData[id][pAdmin] == 7 && pData[playerid][pAdmin] < 8) 
		return SendClientMessage(playerid, -1, "Данный игрок является старшим администратором!");

	pData[id][pMut] = time;
	UpdatePlayerData(id,"mut",time);

	VoiceChat_MutePlayer(playerid);

	new mes[144];
	format(mes,sizeof(mes),"Администратор %s выдал бан чата игроку %s на %d минут. Причина: %s",pData[playerid][pNickname],pData[id][pNickname],time,inputtext);
	SendAdminMessage(COLOR_LIGHTRED,mes,id);

	logs_admin(playerid, pData[playerid][pMysqlID], mes);

	show_notify_gui(spec_ad[playerid], TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_34", 4000);

	format(mes,sizeof(mes),"Вы получили бан чата от администратора %s на %d минут. Причина: %s",pData[playerid][pNickname],time,inputtext);
	SendClientMessage( id , COLOR_LIGHTRED, mes );
	pData[ playerid ][pScoreGame][11] += 3;
	UpdatePlayerData( playerid , "game12", pData[ playerid ][ pScoreGame ][11] );


	return true;
		}
		case 4006:
		{
			
		}
	    case 4496:
	    {
	        if(!response)
	            return true;
	        new url[128];
	        switch(listitem) {
	            case 0: format(url, sizeof url, "http://chanson.hostingradio.ru:8041/chanson-uncensored128.mp3");
	            case 1: format(url, sizeof url, "http://nashe1.hostingradio.ru/nashe-128.mp3");
	            case 2: format(url, sizeof url, "http://zaycevfm.cdnvideo.ru/ZaycevFM_relax_128.mp3");
	            case 3: format(url, sizeof url, "http://zaycevfm.cdnvideo.ru/ZaycevFM_pop_128.mp3");
	            case 4: format(url, sizeof url, "http://nashe1.hostingradio.ru/nashe20-128.mp3");
	            case 5: format(url, sizeof url, "http://zaycevfm.cdnvideo.ru/ZaycevFM_club_128.mp3");
	            case 6: format(url, sizeof url, "http://nashe1.hostingradio.ru/nasheclassic.mp3");
	            case 7: format(url, sizeof url, "http://nashe1.hostingradio.ru/nashepunks.mp3");
	            case 8: format(url, sizeof url, "https://radio.plaza.one/mp3");
	        }
	        return PlayerPlayStream(playerid, url);
	    }
	    case 4500:
		{
			if(!response) return true;
		   	connect_code[listitem] = !connect_code[listitem];
			PC_EmulateCommand(playerid, "/connect");
			return true;
		}

		case DIALOG_SELECT_TYPE_HOUSE:
		{
			if(!response)
				return true;

			switch(listitem)
			{
				case 0:
				{
					spawn_player_house_all(playerid);
				}
				case 1:
				{
					spawn_player_house_family(playerid);
				}
			}
		}
		
		

		case dLeave:
		{
 			if(!response) return 1;
			if(!pData[playerid][pFraction]) return SendClientMessage(playerid,CGRAY,"Вы не состоите в организации.");
			if(IsALeader(playerid)) return SendClientMessage(playerid,CGRAY,"Вы не можете уволиться из организации");
			if(!pData[playerid][pUpgrade][0]) return SendErr(playerid,"Вы не можете уволиться из организации без улучшения 'Решительность' (/mn->Улучшения)");
			if(pData[playerid][pJail] > 0 ) return SendClientMessage(playerid,COLOR_WHITE,"Вы не можете уволиться из организации сейчас");

			new lenz = strlen(inputtext);
			if(  lenz > 64  ) {
				SPD(playerid, dLeave, DIALOG_STYLE_MSGBOX, "{ffff00}Увольнение из организации", "\nВы действительно хотите уволиться из организации?\nВведите причину вашего увольнения:\n\n", "Уволиться", "Отмена");
				return SendClientMessage(playerid,CGRAY,"Вы ввели слишком длинную причину");
			}
			if(  lenz < 3  ) {
				SPD(playerid, dLeave, DIALOG_STYLE_MSGBOX, "{ffff00}Увольнение из организации", "\nВы действительно хотите уволиться из организации?\nВведите причину вашего увольнения:\n\n", "Уволиться", "Отмена");
				return SendClientMessage(playerid,CGRAY,"Вы ввели слишком короткую причину");
			}

			new tmp[64];
			format(tmp, sizeof(tmp), inputtext);


			new query[144];
			format(query,sizeof(query),"UPDATE `accounts` SET `fraction` = '0', `rank` = '0', `dvs` = '0', `fractionskin` = '0', `subfraction` = '0' WHERE `id` = '%d'",pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			SetPlayerArmourEx(playerid, 0);
			ResetPlayerWeaponsEx(playerid);
			new fractionid = pData[playerid][pFraction]-1;
			new rank = pData[playerid][pRank];
			new subfraction = pData[playerid][pSubfraction];
			pData[playerid][pFraction] = 0;
			pData[playerid][pRank] = 0;
			pData[playerid][pDivision] = 0;
			pData[playerid][pFractionSkin] = 0;
			pData[playerid][pFWarn] = 0;
			UpdatePlayerData(playerid, "fwarn", pData[playerid][pFWarn]);

			new psubf = pData[playerid][pSubfraction];
			pData[playerid][pSubfraction] = 0;
			ResetPlayerWeaponsEx(playerid);
			SetPlayerColor(playerid,0xFFFFFF11);

			new Float:dfdsf[3]; GetPlayerPos(playerid,dfdsf[0], dfdsf[1],dfdsf[2]);
			new pRstate = GetPlayerState(playerid);
			if( pRstate == 2 || pRstate == 3 ) { SetPlayerPos(playerid, dfdsf[0], dfdsf[1],dfdsf[2]); }
			SetPlayerSkin(playerid,pData[playerid][pSkin]);
			format(query,sizeof(query),"%s %s[%d] уволился из организации. Причина: %s",gFractionRankName[fractionid][rank-1],pData[playerid][pNickname],playerid,tmp);
			if(fractionid+1 == 11 && !psubf && rank <= 9)
				format(query,sizeof(query),"%s %s[%d] уволился из организации. Причина: %s",gPrezRankName[rank-1],pData[playerid][pNickname],playerid,tmp);
			if(fractionid+1 == 8 && psubf == 3 && rank <= 12)
				format(query,sizeof(query),"%s %s[%d] уволился из организации. Причина: %s",gVmfRankName[rank-1],pData[playerid][pNickname],playerid,tmp);

			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if( pData[i][pFraction] == fractionid+1 &&
				pData[i][pSubfraction] == subfraction) SendClientMessage(i,CYELLOW,query);
			}
			SendSucc(playerid, "Вы уволились из организации");
			return 1;
		}

		case DIALOG_BUY_MENU_NEWYEAR:
		{
			if(!response)
				return true;

			switch(listitem)
			{
				case 0: return select_menu_cafe_eat(playerid);
				case 1: return select_menu_cafe_buyhlo(playerid);
				case 2: return select_menu_cafe_kids(playerid);
			}
		}

		case DIALOG_START_TRANING_PLAYER:
		{
			if(!response)
				return SCM(playerid, -1, ""cBLUE"Местный Волонтёр:"cWH" Ладно, тогда до встречи! Я всегда тут!");
			return start_traning_player_new(playerid);
		}
         /*case D_ALOGIN:
	    {
	        new GlobalString[128];
	        new pAdminErrors[999];
	        if(response)
	        {
				if(pData[playerid][pAdminCode] == 0)
				{
				    if(strlen(inputtext) != 4)
				    {
				        SendErr(playerid, "Код должен быть 4х значным");
						SPD(playerid, D_ALOGIN, DIALOG_STYLE_INPUT, ""cBLUE"Админ авторизация", ""cWH"Придумайте ваш пароль от администратирования:", "Ввести", "Отмена");
						return 1;
					}

                    pData[playerid][pAdminCode] = strval(inputtext);

                    format(GlobalString, sizeof GlobalString, "Ваш новый код от админ-панели: %s", inputtext);
                    SendInf(playerid, GlobalString);

                   // admloged[playerid] = 1;

                    new pip[16];
					GetPlayerIp(playerid, pip, 16);

					if(pData[playerid][pAdmin] < 8)
				    {
			            if(pData[playerid][pSex] == 2)
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовалась под админку. ИП: %s ИП регистрации: %s", pData[playerid][pAdmin], pData[playerid][pNickname], pip, pData[playerid][pRegIP]);
						else
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовался под админку. ИП: %s ИП регистрации: %s", pData[playerid][pAdmin], pData[playerid][pNickname], pip, pData[playerid][pRegIP]);

						AdminChat(0xc3ef15FF, GlobalString, 1);
					}
					else
					{
					    if(pData[playerid][pSex] == 2)
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовалась под админку.", pData[playerid][pAdmin], pData[playerid][pNickname]);
						else
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовался под админку.", pData[playerid][pAdmin], pData[playerid][pNickname]);

						AdminChat(0xc3ef15FF, GlobalString, 1);
					}

                    UpdatePlayerData(playerid, "AdminCode", pData[playerid][pAdminCode]);

                    return 1;
				}
				else
				{
				    if(pData[playerid][pAdminCode] != strval(inputtext))
				    {
				        pAdminErrors[playerid]++;
				        if(pAdminErrors[playerid] >= 3)
				        {
				            if(pData[playerid][pAdmin] < 8)
				            {
				                new ip[16];
				                GetPlayerIp(playerid, ip, 16);
				            	format(GlobalString, sizeof GlobalString, "Администратор %s ввёл свой админ пароль неверно 3 раза ИП: %s . ИП регистрации %s", pData[playerid][pNickname], ip, pData[playerid][pRegIP]);
				            	SendAdminMessage(COLOR_LIGHTRED, GlobalString);
				            }
				            NewKick(playerid, "Alogin");
				            return 1;
				        }
				        SendErr(playerid, "Вы неправильно ввели пароль");
						SPD(playerid, D_ALOGIN, DIALOG_STYLE_INPUT, ""cBLUE"Админ авторизация", ""cWH"Введите ваш пароль от администратирования:", "Ввести", "Отмена");
						return 1;
				    }

				   // admloged[playerid] = 1;

					new pip[16];
					GetPlayerIp(playerid, pip, 16);

					if(pData[playerid][pAdmin] < 8)
				    {
			            if(pData[playerid][pSex] == 2)
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовалась под админку. ИП: %s ИП регистрации: %s", pData[playerid][pAdmin], pData[playerid][pNickname], pip, pData[playerid][pRegIP]);
						else
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовался под админку. ИП: %s ИП регистрации: %s", pData[playerid][pAdmin], pData[playerid][pNickname], pip, pData[playerid][pRegIP]);

						AdminChat(0xc3ef15FF, GlobalString, 1);
					}
					else
					{
					    if(pData[playerid][pSex] == 2)
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовалась под админку.", pData[playerid][pAdmin], pData[playerid][pNickname]);
						else
							format(GlobalString,sizeof(GlobalString),"[A-%d] %s авторизовался под админку.", pData[playerid][pAdmin], pData[playerid][pNickname]);

						AdminChat(0xc3ef15FF, GlobalString, 1);
					}

					static const level_text[10][12] =
							{
								"нулевого",
								"первого",
								"второго",
								"третьего",
								"четвёртого",
								"пятого",
								"шестого",
								"седьмого",
								"восьмого",
								"девятого"
							};


					format(GlobalString, sizeof(GlobalString), "Вы успешно авторизовались как администратор %s уровня", level_text[pData[playerid][pAdmin]]);
					SendSucc(playerid, GlobalString);

                    admloged[playerid] = 1;

                    return 1;
				}
	        }
    		else
    		    Kick(playerid);
	        return 1;
	    }*/
		case DIALOG_BUY_MENU_NEWYEAR_EAT:
		{
			if(!response)
				return select_menu_cafe_newyear(playerid);

			switch(listitem)
			{
				case 0:
				{
					if(GetPlayerMoneyEx(playerid) < 450)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+8 < 100)
					{
						pData[playerid][hungry] += 8;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -450, "Покупка Новогоднего салата «Оливье»");
				}
				case 1:
				{
					if(GetPlayerMoneyEx(playerid) < 1150)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+15 < 100)
					{
						pData[playerid][hungry] += 15;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -1150, "Покупка Индейки «ФЛАМБЕ»");
				}
				case 2:
				{
					if(GetPlayerMoneyEx(playerid) < 350)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+5 < 100)
					{
						pData[playerid][hungry] += 5;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -350, "Покупка Десерта «Новогодняя иллюзия»");
				}
				case 3:
				{
					if(GetPlayerMoneyEx(playerid) < 550)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+5 < 100)
					{
						pData[playerid][hungry] += 5;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -550, "Покупка «Селедки под шубой»");
				}
				case 4:
				{
					if(GetPlayerMoneyEx(playerid) < 820)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+15 < 100)
					{
						pData[playerid][hungry] += 15;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -820, "Покупка «Умбрийского цыпленка»");
				}
				case 5:
				{
					if(GetPlayerMoneyEx(playerid) < 1820)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+25 < 100)
					{
						pData[playerid][hungry] += 25;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -1820, "Покупка «Рождественского гуся с яблоками»");
				}
				case 6:
				{
					if(GetPlayerMoneyEx(playerid) < 320)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+15 < 100)
					{
						pData[playerid][hungry] += 15;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_eat(playerid);
					give_money(playerid, -320, "Покупка «Салат зимний поцелуй»");
				}
				case 7:
				{
					if(GetPlayerMoneyEx(playerid) < 150)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+15 < 100)
					{
						pData[playerid][hungry] += 15;
						show_hud_hungry(playerid);
					}

					SetPVarIntNew(playerid, "pizza_quest_newyear", 1);
					send_quest_newyear_info(playerid);

					select_menu_cafe_eat(playerid);
					give_money(playerid, -150, "Покупка «Новогодняя пицца»");
				}
			}
		}
		case DIALOG_BUY_MENU_NEWYEAR_BUHLO:
		{
			if(!response)
				return select_menu_cafe_newyear(playerid);

			switch(listitem)
			{

				case 0:
				{
					if(GetPlayerMoneyEx(playerid) < 400)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
						SetPlayerDrunkLevel(playerid, 500);
					}
					select_menu_cafe_buyhlo(playerid);
					give_money(playerid, -400, "Покупка «Пунш Новогодний»");
				}
				case 1:
				{
					if(GetPlayerMoneyEx(playerid) < 355)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
						SetPlayerDrunkLevel(playerid, 500);
					}
					select_menu_cafe_buyhlo(playerid);
					give_money(playerid, -355, "Покупка «Напиток Логово Льва»");
				}
				case 2:
				{
					if(GetPlayerMoneyEx(playerid) < 350)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
						SetPlayerDrunkLevel(playerid, 500);
					}
					select_menu_cafe_buyhlo(playerid);
					give_money(playerid, -350, "Покупка Шампанское «Cоветское»");
				}
				case 3:
				{
					if(GetPlayerMoneyEx(playerid) < 350)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
						SetPlayerDrunkLevel(playerid, 1500);
					}
					select_menu_cafe_buyhlo(playerid);
					give_money(playerid, -350, "Покупка Водки «Свояк»");
				}
				case 4:
				{
					if(GetPlayerMoneyEx(playerid) < 820)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
						SetPlayerDrunkLevel(playerid, 1500);
					}
					select_menu_cafe_buyhlo(playerid);
					give_money(playerid, -820, "Покупка Водки «Финляндия»");
				}
			}
		}
		case DIALOG_BUY_MENU_NEWYEAR_KIDS:
		{
			if(!response)
				return select_menu_cafe_newyear(playerid);

			switch(listitem)
			{
				case 0:
				{
					if(GetPlayerMoneyEx(playerid) < 50)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_kids(playerid);
					give_money(playerid, -50, "Покупка Сока");
				}
				case 1:
				{
					if(GetPlayerMoneyEx(playerid) < 50)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_kids(playerid);
					give_money(playerid, -50, "Покупка Кока-колы");
				}
				case 2:
				{
					if(GetPlayerMoneyEx(playerid) < 50)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_kids(playerid);
					give_money(playerid, -50, "Покупка Пепси-колы");
				}
				case 3:
				{
					if(GetPlayerMoneyEx(playerid) < 150)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}
					if(pData[playerid][hungry]+1 < 100)
					{
						pData[playerid][hungry] += 1;
						show_hud_hungry(playerid);
					}
					select_menu_cafe_kids(playerid);
					give_money(playerid, -150, "Покупка Шампанского «Детское»");
				}
			}


		}

		case DIALOG_BUY_WEAP_LIC:
		{
			if(!response)
				return 1;

			if(GetPlayerMoneyEx(playerid) < WEAP_LIC_PRICE)
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendErr(playerid, "У Вас недостаточно денег для покупки лецензии на оружие");
			}

			if(pData[playerid][pLicenses][LIC_WEAP])
				return SendErr(playerid, "У Вас уже имеется лицензия на оружия");

			pData[playerid][pLicenses][LIC_WEAP] = 1;
			UpdatePlayerData(playerid, "licWeap", 1);

			give_money(playerid, -WEAP_LIC_PRICE, "Покупка лицензии на оружие");

			SendSucc(playerid, "Вы купили лицензию на оружие");
			SendInf(playerid, "Для просмотра лицензий используйте команду /lic");
			return 1;
		}
		case DIALOG_SELECT_QUEST_START:
		{
			if(!response)
				return close_quest_panel(playerid);

			switch(listitem)
			{
				case 0: show_quest_systems_panel(playerid, TEXTDRAW_SHOW);
				case 1: show_info_start_quest(playerid);
			}
		}

		case DIALOG_SELECT_QUEST_INFO:
		{
			if(!response)
				return show_dialog_quest_manual(playerid);

			show_dialog_quest_manual(playerid);
		}

		case DIALOG_ELEVATOR_MOSCOW_CITY:
		{
			if(!response)
				return true;

			if(!IsNumeric(inputtext))
			{
				show_eleveator_moscow_city(playerid);
				return SendErr(playerid,"Вы указали неверное количество денег");
			}

			new
				level_elevator = strval(inputtext);

			if(level_elevator < 1 || level_elevator > 40)
			{
				SendErr(playerid, "От 1 до 40 выбор этажа!");
				return show_eleveator_moscow_city(playerid);
			}

			return exit_elevetor_moscow_city(playerid, level_elevator);
		}

		case DIALOG_AUTORISATION_PC_VERSION:
		{
			if(!response)
			{
				// SCM(playerid, -1, "• {FFC800}[Подсказка] {FFFFFF}Авторизуйтесь с мобильного клиента!");
				// NewKick(playerid);
				return true;
			}

			if(strlen(inputtext) < 2)
			{
				pTemp[playerid][pLoginAttempt]++;
				if(pTemp[playerid][pLoginAttempt] == MAX_LOGIN_ATTEMPTS)
				{
					SCM(playerid,CRED,"Вы исчерпали лимит попыток ввода пароля");
					SCM(playerid,CWHITE,"Напишите /q чтобы Выйти");
					return NewKick(playerid);
				}
				SendInf(playerid, "Восстановить пароль можно в личном кабинете на сайте");
				SFCM(playerid,CRED,"Пароль введен неверно. Осталось попыток: %d",MAX_LOGIN_ATTEMPTS-pTemp[playerid][pLoginAttempt],MAX_LOGIN_ATTEMPTS);

				show_password_acces_pc_version(playerid);
				return SendErr(playerid, "Неверный пароль");
			}




			if(!strcmp(inputtext, temp_password_check_android[playerid], false, MAX_PLAYER_NAME))
			{
				acces_user_pc_version(playerid);
			}
			else
			{
				pTemp[playerid][pLoginAttempt]++;
				if(pTemp[playerid][pLoginAttempt] == MAX_LOGIN_ATTEMPTS)
				{
					SCM(playerid,CRED,"Вы исчерпали лимит попыток ввода пароля");
					SCM(playerid,CWHITE,"Напишите /q чтобы Выйти");
					return NewKick(playerid);
				}
				SendInf(playerid, "Восстановить пароль можно в личном кабинете на сайте");
				SFCM(playerid,CRED,"Пароль введен неверно. Осталось попыток: %d",MAX_LOGIN_ATTEMPTS-pTemp[playerid][pLoginAttempt],MAX_LOGIN_ATTEMPTS);
				show_password_acces_pc_version(playerid);
			}

		}
		case DIALOG_SELECT_ANIM:
		{
			if(!response)
				return 1;

			return PlayAnimForPlayer(playerid, listitem+1);
		}

		case dAdmText:
		{
			if(!response) return 1;
			if(pData[playerid][pAdmin] < 5 ) return 1;

			if( MPPLAYERS > 0 ) return SCM(playerid,CGRAY,"Сначало остановите предыдущее МП");
			if( strlen(inputtext) < 5 ) return SendErr(playerid, "Слишком короткое описание");
			if( strlen(inputtext) > 100 ) return SendErr(playerid, "Слишком длинное описание");


			if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
			{
				SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
				return 1;
			}


			GetPlayerPos( playerid, MPPOS[0], MPPOS[1] , MPPOS[2]);
			MPINT = GetPlayerInterior( playerid );
			MPWORLD = GetPlayerVirtualWorld(  playerid );

			MPPLAYERS = GetPVarIntNew( playerid, "admmp");
   			if( MPPLAYERS < 5 ) MPPLAYERS = 5;
   			if( MPPLAYERS > 50 ) MPPLAYERS = 50;
			format(String256, sizeof(String256), "Администратор %s открыл телепорт на МП",pData[playerid][pNickname] );
			AdminChat(0x007fffff,String256);
			format(String256, sizeof(String256), "Уважаемые игроки, администратор {A8A8FF}%s{FFFFCC} приглашает вас принять участие в мероприятии:",pData[playerid][pNickname]);
			SendClientMessageToAll(0xFFFFCCFF, String256);
			format(String256, sizeof(String256), inputtext);
			SendClientMessageToAll(0xFFFFCCFF, String256);
			format(String256, sizeof(String256), "Для участия введите команду {A8A8FF}/mp{FFFFCC}, кол-во участников {C7FF8F}%d{FFFFCC} человек.", MPPLAYERS);
			SendClientMessageToAll(0xFFFFCCFF, String256);
			LIMITMP += 50;

		}

		case DIALOG_WOOD_JOB:
		{
			if(!response)
				return true;

			if(!GetPVarIntNew(playerid, "wood_job"))
				return start_wood_job(playerid);
			else
				return end_wood_job(playerid);
		}

		case DIALOG_FACTORY_JOB:
		{
			if(!response)
				return true;
			if(!GetPVarIntNew(playerid, "factoryjob"))
				return start_factoryjob(playerid);
			else
				return end_factoryjob(playerid);
		}

		case dHelplist:
		{
		if(!response) return 1;
 		if(PDhelp[listitem] != 0)
		{
		new Float:x, Float:y, Float:z;
		GetPlayerPos(PDhelp[listitem]-1 ,x,y,z);
		SetPlayerCheckpoint(playerid,x,y,z,4.0);
		WN_showGPS(playerid, 1);
		PLAYERPDELPER[playerid] = PDhelp[listitem];
		SendSucc(playerid, "Сотрудник отмечен на карте. Чтобы убрать метку введите "cWH"/gps");

  		new mes[256];
		format(mes,sizeof(mes),"[Внимание] "cBLUE"%s{007FFF} принял вызов о помощи "cBLUE"%s{007FFF}",pData[playerid][pNickname],pData[ PDhelp[listitem]-1 ][pNickname]);
		CopMes(CDEPARTMENT,mes);

		}
		else
		{
		SendErr(playerid, "Данные о запросе не найдены");
		}

		}

		case dSdachaMenu:
		{
		if(!response) return 1;
		if( GetPlayerVirtualWorld(playerid) == 0) return 1;
		if(pData[playerid][pWanted] > 0)
		{
			new time = pData[playerid][pWanted] * JAIL_QUATE/2;
			new camid = random(sizeof(CamCoords));
			SetPlayerPosDebug(playerid, CamCoords[camid][0],CamCoords[camid][1],CamCoords[camid][2]);
			new prison = GetPlayerVirtualWorld(playerid) - 1;
			SetPlayerFacingAngle(playerid,359.4348);
			SetPlayerVirtualWorld(playerid,prison+1);
			set_player_skin(playerid, 242);
			pData[playerid][pJail] = time;
			pData[playerid][pPrison] = prison;
			pData[playerid][pWanted] = 0;
			pData[playerid][pDrugs] = 0;
			UpdatePlayerData(playerid, "drugs", pData[playerid][pDrugs]);
			pData[playerid][pHDrugs] = 0;
			UpdatePlayerData(playerid, "hdrugs", pData[playerid][pHDrugs]);
			SetPlayerWantedLevel(playerid,0);


			ResetPlayerWeapons(playerid);
			PSPAWN[playerid] = 1;
			SpawnPlayer(playerid);
			new query[256];
			format(query,sizeof(query),"UPDATE `accounts` SET `jail` = '%d', prison = '%d', wanted = '0' WHERE `id` = '%d'",pData[playerid][pJail],pData[playerid][pPrison],pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			new mes[80];
			if(pData[playerid][pWanted] < 3) {
			format(mes,sizeof(mes),"Вы помещены в КПЗ на %d минут" ,floatround(time/60));
			}
			else {
			format(mes,sizeof(mes),"Вы помещены в КПЗ");
			}
			SCM(playerid,COLOR_LIGHTRED,mes);
			SendInf(playerid, "Чтобы посмотреть сколько Вам осталось сидеть в тюрьме, введите команду {FFFF10}/ptime");
			//LoadCopMap(playerid, 2);

			if(pTemp[playerid][pCuffer] != INVALID_PLAYER_ID)
			{
				new cuffer = pTemp[playerid][pCuffer];
				SetPlayerSpecialAction(playerid,SPECIAL_ACTION_NONE);
				RemovePlayerAttachedObject(playerid,0);
				pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;
				pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
				pTemp[cuffer][pCuffee] = INVALID_PLAYER_ID;
				pTemp[cuffer][pCuffer] = INVALID_PLAYER_ID;
			}
			pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;
			pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
		}
		}
		case dHeal:
		{
			new price = GetPVarIntNew(playerid,"healprice");
			new doctorid = GetPVarIntNew(playerid,"doctorid");
			if(!response)
				return SendClientMessage(doctorid,CGRAY,"Пациент отказался от лечения");

			if(GetPlayerMoneyEx(playerid) < price)
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendClientMessage(playerid,CGRAY,"У Вас недостаточно денег");
			}

			SetPVarIntNew(playerid,"heallastti", GetTickCount()+60*1000*4);

			SetPlayerHealth(playerid,100.0);

			give_money(playerid, -price, "Лечение у доктора");

			new xrice2 = price/2;
			if( xrice2 > 100 ) xrice2 = 100;
			if( xrice2 < 0 ) xrice2 = 0;

			give_money(doctorid, price, "Работа доктором");


			SendClientMessage(doctorid,CGREEN,"Пациент согласился на лечение");
			SetPVarIntNew( playerid, "Fixbolesn2",gettime() + 300);
		}
		case dShtrafMenu:
		{
		if(!response) return 1;
		if(pData[playerid][pUnemployment] > 0)
		{
			if(GetPlayerMoneyEx(playerid) < pData[playerid][pUnemployment])
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendErr(playerid, "У Вас недостаточно денег!");
			}

			give_money(playerid, -pData[playerid][pUnemployment], "Оплата штрафа");


			UpdatePlayerData(playerid,"unemployment",0);
			GosMoney[0] += pData[playerid][pUnemployment];
			pData[playerid][pUnemployment] = 0;
			SendInf(playerid, "Вы оплатили штрафы. Больше не нарушайте правила.");
			SaveNewsMoneyEx();
		}
		else
		{
			SendInf(playerid, "У вас нет штрафов");
		}
		}


		case dPrezInfo:
		{
			if(!response) return 1;
			if(listitem == 0)
			{
			new prezname[64];
			new prezname2[64];
			format(String2048, sizeof(String2048), "SELECT `nickname` FROM `accounts` WHERE `fraction` = 11 AND `subfraction` = 0 AND `rank` = 11 AND `admin` = 0");
			new Result:RM = sql_queryEx(zConn, String2048, QUERY_CACHED);
			new sqls = sql_num_rows(RM);
			if(sqls) {
				sql_get_field_ex(RM, 0, 0, prezname);
			}
			else {
				format(prezname , sizeof(prezname), "Неизвестно");
			}

			sql_free_result(RM);

			format(String2048, sizeof(String2048), "SELECT `nickname` FROM `accounts` WHERE `fraction` = 11 AND `subfraction` = 0 AND `rank` = 9 AND `admin` = 0");
			RM = sql_queryEx(zConn, String2048, QUERY_CACHED);
			sqls = sql_num_rows(RM);
			if(sqls) {
				sql_get_field_ex(RM, 0, 0, prezname2);
			}
			else {
				format(prezname2 , sizeof(prezname2), "Неизвестно");
			}

			sql_free_result(RM);
			format(String1024,sizeof(String1024),"\n\n\tГосударство "cBLUE"%s\t\n\n"cWH"Президент:\t\t "cBLUE"%s\n"cWH"Премьер-Министр:\t  "cBLUE"%s\t\n\n\n"cWH"Бюджет государства: \t{009933}%d рублей\n\n",ServerName,prezname , prezname2, GosMoney[0]);
			format(String320,sizeof(String320),""cWH"Пенсионный возраст: {BFFF80}%d"cWH" лет (года)\nРазмер пенсии: \t{009933}%d рублей\n\n",pensialvl,pensia,nalogbiz,nalogash, coalzp[1]*10, leswork, gunwork);
			strcat(String1024, String320);
			if(prezgolos[0] < 1) prezgolos[0] = 1;
			if(prezgolos[1] < 1) prezgolos[1] = 1;
			new allgplos = prezgolos[0] + prezgolos[1];
			new Float:poloz = (100.0/float(allgplos))*float(prezgolos[0]);
			new Float:otri = (100.0/float(allgplos))*float(prezgolos[1]);
			format(String256,sizeof(String256),"\n"cWH"Оценка деятельности Администрации Президента:\t\n\t"cWH"Положительно: {80FF9F}%.1f%%\n\t"cWH"Отрицательно:  {FF0000}%.1f%%\n\n",poloz,otri);
//prezgolos
			strcat(String1024, String256);

			return SPD(playerid, dPrezInfo2, DIALOG_STYLE_MSGBOX, ""cBLUE"Информация о государстве", String1024, "Закрыть", "");
			}
			if(listitem == 1)
			{
				if(pData[playerid][pLevel] < 3) return SendErr(playerid, "Вы должны прожить 3 года в государстве для оценки деятельности Администрации Президента");
				if(prezgolos[0] < 1) prezgolos[0] = 1;
				if(prezgolos[1] < 1) prezgolos[1] = 1;
				new allgplos = prezgolos[0] + prezgolos[1];
				new Float:poloz = (100.0/float(allgplos))*float(prezgolos[0]);
				new Float:otri = (100.0/float(allgplos))*float(prezgolos[1]);
				format(String1024,sizeof(String1024),"\n"cWH"Оценка деятельности Администрации Президента:\t\n\t"cWH"Положительно: {80FF9F}%.1f%%\n\t"cWH"Отрицательно: {FF0000}%.1f%%\n\n"cWH"Поставьте положительную или отрицательную оценку деятельности Администрации Президента\n",poloz,otri);
				return SPD(playerid, dPrezInfo3, DIALOG_STYLE_MSGBOX, ""cBLUE"Оценка деятельности Администрации Президента", String1024, "Положит.", "Отрицат.");
			}
		}
		case dPrezInfo3:
		{
			if(response)
			{
				if(pData[playerid][pGolos] == 1)
				{
					return SendErr(playerid, "Вы уже оставили положительную оценку");
				}

				if(pData[playerid][pGolos] == 2)
				{
					prezgolos[1] --;
					SendInf(playerid, "Ваша отрицательная оценка была заменена");
				}

				pData[playerid][pGolos] = 1;
				UpdatePlayerData(playerid,"golos", pData[playerid][pGolos] );
				prezgolos[0]++;
				SaveNewsMoneyEx();
				SendSucc(playerid, "Вы положительно оценили деятельность Администрации Президента");
			}
			else
			{

				if(pData[playerid][pGolos] == 2)
				{
					return SendErr(playerid, "Вы уже оставили отрицательную оценку");
				}

				if(pData[playerid][pGolos] == 1)
				{
					prezgolos[0] --;
					SendInf(playerid, "Ваша положительная оценка была заменена");
				}

				pData[playerid][pGolos] = 2;
				UpdatePlayerData(playerid,"golos", pData[playerid][pGolos] );
				prezgolos[1]++;
				SaveNewsMoneyEx();
				SendSucc(playerid, "Вы отрицательно оценили деятельность Администрации Президента");
			}
		}

		case dKaznaMenuVic:
		{
		if(!response) return 1;
		if(listitem == 0)
		{
		}
		if(listitem == 1)
		{
			format(String256,sizeof(String256),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}");
			return SPD(playerid, dKaznaMenu6, DIALOG_STYLE_LIST, ""cBLUE"Просмотр зарплат гос.служащих", String256, "Выбор", "Отмена");
		}
		if(listitem == 2)
		{
			format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");

			format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",1,gFractionRankName[1][10],gFractionSalary[1][10]);
			strcat(String1024, String256);
			format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",2,gFractionRankName[7][12],gFractionSalary[7][12]);
			strcat(String1024, String256);
			format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",3,gFractionRankName[8][12],gFractionSalary[8][12]);
			strcat(String1024, String256);
			format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",4,gFractionRankName[9][10],gFractionSalary[9][10]);
			strcat(String1024, String256);

			format(String256, sizeof(String256), ""cWH"Министерство");
			SPD(playerid,dKaznaMenu8,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
		}
		if(listitem == 3)
		{
			format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");
			for(new dn = 0; dn < 10; dn ++)
			{
				if(gFractionSalaryNew[10][dn] != 0) {
//					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],gFractionSalary[10][dn]);
					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],FracMO[dn]);
					strcat(String1024, String256);
				}
				else {
					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],FracMO[dn]);
					strcat(String1024, String256);
				}
			}
			format(String256, sizeof(String256), ""cWH"Мэрия");
			SPD(playerid,dKaznaMenu9,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
		}
		if(listitem == 4)
		{
			SPD(playerid, dKaznaMenuVic2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Министерство внутренних дел\nМинистерство обороны\nНовостная сеть\nМинздрав\nАдминистрация Президента", "Выбрать", "Закрыть");
		}


		}


		case dKaznaMenuVic2:
		{
		if(!response) return 1;
		if(listitem == 0) {
				SetPVarIntNew(playerid, "idfind", 9);
				SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "МВД г.Южный\nМВД г.Арзамас\nМВД п.Батырево\nМинистерство внутренних дел", "Выбрать", "Закрыть");
				return 1;
		}
		if(listitem == 1) {
				SetPVarIntNew(playerid, "idfind", 8);
				SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Военно-Воздушные Силы\nСухопутные Войска\nВоенно-Морской Флот\nМинистерство обороны", "Выбрать", "Закрыть");
				return 1;
		}
		if(listitem == 2) {
				SetPVarIntNew(playerid, "idfind", 10);
				SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Радиоцентр г.Южный\nРадиоцентр г.Эдово\nРадиоцентр г.Арзамас\nНовостная сеть", "Выбрать", "Закрыть");
				return 1;
		}
		if(listitem == 3) {
				SetPVarIntNew(playerid, "idfind", 2);
				SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Больница г.Южный\nБольница г.Арзамас\nБольница п.Батырево\nМинздрав", "Выбрать", "Закрыть");
				return 1;
		}
		if(listitem == 4) {
			new want1;
 			format(String512,sizeof(String512),""cGR"ID\t"cGR"Уровень\t"cGR"Телефон\t"cGR"Ранг\t"cGR"Выговоры\t"cGR"Имя игрока\n\n");
			format(String4096,sizeof(String4096),"");
			strcat(String4096, String512);
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
 				if(pData[i][pFraction] != pData[playerid][pFraction] || (pData[i][pSubfraction] != 0)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(String512,sizeof(String512), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(String512,sizeof(String512), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(String512,sizeof(String512), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(String512,sizeof(String512), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, String512);
				want1+=1;
			}

			if(want1 == 0) strcat(String4096, ""cWH"Информация не найдена");
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gFractionName[ pData[playerid][pFraction] -1 ], String4096, "Закрыть", "");
		}

		}

		case dKaznaMenu:
		{
			if(!response)
				return 1;


			switch(listitem)
			{
				case 0:
				{
					if(pData[playerid][pRank] == 11)
					{
						show_kazna_menu(playerid);
					}
					else
					{
						show_kazna_menu_low(playerid);
					}
				}
				case 1:
				{
					format(String1024,sizeof(String1024),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\t[%d рублей]\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\t\t[%d рублей]\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\t\t\t[%d рублей]\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}\t[%d рублей]\n{FFFFB3}5."cWH" ФСБ {BFFF80}\t\t\t\t\t[%d рублей]",GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
					return SPD(playerid, dKaznaMenuGos, DIALOG_STYLE_LIST, ""cBLUE"Бюджет гос.фракций", String1024, "Выбор", "Отмена");
				}
				case 2:
				{
					format(String1024,sizeof(String1024),"\n"cWH"Установите пенсионный возраст для жителей государства\nТекущий возраст: {33FF99}%d {B0B0B0}(уровень)"cWH"\n\nМинимальный пенсионный возраст: {CFFF9E}20 {B0B0B0}(уровень)\n"cWH"Максимальный пенсионный возраст: {CFFF9E}30 {B0B0B0}(уровень)", pensialvl);
					return SPD(playerid, dKaznaMenuPen, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование пенсионного возраста", String1024, "Установить", "Отмена");
				}
				case 3:
				{
					format(String256,sizeof(String256),"\n"cWH"Установите пенсию для жителей достигших пенсионного возраста\nТекущая пенсия: {5CD65C}%d рублей"cWH"\n\nДиапазон пенсии: {47D147}P0-P2000\n{FFFFB3}Пенсия начисляется каждый час\n", pensia);
					return SPD(playerid, dKaznaMenuPen2, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование пенсии", String256, "Установить", "Отмена");
				}
				case 4:
				{
					format(String256,sizeof(String256),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}");
					return SPD(playerid, dKaznaMenu6, DIALOG_STYLE_LIST, ""cBLUE"Просмотр зарплат гос.служащих", String256, "Выбор", "Отмена");
				}
				case 5:
				{
					format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");
					for(new dn = 0; dn < 9; dn ++)
					{
						if(gFractionSalaryNew[10][dn] != 0) {
		 					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gPrezRankName[dn],gFractionSalary[10][dn]);
		 					strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gPrezRankName[dn],gFractionSalary[10][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Администрация Президента");
					SPD(playerid,dKaznaMenu7,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
				}
				case 6:
				{
					format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");

					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",1,gFractionRankName[1][10],gFractionSalary[1][10]);
					strcat(String1024, String256);
					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",2,gFractionRankName[7][10],gFractionSalary[7][10]);
					strcat(String1024, String256);
					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",3,gFractionRankName[8][10],gFractionSalary[8][10]);
					strcat(String1024, String256);
					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",4,gFractionRankName[9][10],gFractionSalary[9][10]);
					strcat(String1024, String256);

					format(String256, sizeof(String256), ""cWH"Министерство");
					SPD(playerid,dKaznaMenu8,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
				}
				case 7:
				{
					format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");
					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[10][dn] != 0) {
		 					format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],FracMO[dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],FracMO[dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Мэрия");
					SPD(playerid,dKaznaMenu9,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
				}
				case 8:
				{
					format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");
					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[11][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[11][dn],gFractionSalary[11][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[11][dn],gFractionSalary[11][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"ФСБ");
					SPD(playerid,dKaznaMenu10,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
				}
			}

		}

		case dKaznaMenu10:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"ФСБ");
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[11][listitem],setrank*400, setrank*1500);
				SPD(playerid,dKaznaMenu100,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");

			}

		}



		case dKaznaMenu100:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap") +1;
				new price = strval(inputtext);
				if(price < setrank*400 || price > setrank*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"ФСБ");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[11][listitem],setrank*400, setrank*1500);
					SPD(playerid,dKaznaMenu100,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");
					return 1;
				}
				gFractionSalary[11][ setrank -1 ] = price;
				gFractionSalaryNew[11][ setrank -1 ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank , gFractionSalary[11][ setrank-1 ], 12); //+1
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600}(ФСБ) составит {009933}%d рублей", gFractionRankName[11][ setrank-1 ], gFractionSalary[11][ setrank -1 ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 12 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
				}

				format(String1024, sizeof(String1024), ""cBLUE"Должность\tЗарплата\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[11][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[11][dn],gFractionSalary[11][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[11][dn],gFractionSalary[11][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"ФСБ");
				SPD(playerid,dKaznaMenu10,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");

			}
		}
		case dKaznaMenu9:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Мэрия");
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[10][listitem],setrank*400, setrank*1500);
				SPD(playerid,dKaznaMenu99,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");

			}

		}

		case dKaznaMenu99:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap") +1;
				new price = strval(inputtext);
				if(price < setrank*400 || price > setrank*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Мэрия");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[10][ setrank-1 ],setrank*400, setrank*1500);
					SPD(playerid,dKaznaMenu99,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");
					return 1;
				}
				FracMO[ setrank -1 ] = price;
				FracMONew[ setrank -1 ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank , FracMO[ setrank-1 ], 100); //+1
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[10][ setrank-1 ], FracMO[ setrank -1 ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
				}

				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[10][dn] != 0) {
 						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],FracMO[dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[10][dn],FracMO[dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Мэрия");
				SPD(playerid,dKaznaMenu9,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");

			}
		}

		case dKaznaMenu8:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство");
				if(listitem == 0) {
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[1][10],12*400, 12*1500);
				}
				if(listitem == 1) {
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[7][10],12*400, 12*1500);
				}
				if(listitem == 2) {
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[8][10],12*400, 12*1500);
				}
				if(listitem == 3) {
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[9][10],12*400, 12*1500);
				}
				SPD(playerid,dKaznaMenu88,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");

			}
		}
		case dKaznaMenu7:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Администрация Президента");
				if(setrank == 5 || setrank == 6 || setrank == 7 || setrank == 8) setrank = 8;
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gPrezRankName[listitem],setrank*400, setrank*1500);
				SPD(playerid,dKaznaMenu77,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");

			}

		}




		case dKaznaMenu88:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap");
				new price = strval(inputtext);
				if(price < 12*400 || price > 12*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Министерство");
					if(setrank == 0) {
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[1][10],12*400, 10*1500);
					}
					if(setrank == 1) {
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[7][10],12*400, 12*1500);
					}
					if(setrank == 2) {
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[8][10],12*400, 12*1500);
					}
					if(setrank == 3) {
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[9][10],12*400, 10*1500);
					}
					SPD(playerid,dKaznaMenu88,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");
					return 1;
				}
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				new mesid[256];
				if(setrank == 0) {
					gFractionSalary[1][ 10 ] = price;
					gFractionSalaryNew[ 1 ][ 10 ] = 0;
					format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", 10+1, gFractionSalary[ 1 ][ 10  ], 2);
					sql_queryEx(zConn, String256, QUERY_THREADED);
					format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[ 1 ][ 10 ], gFractionSalary[ 1 ][ 10 ]);
					foreach(new i: logged_players)
					{
						if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
						else if( pData[i][pFraction] == 2 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
					}
				}
				if(setrank == 1) {
					gFractionSalary[ 7 ][ 10 ] = price;
					gFractionSalaryNew[ 7 ][ 10 ] = 0;
					format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", 10+1, gFractionSalary[ 7 ][ 10  ], 8);
					sql_queryEx(zConn, String256, QUERY_THREADED);
					format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[ 7 ][ 10 ], gFractionSalary[ 7 ][ 10 ]);
					foreach(new i: logged_players)
					{
						if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
						else if( pData[i][pFraction] == 8 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
					}
				}
				if(setrank == 2) {
					gFractionSalary[ 8 ][ 10 ] = price;
					gFractionSalaryNew[ 8 ][ 10 ] = 0;
					format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", 10+1, gFractionSalary[ 8 ][ 10  ], 9);
					sql_queryEx(zConn, String256, QUERY_THREADED);
					format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[ 8 ][ 10 ], gFractionSalary[ 8 ][ 10 ]);
					foreach(new i: logged_players)
					{
						if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
						else if( pData[i][pFraction] == 9 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
					}
				}
				if(setrank == 3) {
					gFractionSalary[ 9 ][ 10 ] = price;
					gFractionSalaryNew[ 9 ][ 10 ] = 0;
					format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", 10+1, gFractionSalary[ 9 ][ 10  ], 10);
					sql_queryEx(zConn, String256, QUERY_THREADED);
					format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[ 9 ][ 10 ], gFractionSalary[ 9 ][ 10 ]);
					foreach(new i: logged_players)
					{
						if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
						else if( pData[i][pFraction] == 10 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
					}
				}
				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\n");

				format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",1,gFractionRankName[1][10],gFractionSalary[1][10]);
				strcat(String1024, String256);
				format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",2,gFractionRankName[7][10],gFractionSalary[7][10]);
				strcat(String1024, String256);
				format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",3,gFractionRankName[8][10],gFractionSalary[8][10]);
				strcat(String1024, String256);
				format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",4,gFractionRankName[9][10],gFractionSalary[9][10]);
				strcat(String1024, String256);

				format(String256, sizeof(String256), ""cWH"Министерство");
				SPD(playerid,dKaznaMenu8,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");
				}
		}

		case dKaznaMenu77:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap");
				new price = strval(inputtext);
				new maxrank = setrank +1;
				if(maxrank == 5 || maxrank == 6 || maxrank == 7 || maxrank == 8) maxrank = 8;

				if(price < (maxrank)*400 || price > (maxrank)*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Администрация Президента");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gPrezRankName[ setrank ],(maxrank)*400, (maxrank)*1500);
					SPD(playerid,dKaznaMenu77,DIALOG_STYLE_INPUT,String256, String1024 ,"Изменить","Отмена");
					return 1;
				}
				gFractionSalary[10][ setrank ] = price;
				gFractionSalaryNew[10][ setrank ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank+1, gFractionSalary[10][ setrank ], 11);
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Администрация Президента] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gPrezRankName[ setrank ], gFractionSalary[10][ setrank ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 11) SCM(i,0xACE600FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
				}

				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\n");
				for(new dn = 0; dn < 9; dn ++)
				{
					if(gFractionSalaryNew[10][dn] != 0) {
 						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gPrezRankName[dn],gFractionSalary[10][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gPrezRankName[dn],gFractionSalary[10][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Администрация Президента");
				SPD(playerid,dKaznaMenu7,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Изменить","Закрыть");

			}
		}

		case dKaznaMenu66:
		{
			format(String256,sizeof(String256),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}");
			return SPD(playerid, dKaznaMenu6, DIALOG_STYLE_LIST, ""cBLUE"Просмотр зарплат гос.служащих", String256, "Выбор", "Отмена");
		}
		case dKaznaMenu6:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Генеральным Прокурором)\n");
 					for(new dn = 0; dn < 11; dn ++)
					{
						if(gFractionSalaryNew[8][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn], gFractionSalaryNew[8][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					SPD(playerid,dKaznaMenu66,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Закрыть","");
				}
				case 1: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником Нац. Безопасности)\n");
 					for(new dn = 0; dn < 11; dn ++)
					{
						if(gFractionSalaryNew[7][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn], gFractionSalaryNew[7][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					SPD(playerid,dKaznaMenu66,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Закрыть","");
				}
				case 2: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Пресс-секретарем)\n");
 					for(new dn = 0; dn < 11; dn ++)
					{
						if(gFractionSalaryNew[9][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn], gFractionSalaryNew[9][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					SPD(playerid,dKaznaMenu66,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Закрыть","");
				}
				case 3: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником МЗ)\n");
 					for(new dn = 0; dn < 11; dn ++)
					{
						if(gFractionSalaryNew[1][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn], gFractionSalaryNew[1][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					SPD(playerid,dKaznaMenu66,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,"Закрыть","");
				}

			}

		}

		case dKaznaMenuGos:
		{
			if(!response) return 1;
			if(listitem == 0)
			{
			format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство внутренних дел\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министрерства внутренних дел: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[1]);
			return SPD(playerid, dKaznaMenuGos1, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Перевод", "Отмена");
			}
			if(listitem == 1)
			{
			format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство обороны\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министрерства обороны: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[2]);
			return SPD(playerid, dKaznaMenuGos2, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Перевод", "Отмена");
			}
			if(listitem == 2)
			{
			format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Новостную сеть\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Новостной сети: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[3]);
			return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Перевод", "Отмена");
			}
			if(listitem == 3)
			{
			format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство здравоохранения\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министерства здравоохранения: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[4]);
			return SPD(playerid, dKaznaMenuGos4, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Перевод", "Отмена");
			}
			if(listitem == 4)
			{
			format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в ФСБ\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет ФСБ: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[5]);
			return SPD(playerid, dKaznaMenuGos5, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Перевод", "Отмена");
			}

		}
		case dKaznaMenuGos1:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 0 || amount > 5000000 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство внутренних дел\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министрерства внутренних дел: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[1]);
				return SPD(playerid, dKaznaMenuGos1, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			if(amount > GosMoney[0] ) {
				SendErr(playerid,"В Бюджете казны государства не достаточно средств");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство внутренних дел\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министрерства внутренних дел: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[1]);
				return SPD(playerid, dKaznaMenuGos1, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			GosMoney[0] -= amount;
			GosMoney[1] += amount;
			SaveNewsMoneyEx();
			SendSucc(playerid, "Вы успешно перевели средства в бюджет МВД");
			format(String1024,sizeof(String1024),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\t[%d рублей]\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\t\t[%d рублей]\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\t\t\t[%d рублей]\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}\t[%d рублей]\n{FFFFB3}5."cWH" ФСБ {BFFF80}\t\t\t\t\t[%d рублей]",GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
			return SPD(playerid, dKaznaMenuGos, DIALOG_STYLE_LIST, ""cBLUE"Бюджет гос.фракций", String1024, "Выбор", "Отмена");
		}
		case dKaznaMenuGos2:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 0 || amount > 5000000 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство обороны\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министрерства внутренних дел: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[2]);
				return SPD(playerid, dKaznaMenuGos2, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			if(amount > GosMoney[0] ) {
				SendErr(playerid,"В Бюджете казны государства не достаточно средств");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство обороны\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министрерства внутренних дел: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[2]);
				return SPD(playerid, dKaznaMenuGos2, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			GosMoney[0] -= amount;
			GosMoney[2] += amount;
			SaveNewsMoneyEx();
			SendSucc(playerid, "Вы успешно перевели средства в бюджет МО");
			format(String1024,sizeof(String1024),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\t[%d рублей]\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\t\t[%d рублей]\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\t\t\t[%d рублей]\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}\t[%d рублей]\n{FFFFB3}5."cWH" ФСБ {BFFF80}\t\t\t\t\t[%d рублей]",GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
			return SPD(playerid, dKaznaMenuGos, DIALOG_STYLE_LIST, ""cBLUE"Бюджет гос.фракций", String1024, "Выбор", "Отмена");
		}
		case dKaznaMenuGos3:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 0 || amount > 5000000 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Новостную сеть\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Новостной сети: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[3]);
				return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			if(amount > GosMoney[0] ) {
				SendErr(playerid,"В Бюджете казны государства не достаточно средств");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Новостную сеть\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Новостной сети: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[3]);
				return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			GosMoney[0] -= amount;
			GosMoney[3] += amount;
			SaveNewsMoneyEx();
			SendSucc(playerid, "Вы успешно перевели средства в бюджет СМИ");
			format(String1024,sizeof(String1024),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\t[%d рублей]\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\t\t[%d рублей]\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\t\t\t[%d рублей]\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}\t[%d рублей]\n{FFFFB3}5."cWH" ФСБ {BFFF80}\t\t\t\t\t[%d рублей]",GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
			return SPD(playerid, dKaznaMenuGos, DIALOG_STYLE_LIST, ""cBLUE"Бюджет гос.фракций", String1024, "Выбор", "Отмена");
		}

		case dKaznaMenuGos4:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 0 || amount > 5000000 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство здравоохранения\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министерства здравоохранения: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[4]);
				return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			if(amount > GosMoney[0] ) {
				SendErr(playerid,"В Бюджете казны государства не достаточно средств");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в Министерство здравоохранения\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет Министерства здравоохранения: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[4]);
				return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			GosMoney[0] -= amount;
			GosMoney[4] += amount;
			SaveNewsMoneyEx();
			SendSucc(playerid, "Вы успешно перевели средства в бюджет Министерство здравоохранения");
			format(String1024,sizeof(String1024),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\t[%d рублей]\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\t\t[%d рублей]\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\t\t\t[%d рублей]\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}\t[%d рублей]\n{FFFFB3}5."cWH" ФСБ {BFFF80}\t\t\t\t\t[%d рублей]",GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
			return SPD(playerid, dKaznaMenuGos, DIALOG_STYLE_LIST, ""cBLUE"Бюджет гос.фракций", String1024, "Выбор", "Отмена");
		}
		case dKaznaMenuGos5:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 0 || amount > 5000000 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в ФСБ\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет ФСБ: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[5]);
				return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			if(amount > GosMoney[0] ) {
				SendErr(playerid,"В Бюджете казны государства не достаточно средств");
				format(String1024,sizeof(String1024),"\n"cWH"Перевод денег из гос.бюджета в ФСБ\nБюджет казны государства "cBLUE"%s"cWH": "cBLUE"%d рублей"cWH"\n\nБюджет ФСБ: "cBLUE"%d рублей\n\nМаксимальный разовый перевод: "cBLUE"P5000000", ServerName,GosMoney[0], GosMoney[5]);
				return SPD(playerid, dKaznaMenuGos3, DIALOG_STYLE_INPUT, ""cBLUE"Перевод денег", String1024, "Выбор", "Отмена");
			}
			GosMoney[0] -= amount;
			GosMoney[5] += amount;
			SaveNewsMoneyEx();
			SendSucc(playerid, "Вы успешно перевели средства в бюджет ФСБ");
			format(String1024,sizeof(String1024),"{FFFFB3}1."cWH" Министерство внутренних дел {BFFF80}\t[%d рублей]\n{FFFFB3}2."cWH" Министерство обороны {BFFF80}\t\t[%d рублей]\n{FFFFB3}3."cWH" Новостная сеть {BFFF80}\t\t\t[%d рублей]\n{FFFFB3}4."cWH" Министерство здравоохранения {BFFF80}\t[%d рублей]\n{FFFFB3}5."cWH" ФСБ {BFFF80}\t\t\t\t\t[%d рублей]",GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
			return SPD(playerid, dKaznaMenuGos, DIALOG_STYLE_LIST, ""cBLUE"Бюджет гос.фракций", String1024, "Выбор", "Отмена");
		}


		case dKaznaMenuPen:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 20 || amount > 30 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String1024,sizeof(String1024),"\n"cWH"Установите пенсионный возраст для жителей государства\nТекущий возраст: {33FF99}%d {B0B0B0}(уровень)"cWH"\n\nМинимальный пенсионный возраст: {CFFF9E}20 {B0B0B0}(уровень)\n"cWH"Максимальный пенсионный возраст: {CFFF9E}30 {B0B0B0}(уровень)", pensialvl);
				return SPD(playerid, dKaznaMenuPen, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование пенсионного возраста", String1024, "Установить", "Отмена");
			}
			pensialvl = amount;
			SendSucc(playerid, "Вы успешно установили пенсионный возраст");
			SaveNewsMoneyEx();
			new mes[256];
			format(mes,sizeof(mes),"[Гос.Новости] Президент государства %s установил пенсионный возраст {FFDD75}%d {4466cc}лет (года)", pData[playerid][pNickname], pensialvl);
			SendClientMessageToAll(0x4466ccff,mes);

			if(pData[playerid][pRank] == 11)
			{
				return show_kazna_menu(playerid);
			}
			else
			{
				return show_kazna_menu_low(playerid);
			}
		}
		case dKaznaMenuPen2:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(!strlen(inputtext) || !IsNumeric(inputtext) || amount < 0 || amount > 2000 ) {
				SendErr(playerid,"Вы ввели неверное значение");
				format(String256,sizeof(String256),"\n"cWH"Установите пенсию для жителей достигших пенсионного возраста\nТекущая пенсия: {5CD65C}%d рублей"cWH"\n\nДиапазон пенсии: {47D147}P0-P2000\n{FFFFB3}Пенсия начисляется каждый час\n", pensia);
				return SPD(playerid, dKaznaMenuPen2, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование пенсии", String256, "Установить", "Отмена");
			}
			pensia = amount;
			SendSucc(playerid, "Вы успешно установили пенсию");
			SaveNewsMoneyEx();
			new mes[256];
			format(mes,sizeof(mes),"[Гос.Новости] Президент государства %s установил пенсию в размере "cGR"%d рублей", pData[playerid][pNickname], pensia);
			SendClientMessageToAll(0x4466ccff,mes);
			if(pData[playerid][pRank] == 11)
			{
				return show_kazna_menu(playerid);
			}
			else
			{
				return show_kazna_menu_low(playerid);
			}
		}



		case dBaseMenu:
		{
		if(!response) return 1;
		if(pData[playerid][pFraction] != 8) return SendErr(playerid,"Это не доступно для вас");

		if(PlayerVoen[playerid] != 2)
		{
		new aloh;
		foreach(new d: logged_players)
		{
		if(PlayerVoen[d] == 2 && PlayerToKvadrat(d, 359.690 , -2527.5291, 586.4007 , -2266.1340))
		{
			aloh ++;
		}
		}
		if(aloh > 9)  return SendErr(playerid,"На базе достаточно охраников");
		if(PlayerVoen[playerid] != 1)  return SendErr(playerid,"Ошибка");
		PlayerVoen[playerid] = 2;
		SendSucc(playerid,"Вы начали охрану базы");
		}
		else
		{
		format(String256,sizeof(String256),"Вы закончили охрану базы, ваш заработок %d рублей", pData[playerid][pSalary]);

		SendSucc(playerid, String256);
		PlayerVoen[playerid] = 1;
		}



		}

		case dSvadbaMenu:
		{
		if(!response) return 1;
		switch(listitem)
		{
			case 0:
			{
				if(pData[playerid][pSex] == 2)
					return SendErr(playerid, "Вы не можете купить мужской костюм.");
				if(GetPlayerMoneyEx(playerid) < 5000)
				{
					show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
					return SendErr(playerid, "У Вас недостаточно денег!");
				}

				give_money(playerid, -5000, "Покупка свадебного скина");

				SendInf(playerid, "Вы купили костюм жениха, введите "cORANGE"/endskin"cWH" чтобы снять его");

				SetPVarIntNew(playerid, "askin", GetPlayerSkin(playerid));
				SetPlayerSkinNA(playerid,186);
			}
			case 1:
			{
				if(pData[playerid][pSex] == 1)
					return SendErr(playerid, "Вы не можете купить женский костюм.");
				if(GetPlayerMoneyEx(playerid) < 5000)
				{
					show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
					return SendErr(playerid, "У Вас недостаточно денег!");
				}

				give_money(playerid, -5000, "Покупка скина невесты");

				SendInf(playerid, "Вы купили костюм невесты, введите "cORANGE"/endskin"cWH" чтобы снять его");
				SetPVarIntNew(playerid, "askin", GetPlayerSkin(playerid));

				SetPlayerSkinNA(playerid,216); // 214 216 246
			}
			case 2:
			{
				if(GetPlayerMoneyEx(playerid) < 5000)
				{
					show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
					return SendErr(playerid, "У Вас недостаточно денег!");
				}

				give_money(playerid, -5000, "Покупка скина священника");

				SendInf(playerid, "Вы купили костюм священника, введите "cORANGE"/endskin"cWH" чтобы снять его");
				SetPVarIntNew(playerid, "askin", GetPlayerSkin(playerid));
				SetPlayerSkinNA(playerid, 68); // 142
			}

		}

		}

		case dVskinMenu:
		{
		if(!response || GetPlayerState(playerid) != 1) return 1;
		if(pData[playerid][pFraction] != 0) return SendErr(playerid, "Вы состоите в организации.");
		if(!IsPlayerInRangeOfPoint(playerid, 2.5, -204.3253,694.1195,1201.9315)) return 1;
//1162.5557,1364.3269,10.8203
		if(GetPVarIntNew(playerid,"priskin") == 0)
		{
		SetPlayerSkin(playerid,252);
		SetPVarIntNew(playerid,"priskin", 252);
		SCM(playerid,CWHITE,"Вы получили форму "cLRED"призывника"cWH"");
		}
		else
		{
			set_player_skin(playerid,pData[playerid][pSkin]);
			
			SetPVarIntNew(playerid,"priskin", 0);
			SCM(playerid,CWHITE,"Вы сняли форму "cLRED"призывника"cWH"");
		}
		return 1;
		}


		case dCopTake:
		{
			if(!response)
			{
				DeletePVarNew(playerid, "TakeOffer");
				return true;
			}
			new targetid = GetPVarIntNew(playerid, "TakeOffer") - 1, Float:x[3];
			GetPlayerPos(targetid, x[0], x[1], x[2]);
			if(GetPlayerDistanceFromPoint(playerid, x[0], x[1], x[2]) > 2.0) {
				SCM(playerid, COLOR_GREY, "Вы далеко от игрока!");
				return true;
			}
			if(pTemp[targetid][pCuffer] == INVALID_PLAYER_ID) {
				SendErr(playerid, "Игрок не в наручниках");
				return true;
			}

			switch(listitem) {
				case 0: {
					if(!pData[targetid][pDrugs] && !pData[targetid][pHDrugs]) {
						SCM(playerid, CGRAY, "У данного игрока нет наркотиков.");
						return true;
					}
					if(pData[targetid][pDrugs] > 0)
					{
					new Premia = pData[targetid][pDrugs]*3;
					pData[targetid][pDrugs] = 0;
					UpdatePlayerData(targetid, "drugs", 0);
					format(don_string, sizeof(don_string), "Вы изъяли наркотики у игрока %s", pData[targetid][pNickname]);
					SCM(playerid, COLOR_LIGHTRED, don_string);
					if(GetPVarIntNew(targetid ,"takedrugs") < GetTickCount())
					{
					format(String256,sizeof(String256),"Вы получили премию "cGR"%d рублей{007fff} за изъятые наркотики", Premia);
					SendClientMessage (playerid, 0x007fffff, String256);

					give_money(playerid, Premia, "Изъятие наркотиков (Премия)");

					GosMoney[1] -= Premia;
					SaveNewsMoney();
					}

					format(don_string, sizeof(don_string), "Полицейский %s изъял ваши наркотики.", pData[playerid][pNickname]);
					SCM(targetid, COLOR_LIGHTRED, don_string);

					SetPVarIntNew(targetid ,"takedrugs",GetTickCount()+60000*20); // time мсекунд для обработки..
					}
					if(pData[targetid][pHDrugs] > 0)
					{
					new Premia = pData[targetid][pHDrugs]*3;
					pData[targetid][pHDrugs] = 0;
					UpdatePlayerData(targetid, "hdrugs", 0);
					format(don_string, sizeof(don_string), "Вы изъяли тяжелые наркотики у игрока %s", pData[targetid][pNickname]);
					SCM(playerid, COLOR_LIGHTRED, don_string);
					if(GetPVarIntNew(targetid ,"takedrugs") < GetTickCount())
					{
					format(String256,sizeof(String256),"Вы получили премию "cGR"%d рублей{007fff} за изъятые наркотики", Premia);
					SendClientMessage (playerid, 0x007fffff, String256);
					give_money(playerid, Premia, "Изъятие наркотиков (Премия)");
					GosMoney[1] -= Premia;
					SaveNewsMoney();
					}

					format(don_string, sizeof(don_string), "Полицейский %s изъял ваши тяжелые наркотики.", pData[playerid][pNickname]);
					SCM(targetid, COLOR_LIGHTRED, don_string);

					SetPVarIntNew(targetid ,"takedrugs",GetTickCount()+60000*20); // time мсекунд для обработки..
					}


				}
				case 1: {
					for(new w,a,i = 0; i < 13; i ++) {
						GetPlayerWeaponData(targetid, i, w, a);
						if(!w || !a) continue;
						ResetPlayerWeapons(targetid);
						format(don_string, sizeof(don_string), "Вы изъяли все оружие у игрока %s", pData[targetid][pNickname]);
						SCM(playerid, COLOR_LIGHTRED, don_string);
						format(don_string, sizeof(don_string), "Полицейский %s изъял все ваше оружие.", pData[playerid][pNickname]);
						SCM(targetid, COLOR_LIGHTRED, don_string);
						return true;
					}
					SCM(playerid, CGRAY, "У данного игрока нет оружия.");
					return true;
				}
				case 2: {
					if(!pData[targetid][pAmmo]) {
						SCM(playerid, CGRAY, "У данного игрока нет патронов.");
						return true;
					}
					pData[targetid][pAmmo] = 0;
					format(don_string, sizeof(don_string), "Вы изъяли патроны у игрока %s", pData[targetid][pNickname]);
					SCM(playerid, COLOR_LIGHTRED, don_string);
					format(don_string, sizeof(don_string), "Полицейский %s изъял ваши патроны.", pData[playerid][pNickname]);
					SCM(targetid, COLOR_LIGHTRED, don_string);
				}
				case 3: {
					if(!pData[targetid][pGunAmount]) {
						SCM(playerid, CGRAY, "У данного игрока нет ед. оружия.");
						return true;
					}
					pData[targetid][pGunAmount] = 0;
					UpdatePlayerData(targetid, "gunamount", 0);
					format(don_string, sizeof(don_string), "Вы изъяли ед. оружия у игрока %s", pData[targetid][pNickname]);
					SCM(playerid, COLOR_LIGHTRED, don_string);
					format(don_string, sizeof(don_string), "Полицейский %s изъял ваши ед. оружия.", pData[playerid][pNickname]);
					SCM(targetid, COLOR_LIGHTRED, don_string);
				}
				default: {}
			}

			DeletePVarNew(playerid, "TakeOffer");
		}

		case dLogin:
		{

			if(!response)
			{
				SCM(playerid,CWHITE,"Введите /q чтобы Выйти");
				NewKick(playerid);
			}

			else if(!strlen(inputtext)) SPFD(playerid,dLogin, DIALOG_STYLE_PASSWORD,""cBLUE"Логин","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!",pData[playerid][pNickname]);
			else
			{

				if(pData[playerid][MD5] == 0)
				{

					print("1-1");

					new
						hash[80];

					SHA256_PassHash(inputtext, pData[playerid][pSaltHash], hash, 80);

					if(!strcmp(hash, pData[playerid][pPassword]))
					{
						print("1-2");
 						pTemp[playerid][pInTime] = 0;
						new player_ip2[16]; GetPlayerIp(playerid, player_ip2, 16);
						if(strlen(pData[playerid][pGauth]) > 8 && pData[playerid][pGaON] > 0 && (strcmp(player_ip2,pTemp[playerid][pLastIP],false,16) != 0 || pData[playerid][pGaONEX] > 0))
						{
							SPD(playerid,dLoginGG,DIALOG_STYLE_INPUT,""cBLUE"Вход","Google Authenticator\n"cWH"Вы пытаетесь авторизоваться с неизвестного IP адреса.\n\
										Введите одноразовый пароль(код) из приложения Google Authenticator, установленного на вашем телефоне:","Вход","");
						}
						else
						{


							if(pData[playerid][pSecurityCode] == 0)
							{
									new player_ip[16]; GetPlayerIp(playerid, player_ip, 16);
									new countip;
									for(new i=0;i<16;i++){
									if(player_ip[i]=='.') countip ++;
									if(countip > 2)					{
									player_ip[i]=' ';				}
									}
									countip = 0;
									new ipstr[16];
									format(ipstr,sizeof(ipstr),pTemp[playerid][pLastIP]);
									for(new i=0;i<16;i++){
									if(ipstr[i]=='.') countip ++;
									if(countip > 2)					{
									ipstr[i]=' ';				}
									}
									if(!strcmp(player_ip,ipstr,false,16) || pData[playerid][pCodeIP] < 100)
									{
									if(strcmp(player_ip,ipstr,false,16) != 0 && pData[playerid][pCodeIP] < 100)
									{
					   					new PlayerSerial[64];
										gpci(playerid, PlayerSerial, sizeof(PlayerSerial));
										if(strlen(pData[playerid][pMob]) > 18 && strcmp(PlayerSerial,pData[playerid][pHesh],false, 64) != 0 && !pData[playerid][pGaON])
										{
											if(pData[playerid][pCC] != 0)
											{
											SetPVarIntNew(playerid, "acceptphone",pData[playerid][pCC]);
											SPD(playerid,dLogin23,DIALOG_STYLE_INPUT,""cBLUE"Вход","{FF5030}Попытка авторизации с другого компьютера\n\n"cWH"Введите последний код отправленный на ваш номер телефона:","Вход","Отмена");
											}
											else {
											pData[playerid][pCC] = 10000 + random(89999);
											SetPVarIntNew(playerid, "acceptphone",pData[playerid][pCC]);
											format(String256,sizeof(String256),"UPDATE `accounts` SET `ccode` = '%d' WHERE `id` = '%d'",pData[playerid][pCC],pData[playerid][pTempID]);
											sql_queryEx(zConn, String256 , QUERY_THREADED);
											
//											format(String256,sizeof(String256),"smsc.ru/sys/send.php?login= &psw= &phones=%s&mes=%d",pData[playerid][pMob], pData[playerid][pCC]  );
//											HTTP(playerid ,HTTP_GET,String256,"","MyHttpResponse");

											SPD(playerid,dLogin23,DIALOG_STYLE_INPUT,""cBLUE"Вход","{FF5030}Попытка авторизации с другого компьютера\n\n"cWH"Введите код отправленный на ваш номер телефона:","Вход","Отмена");
											}
											return 1;
										}
									}
									else if(pData[playerid][pCodeIP] >= 100)
									{

									}

									print("1-3");

									if(pData[playerid][MD5] == 0)
									{

										sql_escape_string(zConn, MD5_Hash(inputtext), pData[playerid][pPassword], 35);

										new
											fmt_str[256];

										format(fmt_str,sizeof(fmt_str),"UPDATE `accounts` SET password = '%s', pSaltHash = '0' WHERE id = '%d'", pData[playerid][pPassword], pData[playerid][pMysqlID]);
										sql_queryEx(zConn, fmt_str, QUERY_THREADED);

										pData[playerid][MD5] = 1;
										UpdatePlayerData(playerid, "MD5", pData[playerid][MD5]);
									}

									print("1-4");

									pData[playerid][pCC] = 0;
									clear_chat_for_login(playerid);

									if(SERVER_SELECT_MODE == 1)
									{
										SCM(playerid,CBLUE,"Добро пожаловать на "SERVER_NAME" !");
									}

									pTemp[playerid][pLogined] = true;

									LoadPlayerData(playerid);
									SetPlayerScore(playerid,pData[playerid][pLevel]);



									if(IsActionTrue2)
									{
										SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенного ЕХР!");
									}
									if(IsActionTrue4)
									{
										SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенной зарплаты на начальных работах и организациях!");
									}
									if(IsActionTrue)
									{
										SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует скидка на все платные услуги!");
										SCM(playerid, 0x33AA33FF, "Подробнее в "cWH"/donate");
									}

									if(IsActionTrue5)
									{
										SCM(playerid, COLOR_ORANGE, "Внимание! Отыграйте 10 часов и получите бонус в размере 100.000 рублей!");
									}

									SCM(playerid, COLOR_ORANGE, "");
									SCM(playerid, COLOR_ORANGE, "Внимание! Список доступных акций - /action!");

									SpawnPlayer(playerid);
									CancelSelectTextDraw(playerid);

							   		format(String256, 150, "UPDATE accounts SET `last` = NOW() WHERE id = '%d'", pData[playerid][pMysqlID]);
							   		sql_queryEx(zConn, String256 , QUERY_THREADED);

							   		

									if(GetPVarIntNew(playerid, "hud_hide") != 1)
									{
										show_hud_element(playerid);
										show_hud_hungry(playerid);
									}

							   		KillTimer(login_timer_p[playerid]);
							   		KillTimer(login_timer_p_2[playerid]);

									}
									else
									{
										SPD(playerid,dLogin3,DIALOG_STYLE_INPUT,""cBLUE"Вход",""cWH"Введите код привязки IP адреса:","Вход","Отмена");
									}

							}
							else
							{
								get_player_security_code(playerid);
							}
						}
					}
					else
					{

						new
							ip[16];

						GetPlayerIp(playerid, ip, 16);

						if(!strcmp(ip, pTemp[playerid][pLastIP]))
						{

							SPD(playerid,DIALOG_NEW_PASS_MD5,DIALOG_STYLE_INPUT,""cBLUE"Смена пароля",""cWH"Ваш пароль устарел, введите новый для авторизации:","Вход","Отмена");

							return true;
						}

						pTemp[playerid][pLoginAttempt]++;
						if(pTemp[playerid][pLoginAttempt] == MAX_LOGIN_ATTEMPTS)
						{
							SCM(playerid,CRED,"Вы исчерпали лимит попыток ввода пароля");
							SCM(playerid,CWHITE,"Напишите /q чтобы Выйти");
							return NewKick(playerid);
						}
						SendInf(playerid, "Восстановить пароль можно в личном кабинете на сайте");
						SFCM(playerid,CRED,"Пароль введен неверно. Осталось попыток: %d",MAX_LOGIN_ATTEMPTS-pTemp[playerid][pLoginAttempt],MAX_LOGIN_ATTEMPTS);
						SPFD(playerid,dLogin,DIALOG_STYLE_PASSWORD,""cBLUE"Логин!","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!",pData[playerid][pNickname]);

	 				}
	 			}
	 			else
	 			{
					if(pData[playerid][MD5] == 1)
					{

						if(!strcmp(MD5_Hash(inputtext), pData[playerid][pPassword], true))
						{
		 						pTemp[playerid][pInTime] = 0;
								new player_ip2[16]; GetPlayerIp(playerid, player_ip2, 16);
								if(strlen(pData[playerid][pGauth]) > 8 && pData[playerid][pGaON] > 0 && (strcmp(player_ip2,pTemp[playerid][pLastIP],false,16) != 0 || pData[playerid][pGaONEX] > 0))
								{
									SPD(playerid,dLoginGG,DIALOG_STYLE_INPUT,""cBLUE"Вход","Google Authenticator\n"cWH"Вы пытаетесь авторизоваться с неизвестного IP адреса.\n\
												Введите одноразовый пароль(код) из приложения Google Authenticator, установленного на вашем телефоне:","Вход","");
								}
								else
								{
									if(pData[playerid][pSecurityCode] == 0)
									{
											new player_ip[16]; GetPlayerIp(playerid, player_ip, 16);
											new countip;
											for(new i=0;i<16;i++){
											if(player_ip[i]=='.') countip ++;
											if(countip > 2)					{
											player_ip[i]=' ';				}
											}
											countip = 0;
											new ipstr[16];
											format(ipstr,sizeof(ipstr),pTemp[playerid][pLastIP]);
											for(new i=0;i<16;i++){
											if(ipstr[i]=='.') countip ++;
											if(countip > 2)					{
											ipstr[i]=' ';				}
											}
											if(!strcmp(player_ip,ipstr,false,16) || pData[playerid][pCodeIP] < 100)
											{
											if(strcmp(player_ip,ipstr,false,16) != 0 && pData[playerid][pCodeIP] < 100)
											{
							   					new PlayerSerial[64];
												gpci(playerid, PlayerSerial, sizeof(PlayerSerial));
												if(strlen(pData[playerid][pMob]) > 18 && strcmp(PlayerSerial,pData[playerid][pHesh],false, 64) != 0 && !pData[playerid][pGaON])
												{
													if(pData[playerid][pCC] != 0)
													{
													SetPVarIntNew(playerid, "acceptphone",pData[playerid][pCC]);
													SPD(playerid,dLogin23,DIALOG_STYLE_INPUT,""cBLUE"Вход","{FF5030}Попытка авторизации с другого компьютера\n\n"cWH"Введите последний код отправленный на ваш номер телефона:","Вход","Отмена");
													}
													else {
													pData[playerid][pCC] = 10000 + random(89999);
													SetPVarIntNew(playerid, "acceptphone",pData[playerid][pCC]);
													format(String256,sizeof(String256),"UPDATE `accounts` SET `ccode` = '%d' WHERE `id` = '%d'",pData[playerid][pCC],pData[playerid][pTempID]);
													sql_queryEx(zConn, String256 , QUERY_THREADED);
		//											format(String256,sizeof(String256),"smsc.ru/sys/send.php?login= &psw= &phones=%s&mes=%d",pData[playerid][pMob], pData[playerid][pCC]  );
		//											HTTP(playerid ,HTTP_GET,String256,"","MyHttpResponse");
													SPD(playerid,dLogin23,DIALOG_STYLE_INPUT,""cBLUE"Вход","{FF5030}Попытка авторизации с другого компьютера\n\n"cWH"Введите код отправленный на ваш номер телефона:","Вход","Отмена");
													}
													return 1;
												}
											}
											else if(pData[playerid][pCodeIP] >= 100)
											{

											}



											pData[playerid][pCC] = 0;
											clear_chat_for_login(playerid);

											if(SERVER_SELECT_MODE == 1)
											{
												SCM(playerid,CBLUE,"Добро пожаловать на "SERVER_NAME" !");
											}

											pTemp[playerid][pLogined] = true;

											LoadPlayerData(playerid);
											SetPlayerScore(playerid,pData[playerid][pLevel]);

											if(IsActionTrue2)
											{
												SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенного ЕХР!");
											}
											if(IsActionTrue4)
											{
												SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенной зарплаты на начальных работах и организациях!");
											}
											if(IsActionTrue)
											{
												SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует скидка на все платные услуги!");
												SCM(playerid, 0x33AA33FF, "Подробнее в "cWH"/donate");
											}
											if(IsActionTrue5)
											{
												SCM(playerid, COLOR_ORANGE, "Внимание! Отыграйте 10 часов и получите бонус в размере 100.000 рублей!");
											}


											SCM(playerid, COLOR_ORANGE, "");
											SCM(playerid, COLOR_ORANGE, "Внимание! Список доступных акций - /action!");

											SpawnPlayer(playerid);
											CancelSelectTextDraw(playerid);

									   		format(String256, 150, "UPDATE accounts SET `last` = NOW() WHERE id = '%d'", pData[playerid][pMysqlID]);
									   		sql_queryEx(zConn, String256 , QUERY_THREADED);

									   		

											if(GetPVarIntNew(playerid, "hud_hide") != 1)
											{
												show_hud_element(playerid);
												show_hud_hungry(playerid);
											}

									   		KillTimer(login_timer_p[playerid]);
									   		KillTimer(login_timer_p_2[playerid]);

											}
											else
											{
												SPD(playerid,dLogin3,DIALOG_STYLE_INPUT,""cBLUE"Вход",""cWH"Введите код привязки IP адреса:","Вход","Отмена");
											}

									}
									else
									{

										get_player_security_code(playerid);
									}
								}
						}
						else
						{
							pTemp[playerid][pLoginAttempt]++;
							if(pTemp[playerid][pLoginAttempt] == MAX_LOGIN_ATTEMPTS)
							{
								SCM(playerid,CRED,"Вы исчерпали лимит попыток ввода пароля");
								SCM(playerid,CWHITE,"Напишите /q чтобы Выйти");
								return NewKick(playerid);
							}
							SendInf(playerid, "Восстановить пароль можно в личном кабинете на сайте");
							SFCM(playerid,CRED,"Пароль введен неверно. Осталось попыток: %d",MAX_LOGIN_ATTEMPTS-pTemp[playerid][pLoginAttempt],MAX_LOGIN_ATTEMPTS);
							SPFD(playerid,dLogin, DIALOG_STYLE_PASSWORD,""cBLUE"Логин","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!",pData[playerid][pNickname]);
		 				}
		 			}
	 			}
			}
		}
		case DIALOG_NEW_PASS_MD5:
		{
			if(!response)
				return NewKick(playerid);

			if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
			{
				SPD(playerid,DIALOG_NEW_PASS_MD5,DIALOG_STYLE_INPUT,""cBLUE"Смена пароля",""cWH"Ваш пароль устарел, введите новый для авторизации:","Вход","Отмена");
				return true;
			}
			for(new i = strlen(inputtext); i != 0; --i)
			{
				switch(inputtext[i])
				{
					case 'А'..'Я', 'а'..'я', ' ':
					{
						SPD(playerid,DIALOG_NEW_PASS_MD5,DIALOG_STYLE_INPUT,""cBLUE"Смена пароля",""cWH"Ваш пароль устарел, введите новый для авторизации:","Вход","Отмена");
						return SendErr(playerid,"Пароль содержит русские символы!");
					}
				}
			}

			if(!strlen(inputtext))
			{
				SPD(playerid,DIALOG_NEW_PASS_MD5,DIALOG_STYLE_INPUT,""cBLUE"Смена пароля",""cWH"Ваш пароль устарел, введите новый для авторизации:","Вход","Отмена");
				return true;
			}
			if(strlen(inputtext) <6 || strlen(inputtext) > 22)
			{
				SCM(playerid,CWHITE,"Длина пароля должна быть от 6-и до 22-х символов");
				SPD(playerid,DIALOG_NEW_PASS_MD5,DIALOG_STYLE_INPUT,""cBLUE"Смена пароля",""cWH"Ваш пароль устарел, введите новый для авторизации:","Вход","Отмена");
				return 1;
			}

			sql_escape_string(zConn, MD5_Hash(inputtext), pData[playerid][pPassword], 35);

			new
				fmt_str[256];

			format(fmt_str,sizeof(fmt_str),"UPDATE `accounts` SET password = '%s', pSaltHash = '0' WHERE id = '%d'", pData[playerid][pPassword], pData[playerid][pMysqlID]);
			sql_queryEx(zConn, fmt_str, QUERY_THREADED);

			pData[playerid][MD5] = 1;
			UpdatePlayerData(playerid, "MD5", pData[playerid][MD5]);

			SPFD(playerid,dLogin, DIALOG_STYLE_PASSWORD,""cBLUE"Логин","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!",pData[playerid][pNickname]);

		}

		case dLogin23:
		{
			if(strlen(inputtext) > 0 && pData[playerid][pCC] == strval(inputtext))
			{
					clear_chat_for_login(playerid);

					if(SERVER_SELECT_MODE == 1)
					{
						SCM(playerid,CBLUE,"Добро пожаловать на "SERVER_NAME" !");
					}

					pTemp[playerid][pLogined] = true;
					pData[playerid][pCC] = 0;
					LoadPlayerData(playerid);
					pData[playerid][pCC] = 0;

					new mes[256];
					format(mes,sizeof(mes),"UPDATE `accounts` SET `mob` = '%s', `ccode` = '0' WHERE `id` = '%d'",pData[playerid][pMob] ,pData[playerid][pMysqlID]);
					sql_queryEx(zConn, mes, QUERY_THREADED);

					SetPlayerScore(playerid,pData[playerid][pLevel]);


					if(IsActionTrue) {
						SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует скидка на все платные услуги!");
						SCM(playerid, 0x33AA33FF, "Подробнее в "cWH"/donate");
					}
					if(IsActionTrue2) {
						SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенного ЕХР!");
					}
					if(IsActionTrue4) {
						SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенной зарплаты на начальных работах и организациях!");
					}
					if(IsActionTrue5)
					{
						SCM(playerid, COLOR_ORANGE, "Внимание! Отыграйте 10 часов и получите бонус в размере 100.000 рублей!");
					}

					SCM(playerid, COLOR_ORANGE, "");
					SCM(playerid, COLOR_ORANGE, "Внимание! Список доступных акций - /action!");

					SpawnPlayer(playerid);
					CancelSelectTextDraw(playerid);

			   		format(String256, 150, "UPDATE accounts SET `last` = NOW() WHERE id = '%d'", pData[playerid][pMysqlID]);
			   		sql_queryEx(zConn, String256 , QUERY_THREADED);

			   		

					if(GetPVarIntNew(playerid, "hud_hide") != 1)
					{
						show_hud_element(playerid);
						show_hud_hungry(playerid);
					}

			   		KillTimer(login_timer_p[playerid]);
			   		KillTimer(login_timer_p_2[playerid]);

			}
			else
			{
				SCM(playerid,CRED,"Код безопасности введен неверно, введите "c_lred"/q"c_white", чтобы выйти!");
				NewKick(playerid);
			}
		}

		case dLogin3:
		{
			if(strlen(inputtext) > 0 && pData[playerid][pCodeIP] == strval(inputtext))
			{
				pData[playerid][pCC] = 0;
				clear_chat_for_login(playerid);

				if(SERVER_SELECT_MODE == 1)
				{
					SCM(playerid,CBLUE,"Добро пожаловать на "SERVER_NAME" !");
				}

				pTemp[playerid][pLogined] = true;
				LoadPlayerData(playerid);
				SetPlayerScore(playerid,pData[playerid][pLevel]);


				if(IsActionTrue) {
					SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует скидка на все платные услуги!");
					SCM(playerid, 0x33AA33FF, "Подробнее в "cWH"/donate");
				}
				if(IsActionTrue2) {
					SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенного ЕХР!");
				}
				if(IsActionTrue4) {
					SCM(playerid, 0x33AA33FF, "Внимание! Сегодня действует акция удвоенной зарплаты на начальных работах и организациях!");
				}
				if(IsActionTrue5)
				{
					SCM(playerid, COLOR_ORANGE, "Внимание! Отыграйте 10 часов и получите бонус в размере 100.000 рублей!");
				}

				SCM(playerid, COLOR_ORANGE, "");
				SCM(playerid, COLOR_ORANGE, "Внимание! Список доступных акций - /action!");

				SpawnPlayer(playerid);
				CancelSelectTextDraw(playerid);


		   		format(String256, 150, "UPDATE accounts SET `last` = NOW() WHERE id = '%d'", pData[playerid][pMysqlID]);
		   		sql_queryEx(zConn, String256 , QUERY_THREADED);

		   		

				if(GetPVarIntNew(playerid, "hud_hide") != 1)
				{
					show_hud_element(playerid);
					show_hud_hungry(playerid);
				}

		   		KillTimer(login_timer_p[playerid]);
		   		KillTimer(login_timer_p_2[playerid]);

			}
			else
			{
				SCM(playerid,CRED,"Код безопасности введен неверно, введите "c_lred"/q"c_white", чтобы выйти!");
				NewKick(playerid);
			}
		}

		case dRegMenu:
		{

			if(!response)
			{
				SCM(playerid,CWHITE,"Введите /q чтобы Выйти");
				NewKick(playerid);
			}
			else
			{
 				SPFD(playerid,dRegister,1,""cBLUE"Регистрация","Далее","Выход",""cWH"Добро пожаловать на сервер "cBLUE""SERVER_NAME" "cWH".\nВаш логин: "cBLUE"%s"cWH"\n\nЕсли у вас есть пароль, введите его в поле ниже!\nЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
			}
		}


		case dAdvInf2:
		{
			if(!response) return 1;
			switch(listitem)
			{
			case 0:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver2`,`subfraction` FROM `accounts` WHERE `fraction` = 2 AND `subfraction` = 1 ORDER BY `adver2` DESC");
			}
			case 1:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver2`,`subfraction` FROM `accounts` WHERE `fraction` = 2 AND `subfraction` = 2 ORDER BY `adver2` DESC");
			}
			case 2:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver2`,`subfraction` FROM `accounts` WHERE `fraction` = 2 AND `subfraction` = 3 ORDER BY `adver2` DESC");
			}
			case 3:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver2`,`subfraction` FROM `accounts` WHERE `fraction` = 2 ORDER BY `adver2` DESC");
			}
			default: return 1;
			}
   			new Result:r = sql_queryEx(zConn, String2048, QUERY_CACHED);
 			new sqls = sql_num_rows(r);
			if(sqls > 0) {
				format(String4096, sizeof(String4096), "\t"cGREY"№\t"cGREY"Имя игрока\t\t\t"cGREY"Больница\t"cGREY"Вылеченных пациентов"cWH"\t\n\n");
 				if(sqls < 0) { sql_free_result(r); return 1; }
				if(sqls > 15) { sqls = 15; }
				for(new i=0; i< sqls; i++) //sql_num_rows(r)
				{
					new nn[MAX_PLAYER_NAME], rank, lvl;
					sql_get_field_ex(r, i, 0, nn);
					rank = sql_get_field_int_ex(r, i, 1);
					lvl = sql_get_field_int_ex(r, i, 2);
					new nn2[16];
					if(lvl == 1) {
					format(nn2, sizeof(nn2), "{33CC33}Южный");
					}
					else if(lvl == 2) {
					format(nn2, sizeof(nn2), "{3333CC}Арзамас");
					}
					else if(lvl == 3) {
					format(nn2, sizeof(nn2), "{FF6633}Батырево");
					}
					else {
					format(nn2, sizeof(nn2), ""cWH"МЗ.");
					}

					if(strlen(nn) < 14) {
					format(String4096, sizeof(String4096), "%s\t%d.\t%s\t\t\t%s\t"cWH"%d\n",String4096,i+1 ,nn,nn2, rank);
					}
					else			    {
					format(String4096, sizeof(String4096), "%s\t%d.\t%s\t\t%s\t"cWH"%d\n",String4096, i+1 ,nn,nn2, rank);
					}
				}
				SPD(playerid, dMes, 0, ""cBLUE"Лучшие сотрудники больниц:",String4096,"Далее", "");

	  		}
			else SCM(playerid, CGRAY, "Произошла ошибка базы данных");
			sql_free_result(r);
		}


		case dAdvInf:
		{
			if(!response) return 1;
			switch(listitem)
			{
			case 0:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver`,`subfraction` FROM `accounts` WHERE `fraction` = 10 AND `subfraction` = 1 ORDER BY `adver` DESC");
			}
			case 1:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver`,`subfraction` FROM `accounts` WHERE `fraction` = 10 AND `subfraction` = 2 ORDER BY `adver` DESC");
			}
			case 2:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver`,`subfraction` FROM `accounts` WHERE `fraction` = 10 AND `subfraction` = 3 ORDER BY `adver` DESC");
			}
			case 3:
			{
			format(String2048, sizeof(String2048), "SELECT `nickname`,`adver`,`subfraction` FROM `accounts` WHERE `fraction` = 10 ORDER BY `adver` DESC");
			}
			default: return 1;
			}

  			new Result:r = sql_queryEx(zConn, String2048, QUERY_CACHED);
			if(sql_num_rows(r)) {
				format(String4096, sizeof(String4096), "\t \t"cBLUE"Имя игрока\t\t\tРадио\tОбработано сообщений"cWH"\t\n\n");
 				new sqls = sql_num_rows(r);
				if(sqls < 0) { sql_free_result(r); return 1; }
				if(sqls > 15) { sqls = 15; }
				for(new i=0; i< sqls; i++)
				{
					new nn[MAX_PLAYER_NAME], rank, lvl;
					sql_get_field_ex(r, i, 0, nn);
					rank = sql_get_field_int_ex(r, i, 1);
					lvl = sql_get_field_int_ex(r, i, 2);
					new nn2[16];
					if(lvl == 1) {
					format(nn2, sizeof(nn2), "{33CC33}Южный");
					}
					else if(lvl == 2) {
					format(nn2, sizeof(nn2), "{3333CC}Эдово");
					}
					else if(lvl == 3) {
					format(nn2, sizeof(nn2), "{FF6633}Арзамас");
					}
					else {
					format(nn2, sizeof(nn2), ""cWH"Упр.");
					}

					if(strlen(nn) < 14) {
					format(String4096, sizeof(String4096), "%s\t%d.\t%s\t\t\t%s\t"cWH"%d\n",String4096,i+1 ,nn,nn2, rank);
					}
					else			    {
					format(String4096, sizeof(String4096), "%s\t%d.\t%s\t\t%s\t"cWH"%d\n",String4096, i+1 ,nn,nn2, rank);
					}
				}
				SPD(playerid, dMes, 0, ""cBLUE"Лучшие сотрудники:",String4096,"Далее", "");

	  		}
			else SCM(playerid, CGRAY, "Произошла ошибка базы данных");
			sql_free_result(r);
		}

		case dRegisterPovtor:
		{
			new oldpass[25];
			GetPVarStringNew(playerid,"passvtr",oldpass,25);
			DeletePVarNew(playerid,"passvtr");
			if(!response) return 1;
			if(!strcmp(inputtext,oldpass,false) && strlen(inputtext) && strlen(inputtext) < 24)
			{

 				sql_escape_string(zConn, inputtext, pData[playerid][pPassword], 24);

 				SPD(playerid,dRegister2,1,""cBLUE"Регистрация",""cWH"Укажите Ваш почтовый адрес, для восстановления пароля\n\nПример: "cBLUE""SERVER_NAME"@yandex.ru", !"Далее", !"Назад");
			}
			else SendErr(playerid, "Введенные Вами пароли не совпадают"), NewKick(playerid);
		}
		case dRegister:
		{
			if(!response)
			{
				SCM(playerid,CWHITE,"Введите /q чтобы Выйти");
				NewKick(playerid);
			}
			else if(!strlen(inputtext)) SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
			else
			{
				if(strfind(inputtext,"|") != -1 || strfind(inputtext,"'") != -1 || strfind(inputtext,"`") != -1 || strfind(inputtext,")") != -1 || strfind(inputtext,",") != -1)
				{
					SendErr(playerid, "У вас в пароле пристуствут запрещенные символы");
					SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
					return 1;
				}
				if(strlen(inputtext) <6 || strlen(inputtext) > 22)
				{
					SCM(playerid,CWHITE,"Длина пароля должна быть от 6-и до 22-х символов");
					SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
					return 1;
				}
				if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
				{
					SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
					return 1;
				}

				for(new i = strlen(inputtext); i != 0; --i)
				{
					switch(inputtext[i])
					{
						case 'А'..'Я', 'а'..'я', ' ':
						{
							SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
							return SendErr(playerid,"Пароль содержит русские символы!");
						}
					}
				}

				SetPVarStringNew(playerid,"passvtr",inputtext);
				SPD(playerid,dRegisterPovtor,3,""cBLUE"Повтор пароля",""cWH"Повторите пароль для уточнения:", !"Далее", !"Отмена");
			}
		}

		case dRegister2:
		{
			if(!response) {SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]); return 1;}
			if(strfind(inputtext,"|") != -1 || strfind(inputtext,"'") != -1 || strfind(inputtext,"`") != -1 || strfind(inputtext,"=") != -1 || strfind(inputtext," ") != -1 || strfind(inputtext,")") != -1 || strfind(inputtext,",") != -1)
			{
				SendErr(playerid, "У вас в почте пристуствуют запрещенные символы");
				SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]);
				return 1;
			}
 			if(!IsEMail(inputtext))
			{
				SendErr(playerid, "E-Mail неверный. Повторите ввод.");
				SPD(playerid,dRegister2,1,""cBLUE"Регистрация","Укажите Ваш почтовый адрес, для восстановления пароля\n\nПример: "cBLUE""SERVER_NAME"@yandex.ru", !"Далее", !"Назад");
 			}
			else
			{




				if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
				{
					SendErr(playerid, "В почтовом адресе присутствуют запрещенные символы!");
					SPD(playerid,dRegister2,1,""cBLUE"Регистрация","Укажите Ваш почтовый адрес, для восстановления пароля\n\nПример: "cBLUE""SERVER_NAME"@yandex.ru", !"Далее", !"Назад");

					return true;
				}

				static
					fmt_str[250];

				format(fmt_str, sizeof(fmt_str), "SELECT * FROM accounts WHERE email = '%s' LIMIT 1", inputtext);
				new Result:emailfind = sql_queryEx(zConn, fmt_str, QUERY_CACHED);

				if(sql_num_rows(emailfind) != 0)
				{
					SendErr(playerid, "Данный адрес электронной почты используется!");
					SPD(playerid,dRegister2,1,""cBLUE"Регистрация","Укажите Ваш почтовый адрес, для восстановления пароля\n\nПример: "cBLUE""SERVER_NAME"@yandex.ru", !"Далее", !"Назад");

					return true;
				}

				sql_free_result(emailfind);


				sql_escape_string(zConn, inputtext, pData[playerid][pEmail], 40);
				SPD(playerid,dRegister3,0,""cBLUE"Регистрация",""cWH"Укажите ваш пол персонажа:\n\n"cBLUE"От выбора будет зависеть Ваша игровая внешность", !"Мужской", !"Женский");
 			}
		}
		case dRegisterPhone:
		{
			SPD(playerid,dRegister3,0,""cBLUE"Регистрация",""cWH"Укажите ваш пол персонажа:\n\n"cBLUE"От выбора будет зависеть Ваша игровая внешность", !"Мужской", !"Женский");
		}
		case dRegisterPhone2:
		{
			SPD(playerid,dRegister3,0,""cBLUE"Регистрация",""cWH"Укажите ваш пол персонажа:\n\n"cBLUE"От выбора будет зависеть Ваша игровая внешность", !"Мужской", !"Женский");
		}
		case dRegister22:
		{
			if(response)
			{
				if(GetPVarIntNew(playerid, "emailcode") == strval(inputtext))
				{
					DeletePVarNew(playerid, "emailcode");
					SPD(playerid,dRegister3,0,""cBLUE"Регистрация",""cWH"Укажите ваш пол персонажа:\n\n"cBLUE"От выбора будет зависеть Ваша игровая внешность", !"Мужской", !"Женский");
				}
				else DeletePVarNew(playerid, "emailcode"), NewKick(playerid);
			}
		}
		case dRegister3:
		{
			if(response) pData[playerid][pSex] = 1;
			else pData[playerid][pSex] = 2;
 			SPD(playerid,dRegister5,2,""cBLUE"Регистрация",""cBLUE"Выберите национальность:\n"cWH"Русский\nУкраинец\nБеларус\nКазах\nЛитовец\nТатар\nМолдаванин\nУзбек\nАрмянин\nАзербайджанец","Далее","В начало"); //Белые
		}
		case dRegister4:
		{
			if(response) pData[playerid][pColor] = 1;
			else pData[playerid][pColor] = 0;
			SPD(playerid,dRegister5,2,""cBLUE"Регистрация",""cBLUE"Выберите национальность:\n"cWH"Русский\nУкраинец\nБеларус\nКазах\nЛитовец\nТатар\nМолдаванин\nУзбек\nАрмянин\nАзербайджанец","Далее","В начало"); //Белые
		}
		case dRegister5:
		{
			if(!response) {SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логи: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]); return 1;}
			else
			{
				if(!listitem) return SPD(playerid,dRegister5,2,""cBLUE"Регистрация",""cBLUE"Выберите национальность:\n"cWH"Русский\nУкраинец\nБеларус\nКазах\nЛитовец\nТатар\nМолдаванин\nУзбек\nАрмянин\nАзербайджанец","Далее","В начало"); //Белые
				pData[playerid][pNation] = listitem;
				SPD(playerid,dRegister6,1,""cBLUE"Регистрация","\n"cWH"Укажите Ваш игровой возраст\n\n"cBLUE"Ваш игровой возраст будет отображаться в паспорте", !"Далее", !"В начало");
			}
		}
		case dRegister6:
		{
			if(!response) {SPFD(playerid,dRegister,3,""cBLUE"Регистрация","Далее","Выход",""cWH"\tДобро пожаловать на сервер.\n\tВаш логин: "cBLUE"%s"cWH"\n\n\tДанный аккаунт свободен.\n\tЧтобы зарегистрироваться введите пароль:",pData[playerid][pNickname]); return 1;}

			if(!IsNumeric(inputtext))
			{
				SendErr(playerid, "Возраст пишите цифрами. Например: 17");
				SPD(playerid,dRegister5,1,""cBLUE"Регистрация","\n"cWH"Укажите Ваш игровой возраст\n\n"cBLUE"Ваш игровой возраст будет отображаться в паспорте", !"Далее", !"В начало");
				return 1;
			}
			pData[playerid][pAge] = strval(inputtext);
			if(pData[playerid][pAge] < 10 || pData[playerid][pAge] > 110)
			{
				SendErr(playerid, "Возраст не может быть меньше 10 и не больше 110");
				SPD(playerid,dRegister5,1,""cBLUE"Регистрация","\n"cWH"Укажите Ваш игровой возраст\n\n"cBLUE"Ваш игровой возраст будет отображаться в паспорте", !"Далее", !"В начало");
				return 1;
			}
	   		KillTimer(login_timer_p[playerid]);
	   		KillTimer(login_timer_p_2[playerid]);
			RegisterPlayer(playerid);
		}

		case dPlayerMenu:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
					PC_EmulateCommand(playerid, "/stats");
				}
				case 1:
				{
					show_setting_player(playerid);
				}
				case 2:
				{
					ShowPlayerClientSettings(playerid);
				}
				case 3:
				{
					SPD(playerid,dCommandList,2,""cBLUE"Команды сервера",""cBLUE"1. "cWH"Общие\n"cBLUE"2. "cWH"Работы\n"cBLUE"3. "cWH"Чаты\n"cBLUE"4. "cWH"Дом\n"cBLUE"5. "cWH"Бизнес\n"cBLUE"6. "cWH"Фракция\n"cBLUE"7. "cWH"Лидерам\n"cBLUE"8. "cWH"Авто\n"cBLUE"9. "cWH"Семья\n"cBLUE"10. "cWH"Биндер\n","Выбрать","Отмена");// \n8.Языки
				}
				case 4: //Трудовая книжка
				{
					SPD(playerid,dEmplHistory,2,""cBLUE"Трудовая книжка",\
					""cBLUE"1. "cWH"Водитель автобуса\n\
					"cBLUE"2. "cWH"Дальнобойщик\n\
					"cBLUE"3. "cWH"Таксист\n\
					"cBLUE"4. "cWH"Механик\n\
					"cBLUE"5. "cWH"Шахтер\n\
					"cBLUE"6. "cWH"Лесоруб\n\
					"cBLUE"7. "cWH"Работник завода\n\
					"cBLUE"8. "cWH"Снегоуборщик\n\
					"cBLUE"9. "cWH"Пожарный\n\
					"cBLUE"9. "cWH"Инкассатор\n\
					"cBLUE"10. "cWH"Водитель Мусоровоза\n\
					"cBLUE"11. "cWH"Рыболов\n\
					","Выбрать","Отмена");

				}
				case 5: return PC_EmulateCommand(playerid, "/rep");

				case 6: //Безопасность
				{
 					show_security_menu(playerid);
 				}
 				case 7: promocode_menu_general(playerid);
				case 8: PC_EmulateCommand(playerid, "/donate");
				case 9:
				{
					SPD(playerid,dNameChange,1,""cBLUE"Смена ника",""cWH"Если у Вас нонРП ник и вы решили его изменить, подайте заявку для смены ника.\nВведите желаемый ник в окошко:",!"Далее",!"Отмена");
				}
				case 10:
				{
			 		SPD(playerid,dUpgrades,2,""cBLUE"Улучшения",""cBLUE"1. "cWH"Рюкзак","Выбрать","Отмена");
				}
				case 11:
				{
					format(String512, sizeof(String512), "\
						"cGREY"Ссылка\t"cGREY"Действие\n\
						"cBLUE"1. "cWH"Форум "SERVER_NAME" \tПерейти\n\
						"cBLUE"2. "cWH"Сайт "SERVER_NAME" \tПерейти\n\
						"cBLUE"3. "cWH"Раздел с жалобами на администрацию\tПерейти\n\
						"cBLUE"4. "cWH"Раздел с жалобами на игроков\tПерейти\n\
						"cBLUE"5. "cWH"Раздел с жалобами на лидеров\tПерейти");
					return SPD(playerid, DIALOG_SITE_MENU_P, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Полезные ссылки", String512, !"Выбрать", !"Закрыть");
				}
				case 12:
				{
					select_binder_player(playerid);
				}
			}
		}

		case SELECT_TYPE_BINDER_PLAYER:
		{
			if(!response)
				return true;

			switch(listitem)
			{
				case 0: return PC_EmulateCommand(playerid, "/editbinder");
				case 1: return PC_EmulateCommand(playerid, "/binder");
			}
		}
		case DIALOG_SITE_MENU_P:
		{
			if(!response)
				return true;

			switch(listitem)
			{
				case 0:
				{
					OpenLinkForPlayer(playerid, "https://forum.b-rp.ru/");
				}
				case 1:
				{
					OpenLinkForPlayer(playerid, "https://b-rp.ru/");
				}
				case 2:
				{
					OpenLinkForPlayer(playerid, "https://forum.b-rp.ru/forums/Жалобы-на-администрацию.29/");
				}
				case 3:
				{
					OpenLinkForPlayer(playerid, "https://forum.b-rp.ru/forums/Жалобы.13/");
				}
				case 4:
				{
					OpenLinkForPlayer(playerid, "https://forum.b-rp.ru/forums/Жалобы-на-лидеров.30/");
				}
			}
		}

		case dUpgrades:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
			 		SPD(playerid,dUpgrades3,0,""cBLUE"Рюкзак",""cWH"Улучшение: "cBLUE"Рюкзак\n\n\
					"cWH"Стоимость:\t"cGR"100.000 рублей\n"cWH"Доступно с 10 уровня\n\n\
					Возможность переносить в 2 раза больше патронов, оружия и наркотиков",!"Далее",!"Отмена");
				}
			}
		}

		case dUpgrades3: {
			if(!response) return 1;
			if(pData[playerid][pLevel] < 10) return SendErr(playerid, "Для покупки данного улучшения требуется 10 уровень");
			if(pData[playerid][pMoney] < 100000) return SendErr(playerid, "Недостаточно денежных средств для покупки улучшения");
			if(pData[playerid][pUpgrade][1] == 1) return SendErr(playerid, "Вы уже открыли это улучшение");

			give_money(playerid, -100000, "Покупка улучшения рюкзак");

			pData[playerid][pUpgrade][1] = 1;
			UpdatePlayerData(playerid, "Покупка улучшения рюкзак", 1);
			SendInf(playerid, "Вы успешно открыли улучшение 'Рюкзак'");
			return 1;
		}

		case dCommandList:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
//					new mes[1100];
					format(String2048,sizeof(String2048),"");
					strcat(String2048,""cBLUE"/pass [ID] - "cWH"Показать паспорт.\n");
					strcat(String2048,""cBLUE"/namestore [ID] - "cWH"Посмотреть историю ников.\n");
					strcat(String2048,""cBLUE"/anim - "cWH"Список Анимаций.\n");
					strcat(String2048,""cBLUE"/pay - "cWH"Передать деньги.\n");
					strcat(String2048,""cBLUE"/gps - "cWH"Навигатор.\n");
					strcat(String2048,""cBLUE"/healme - "cWH"Использовать аптечку.\n");
					strcat(String2048,""cBLUE"/lic - "cWH"Посмотреть лицензии.\n");
					strcat(String2048,""cBLUE"/time - "cWH"Смотреть время на часах.\n");
					strcat(String2048,""cBLUE"/mutetime - "cWH"Посмотреть время до окончания бана чата.\n");
					strcat(String2048,""cBLUE"/с(/call) - "cWH"Позвонить.\n");
					strcat(String2048,""cBLUE"/sms - "cWH"Написать СМС.\n");
					strcat(String2048,""cBLUE"/s - "cWH"Кричать.\n");
					strcat(String2048,""cBLUE"/togphone - "cWH"Выключить телефон.\n");
					strcat(String2048,""cBLUE"/play - "cWH"Слушать радио\n");
					strcat(String2048,""cBLUE"/stop - "cWH"Остановить радио.\n");
					strcat(String2048,""cBLUE"/radio - "cWH"Выкл/Вкл радио(чат)\n");
					strcat(String2048,""cBLUE"/ad - "cWH"Подать объявление.\n");
					strcat(String2048,""cBLUE"/id - "cWH"Узнать ид игрока по нику.\n");
					strcat(String2048,""cBLUE"/skill [ID] - "cWH"Показать выписку из тира.\n");
					strcat(String2048, ""cBLUE"/warntime - "cWH"Узнать оставшиеся время варна.\n");
					strcat(String2048, ""cBLUE"/ptime - "cWH" Узнать оставшиеся время заключения.\n");
					strcat(String2048, ""cBLUE"/wedding - "cWH"Жениться.\n");
					strcat(String2048, ""cBLUE"/divorce - "cWH"Развестись.\n");
					strcat(String2048, ""cBLUE"/leaders - "cWH"Лидеры онлайн.\n");
					strcat(String2048, ""cBLUE"/med - "cWH"Показать мед.карту.\n");
					strcat(String2048, ""cBLUE"/advocats - "cWH"Адвокаты онлайн.\n");
					strcat(String2048, ""cBLUE"/flower [ID] - "cWH"Подарить цветы.\n");
					strcat(String2048, ""cBLUE"/phonebook - "cWH"Телефонная книга.\n");
					strcat(String2048, ""cBLUE"/smoke - "cWH"Достать сигарету.\n");
					strcat(String2048, ""cBLUE"/sellsim [ID игрока] [Цена продажи] - "cWH"Продать сим-карту.\n");
					strcat(String2048, ""cBLUE"/tradesim [ID игрока] [Доплата с Вашей стороны] [Доплата со стороный игрока] - обмен сим-картой\n");
					strcat(String2048,""cBLUE"/pts [ID] - "cWH"Показать ПТС.\n");
					strcat(String2048,""cBLUE"/car - "cWH"Информация о авто.\n");
					strcat(String2048,""cBLUE"/winnrace - "cWH"Последние победи гонки.\n");
					strcat(String2048,""cBLUE"/company - "cWH"Список владельцев и замов компаний онлайн.\n");
                    strcat(String2048,""cBLUE"/tinvite - "cWH"Принять нового сотрудника.\n");

					SPD(playerid,dCommandShow,0,"Команды",String2048,"OK","");
				}
				case 1:
				{
//					new mes[500];
					format(String1024,sizeof(String1024),"");

					if(pData[playerid][pMech] != -1)
					{
						strcat(String1024,""cBLUE"- Механик\n");
   						strcat(String1024,""cBLUE"/tow - "cWH"Начать буксировку.\n");
						strcat(String1024,""cBLUE"/untow - "cWH"Закончить буксировку.\n");
						strcat(String1024,""cBLUE"/repair - "cWH"Починить автомобиль.\n");
						strcat(String1024,""cBLUE"/refill - "cWH"Заправить автомобиль.\n");
						strcat(String1024,""cBLUE"/mt - "cWH"Рация механиков.\n");
						strcat(String1024,""cBLUE"/mstats - "cWH"Рабочая статистика.\n");
						strcat(String1024,""cBLUE"/maccept - "cWH"Принять вызов механиком.\n");
					}
					if(pData[playerid][pMech] != -1)
					{
						strcat(String1024,""cBLUE"- Дальнобойщик\n");
   						strcat(String1024,""cBLUE"/tm - "cWH"Рация дальнобойщиков.\n");
						strcat(String1024,""cBLUE"/tstats - "cWH"Рабочая статистика.\n");
					}
					if(pData[playerid][pTaxi] != -1)
					{
						strcat(String1024,""cBLUE"- Таксисты\n");
   						strcat(String1024,""cBLUE"/taxm - "cWH"Рация таксистов.\n");
						strcat(String1024,""cBLUE"/taxstats - "cWH"Рабочая статистика.\n");
						strcat(String1024,""cBLUE"/gotaxi - "cWH"Принять вызов.\n");
						strcat(String1024,""cBLUE"/taxwork - "cWH"Работа на доставке.\n");
					}
					else
					{
						strcat(String1024,""cBLUE"Отсутствует\n");
					}
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
				}
				case 2:
				{
					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/n - "cWH"ООС чат.\n");
					strcat(String1024,""cBLUE"/me - "cWH"Чат действий.\n");
					strcat(String1024,""cBLUE"/do - "cWH"Чат от 3-го лица.\n");
					strcat(String1024,""cBLUE"/todo - "cWH"Чат c действием.\n");
					strcat(String1024,""cBLUE"/try - "cWH"Попытка действия(Удачно,Неудачно)\n");
					strcat(String1024,""cBLUE"/s - "cWH"Кричать.\n");
					strcat(String1024,""cBLUE"/w - "cWH"Шепот.\n");
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
				}
				case 3:
				{
					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/home - "cWH"Управление домом\n");
					strcat(String1024,""cBLUE"/flate - "cWH"Управление квартирой\n");
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
				}
				case 4:
				{

					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/buisnes - "cWH"Управление бизнесом.\n");
					strcat(String1024,""cBLUE"/pfill - "cWH"Управление АЗС.\n");
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
				}
				case 5:
				{

					format(String1024,sizeof(String1024),"");
					if(IsACop(playerid))
					{
						format(String2048,sizeof(String2048),"");
						strcat(String2048,""cBLUE"/r - "cWH"Рация подразделения.\n");
						strcat(String2048,""cBLUE"/rn - "cWH"OOC Рация подразделения.\n");
						strcat(String2048,""cBLUE"/f - "cWH"Рация организации.\n");
						strcat(String2048,""cBLUE"/fn - "cWH"OOC Рация организации.\n");
						strcat(String2048,""cBLUE"/su - "cWH"Объявить в розыск.\n");

						strcat(String2048,""cBLUE"/cuff - "cWH"Надеть наручники.\n");
						strcat(String2048,""cBLUE"/uncuff - "cWH"Снять наручники.\n");
						strcat(String2048,""cBLUE"/arrest - "cWH"Посадить в тюрьму.\n");
						strcat(String2048,""cBLUE"/push - "cWH"Затолкать в авто.\n");
						strcat(String2048,""cBLUE"/m - "cWH"Мегафон.\n");
						strcat(String2048,""cBLUE"/sm - "cWH"Звуковой мегафон.\n");
						strcat(String2048,""cBLUE"/invite - "cWH"Принять в организацию\n");
						strcat(String2048,""cBLUE"/uninvite - "cWH"Уволить из организации\n");
						strcat(String2048,""cBLUE"/find - "cWH"Посмотреть онлайн фракции.\n");
						strcat(String2048, ""cBLUE"/setspawn - "cWH"Изменить место появления.\n");
						strcat(String2048, ""cBLUE"/takelic - "cWH"Забрать лицензию на авто.\n");
						strcat(String2048, ""cBLUE"/skip - "cWH"Выдать пропуск.\n");
						strcat(String2048, ""cBLUE"/ud - "cWH"Показать удостоверение.\n");

						strcat(String2048, ""cBLUE"/frisk - "cWH"Обыскать игрока.\n");
						strcat(String2048, ""cBLUE"/break - "cWH"Поставить ограждения.\n");
						strcat(String2048, ""cBLUE"/take - "cWH"Изьять вещи игрока.\n");
						strcat(String2048, ""cBLUE"/ticket - "cWH"Выписать игроку штраф.\n");
						strcat(String2048, ""cBLUE"/pdhelp - "cWH"Запросить помощь.\n");
						strcat(String2048, ""cBLUE"/helplist - "cWH"Список требующих помощи.\n");
						strcat(String2048,""cBLUE"/fwarn - "cWH"Выдать выговор\n");
						strcat(String2048,""cBLUE"/fwarnoff - "cWH"Выдать выговор оффлайн\n");
						strcat(String2048,""cBLUE"/unfwarn - "cWH"Снять выговор\n");
						strcat(String2048, ""cBLUE"/unmask - "cWH"Снять маску с игрока.\n");
						strcat(String2048, ""cBLUE"/hold - "cWH"Вести преступника за собой.\n");
				   		if(pData[playerid][pFraction] == 12)
						{
						strcat(String2048, ""cBLUE"/ff - "cWH"Включить прослушку.\n");
						}
						strcat(String2048, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String2048, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String2048, ""cBLUE"/addvacancy - "cWH"Добавить объявление о собеседовании.\n");
						strcat(String2048, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String2048, ""cBLUE"/flock - "cWH"Закрыть служебный транспорт.\n");
						strcat(String2048, ""cBLUE"/division - "cWH"Установить сотруднику подразделение.\n");
						SPD(playerid,dCommandShow,0,"Команды",String2048,"OK","");
						return 1;

					}
					else if(pData[playerid][pFraction] == 8)
					{
						format(String1024,sizeof(String1024),"");
						strcat(String1024,""cBLUE"/r - "cWH"Рация подразделения.\n");
						strcat(String1024,""cBLUE"/rn - "cWH"OOC Рация подразделения.\n");
						strcat(String1024,""cBLUE"/f - "cWH"Рация организации.\n");
						strcat(String1024,""cBLUE"/fn - "cWH"OOC Рация организации.\n");
						strcat(String1024,""cBLUE"/invite - "cWH"Принять в организацию\n");
						strcat(String1024,""cBLUE"/uninvite - "cWH"Уволить из организации\n");
						strcat(String1024,""cBLUE"/loadgun - "cWH"Начать загрузку.\n");
						strcat(String1024,""cBLUE"/unloadgun - "cWH"Закончить загрузку.\n");
						strcat(String1024,""cBLUE"/find - "cWH"Посмотреть онлайн фракции.\n");
						strcat(String1024, ""cBLUE"/setspawn - "cWH"Изменить место появления.\n");
						strcat(String1024, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String1024, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String1024, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String1024, ""cBLUE"/addvacancy - "cWH"Добавить объявление о собеседовании.\n");
						strcat(String1024, ""cBLUE"/military - "cWH"Начать учения.\n");
						strcat(String1024, ""cBLUE"/endmilitary - "cWH"Досрочно остановить учения.\n");
					}
					else if(pData[playerid][pFraction] == 10)
					{
						format(String2048,sizeof(String2048),"");
						strcat(String2048,""cBLUE"/r - "cWH"Рация подразделения.\n");
						strcat(String2048,""cBLUE"/rn - "cWH"OOC Рация подразделения.\n");
						strcat(String2048,""cBLUE"/f - "cWH"Рация организации\n");
						strcat(String2048,""cBLUE"/fn - "cWH"OOC Рация организации\n");
						strcat(String2048,""cBLUE"/invite - "cWH"Принять в организацию\n");
						strcat(String2048,""cBLUE"/uninvite - "cWH"Уволить из организации\n");
						strcat(String2048,""cBLUE"/edit - "cWH"Меню проверки /ad\n");
						strcat(String2048,""cBLUE"/ether - "cWH"Выйти в эфир\n");
						strcat(String2048,""cBLUE"/dial - "cWH"Принять звонок в эфир.\n");
						strcat(String2048,""cBLUE"/hdial - "cWH"Oтсоединить от эфира\n");
						strcat(String2048,""cBLUE"/stopdial - "cWH"Отключить прием звонков\n");

						strcat(String2048,""cBLUE"/find - "cWH"Посмотреть онлайн организации\n");
						strcat(String2048, ""cBLUE"/setspawn - "cWH"Изменить место появления\n");
						strcat(String2048, ""cBLUE"/audience - "cWH"Количество слушателей\n");
						strcat(String2048,""cBLUE"/fwarn - "cWH"Выдать выговор\n");
						strcat(String2048,""cBLUE"/fwarnoff - "cWH"Выдать выговор оффлайн\n");
						strcat(String2048,""cBLUE"/unfwarn - "cWH"Снять выговор\n");
						strcat(String2048,""cBLUE"/topadvert - "cWH"Лучшие сотрудники\n");
						strcat(String2048, ""cBLUE"/ud - "cWH"Показать удостоверение.\n");
						strcat(String2048, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String2048, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String2048, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String2048, ""cBLUE"/addvacancy - "cWH"Добавить объявление о собеседовании.\n");
						SPD(playerid,dCommandShow,0,"Команды",String2048,"Закрыть","");
						return 1;
					}
					else if(pData[playerid][pFraction] == 1)
					{
						format(String1024,sizeof(String1024),"");
						strcat(String1024,""cBLUE"/f - "cWH"Рация.\n");
						strcat(String1024,""cBLUE"/fn - "cWH"OOC Рация.\n");
						strcat(String1024,""cBLUE"/invite - "cWH"Принять в организацию\n");
						strcat(String1024,""cBLUE"/uninvite - "cWH"Уволить из организации\n");
						strcat(String1024,""cBLUE"/selllic - "cWH"Продать лицензию\n");
						strcat(String1024,""cBLUE"/find - "cWH"Посмотреть онлайн организации\n");
						strcat(String1024, ""cBLUE"/setspawn - "cWH"Изменить место появления\n");
						strcat(String1024,""cBLUE"/fwarn - "cWH"Выдать выговор\n");
						strcat(String1024,""cBLUE"/fwarnoff - "cWH"Выдать выговор оффлайн\n");
						strcat(String1024,""cBLUE"/unfwarn - "cWH"Снять выговор\n");
						strcat(String1024, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String1024, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String1024, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String1024,""cBLUE"/topinstructor - "cWH"Лучшие сотрудники\n");
						strcat(String1024,""cBLUE"/insurance - "cWH"Застраховать транспорт игрока\n");
						strcat(String1024, ""cBLUE"/addvacancy - "cWH"Добавить объявление о собеседовании.\n");

					}
					else if(pData[playerid][pFraction] >= 13 && pData[playerid][pFraction] <= 15)
					{
						format(String2048,sizeof(String2048),"");
						strcat(String2048,""cBLUE"/f - "cWH"Рация.\n");
						strcat(String2048,""cBLUE"/fn - "cWH"OOC Рация.\n");
						strcat(String2048,""cBLUE"/invite - "cWH"Принять в организацию\n");
						strcat(String2048,""cBLUE"/uninvite - "cWH"Уволить из организации\n");
						strcat(String2048,""cBLUE"/bizwar - "cWH"Забить стрелу за бизнес\n");
						strcat(String2048,""cBLUE"/sellmafiabiz - "cWH"Продать права на крышевание бизнеса\n");
						strcat(String2048,""cBLUE"/find - "cWH"Посмотреть Онлайн организации\n");
						strcat(String2048,""cBLUE"/place - "cWH"Занять поле на ферме\n");

						strcat(String2048,""cBLUE"/selldrugs - "cWH"Продать легкие наркотики\n");
						strcat(String2048, ""cBLUE"/setspawn - "cWH"Изменить место появления\n");
						strcat(String2048,""cBLUE"/loadgun - "cWH"Начать загрузку оружия на складе\n");
						strcat(String2048,""cBLUE"/unloadgun - "cWH"Начать разгрузку оружия\n");

						if(pData[playerid][pFraction] == 13)  {
						strcat(String2048,""cBLUE"/makebat - "cWH"Собрать катану\n");
						}
						if(pData[playerid][pFraction] == 14)  {
						strcat(String2048,""cBLUE"/makebat - "cWH"Собрать биту\n");
						}
						if(pData[playerid][pFraction] == 15)  {
						strcat(String2048,""cBLUE"/makebat - "cWH"Собрать клюшку\n");
						}
						strcat(String2048, ""cBLUE"/klist - "cWH"Включить отображение убийств на захвате\n");
						if(pData[playerid][pRank] >= 10)								{
						strcat(String2048,""cBLUE"/mrespawn - "cWH"Респавн авто.\n");
						}
						strcat(String2048, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String2048, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String2048, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String2048, ""cBLUE"/racket - "cWH"Добавить игрока в список должников.\n");
						strcat(String2048, ""cBLUE"/racketlist - "cWH"Посмотреть список должников.\n");
						strcat(String2048, ""cBLUE"/beat - "cWH"Выбить деньги из должника.\n");
						strcat(String2048, ""cBLUE"/reave - "cWH"Похитить игрока.\n");
						strcat(String2048, ""cBLUE"/hold - "cWH"Повести игрока за собой.\n");
						strcat(String2048, ""cBLUE"/push - "cWH"Затолкнуть игрока в машину.\n");
						strcat(String2048, ""cBLUE"/rf - "cWH"Сказать в рацию похищенного.\n");
						strcat(String2048, ""cBLUE"/reaveoff - "cWH"Отпустить похищенного.\n");
						strcat(String2048, ""cBLUE"/contraband - "cWH"Заказать контрабанду.\n");
						SPD(playerid,dCommandShow,0,"Команды",String2048,"Закрыть","");
						return 1;

					}
					else if(pData[playerid][pFraction] == 2)
					{
						format(String1024,sizeof(String1024),"");
						strcat(String1024,""cBLUE"/r - "cWH"Рация подразделения\n");
						strcat(String1024,""cBLUE"/rn - "cWH"OOC Рация подразделения\n");
						strcat(String1024,""cBLUE"/f - "cWH"Рация организации\n");
						strcat(String1024,""cBLUE"/fn - "cWH"OOC Рация организации\n");
						strcat(String1024,""cBLUE"/heal - "cWH"Вылечить игрока\n");
						strcat(String1024,""cBLUE"/medcard - "cWH"Выдать мед.книжку\n");
						strcat(String1024,""cBLUE"/setsex - "cWH"Изменить пол игроку\n");
						strcat(String1024,""cBLUE"/find - "cWH"Посмотреть онлайн организации\n");
						strcat(String1024, ""cBLUE"/setspawn - "cWH"Изменить место появления\n");
						strcat(String1024,""cBLUE"/fwarn - "cWH"Выдать выговор\n");
						strcat(String1024,""cBLUE"/fwarnoff - "cWH"Выдать выговор оффлайн\n");
						strcat(String1024,""cBLUE"/unfwarn - "cWH"Снять выговор\n");
						strcat(String1024,""cBLUE"/topmedic - "cWH"Лучшие сотрудники\n");
						strcat(String1024, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String1024, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String1024, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String1024, ""cBLUE"/addvacancy - "cWH"Добавить объявление о собеседовании.\n");
					}
					else if(pData[playerid][pFraction] == 11)
					{
						format(String2048,sizeof(String2048),"");
						strcat(String2048,""cBLUE"/r - "cWH"Рация подразделения\n");
						strcat(String2048,""cBLUE"/rn - "cWH"OOC Рация подразделения\n");
						strcat(String2048,""cBLUE"/f - "cWH"Рация организации\n");
						strcat(String2048,""cBLUE"/fn - "cWH"OOC Рация организации\n");
						strcat(String2048,""cBLUE"/find - "cWH"Посмотреть онлайн организации\n");
						strcat(String2048, ""cBLUE"/out - "cWH"Вести нарушителя за собой\n");
						strcat(String2048, ""cBLUE"/unout - "cWH"Отпустить нарушителя\n");

						strcat(String2048,""cBLUE"/invite - "cWH"Принять в организацию\n");
						strcat(String2048,""cBLUE"/uninvite - "cWH"Уволить из организации\n");
						strcat(String2048,""cBLUE"/showall - "cWH"Список работников\n");
						strcat(String2048, ""cBLUE"/setspawn - "cWH"Изменить место появления\n");
						strcat(String2048, ""cBLUE"/ssf - "cWH"Включение рации подфракции\n");
						strcat(String2048, ""cBLUE"/free - "cWH"Освободить из тюрьмы\n");
						strcat(String2048,""cBLUE"/fwarn - "cWH"Выдать выговор\n");
						strcat(String2048,""cBLUE"/fwarnoff - "cWH"Выдать выговор оффлайн\n");
						strcat(String2048,""cBLUE"/unfwarn - "cWH"Снять выговор\n");

						strcat(String2048, ""cBLUE"/black - "cWH"Добавить/убрать игрока в черный список.\n");
						strcat(String2048, ""cBLUE"/offblack - "cWH"Добавить/убрать игрока в черный список оффлайн.\n");
						strcat(String2048, ""cBLUE"/blackinfo - "cWH"Проверить игрока на нахождение в черном списке.\n");
						strcat(String2048, ""cBLUE"/addvacancy - "cWH"Добавить объявление о собеседовании.\n");
						if(pData[playerid][pRank] >= 9)													{
						strcat(String2048,""cBLUE"/arespawn - "cWH"Зареспавнить транспорт\n");
						strcat(String2048, ""cBLUE"/kazna - "cWH"Управление бюджетом\n");       }
						SPD(playerid,dCommandShow,0,"Команды",String2048,"OK","");
						return 1;

					}
					else
					{
						strcat(String1024,""cWH"Нет доступных команд\n");
						SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
						return 1;
					}
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
					return 1;
				}
				case 6:
				{
//					new mes[500];
					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/lmenu - "cWH"Меню лидера (только для банд)\n");
					strcat(String1024,""cBLUE"/gnews - "cWH"Гос.Новости.\n");
					strcat(String1024,""cBLUE"/invite - "cWH"Принять игрока\n");
					strcat(String1024,""cBLUE"/uninvite - "cWH"Уволить игрока\n");
					strcat(String1024,""cBLUE"/setskin - "cWH"Выдать служебную одежду.\n");
					strcat(String1024,""cBLUE"/rang - "cWH"Повысить / понизить в должности\n");
					strcat(String1024,""cBLUE"/newleader - "cWH"Назначить лидера подфракции\n");
					strcat(String1024,""cBLUE"/showall - "cWH"Просмотреть всех игроков в организации\n");
					strcat(String1024,""cBLUE"/uninviteoff - "cWH"Уволить игрока оффлайн\n");
					strcat(String1024,""cBLUE"/l - "cWH"Чат лидеров (только для гос.организаций)\n");
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
				}

				case 7: //Команды для автомобилей
				{
					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/lock - "cWH"Закрыть/открыть домашний транспорт\n");
					strcat(String1024,""cBLUE"/lock 1 - "cWH"Закрыть/открыть арендованный транспорт\n");
					strcat(String1024,""cBLUE"/lock 2 - "cWH"Закрыть/открыть рабочий транспорт.\n");
					strcat(String1024,""cBLUE"/fill - "cWH"Заправить авто.\n");
					strcat(String1024, ""cBLUE"/eject - "cWH"Выкинуть из авто.\n");
					strcat(String1024, ""cBLUE"/park - "cWH"Припарковать автомобиль.\n");
					strcat(String1024, ""cBLUE"/unpark - "cWH"Отпарковать автомобиль.\n");
					strcat(String1024, ""cBLUE"/pts - "cWH"Документы на автомобиль.\n");
					SPD(playerid,dCommandShow,0,"Команды автомобиля",String1024,"OK","");
				}
				case 8:
				{
					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/family - "cWH"Меню семьи.\n");
					strcat(String1024,""cBLUE"/k - "cWH"Рация семьи.\n");
					strcat(String1024,""cBLUE"/finvite [ID]- "cWH"Принять в семью.\n");
					strcat(String1024,""cBLUE"/funinvite [ID]- "cWH"Исключить из семьи.\n");
					strcat(String1024,""cBLUE"/fzam [ID] - "cWH"Назначить заместителя.\n");
					strcat(String1024,""cBLUE"/fgiverank [ID] - "cWH"Изменить ранг в семье.\n");
					strcat(String1024,""cBLUE"/funzam - "cWH"Убрать заместителя.\n");
					SPD(playerid,dCommandShow,0,"Команды",String1024,"OK","");
 				}
 				case 9:
 				{
 					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/binder - "cWH"Основное меню биндера\n");
					strcat(String1024,""cBLUE"/b1 - "cWH"Первый бинд\n");
					strcat(String1024,""cBLUE"/b2 - "cWH"Второй бинд\n");
					strcat(String1024,""cBLUE"/b3 - "cWH"Третий бинд\n");
					strcat(String1024,""cBLUE"/b4 - "cWH"Четвертый бинд\n");
					strcat(String1024,""cBLUE"/b5 - "cWH"Пятый бинд\n");
					strcat(String1024,""cBLUE"/b6 - "cWH"Шестой бинд\n");
					strcat(String1024,""cBLUE"/b7 - "cWH"Седьмой бинд\n");
					strcat(String1024,""cBLUE"/b8 - "cWH"Восьмой бинд\n");
					strcat(String1024,""cBLUE"/b9 - "cWH"Девятый бинд\n");

					strcat(String1024,""cBLUE"/b10 - "cWH"Десятый бинд\n");
					strcat(String1024,""cBLUE"/b11 - "cWH"Одинадцатый бинд\n");
					strcat(String1024,""cBLUE"/b12 - "cWH"Двенадцатый бинд\n");
					strcat(String1024,""cBLUE"/b13 - "cWH"Тринадцатый бинд\n");
					strcat(String1024,""cBLUE"/b14 - "cWH"Четырнадцатый бинд\n");
					strcat(String1024,""cBLUE"/b15 - "cWH"Пятнадцатый бинд\n");
					strcat(String1024,""cBLUE"/b16 - "cWH"Шестнадцатый бинд\n");
					strcat(String1024,""cBLUE"/b17 - "cWH"Семнадцатый бинд\n");
					strcat(String1024,""cBLUE"/b18 - "cWH"Восемнадцатый бинд\n");
					strcat(String1024,""cBLUE"/b19 - "cWH"Девятнадцатый бинд\n");
					strcat(String1024,""cBLUE"/b20 - "cWH"Двадцатый бинд\n");
					SPD(playerid,dCommandShow,0,"Биндер",String1024,"OK","");
 				}
 				case 10:
 				{
 					format(String1024,sizeof(String1024),"");
					strcat(String1024,""cBLUE"/vsetting - "cWH"Основные настройки голосового чата\n");
					strcat(String1024,""cBLUE"/vmute - "cWH"Замутить определённого игрока\n");
					strcat(String1024,""cBLUE"/vunmute - "cWH"Снять мут у определённого игрока\n");
					strcat(String1024,""cBLUE"/voicevolume - "cWH"Настройка громкости голосового чата\n");
					strcat(String1024,""cBLUE"/pvoice - "cWH"Список игроков говорящих в голосовом чате\n");
					SPD(playerid,dCommandShow,0,"Голосовой чат",String1024,"OK","");
 				}
			}
		}


		case dShowBookAdd:
		{
			if(!response) return 1;
			if(!strlen(inputtext))	{
			return SPD(playerid, dShowBookAdd, 1 , ""cBLUE"Телефонная книга", ""cWH"Введите "cBLUE"номер "cWH"который хотите добавить:", !"Далее", !"Отмена");
			}
			new code = strval(inputtext);
			if(code < 999 || code > 999999999)
			{
				return SPD(playerid, dShowBookAdd, 1 , ""cBLUE"Телефонная книга", "{D2D279}Неверный номер\n"cWH"Введите "cBLUE"номер "cWH"который хотите добавить:", !"Далее", !"Отмена");
			}
			new slot = -1;
			for(new d=0; d < 20; d ++)							{
			format(String64,sizeof(String64), "pbook_%d",d);
			if(GetPVarIntNew(playerid, String64)  < 1)			{
			slot = d; break;								}	}
			SetPVarIntNew(playerid, "pblcode", code);
			SetPVarIntNew(playerid, "pblslot", slot);
   			if(slot < 0)  {
			SCM(playerid,0x448844FF,"Телефонная книга заполнена.");
			return 1;
			}
			return SPD(playerid, dShowBookAdd2, 1 , ""cBLUE"Телефонная книга", ""cWH"Введите "cBLUE"имя "cWH"для сохранения номера:", !"Далее", !"Отмена");

		}
		case dShowBookAdd2:
		{
			if(!response) return 1;
			new lens=strlen(inputtext);
			if(!strlen(inputtext))	{
			return SPD(playerid, dShowBookAdd2, 1 , ""cBLUE"Телефонная книга", ""cWH"Введите "cBLUE"имя "cWH"для сохранения номера:", !"Далее", !"Отмена");
			}
			new code = strlen(inputtext);
			if(code < 3 || code > 30)			{
			return SPD(playerid, dShowBookAdd2, 1 , ""cBLUE"Телефонная книга", "{D2D279}Не верное имя\n"cWH"Введите "cBLUE"имя "cWH"для сохранения номера:", !"Далее", !"Отмена");
			}

			if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
			{
				SPD(playerid, dShowBookAdd2, 1 , ""cBLUE"Телефонная книга", ""cWH"Введите "cBLUE"имя "cWH"для сохранения номера:", !"Далее", !"Отмена");
				SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
				return 1;
			}


			format(String64,sizeof(String64), "pbook_%d",GetPVarIntNew(playerid, "pblslot"));
			SetPVarIntNew(playerid, String64, GetPVarIntNew(playerid, "pblcode"));
			format(String64,sizeof(String64), "pbookn_%d",GetPVarIntNew(playerid, "pblslot"));
			SetPVarStringNew(playerid, String64, inputtext);
			new s64ring[64];
			format(s64ring,sizeof(s64ring), "%s",inputtext);
 			SavePBook(pData[playerid][pMysqlID],playerid,GetPVarIntNew(playerid, "pblslot"), GetPVarIntNew(playerid, "pblcode"), s64ring);
			SCM(playerid,0x448844FF,"Вы добавили номер в телефонную книгу");
			new wwan;
			new test[120];
			new testname[32];
			format(String2048,sizeof(String2048),""cBLUE"\t\t\tДобавить\n");
			for(new i=0; i < 20; i ++)
			{
				wwan ++;
				format(String64,sizeof(String64), "pbook_%d",i);
				new numb = GetPVarIntNew(playerid, String64 );
				format(String64,sizeof(String64), "pbookn_%d",i);
				GetPVarStringNew(playerid, String64 ,testname,32);

				if(numb < 1) test = "\t\t\t-\n";
				else {
					new onnn = 0;
					foreach(new x : Player)
					{
						if(pData[x][pPhone] == numb && pData[x][pAdmin] < 1) onnn = 1;
					}
					if(onnn == 1) {
						format(test,sizeof(test), "%s:\t{7598FF}%d\t{00CC44}[Online]"cWH"\n",testname,numb);
					}
					else {
						format(test,sizeof(test), "%s:\t{7598FF}%d\t{B5B5B5}[Offline]"cWH"\n",testname,numb);
					}
				}
				format(String2048, sizeof(String2048), "%s{FFDD75}%d. "cWH"%s",String2048,i+1,test);
			}

			SPD(playerid, dShowBook, 2 , ""cBLUE"Телефонная книга", String2048, "Удалить", "Закрыть");

		}
		case dShowBook:
		{
			if(!response) return 1;
			if(listitem == 0)            {
			SPD(playerid, dShowBookAdd, 1 , ""cBLUE"Телефонная книга", ""cWH"Введите "cBLUE"номер "cWH"который хотите добавить:", !"Далее", !"Отмена");

			}
			if(listitem > 0 && listitem < 21)
			{
			SetPVarIntNew(playerid, "selbook", listitem);
			format(String256, sizeof(String256), "{FFFFA8}1."cWH" Позвонить\n{FFFFA8}2."cWH" Написать СМС\n{FFFFA8}3."cWH" Удалить");
			SPD(playerid, dShowBookMenu, 2 , ""cBLUE"Телефонная книга", String256, !"Выбор", !"Закрыть");
			}
		}
		case dShowBookSms:
		{
			if(!response) return 1;
			if(!pData[playerid][pPhone]) return SendErr(playerid, "У Вас нет телефона. Вы можете купить его в Универмаге");
			if(!pTemp[playerid][pTPhone]) return SendErr(playerid, "Сначала нужно включить телефон");
			if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
			if(pData[playerid][pJail] && pData[playerid][pPrison] > 3) return SCM(playerid, CGRAY, "Ошибка: Вы в тюрьме.");
			if(pData[playerid][pPhoneMoney] < 5) return SCM(playerid, CGRAY, "Ошибка: На счету недостаточно средств");
			if(pTemp[playerid][pTied] == 1) { return SCM(playerid, COLOR_GREY, "Вы не можете достать телефон!"); }


			if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
			{
				SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
				return 1;
			}


			new listitemid = GetPVarIntNew(playerid, "selbook");
			if(listitemid > 0 && listitemid < 21)
			{
			format(String64,sizeof(String64), "pbook_%d",listitemid-1);
			new numb = GetPVarIntNew(playerid, String64 );
			if(numb  > 0)
			{
					format(String256, sizeof(String256), "/sms %d %s",numb,inputtext);
					PC_EmulateCommand(playerid, String256);
			}
			}
		}
		case dShowBookMenu:
		{
			if(!response) return 1;
			if(listitem == 0)
			{
		  		new listitemid = GetPVarIntNew(playerid, "selbook");
				if(listitemid > 0 && listitemid < 21)
				{
					format(String64,sizeof(String64), "pbook_%d",listitemid-1);
					new numb = GetPVarIntNew(playerid, String64 );
					format(String256, sizeof(String256), "/c %d",numb);
					PC_EmulateCommand(playerid, String256);
				}

			}
			else if(listitem == 1)
			{
			if(!response) return 1;
			new listitemid = GetPVarIntNew(playerid, "selbook");
			if(listitemid > 0 && listitemid < 21)
			{
			format(String64,sizeof(String64), "pbook_%d",listitemid-1);
			new numb = GetPVarIntNew(playerid, String64 );
			if(numb  > 0)
			{
				new testname[32];
				format(String64,sizeof(String64), "pbookn_%d",listitemid-1);
				GetPVarStringNew(playerid, String64 ,testname,32);
				format(String256,sizeof(String256),""cWH"Введите "cBLUE"сообщение "cWH"который хотите отправить контакту {7598FF}%s"cWH":",testname);

				SPD(playerid, dShowBookSms, 1 , ""cBLUE"Телефонная книга",String256, "Отправить", "Отмена");
			}
			}
			}
			else if(listitem == 2)
			{
			if(!response) return 1;
			listitem = GetPVarIntNew(playerid, "selbook");
			if(listitem > 0 && listitem < 21)
			{
			format(String64,sizeof(String64), "pbook_%d",listitem-1);
			if(GetPVarIntNew(playerid, String64)  > 0)
			{
			SetPVarIntNew(playerid, String64, 0);
			SCM(playerid,0x448844FF,"Номер удален из телефонной книги");
			SavePBook(pData[playerid][pMysqlID],playerid,listitem-1,0,"-");
			new wwan;
			new test[120];
			new testname[32];
			format(String2048,sizeof(String2048),""cBLUE"\t\t\tДобавить\n");
			for(new i=0; i < 20; i ++)
			{
				wwan ++;
				format(String64,sizeof(String64), "pbook_%d",i);
				new numb = GetPVarIntNew(playerid, String64 );
				format(String64,sizeof(String64), "pbookn_%d",i);
				GetPVarStringNew(playerid, String64 ,testname,32);

				if(numb < 1) test = "\t\t\t-\n";
				else {
					new onnn = 0;
					foreach(new x : Player)
					{
						if(pData[x][pPhone] == numb && pData[x][pAdmin] < 1) onnn = 1;
					}
					if(onnn == 1) {
						format(test,sizeof(test), "%s:\t{7598FF}%d\t{00CC44}[Online]"cWH"\n",testname,numb);
					}
					else {
						format(test,sizeof(test), "%s:\t{7598FF}%d\t{B5B5B5}[Offline]"cWH"\n",testname,numb);
					}
				}
				format(String2048, sizeof(String2048), "%s{FFDD75}%d. "cWH"%s",String2048,i+1,test);
			}

			SPD(playerid, dShowBook, 2 , ""cBLUE"Телефонная книга", String2048, !"Выбор", !"Закрыть");
			}
			}
			}

		}
		case dCommandShow:
		{
			SPD(playerid,dCommandList,2,""cBLUE"Команды сервера",""cBLUE"1. "cWH"Общие\n"cBLUE"2. "cWH"Работы\n"cBLUE"3. "cWH"Чаты\n"cBLUE"4. "cWH"Дом\n"cBLUE"5. "cWH"Бизнес\n"cBLUE"6. "cWH"Фракция\n"cBLUE"7. "cWH"Лидерам\n"cBLUE"8. "cWH"Авто\n"cBLUE"9. "cWH"Семья\n"cBLUE"10. "cWH"Биндер\n","Выбрать","Отмена");// \n8.Языки
 		}
		case dEmplHistory:
		{
			if(!response) return PC_EmulateCommand(playerid, "/menu");
			switch(listitem)
			{
				case 0:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_BUS_DRIVER) == 1) status = "Начинающий работник";
					if(get_job_level(playerid, SKILL_BUS_DRIVER) == 2) status = "Стабильный работник";
					if(get_job_level(playerid, SKILL_BUS_DRIVER) == 3) status = "Опытный работник";
					if(get_job_level(playerid, SKILL_BUS_DRIVER) == 4) status = "Старший работник";
					if(get_job_level(playerid, SKILL_BUS_DRIVER) == 5) status = "Главный работник";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Совершено рейсов: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_BUS_DRIVER));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Водитель автобуса",String144, !"Закрыть", "");
				}

				case 1:
				{
					new status[30];

					if(get_job_level(playerid, SKILL_TRUCKER) == 1) status = "Начинающий дальнобойщик";
					if(get_job_level(playerid, SKILL_TRUCKER) == 2) status = "Стабильный дальнобойщик";
					if(get_job_level(playerid, SKILL_TRUCKER) == 3) status = "Опытный дальнобойщик";
					if(get_job_level(playerid, SKILL_TRUCKER) == 4) status = "Старший дальнобойщик";
					if(get_job_level(playerid, SKILL_TRUCKER) == 5) status = "Главный дальнобойщик";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Совершено перевозок: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_TRUCKER));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Дальнобойщик",String144, !"Закрыть", "");
				}

				case 2:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_TAXI) == 1) status = "Начинающий таксист";
					if(get_job_level(playerid, SKILL_TAXI) == 2) status = "Стабильный таксист";
					if(get_job_level(playerid, SKILL_TAXI) == 3) status = "Опытный таксист";
					if(get_job_level(playerid, SKILL_TAXI) == 4) status = "Старший таксист";
					if(get_job_level(playerid, SKILL_TAXI) == 5) status = "Главный таксист";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Совершено перевозок: %d", status, get_job_skill(playerid, SKILL_TAXI));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Таксист",String144, !"Закрыть", "");
				}

				case 3:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_MECHANIC) == 1) status = "Начинающий механик";
					if(get_job_level(playerid, SKILL_MECHANIC) == 2) status = "Стабильный механик";
					if(get_job_level(playerid, SKILL_MECHANIC) == 3) status = "Опытный механик";
					if(get_job_level(playerid, SKILL_MECHANIC) == 4) status = "Старший механик";
					if(get_job_level(playerid, SKILL_MECHANIC) == 5) status = "Главный механик";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Совершено ремонтов: %d", status, get_job_skill(playerid, SKILL_MECHANIC));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Механик",String144, !"Закрыть", "");
				}
				case 4:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_MINER) == 1) status = "Начинающий шахтёр";
					if(get_job_level(playerid, SKILL_MINER) == 2) status = "Стабильный шахтёр";
					if(get_job_level(playerid, SKILL_MINER) == 3) status = "Опытный шахтёр";
					if(get_job_level(playerid, SKILL_MINER) == 4) status = "Старший шахтёр";
					if(get_job_level(playerid, SKILL_MINER) == 5) status = "Главный шахтёр";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Перенесено руды: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_MINER));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Шахтёр",String144, !"Закрыть", "");
				}
				case 5:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_WOODCUTTER) == 1) status = "Начинающий лесоруб";
					if(get_job_level(playerid, SKILL_WOODCUTTER) == 2) status = "Стабильный лесоруб";
					if(get_job_level(playerid, SKILL_WOODCUTTER) == 3) status = "Опытный лесоруб";
					if(get_job_level(playerid, SKILL_WOODCUTTER) == 4) status = "Старший лесоруб";
					if(get_job_level(playerid, SKILL_WOODCUTTER) == 5) status = "Главный лесоруб";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Спилено дерева: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_WOODCUTTER));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Лесоруб",String144, !"Закрыть", "");
				}
				case 6:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_FACTORY) == 1) status = "Начинающий рабочий";
					if(get_job_level(playerid, SKILL_FACTORY) == 2) status = "Стабильный рабочий";
					if(get_job_level(playerid, SKILL_FACTORY) == 3) status = "Опытный рабочий";
					if(get_job_level(playerid, SKILL_FACTORY) == 4) status = "Старший рабочий";
					if(get_job_level(playerid, SKILL_FACTORY) == 5) status = "Главный рабочий";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Произведено деталей: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_FACTORY));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Рабочий завода",String144, !"Закрыть", "");
				}
				case 7:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_SNOWWORK) == 1) status = "Начинающий водитель";
					if(get_job_level(playerid, SKILL_SNOWWORK) == 2) status = "Стабильный водитель";
					if(get_job_level(playerid, SKILL_SNOWWORK) == 3) status = "Опытный водитель";
					if(get_job_level(playerid, SKILL_SNOWWORK) == 4) status = "Старший водитель";
					if(get_job_level(playerid, SKILL_SNOWWORK) == 5) status = "Главный водитель";


					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Произведено рейсов: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_SNOWWORK));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Снегоуборщик",String144, !"Закрыть", "");

				}
				case 8:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_FIRE) == 1) status = "Пожарный стажер";
					if(get_job_level(playerid, SKILL_FIRE) == 2) status = "Лейтенант";
					if(get_job_level(playerid, SKILL_FIRE) == 3) status = "Старший лейтенант";
					if(get_job_level(playerid, SKILL_FIRE) == 4) status = "Капитан";
					if(get_job_level(playerid, SKILL_FIRE) == 5) status = "Старший капитан";

					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Произведено тушений: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_FIRE));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Пожарный",String144, !"Закрыть", "");

				}

				case 9:
				{
					new status[25];

					if(get_job_level(playerid, SKILL_BANK) == 1) status = "Инкассатор стажер";
					if(get_job_level(playerid, SKILL_BANK) == 2) status = "Инкассатор начинайющий";
					if(get_job_level(playerid, SKILL_BANK) == 3) status = "Инкассатор опытный";
					if(get_job_level(playerid, SKILL_BANK) == 4) status = "Главный Инкассатор";
					if(get_job_level(playerid, SKILL_BANK) == 5) status = "Старший Инкассатор";

					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Произведено рейсов: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_BANK));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Инкассатор",String144, !"Закрыть", "");

				}
				case 10:
				{
					new status[20];

					if(get_job_level(playerid, SKILL_PICKER) == 1) status = "Начинающий водитель";
					if(get_job_level(playerid, SKILL_PICKER) == 2) status = "Стабильный водитель";
					if(get_job_level(playerid, SKILL_PICKER) == 3) status = "Опытный водитель";
					if(get_job_level(playerid, SKILL_PICKER) == 4) status = "Старший водитель";
					if(get_job_level(playerid, SKILL_PICKER) == 5) status = "Главный водитель";

					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Произведено рейсов: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_PICKER));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Инкассатор",String144, !"Закрыть", "");

				}
				case 11:
				{
					new status[30];

					if(get_job_level(playerid, SKILL_FISHER) == 1) status = "Начинающий рыболов";
					if(get_job_level(playerid, SKILL_FISHER) == 2) status = "Рыболов";
					if(get_job_level(playerid, SKILL_FISHER) == 3) status = "Опытный Рыболов";
					if(get_job_level(playerid, SKILL_FISHER) == 4) status = "Мастер Рыбалки";
					if(get_job_level(playerid, SKILL_FISHER) == 5) status = "Лучший Рыболов Области";

					format(String144,sizeof(String144),""cWH"Статус: "cBLUE"%s\n\
					"cWH"Выловлено рыбы: %d "cBLUE"штук", status, get_job_skill(playerid, SKILL_FISHER));
					SPD(playerid,dMes, DIALOG_STYLE_MSGBOX,""cBLUE"Рыболов",String144, !"Закрыть", "");

				}
			}
		}

		case dPlayerMenuSettingsAction:
		{
			if(!response)
				return 1;

			switch(listitem)
		   	{
		   		case 0:
		   		{
		   			if(pData[playerid][pSettings][0] == 1)
		   			{
		   				pData[playerid][pSettings][0] = 0;
		   				SendSucc(playerid, "Вы отключили информацию о действиях администраторов в чате!");
		   				show_setting_player(playerid);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][0] = 1;
		   				SendSucc(playerid, "Вы включили информацию о действиях администраторов в чате!");
		   				show_setting_player(playerid);
		   			}
		   		}
		   		case 1:
		   		{
		   			if(pData[playerid][pSettings][1] == 1)
		   			{
		   				pData[playerid][pSettings][1] = 0;
		   				SendSucc(playerid, "Вы отключили отображение чата организации!");
		   				show_setting_player(playerid);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][1] = 1;
		   				SendSucc(playerid, "Вы включили отображение чата организации!");
		   				show_setting_player(playerid);
		   			}
		   		}
		   		case 2:
		   		{
		   			if(pData[playerid][pSettings][2] == 1)
		   			{
		   				pData[playerid][pSettings][2] = 0;
		   				SendSucc(playerid, "Вы отключили отображение ID игроков в чате!");
		   				show_setting_player(playerid);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][2] = 1;
		   				SendSucc(playerid, "Вы включили отображение ID игроков в чате!");
		   				show_setting_player(playerid);
		   			}
		   		}
		   		case 3:
		   		{
		   			if(pData[playerid][pSettings][3] == 1)
		   			{
		   				pData[playerid][pSettings][3] = 0;
		   				SendSucc(playerid, "Вы отключили отображение ников игроков!");
		   				show_setting_player(playerid);

		   				foreach(new i: logged_players)
		   				{
		   					ShowPlayerNameTagForPlayer(playerid, i, 0);
		   				}

		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][3] = 1;
		   				SendSucc(playerid, "Вы включили отображение ников игроков!");
		   				show_setting_player(playerid);


		   				foreach(new i: logged_players)
		   				{
		   					ShowPlayerNameTagForPlayer(playerid, i, 1);
		   				}
		   			}
		   		}
		   		case 4:
		   		{
		   			if(pData[playerid][pSettings][4] == 1)
		   			{
		   				pData[playerid][pSettings][4] = 0;
		   				SendSucc(playerid, "Вы отключили возвращение на последнее место работы при краше!");
		   				show_setting_player(playerid);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][4] = 1;
		   				SendSucc(playerid, "Вы включили возвращение на последнее место работы при краше!");
		   				show_setting_player(playerid);
		   			}
		   		}
		   		case 5:
		   		{
		   			if(pData[playerid][pSettings][5] == 1)
		   			{
		   				pData[playerid][pSettings][5] = 0;
		   				SendSucc(playerid, "Вы отключили отображение кнопки голосового чата!");
		   				show_setting_player(playerid);

		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_VOICE, HUD_ELEMENT_HIDE);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][5] = 1;
		   				SendSucc(playerid, "Вы включили отображение кнопки голосового чата!");
		   				show_setting_player(playerid);
		   				SendInf(playerid, "Настроить позицию кнопки голосового чата можно в /mn - Настройки клиента");
		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_VOICE, HUD_ELEMENT_SHOW);
		   			}
		   		}
		   		case 6:
		   		{
		   			if(pData[playerid][pSettings][6] == 1)
		   			{
		   				pData[playerid][pSettings][6] = 0;
		   				SendSucc(playerid, "Скорость обновления спидометра теперь станет меньше!");
		   				show_setting_player(playerid);

		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][6] = 1;
		   				SendSucc(playerid, "Скорость обновления спидометра теперь станет больше!");
		   				show_setting_player(playerid);
		   			}
		   		}
		   		case 7:
		   		{
		   			if(pData[playerid][pSettings][7] == 1)
		   			{
		   				pData[playerid][pSettings][7] = 0;
		   				SendSucc(playerid, "Вы отключили отображение чата!");
		   				show_setting_player(playerid);

		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_HIDE);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][7] = 1;
		   				SendSucc(playerid, "Вы включили отображение чата!");
		   				show_setting_player(playerid);
		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_SHOW);
		   			}
		   		}
		   		case 8:
		   		{
		   			if(pData[playerid][pSettings][8] == 1)
		   			{
		   				pData[playerid][pSettings][8] = 0;
		   				SendSucc(playerid, "Вы отключили отображение мини-карты!");
		   				show_setting_player(playerid);

		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_MAP, HUD_ELEMENT_HIDE);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][8] = 1;
		   				SendSucc(playerid, "Вы включили отображение мини-карты!");
		   				show_setting_player(playerid);
		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_MAP, HUD_ELEMENT_SHOW);
		   			}
		   		}
		   		case 9:
		   		{
		   			if(pData[playerid][pSettings][9] == 1)
		   			{
		   				pData[playerid][pSettings][9] = 0;
		   				SendSucc(playerid, "Вы отключили отображение кнопок управления!");
		   				show_setting_player(playerid);

		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_BUTTONS, HUD_ELEMENT_HIDE);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][9] = 1;
		   				SendSucc(playerid, "Вы включили отображение кнопок управления!");
		   				show_setting_player(playerid);
		   				TogglePlayerHudElement(playerid, HUD_ELEMENT_BUTTONS, HUD_ELEMENT_SHOW);
		   			}
		   		}
		   		case 10:
		   		{
		   			if(pData[playerid][pSettings][10] == 1)
		   			{
		   				pData[playerid][pSettings][10] = 0;
		   				SendSucc(playerid, "Вы отключили отображение спидометра!");
		   				show_setting_player(playerid);

						if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
						{
							KillTimer(pTemp[playerid][vehicle_speed_timer]);
							pTemp[playerid][vehicle_speed_timer] = -1;

							hide_speed_player(playerid);

							PlayerTextDrawHideEx(playerid, player_speed_car[0][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[1][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[2][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[3][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[4][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[5][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[6][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[7][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[8][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[9][playerid]);
							PlayerTextDrawHideEx(playerid, player_speed_car[10][playerid]);
						}

		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][10] = 1;
		   				SendSucc(playerid, "Вы включили отображение спидометра!");
		   				show_setting_player(playerid);

						if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
						{
							new
								veh_ids = GetPlayerVehicleID(playerid);

						/*	if(GetVehicleModel(veh_ids) == 462)
								return SendErr(playerid, "Спидометр не будет отображаться на мопеде!");*/

							new engine, lights, alarm, doors, bonnet, boot, objective;
							GetVehicleParamsEx(veh_ids, engine, lights, alarm, doors, bonnet, boot, objective);

							create_player_speed(playerid);
							show_speed_player(playerid);

							/*PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[2][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[3][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[4][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[5][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[6][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
							PlayerTextDrawShow(playerid, player_speed_car[10][playerid]);*/

							veh_timer_ex(playerid, veh_ids);

							update_fuel_speed_player(playerid, vehicle[veh_ids][cFuel]);
							update_speed_lock_car(veh_ids, doors);
							update_speed_light_car(veh_ids, lights);
							vehicle_engine_status(veh_ids, engine);

							update_hp_speed_player(veh_ids, vehicle[veh_ids][cHealth]);
							update_dist_speed_player(veh_ids, vehicle[veh_ids][cMileage]);


						}
		   			}
		   		}
		   		case 11:
		   		{
		   			if(pData[playerid][pSettings][11] == 1)
		   			{
		   				pData[playerid][pSettings][11] = 0;
		   				SendSucc(playerid, "Вы отключили отображение всех элементов HUD'a!");
		   				show_setting_player(playerid);

		   				TogglePlayerAllHudElements(playerid, HUD_ELEMENT_HIDE);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][11] = 1;
		   				SendSucc(playerid, "Вы включили отображение всех элементов HUD'a!");
		   				show_setting_player(playerid);
		   				TogglePlayerAllHudElements(playerid, HUD_ELEMENT_SHOW);
		   			}
		   		}
		   		case 12:
		   		{
		   			if(pData[playerid][pSettings][12] == 1)
		   			{
		   				pData[playerid][pSettings][12] = 0;
		   				SendSucc(playerid, "Вы отключили автоскрытие игрового чата при неактинвости!");
		   				show_setting_player(playerid);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][12] = 1;
		   				SendSucc(playerid, "Вы включили автоскрытие игрового чата при неактинвости!");
		   				show_setting_player(playerid);
		   			}
		   		}
		   		case 13:
		   		{
		   			if(pData[playerid][pSettings][13] == 1)
		   			{
		   				pData[playerid][pSettings][13] = 0;
		   				SendSucc(playerid, "Вы отключили боковую панель с подсказками!");
		   				show_setting_player(playerid);
		   				show_info_gui(playerid, TEXTDRAW_HIDE);
		   			}
		   			else
		   			{
		   				pData[playerid][pSettings][13] = 1;
		   				SendSucc(playerid, "Вы включили боковую панель с подсказками!");
		   				show_setting_player(playerid);
		   				show_info_gui(playerid, TEXTDRAW_SHOW);
		   			}
		   		}
		   	}
			return 1;
		}

		case dSetSpawn:
		{
			if(!response) return true;
			if(pData[playerid][pHotelRoom] == -1 && pData[playerid][pFlate] == -1  && pData[playerid][pFlateRent] == -1 && pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent] == -1)
			{
				UpdatePlayerData(playerid, "spawn", 0);
				pData[playerid][pSpawn] = 0;
			}

			if(pData[playerid][pHotelRoom] == -1 && pData[playerid][pFlate] == -1  && pData[playerid][pFlateRent] == -1 && pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent] == -1)
			{
				SendErr(playerid, "Произошла ошибка при смене места спавна.");
				return true;
			}

			if(pData[playerid][pSpawn] == 1 && listitem != 2) listitem = !listitem;
			switch(listitem)
			{
				case 0:
				{
					if(pData[playerid][pHotelRoom] == -1 && pData[playerid][pFlate] == -1  && pData[playerid][pFlateRent] == -1 && pData[playerid][pHouse] == -1 && pData[playerid][pHouseRent] == -1)
					{
						SendErr(playerid, "Вы не проживаете в доме и не арендуете номер в отеле.");
						return true;
					}

					SendSucc(playerid, "Теперь вы будете появляться в доме / отеле");
					pData[playerid][pSpawn] = 1;
				}
				case 1:
				{
					SendSucc(playerid, "Теперь вы будете появляться на базе вашей организации");
					pData[playerid][pSpawn] = 0;
				}
			}
			UpdatePlayerData(playerid, "spawn", pData[playerid][pSpawn]);
		}

		case dSetRadio:
		{
			if(!response) return 1;
			pData[playerid][pRadio] = listitem+1;
			UpdatePlayerData(playerid, "radio", listitem+1);
			new zStr[64];
			switch(listitem)
			{
				case 0: format(zStr, 64, "Вы переключились на радиостанцию г. Южный");
				case 1: format(zStr, 64, "Вы переключились на радиостанцию г. Эдово");
				case 2: format(zStr, 64, "Вы переключились на радиостанцию г. Арзамас");
			}
			SCM(playerid, COLOR_WHITE, zStr);
		}


		case dLoginAdmins:
		{
			if(pData[playerid][pAdmin] == 7 || pData[playerid][pAdmin] == 8)
			if(strval(inputtext) != admpass || !response) return NewKick(playerid);
			admloged[playerid] = 1;
			new send[128],pip[16];
			GetPlayerIp(playerid,pip,16);


			if(pData[playerid][pAdmin] >= 1 && pData[playerid][pAdmin] <= 6)
			{
				SFCM(playerid, CYELLOW, "Вы вошли как администратор %d-го уровня",pData[playerid][pAdmin]);

			}
 			else if(pData[playerid][pAdmin] >= 7) if(pData[playerid][pAdmin] == 7 || pData[playerid][pAdmin] == 8)
 			{
 				SCM(playerid, CYELLOW, "Вы вошли как Главный Администратор");

 			}

			if(pData[playerid][pAdmin] < 7)
			{
				if(pData[playerid][pSex] == 2)
				{
					format(send,sizeof(send),"%s авторизовалась [IP:%s]",pData[playerid][pNickname],pip);
				}
				else
				{
					if(strlen(pData[playerid][pMob]) < 5)
					{
	 					format(send,sizeof(send),"%s авторизовался [IP:%s]",pData[playerid][pNickname],pip);
					}
					else
					{
						format(send,sizeof(send),"%s авторизовался [IP:%s]",pData[playerid][pNickname],pip);
					}
				}
				AdminChat(0xc3ef15FF, send, 1);
			}
			return 1;
		}


		case dActPlayerMenuMoney:
		{
			if(!response) return 1;
			if(pData[playerid][pLevel] < 2) return SendErr(playerid, "Передача денег разрешена со 2 уровня");
			new actplayerid = pTemp[playerid][pActPlayer];
			if(pData[actplayerid][pLevel] < 2) return SendErr(playerid, "У игрока которому вы хотите передать деньги должен быть 2 уровень");
			new money = strval(inputtext);
			if(money < 1 || money > 5000) return SendErr(playerid, "Вы можете передавать от P1 до P5000");
			if(pTemp[playerid][pLastPay] > 1 && pData[playerid][pLevel] < 25 && (!pData[playerid][pFraction] || (pData[playerid][pFraction] > 0 && !IsALeader(playerid)) ) && !pData[playerid][pAdmin]) return SendErr(playerid, "Деньги можно передавать не чаще 1 раза в минуту");
			if(GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
			{
				foreach(new i: logged_players)
				{
					if(!IsPlayerConnected(i)) continue;

				}
			}
			if(GetPlayerMoneyEx(playerid) < money)
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendErr(playerid, "У Вас недостаточно денег");
			}
			if(GetPlayerMoneyEx(playerid) <= 0)
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				return SendErr(playerid, "У Вас недостаточно денег");
			}
			give_money(playerid, -money, "Отдану игроку");
			give_money(actplayerid, money, "Получено от игрока");

			pTemp[playerid][pLastPay] = 60;
			new mes[128];
			format(mes,sizeof(mes),"%s "cBLUE"передал Вам "cBLUE"%d рублей",pData[playerid][pNickname],money);
			SCM(actplayerid,CWHITE,mes);
			format(mes,sizeof(mes),"Вы передали "cWH"%s "cLRED"%d рублей",pData[actplayerid][pNickname],money);
			SCM(playerid,CINFO,mes);
			format(mes,sizeof(mes),"достал деньги и передал их %s'y",pData[actplayerid][pNickname]);
			MeAction(playerid,mes);
			pTemp[playerid][pActPlayer] = INVALID_PLAYER_ID;

		}
		case dMaskirovka:
		{
			if(!response) return 1;

			if(pData[playerid][pSex] == 1)
			{
				switch(listitem)
				{
					case 0: set_player_skin(playerid,107),SetPlayerColor(playerid, 0x009900AA),SCM(playerid,-1,"Вы выбрали прикрытие `Тамбовская ОПГ`"), pTemp[playerid][pmaskedf] = 1,SetPVarIntNew(playerid,"maskedfr",4);
					case 1: set_player_skin(playerid,103),SetPlayerColor(playerid, 0xCC00FFAA),SCM(playerid,-1,"Вы выбрали прикрытие `Ореховская ОПГ`"),pTemp[playerid][pmaskedf] = 2,SetPVarIntNew(playerid,"maskedfr",3);
					case 2: set_player_skin(playerid,175),SetPlayerColor(playerid, 0x6666FFAA),SCM(playerid,-1,"Вы выбрали прикрытие `Измайловская ОПГ`"),pTemp[playerid][pmaskedf] = 3,SetPVarIntNew(playerid,"maskedfr",7);
					case 3: set_player_skin(playerid,109),SetPlayerColor(playerid, 0xFBD400AA),SCM(playerid,-1,"Вы выбрали прикрытие `Курганская ОПГ`"),pTemp[playerid][pmaskedf] = 4,SetPVarIntNew(playerid,"maskedfr",6);
					case 4: set_player_skin(playerid,114),SetPlayerColor(playerid, 0x00EEEEAA),SCM(playerid,-1,"Вы выбрали прикрытие `Медведковская ОПГ`"),pTemp[playerid][pmaskedf] = 5,SetPVarIntNew(playerid,"maskedfr",5);
					case 5: set_player_skin(playerid,112),SetPlayerColor(playerid, 0x9eff4fAA),SCM(playerid,-1,"Вы выбрали прикрытие `Батыревское ОА`"),pTemp[playerid][pmaskedf] = 7,SetPVarIntNew(playerid,"maskedfr",14);
					case 6: set_player_skin(playerid,122),SetPlayerColor(playerid, 0xff0000AA),SCM(playerid,-1,"Вы выбрали прикрытие `Южное ОА'"),pTemp[playerid][pmaskedf] = 8,SetPVarIntNew(playerid,"maskedfr",13);
					case 7: set_player_skin(playerid,303),SetPlayerColor(playerid, 0xFFFFFF11),SCM(playerid,-1,"Вы выбрали прикрытие `Гражданский'"),pTemp[playerid][pmaskedf] = 9,SetPVarIntNew(playerid,"maskedfr",0);
					case 8: set_player_skin(playerid,304),SetPlayerColor(playerid, 0xFFFFFF11),SCM(playerid,-1,"Вы выбрали прикрытие `Гражданский'"),pTemp[playerid][pmaskedf] = 10,SetPVarIntNew(playerid,"maskedfr",0);
					case 9: set_player_skin(playerid,305),SetPlayerColor(playerid, 0xFFFFFF11),SCM(playerid,-1,"Вы выбрали прикрытие `Гражданский'"),pTemp[playerid][pmaskedf] = 11,SetPVarIntNew(playerid,"maskedfr",0);
					case 10:
					{
						set_player_skin(playerid,GetPVarIntNew(playerid,"OldSkinm"));
//	                    SetPVarIntNew(playerid,"maskedf",0);
						pTemp[playerid][pmaskedf] = 0;
						SetPVarIntNew(playerid,"seloldsk",0);
					 	SetPlayerColor(playerid,gFractionColor[pData[playerid][pFraction] - 1]);
					 	SetPVarIntNew(playerid,"maskedfr",0);
					}
				}
			}
			else
			{
				switch(listitem)
				{
					case 0: set_player_skin(playerid,139),SetPlayerColor(playerid, 0x009900AA),SCM(playerid,-1,"Вы выбрали прикрытие `Тамбовская ОПГ`"),pTemp[playerid][pmaskedf] = 1,SetPVarIntNew(playerid,"maskedfr",4);
					case 1: set_player_skin(playerid,148),SetPlayerColor(playerid, 0xCC00FFAA),SCM(playerid,-1,"Вы выбрали прикрытие `Ореховская ОПГ`"),pTemp[playerid][pmaskedf] = 2,SetPVarIntNew(playerid,"maskedfr",3);
					case 2: set_player_skin(playerid,138),SetPlayerColor(playerid, 0x6666FFAA),SCM(playerid,-1,"Вы выбрали прикрытие `Измайловская ОПГ`"),pTemp[playerid][pmaskedf] = 3,SetPVarIntNew(playerid,"maskedfr",7);
					case 3: set_player_skin(playerid,226),SetPlayerColor(playerid, 0xFBD400AA),SCM(playerid,-1,"Вы выбрали прикрытие `Курганская ОПГ`"),pTemp[playerid][pmaskedf] = 4,SetPVarIntNew(playerid,"maskedfr",6);
					case 4: set_player_skin(playerid,145),SetPlayerColor(playerid, 0x00EEEEAA),SCM(playerid,-1,"Вы выбрали прикрытие `Медведковская ОПГ`"),pTemp[playerid][pmaskedf] = 5,SetPVarIntNew(playerid,"maskedfr",5);
					case 5: set_player_skin(playerid,233),SetPlayerColor(playerid, 0x9eff4fAA),SCM(playerid,-1,"Вы выбрали прикрытие `Батыревское ОА`"),pTemp[playerid][pmaskedf] = 7,SetPVarIntNew(playerid,"maskedfr",14);
					case 6: set_player_skin(playerid,225),SetPlayerColor(playerid, 0xff0000AA),SCM(playerid,-1,"Вы выбрали прикрытие `Южное ОА'"),pTemp[playerid][pmaskedf] = 8,SetPVarIntNew(playerid,"maskedfr",13);
					case 7: set_player_skin(playerid,13),SetPlayerColor(playerid, 0xFFFFFF11),SCM(playerid,-1,"Вы выбрали прикрытие `Гражданский'"),pTemp[playerid][pmaskedf] = 9,SetPVarIntNew(playerid,"maskedfr",0);
					case 8: set_player_skin(playerid,193),SetPlayerColor(playerid, 0xFFFFFF11),SCM(playerid,-1,"Вы выбрали прикрытие `Гражданский'"),pTemp[playerid][pmaskedf] = 10,SetPVarIntNew(playerid,"maskedfr",0);
					case 9: set_player_skin(playerid,216),SetPlayerColor(playerid, 0xFFFFFF11),SCM(playerid,-1,"Вы выбрали прикрытие `Гражданский'"),pTemp[playerid][pmaskedf] = 11,SetPVarIntNew(playerid,"maskedfr",0);
					case 10:
					{
						set_player_skin(playerid,GetPVarIntNew(playerid,"OldSkinm"));
//	                    SetPVarIntNew(playerid,"maskedf",0);
						pTemp[playerid][pmaskedf] = 0;
						SetPVarIntNew(playerid,"seloldsk",0);
					 	SetPlayerColor(playerid,gFractionColor[pData[playerid][pFraction] - 1]);
					 	SetPVarIntNew(playerid,"maskedfr",0);
					}
				}
			}
		}

		case dDelas:
		{
			if(!response) return 1;
			foreach(new i: logged_players)
			{
				if(pData[ i ][pJail] > 1 && pData[ i ][pPrison] > 3)
				{
					if(!strcmp(inputtext, pData[ i ][pNickname] ,false))
					{
				   		foreach(new z : Player)
						{
							if(PlayerDelo[z] == playerid+1)
							{
							SendErr(playerid, "Вы уже взяли чье-то личное дело.");
							return 1;
							}
						}
						if(PlayerDelo[i] != 0) {
							SendErr(playerid, "Дело этого игрока не найдено в участке.");
							return 1;
						}
						format(String256,sizeof(String256),"Вы взяли дело %s. Информация о преступлениях игрока очищена.",pData[ i ][pNickname]);
						SendSucc(playerid, String256);
						PlayerDelo[i] = playerid+1;
						return 1;
		   			}
	   			}
   			}
		}

		case dDelas2:
		{
			if(!response) return 1;
			foreach(new i: logged_players)
			{
				if(pData[ i ][pJail] > 1 && pData[ i ][pPrison] > 3)
				{
					if(!strcmp(inputtext, pData[ i ][pNickname] ,false))
					{
						if(PlayerDelo[i] < 1)
						{
							SendErr(playerid, "Сначала необходимо похитить лично дело игрока в полицейском участке");
							return 1;
						}
						format(String256,sizeof(String256),"Вы взяли ключи от камеры %s и его дело. Освободите его и покидайте тюрьму",pData[ i ][pNickname]);
						SendSucc(playerid, String256);
						PlayerDelo2[playerid] = i+1;
						return 1;
		   			}
	   			}
   			}
		}


		case dMinMOEX:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства обороны и армий:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат армии\n"cBLUE"2."cWH" Список военнослужащих",GosMoney[2]);
					return SPD(playerid,dMinMOEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником Нац. Безопасности)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[7][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn], gFractionSalaryNew[7][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					SPD(playerid,dMinMOEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
					SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Список военнослужащих", "Военно-Воздушные Силы\nСухопутные Войска\nВоенно-Морской Флот\nМинистерство обороны", "Выбрать", "Закрыть");
				}

			}
		}
		case dMinMOEX2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				if(gFractionSalaryNew[7][listitem] < 1) {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником Нац. Безопасности)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[7][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn], gFractionSalaryNew[7][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					SPD(playerid,dMinMOEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
					return 1;
				}
 				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство обороны");
				format(String1024, sizeof(String1024), "\n\n"cWH"Новая зарплата для должности %s: "cGR"%d рублей"cWH"\n\n", gFractionRankName[7][listitem], gFractionSalaryNew[7][listitem]);
				SPD(playerid,dMinMOEX3,DIALOG_STYLE_MSGBOX,String256, String1024 ,"Принять","Отмена");

			}
		}
		case dMinMOEX3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap");
				gFractionSalary[7][ setrank ] = gFractionSalaryNew[7][ setrank ];
				gFractionSalaryNew[7][ setrank ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank+1, gFractionSalary[7][ setrank ], 8);
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Министерство Обороны] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[7][ setrank ], gFractionSalary[7][ setrank ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 8) SCM(i,0xACE600FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
				}


				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником Нац. Безопасности)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[7][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn], gFractionSalaryNew[7][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство обороны");
				SPD(playerid,dMinMOEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");


			}
		}

		case dMinMO5:
		{
 			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства обороны и армий:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию военнослужащим\n"cBLUE"2."cWH" Регулировка зарплат армии\n"cBLUE"3."cWH" Список военнослужащих\n"cBLUE"4."cWH" Закупка боеприпасов",GosMoney[2]);
					return SPD(playerid,dMinMO,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					if(GosMoneyEX2 >= 1)
					{
						return 	SendErr(playerid, "Вы уже выдали премии всем сотрудникам за сегодня");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для служащих\nПремию всем служащим можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 2: {
					if(GosMoneyEX3 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Военно-Воздушные Силы за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Военно-Воздушные Силы\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Военно-Воздушные Силы "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 3: {
					if(GosMoneyEX4 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Сухопутные Войска за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Сухопутные Войска\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Сухопутные Войска "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 4: {
					if(GosMoneyEX5 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Военно-Морской Флот за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Военно-Морской Флот\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Военно-Морской Флот "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}


			}
		}

		case dMinMO:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства обороны и армий:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию военнослужащим\n"cBLUE"2."cWH" Регулировка зарплат армии\n"cBLUE"3."cWH" Список военнослужащих\n"cBLUE"4."cWH" Закупка боеприпасов",GosMoney[2]);
					return SPD(playerid,dMinMO,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {

					format(String256, sizeof(String256), ""cWH"Выдача премий");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства обороны и армий:"cGR"%d рублей\n"cBLUE"1."cWH" Общая премия\n"cBLUE"2."cWH" Военно-Воздушные Силы\n"cBLUE"3."cWH" Сухопутные Войска\n"cBLUE"4."cWH" Военно-Морской Флот",GosMoney[2]);
					return SPD(playerid,dMinMO5,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
 					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником Нац. Безопасности)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[7][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn], gFractionSalaryNew[7][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn]);
							strcat(String1024, String256);
 						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					SPD(playerid,dMinMO3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 3: {
					SPD(playerid, dMesVoen, DIALOG_STYLE_LIST, ""cBLUE"Список военнослужащих", ""cBLUE"1."cWH"Военно-Воздушные Силы\n"cBLUE"2."cWH"Сухопутные Войска\n"cBLUE"3."cWH"Военно-Морской Флот\n"cBLUE"4."cWH"Министерство обороны", "Выбрать", "Закрыть");
				}
				case 4: {
					format(String256, sizeof(String256), ""cWH"Закупка боеприпасов");
					format(String1024, sizeof(String1024), "\n\n"cWH"Бюджет Министерства обороны и армий: "cGR"%d рублей\n"cWH"Количество ед. оружия и патрон на складе оружия: "cGR"%d"cWH"\n\
															\nСтоимость 1000ед. оружия и патрон: "cGR"%d рублей"cWH"\n\nВведите количество которое хотите закупить\n\nМаксимальная вместительность склада оружия в порту: "cBLUE"1.000.000ед.\n\n",GosMoney[2],400);
					return SPD(playerid,dMinMO9, DIALOG_STYLE_INPUT , String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
			}
		}
		case dMinMO9:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 1000 || price > 1000000 || floatround(price*0.2) > GosMoney[2]) {
					SendErr(playerid, "Недопустимое значение или не хватает средств в бюджете");
					format(String256, sizeof(String256), ""cWH"Закупка боеприпасов");
					format(String1024, sizeof(String1024), "\n\n"cWH"Бюджет Министерства обороны и армий: "cGR"%d рублей\n"cWH"Количество ед. оружия и патрон на складе оружия: "cGR"%d"cWH"\n\
															\nСтоимость 1000ед. оружия и патрон: "cGR"%d рублей"cWH"\n\nВведите количество которое хотите закупить\n\nМаксимальная вместительность склада оружия в порту: "cBLUE"1.000.000ед.\n\n",GosMoney[2],400);
					return SPD(playerid,dMinMO9, DIALOG_STYLE_INPUT , String256 , String1024 ,!"Выбрать",!"Закрыть");
				}

				GosMoney[2] -= floatround(price*0.4);
				SaveNewsMoney();

				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" закупил на {009966}Cклад оружия {00994D}%dед."cWH" боеприпасов.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
 						}
 				}

			}
		}
		case dMinMO3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство обороны");
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[7][listitem],setrank*400, setrank*1500);
				SPD(playerid,dMinMO4,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");

			}
		}
		case dMinMO4:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
   				new setrank = GetPVarIntNew(playerid,"setzap") + 1;

				new price = strval(inputtext);
				if(price < setrank*400 || price > setrank*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[7][setrank-1],setrank*400, setrank*1500);
					SPD(playerid,dMinMO4,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				gFractionSalaryNew[7][ setrank -1 ] = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение зарплаты у %s. Для утверждения новой зарплаты необходима подпись советника по Нац. Безопасности",gFractionRankName[7][setrank-1]);
				SendSucc(playerid,String256);
				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником Нац. Безопасности)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[7][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn], gFractionSalaryNew[7][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[7][dn],gFractionSalary[7][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство обороны");
				SPD(playerid,dMinMO3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
		}
		case dMinMO2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для служащих\nПремию всем служащим можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих");
				}
				if(GosMoney[2] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для служащих\nПремию всем служащим можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				GosMoney[2] -= vrachis*price;
				GosMoneyEX2 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил служащим {009966}армии"cWH" государства премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						SendInf(i, "Деньги будут добавлены к зарплате");
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinMO6:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Военно-Воздушные Силы\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Военно-Воздушные Силы "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8 && pData[d][pSubfraction] == 1)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих Военно-Воздушных Сил");
				}
				if(GosMoney[2] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Военно-Воздушные Силы\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Военно-Воздушные Силы "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					return 1;
				}
				GosMoney[2] -= vrachis*price;
				GosMoneyEX3 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8 && pData[d][pSubfraction] == 1)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Военно-Воздушные Силы"cWH" государства  премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 1) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinMO7:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Сухопутные Войска\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Сухопутные Войска "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8 && pData[d][pSubfraction] == 2)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих Сухопутных Войск");
				}
				if(GosMoney[2] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Сухопутные Войска\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Сухопутные Войска "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					return 1;
				}
				GosMoney[2] -= vrachis*price;
				GosMoneyEX4 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8 && pData[d][pSubfraction] == 2)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Сухопутные Войска"cWH" государства  премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 2) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinMO8:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 8 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Военно-Морской Флот\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Военно-Морской Флот "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8 && pData[d][pSubfraction] == 3)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих Сухопутных Войск");
				}
				if(GosMoney[2] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство обороны");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Военно-Морской Флот\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСлужащих подразделения Военно-Морской Флот "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMO8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					return 1;
				}
				GosMoney[2] -= vrachis*price;
				GosMoneyEX5 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 8 && pData[d][pSubfraction] == 3)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Военно-Морской Флот"cWH" государства  премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 3) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
// Министерство внутренних дел

		case dMinMVDEX:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат полицейских департаментов\n"cBLUE"2."cWH" Список сотрудников",GosMoney[1]);
					SPD(playerid,dMinMVDEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Генеральным Прокурором)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[8][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn], gFractionSalaryNew[8][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					SPD(playerid,dMinMVDEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
					SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "МВД г.Южный\nМВД г.Арзамас\nМВД п.Батырево\nМинистерство внутренних дел", "Выбрать", "Закрыть");
				}
				case 3: {
					if(ArrestPayNew == 0) {
						format(String256,sizeof(String256),"\n"cWH"Установите премию за пойманного преступника\nТекущая премия: {5CD65C}%d рублей"cWH"\n\nДиапазон премии: {47D147}P50-P500\n{FFFFB3}Премия выдаваемая сотруднику умножается на розыск преступника\n", ArrestPay);
						return SPD(playerid, dMinMVDPayEx, DIALOG_STYLE_MSGBOX, ""cBLUE"Регулирование премии", String256, "Закрыть", "");
					}
					else {
						format(String256,sizeof(String256),"\n"cWH"Установите премию за пойманного преступника\nТекущая премия: {5CD65C}%d рублей"cWH"\n\nДиапазон премии: {47D147}P50-P500\n\n\n{FFFFB3}Изменение премии выдвинутое министром по МВД: {47D147}%d\n\n", ArrestPay,ArrestPayNew);
						return SPD(playerid, dMinMVDPayEx, DIALOG_STYLE_MSGBOX, ""cBLUE"Регулирование премии", String256, "Установить", "Отмена");
					}
 				}
			}
		}
		case dMinMVDPayEx:
		{
			if(ArrestPayNew < 1 || ArrestPayNew > 500) {
				format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат полицейских департаментов\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулировка премии за пойманного преступника",GosMoney[1]);
				return SPD(playerid,dMinMVDEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			if(!response) return 1;
			ArrestPay = ArrestPayNew;
			ArrestPayNew = 0;
			format(String256, sizeof(String256),"Вы подписали изменение премии за пойманного преступника на %d рублей.", ArrestPay);
			SendSucc(playerid,String256);
			SaveNewsMoneyEx();
			new mesid[256];
			format(mesid,sizeof(mesid),"[Министерство внутренних Дел] Новый размер премии за пойманного преступника составит {009933}%d рублей", ArrestPay);

			foreach(new i: logged_players)
			{
				if(IsPlayerConnected(i) && pData[i][pFraction] == 9) SCM(i,0xACE600FF,mesid);// 4a7e2f
				else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
			}

		}
		case dMinMVDEX2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				if(gFractionSalaryNew[8][listitem] < 1) {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Генеральным Прокурором)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[8][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn], gFractionSalaryNew[8][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					SPD(playerid,dMinMVDEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
					return 1;
				}
 				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
				format(String1024, sizeof(String1024), "\n\n"cWH"Новая зарплата для должности %s: "cGR"%d рублей"cWH"\n\n", gFractionRankName[8][listitem], gFractionSalaryNew[8][listitem]);
				SPD(playerid,dMinMVDEX3,DIALOG_STYLE_MSGBOX,String256, String1024 ,"Принять","Отмена");

			}
		}
		case dMinMVDEX3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap");
				gFractionSalary[8][ setrank ] = gFractionSalaryNew[8][ setrank ];
				gFractionSalaryNew[8][ setrank ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank+1, gFractionSalary[8][ setrank ], 9);
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Министерство внутренних Дел] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[8][ setrank ], gFractionSalary[8][ setrank ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 9) SCM(i,0xACE600FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
				}


				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Генеральным Прокурором)\n");
				for(new dn = 0; dn < 12; dn ++)
				{
					if(gFractionSalaryNew[8][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn], gFractionSalaryNew[8][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
				SPD(playerid,dMinMVDEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");


			}
		}

		case dMinMVD:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат департаментов\n"cBLUE"3."cWH" Список сотрудников",GosMoney[1]);
					return SPD(playerid,dMinMVD,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {

					format(String256, sizeof(String256), ""cWH"Выдача премий");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Общая премия\n"cBLUE"2."cWH" МВД г.Южный\n"cBLUE"3."cWH" МВД г.Арзамас\n"cBLUE"4."cWH" МВД п.Батырево",GosMoney[1]);
					return SPD(playerid,dMinMVD5,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {

					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Генеральным Прокурором)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[8][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn], gFractionSalaryNew[8][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn]);
							strcat(String1024, String256);
 						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					SPD(playerid,dMinMVD3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 3: {
					SPD(playerid, dMesVoen, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "МВД г.Южный\nМВД г.Арзамас\nМВД п.Батырево\nМинистерство внутренних дел", "Выбрать", "Закрыть");
				}
				case 4: {
					format(String256,sizeof(String256),"\n"cWH"Установите премию за пойманного преступника\nТекущая премия: {5CD65C}%d рублей"cWH"\n\nДиапазон пенсии: {47D147}P50-P500\n{FFFFB3}Премия выдаваемая сотруднику умножается на розыск преступника\n", ArrestPay);
					return SPD(playerid, dMinMVDPay, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование премии", String256, "Установить", "Отмена");
				}
			}
		}
		case dMinMVDPay:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 50 || price > 500) {
					SendErr(playerid, "Недопустимое значение");
					format(String256,sizeof(String256),"\n"cWH"Установите премию за пойманного преступника\nТекущая премия: {5CD65C}%d рублей"cWH"\n\nДиапазон пенсии: {47D147}P50-P500\n{FFFFB3}Премия выдаваемая сотруднику умножается на розыск преступника\n", ArrestPay);
					return SPD(playerid, dMinMVDPay, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование премии", String256, "Установить", "Отмена");
				}
				ArrestPayNew = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение премии за пойманного преступника на %d рублей. Для утверждения необходима подпись Генерального Прокурора", ArrestPayNew);
				SendSucc(playerid,String256);
			}
		}
		case dMinMVD3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[8][listitem],setrank*400, setrank*1500);
				SPD(playerid,dMinMVD4,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");

			}
		}
		case dMinMVD4:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
   				new setrank = GetPVarIntNew(playerid,"setzap") + 1;

				new price = strval(inputtext);
				if(price < setrank*400 || price > setrank*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[8][setrank-1],setrank*400, setrank*1500);
					SPD(playerid,dMinMVD4,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				gFractionSalaryNew[8][ setrank -1 ] = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение зарплаты у %s. Для утверждения новой зарплаты необходима подпись Генерального Прокурора",gFractionRankName[8][setrank-1]);
				SendSucc(playerid,String256);
				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Генеральным Прокурором)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[8][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn], gFractionSalaryNew[8][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[8][dn],gFractionSalary[8][dn]);
						strcat(String1024, String256);
 					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
				SPD(playerid,dMinMVD3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
		}
		case dMinMVD2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников департамента\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников");
				}
				if(GosMoney[1] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					SendErr(playerid, "В бюджете Министертсва внутренних дел недостаточно средств для премии");
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников департамента\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				GosMoney[1] -= vrachis*price;
				GosMoneyMVD2 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил сотрудникам {009966}полицейского департамента"cWH" государства премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						SendInf(i, "Деньги будут добавлены к зарплате");
						}
 				}
				SaveNewsMoney();
 			}
		}


		case dMinMVD5:
		{
 			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства внутренних дел:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат департаментов\n"cBLUE"3."cWH" Список сотрудников",GosMoney[1]);
					return SPD(playerid,dMinMVD,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					if(GosMoneyMVD2 >= 1)
					{
						return 	SendErr(playerid, "Вы уже выдали премии всем сотрудникам за сегодня");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников департамента\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 2: {
					if(GosMoneyMVD3 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению МВД г.Южный за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nCотрудников подразделения МВД г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 3: {
					if(GosMoneyMVD4 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению SFPD за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nCотрудников подразделения МВД г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 4: {
					if(GosMoneyMVD5 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению МВД п.Батырево за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД п.Батырево\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nCотрудников подразделения МВД п.Батырево "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}


			}
		}

		case dMinMVD6:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения МВД г.Южный"cGR" Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9 && pData[d][pSubfraction] == 1)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих МВД г.Южный");
				}
				if(GosMoney[1] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения МВД г.Южный"cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					return 1;
				}
				GosMoney[1] -= vrachis*price;
				GosMoneyMVD3 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9 && pData[d][pSubfraction] == 1)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"Министр МВД {D4CCFF}%s"cWH" назначил подразделению {009966}МВД г.Южный"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 1) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}

		case dMinMVD7:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения МВД г.Арзамас"cGR" Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9 && pData[d][pSubfraction] == 2)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих МВД г.Арзамас");
				}
				if(GosMoney[1] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения МВД г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					return 1;
				}
				GosMoney[1] -= vrachis*price;
				GosMoneyMVD4 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9 && pData[d][pSubfraction] == 2)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"Министр МВД {D4CCFF}%s"cWH" назначил подразделению {009966}МВД г.Арзамас"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						SendInf(i, "Деньги будут добавлены к зарплате");
						if( pData[i][pSubfraction] == 2) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}

		case dMinMVD8:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 9 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД п.Батырево\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения МВД п.Батырево"cGR" Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9 && pData[d][pSubfraction] == 3)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало служащих МВД п.Батырево");
				}
				if(GosMoney[1] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство внутренних дел");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения МВД п.Батырево\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения МВД п.Батырево "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMVD8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва Обороны недостаточно средств для премии");
					return 1;
				}
				GosMoney[1] -= vrachis*price;
				GosMoneyMVD5 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 9 && pData[d][pSubfraction] == 3)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"Министр МВД {D4CCFF}%s"cWH" назначил подразделению {009966}МВД п.Батырево"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction] ) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 3) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
// ================================================

		case dMesEx:
		{
			if(!response)
				return true;

			if(listitem == 20)
			{
				return check_player_user_fraction(playerid, GetPVarIntNew(playerid, "check_page_panel_fraction")+1);
			}
			else if(listitem == 21 || GetPVarIntNew(playerid, "button_back_personal_fraction") == listitem && listitem != 0)
			{
				return check_player_user_fraction(playerid, GetPVarIntNew(playerid, "check_page_panel_fraction")-1);
			}
			return true;
		}

// Министерство здравоохранения
		case dMinMZEX:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат сотрудников\n"cBLUE"2."cWH" Список сотрудников",GosMoney[4]);
					return SPD(playerid,dMinMZEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником МЗ)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[1][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn], gFractionSalaryNew[1][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					SPD(playerid,dMinMZEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
					SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Больница г.Южный\nБольница г.Арзамас\nБольница п.Батырево\nМинздрав", "Выбрать", "Закрыть");
				}
				case 3: {
					if(HealPayNew == 0) {
						format(String256,sizeof(String256),"\n"cWH"Максимальная стоимость лечения {B3B3B3}(выдвигается Министром Здравоохранения)"cWH"\nТекущая стоимость: {5CD65C}%d рублей"cWH"\n\nДиапазон стоимости: {47D147}P50-P300\n\n", HealPay);
						return SPD(playerid, dMinMZPayEx, DIALOG_STYLE_MSGBOX, ""cBLUE"Регулирование стоимости лечения", String256, "Закрыть", "");
					}
					else {
						format(String256,sizeof(String256),"\n"cWH"Установите максимальную стоимость лечения {B3B3B3}(выдвигается Министром Здравоохранения)"cWH"\nТекущая стоимость: {5CD65C}%d рублей"cWH"\
															\n\nДиапазон стоимости: {47D147}P50-P300\n\n\n{FFFFB3}Изменение максимальной стоимости выдвинутое министром по МЗ: {47D147}%d\n\n", HealPay,HealPayNew);
						return SPD(playerid, dMinMZPayEx, DIALOG_STYLE_MSGBOX, ""cBLUE"Регулирование стоимости лечения", String256, "Установить", "Отмена");
					}
				}


			}
		}
		case dMinMZPayEx:
		{
			if(HealPayNew < 1 || HealPayNew > 300) {
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат сотрудников\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулировка максимальной цены лечения",GosMoney[4]);
				return SPD(playerid,dMinMZEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			if(!response) return 1;
			HealPay = HealPayNew;
			HealPayNew = 0;
			format(String256, sizeof(String256),"Вы подписали изменение максимальной стоимости лечения на %d рублей.", HealPay);
			SendSucc(playerid,String256);
			SaveNewsMoneyEx();
			new mesid[256];
			format(mesid,sizeof(mesid),"[Министерство Здравоохранения] Новая максимальная стоимость лечения составит {009933}%d рублей", HealPay);

			foreach(new i: logged_players)
			{
				if(IsPlayerConnected(i) && pData[i][pFraction] == 2) SCM(i,0xACE600FF,mesid);// 4a7e2f
				else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
			}

		}

		case dMinMZ:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат сотрудников\n"cBLUE"3."cWH" Список сотрудников",GosMoney[4]);
					SPD(playerid,dMinMZ,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {

					format(String256, sizeof(String256), ""cWH"Выдача премий");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Общая премия\n"cBLUE"2."cWH" Больница г.Южный\n"cBLUE"3."cWH" Больница г.Арзамас\n"cBLUE"4."cWH" Больница п.Батырево",GosMoney[4]);
					return SPD(playerid,dMinMZ5,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
 					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником М3)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[1][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn], gFractionSalaryNew[1][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn]);
							strcat(String1024, String256);
 						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					SPD(playerid,dMinMZ3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 3: {
					SPD(playerid, dMesVoen, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Больница г.Южный\nБольница г.Арзамас\nБольница п.Батырево\nМинздрав", "Выбрать", "Закрыть");
				}

				case 4: {
					format(String256,sizeof(String256),"\n"cWH"Установите максимальную стоимость лечения\nТекущая стоимость: {5CD65C}%d рублей"cWH"\n\nДиапазон стоимости: {47D147}P50-P300\n\n", HealPay);
					return SPD(playerid, dMinMZPay, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование лечения", String256, "Установить", "Отмена");
				}
			}
		}
		case dMinMZPay:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 50 || price > 300) {
					SendErr(playerid, "Недопустимое значение");
					format(String256,sizeof(String256),"\n"cWH"Установите максимальную стоимость лечения\nТекущая стоимость: {5CD65C}%d рублей"cWH"\n\nДиапазон стоимости: {47D147}P50-P300\n\n", HealPay);
					return SPD(playerid, dMinMZPay, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование лечения", String256, "Установить", "Отмена");
				}
				HealPayNew = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение максимальной цены на лечение %d рублей. Для утверждения необходима подпись советника по  МЗ", HealPayNew);
				SendSucc(playerid,String256);
			}
		}


		case dMinMZEX2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				if(gFractionSalaryNew[1][listitem] < 1) {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником МЗ)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[1][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn], gFractionSalaryNew[1][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					SPD(playerid,dMinMZEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
					return 1;
				}
 				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				format(String1024, sizeof(String1024), "\n\n"cWH"Новая зарплата для должности %s: "cGR"%d рублей"cWH"\n\n", gFractionRankName[1][listitem], gFractionSalaryNew[1][listitem]);
				SPD(playerid,dMinMZEX3,DIALOG_STYLE_MSGBOX,String256, String1024 ,"Принять","Отмена");

			}
		}
		case dMinMZEX3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap");
				gFractionSalary[1][ setrank ] = gFractionSalaryNew[1][ setrank ];
				gFractionSalaryNew[1][ setrank ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank+1, gFractionSalary[1][ setrank ], 2);
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Министерство здравоохранения] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[1][ setrank ], gFractionSalary[1][ setrank ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 2) SCM(i,0x2DB300FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0x2DB300FF,mesid);
				}


				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником МЗ)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[1][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn], gFractionSalaryNew[1][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				SPD(playerid,dMinMZEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");


			}
		}

		case dMinMZ5:
		{
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), ""cWH"Бюджет Министерства здравоохранения:"cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат сотрудников\n"cBLUE"3."cWH" Список сотрудников",GosMoney[4]);
					SPD(playerid,dMinMZ,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					if(GosMoneyMZ2 >= 1)
					{
						return 	SendErr(playerid, "Вы уже выдали премии всем сотрудникам за сегодня");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 2: {
					if(GosMoneyMZ3 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Больница г.Южный за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 3: {
					if(GosMoneyMZ4 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Больница г.Арзамас за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 4: {
					if(GosMoneyMZ5 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Больница п.Батырево за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница п.Батырево\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница п.Батырево "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}


			}
		}



		case dMinMZ3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[1][listitem],setrank*400, setrank*1500);
				SPD(playerid,dMinMZ4,DIALOG_STYLE_INPUT,String256, String1024 ,!"Далее",!"Отмена");

			}
		}
		case dMinMZ4:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
   				new setrank = GetPVarIntNew(playerid,"setzap") + 1;

				new price = strval(inputtext);
				if(price < setrank*400 || price > setrank*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[1][listitem],setrank*400, setrank*1500);
					SPD(playerid,dMinMZ4,DIALOG_STYLE_INPUT,String256, String1024 ,!"Далее",!"Отмена");
					return 1;
				}
				gFractionSalaryNew[1][ setrank -1 ] = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение зарплаты у %s. Для утверждения новой зарплаты необходима подпись советника по МЗ",gFractionRankName[1][setrank-1]);
				SendSucc(playerid,String256);
				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается советником МЗ)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[1][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn], gFractionSalaryNew[1][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[1][dn],gFractionSalary[1][dn]);
						strcat(String1024, String256);
 					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
				SPD(playerid,dMinMZ3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
		}
		case dMinMZ2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников");
				}
				if(GosMoney[4] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					SendErr(playerid, "В бюджете Министертсва Здравоохранения недостаточно средств для премии");
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				GosMoney[4] -= vrachis*price;
				GosMoneyMZ2 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил сотрудникам {009966}больницы"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						SendInf(i, "Деньги будут добавлены к зарплате");
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinMZ6:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[d][pSubfraction] == 1)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников Больницы г.Южный");
				}
				if(GosMoney[4] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва здравоохранения недостаточно средств для премии");
					return 1;
				}
				GosMoney[4] -= vrachis*price;
				GosMoneyMZ3 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[d][pSubfraction] == 1)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Больница г.Южный"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 1) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinMZ7:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[d][pSubfraction] == 2)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников Больницы г.Арзамас");
				}
				if(GosMoney[4] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва здравоохранения недостаточно средств для премии");
					return 1;
				}
				GosMoney[4] -= vrachis*price;
				GosMoneyMZ4 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[d][pSubfraction] == 2)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Больница г.Арзамас"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction] ) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 2) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}

		case dMinMZ8:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница п.Батырево\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница п.Батырево "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[d][pSubfraction] == 3)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников Больницы п.Батырево");
				}
				if(GosMoney[4] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство здравоохранения");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Больница п.Батырево\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Больница п.Батырево "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinMZ8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва здравоохранения недостаточно средств для премии");
					return 1;
				}
				GosMoney[4] -= vrachis*price;
				GosMoneyMZ5 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[d][pSubfraction] == 3)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Больница п.Батырево"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 3) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}

///

// ================= СМИ ======================
		case dMinSMIEX:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ: "cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат сотрудников\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулирование стоимости объявлений",GosMoney[3]);
					SPD(playerid,dMinSMIEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Пресс-секретарем)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[9][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn], gFractionSalaryNew[9][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					SPD(playerid,dMinSMIEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
					SPD(playerid, dMesVoen2, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Радиоцентр г.Южный\nРадиоцентр г.Эдово\nРадиоцентр г.Арзамас\nНовостная сеть", "Выбрать", "Закрыть");
				}
				case 3: {
					if(AdPayNew == 0) {
						format(String256,sizeof(String256),"\n"cWH"Изменение стоимости объявления {B3B3B3}(выдвигается Министром Информации)"cWH"\nТекущая стоимость: {5CD65C}%d рублей"cWH"\n\nДиапазон стоимости: {47D147}P100-P400\n\n", AdPay);
						return SPD(playerid, dMinSMIPayEx, DIALOG_STYLE_MSGBOX, ""cBLUE"Регулирование стоимости объявления", String256, "Закрыть", "");
					}
					else {
						format(String256,sizeof(String256),"\n"cWH"Установите стоимость объявления {B3B3B3}(выдвигается Министром Информации)"cWH"\nТекущая стоимость: {5CD65C}%d рублей"cWH"\
															\n\nДиапазон стоимости: {47D147}P100-P400\n\n\n{FFFFB3}Изменение стоимости выдвинутое министром по СМИ: {47D147}%d\n\n", AdPay,AdPayNew);
						return SPD(playerid, dMinSMIPayEx, DIALOG_STYLE_MSGBOX, ""cBLUE"Регулирование стоимости объявления", String256, "Установить", "Отмена");
					}
				}


			}
		}
		case dMinSMIPayEx:
		{
			if(AdPayNew < 100 || AdPayNew > 400) {
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ: "cGR"%d рублей\n"cBLUE"1."cWH" Регулировка зарплат сотрудников\n"cBLUE"2."cWH" Список сотрудников\n"cBLUE"3."cWH" Регулирование стоимости объявлений",GosMoney[3]);
				return SPD(playerid,dMinSMIEX,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
			if(!response) return 1;
			AdPay = AdPayNew;
			AdPayNew = 0;
			format(String256, sizeof(String256),"Вы подписали изменение стоимости объявления на %d рублей.", AdPay);
			SendSucc(playerid,String256);
			SaveNewsMoneyEx();
			new mesid[256];
			format(mesid,sizeof(mesid),"[Министерство Информации] Новая стоимость объявления составит {009933}%d рублей", AdPay);

			foreach(new i: logged_players)
			{
				if(IsPlayerConnected(i) && pData[i][pFraction] == 10) SCM(i,0xACE600FF,mesid);// 4a7e2f
				else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0xACE600FF,mesid);
			}

		}

		case dMinSMI:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)	{ }
			else {
				return 1;
			}
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ: "cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат сотрудников\n"cBLUE"3."cWH" Список сотрудников\n"cBLUE"4."cWH" Регулирование стоимости объявлений",GosMoney[3]);
					SPD(playerid,dMinSMI,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {

					format(String256, sizeof(String256), ""cWH"Выдача премий");
					format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ:"cGR"%d рублей\n"cBLUE"1."cWH" Общая премия\n"cBLUE"2."cWH" Радиоцентр г.Южный\n"cBLUE"3."cWH" Радиоцентр г.Эдово\n"cBLUE"4."cWH" Радиоцентр г.Арзамас",GosMoney[3]);
					return SPD(playerid,dMinSMI5,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 2: {
 					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Пресс-секретарем)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[9][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn], gFractionSalaryNew[9][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn]);
							strcat(String1024, String256);
 						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					SPD(playerid,dMinSMI3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 3: {
					SPD(playerid, dMesVoen, DIALOG_STYLE_LIST, ""cBLUE"Члены организации онлайн", "Радиоцентр г.Южный\nРадиоцентр г.Эдово\nРадиоцентр г.Арзамас\nНовостная сеть", "Выбрать", "Закрыть");
				}

				case 4: {
					format(String256,sizeof(String256),"\n"cWH"Установите стоимость объявления {B3B3B3}(утверждается Пресс-секретарем)"cWH"\t\t\t\nТекущая стоимость: {5CD65C}%d рублей"cWH"\n\nДиапазон стоимости: {47D147}P100-P400\n\n", AdPay);
					return SPD(playerid, dMinSMIPay, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование стоимости объявлений", String256, "Установить", "Отмена");
				}
			}
		}
		case dMinSMIPay:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 400) {
					SendErr(playerid, "Недопустимое значение");
					format(String256,sizeof(String256),"\n"cWH"Установите стоимость объявления {B3B3B3}(утверждается Пресс-секретарем)"cWH"\nТекущая стоимость: {5CD65C}%d рублей"cWH"\n\nДиапазон стоимости: {47D147}P100-P400\n\n", AdPay);
					return SPD(playerid, dMinSMIPay, DIALOG_STYLE_INPUT, ""cBLUE"Регулирование стоимости объявлений", String256, "Установить", "Отмена");
				}
				AdPayNew = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение цены за объявление на %d рублей. Для утверждения необходима подпись Пресс-секретаря", AdPayNew);
				SendSucc(playerid,String256);
			}
		}


		case dMinSMIEX2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				if(gFractionSalaryNew[9][listitem] < 1) {
					format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Пресс-секретарем)\n");
 					for(new dn = 0; dn < 10; dn ++)
					{
						if(gFractionSalaryNew[9][dn] != 0) {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn], gFractionSalaryNew[9][dn]);
							strcat(String1024, String256);
						}
						else {
							format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn]);
							strcat(String1024, String256);
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					SPD(playerid,dMinSMIEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
					return 1;
				}
 				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				format(String1024, sizeof(String1024), "\n\n"cWH"Новая зарплата для должности %s: "cGR"%d рублей"cWH"\n\n", gFractionRankName[9][listitem], gFractionSalaryNew[9][listitem]);
				SPD(playerid,dMinSMIEX3,DIALOG_STYLE_MSGBOX,String256, String1024 ,"Принять","Отмена");

			}
		}
		case dMinSMIEX3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 11)
			{
				new setrank = GetPVarIntNew(playerid,"setzap");
				gFractionSalary[9][ setrank ] = gFractionSalaryNew[9][ setrank ];
				gFractionSalaryNew[9][ setrank ] = 0;
				SendSucc(playerid, "Вы успешно приняли новую зарплату для выбраной должности");
				format(String256,sizeof(String256),"UPDATE `salary` SET `rank%d` = '%d' WHERE id = '%i'", setrank+1, gFractionSalary[9][ setrank ], 10);
				sql_queryEx(zConn, String256, QUERY_THREADED);
				new mesid[256];
				format(mesid,sizeof(mesid),"[Министерство информации] Новая зарплата должности "cWH"%s{ACE600} составит {009933}%d рублей", gFractionRankName[9][ setrank ], gFractionSalary[9][ setrank ]);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == 10) SCM(i,0x2DB300FF,mesid);// 4a7e2f
					else if( pData[i][pFraction] == 11 && pData[i][pSubfraction] == 0) SCM(i,0x2DB300FF,mesid);
				}


				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Пресс-секретарем)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[9][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn], gFractionSalaryNew[9][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn]);
						strcat(String1024, String256);
					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				SPD(playerid,dMinSMIEX2,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");


			}
		}

		case dMinSMI5:
		{
			switch(listitem) {
				case 0: {
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), ""cWH"Бюджет СМИ: "cGR"%d рублей\n"cBLUE"1."cWH" Выдать премию сотрудникам\n"cBLUE"2."cWH" Регулировка зарплат сотрудников\n"cBLUE"3."cWH" Список сотрудников\n"cBLUE"4."cWH" Регулирование стоимости объявлений",GosMoney[3]);
					SPD(playerid,dMinSMI,2, String256 , String1024 ,!"Выбрать",!"Закрыть");
				}
				case 1: {
					if(GosMoneySMI2 >= 1)
					{
						return 	SendErr(playerid, "Вы уже выдали премии всем сотрудникам за сегодня");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 2: {
					if(GosMoneySMI3 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Радиоцентр г.Южный за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 3: {
					if(GosMoneySMI4 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Радиоцентр г.Эдово за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Эдово\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Эдово "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}
				case 4: {
					if(GosMoneySMI5 >= 2)
					{
						return 	SendErr(playerid, "Вы уже выдали премии подразделению Радиоцентр г.Арзамас за сегодня 2 раза");
					}
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction] && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
				}


			}
		}



		case dMinSMI3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
				new setrank = listitem+1;
				SetPVarIntNew(playerid,"setzap", listitem);
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[9][listitem],setrank*400, setrank*1500);
				SPD(playerid,dMinSMI4,DIALOG_STYLE_INPUT,String256, String1024 ,!"Далее",!"Отмена");

			}
		}
		case dMinSMI4:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
   				new setrank = GetPVarIntNew(playerid,"setzap") + 1;

				new price = strval(inputtext);
				if(price < setrank*400 || price > setrank*1500 || price < 0 || price > 50000) {
					SendErr(playerid, "Недопустимое значение");
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите зарплату для должности %s\n\nДопустимая зарплата для этой должности от "cGR"%d рублей"cWH" до "cGR"%d рублей"cWH"\n\n", gFractionRankName[9][listitem],setrank*400, setrank*1500);
					SPD(playerid,dMinSMI4,DIALOG_STYLE_INPUT,String256, String1024 ,!"Далее",!"Отмена");
					return 1;
				}
				gFractionSalaryNew[9][ setrank -1 ] = price;
				format(String256, sizeof(String256),"Вы выдвинули изменение зарплаты у %s. Для утверждения новой зарплаты необходима подпись Пресс-секретаря",gFractionRankName[9][setrank-1]);
				SendSucc(playerid,String256);
				format(String1024, sizeof(String1024), ""cGREY"Должность\t"cGREY"Зарплата\t"cGREY"Новая зарплата "cGREY"(утверждается Пресс-секретарем)\n");
				for(new dn = 0; dn < 10; dn ++)
				{
					if(gFractionSalaryNew[9][dn] != 0) {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn], gFractionSalaryNew[9][dn]);
						strcat(String1024, String256);
					}
					else {
						format(String256, sizeof(String256), ""cBLUE"%d."cWH" %s\t"cGR"%d рублей\n",dn+1,gFractionRankName[9][dn],gFractionSalary[9][dn]);
						strcat(String1024, String256);
 					}
				}
				format(String256, sizeof(String256), ""cWH"Министерство информации");
				SPD(playerid,dMinSMI3,DIALOG_STYLE_TABLIST_HEADERS, String256 , String1024 ,!"Выбрать",!"Закрыть");
			}
		}
		case dMinSMI2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников");
				}
				if(GosMoney[4] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]) {
						allarmy ++;
						}
					}
					SendErr(playerid, "В бюджете Министертсва Информации недостаточно средств для премии");
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI2,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				GosMoney[3] -= vrachis*price;
				GosMoneySMI2 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил сотрудникам {009966}СМИ"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						SendInf(i, "Деньги будут добавлены к зарплате");
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinSMI6:
		{
 			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10 && pData[d][pSubfraction] == 1)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников Радиоцентр г. Южный");
				}
				if(GosMoney[3] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 1) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Южный\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Южный "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI6,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва информации недостаточно средств для премии");
					return 1;
				}
				GosMoney[3] -= vrachis*price;
				GosMoneySMI3 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10 && pData[d][pSubfraction] == 1)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Радиоцентр г.Южный"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 1) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinSMI7:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Эдово\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Эдово "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10 && pData[d][pSubfraction] == 2)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников Радиоцентр г.Эдово");
				}
				if(GosMoney[3] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 2) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Эдово\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Эдово "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI7,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва информации недостаточно средств для премии");
					return 1;
				}
				GosMoney[3] -= vrachis*price;
				GosMoneySMI4 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10 && pData[d][pSubfraction] == 2)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Радиоцентр г.Эдово"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 2) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}
		case dMinSMI8:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 10 &&  pData[playerid][pRank] == 11)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10 && pData[d][pSubfraction] == 3)
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало сотрудников Радиоцентр г.Арзамас");
				}
				if(GosMoney[3] < vrachis*price)
				{
					new allarmy;
					foreach(new dd : Player) {
						if(pData[dd][pFraction] == pData[playerid][pFraction]  && pData[dd][pSubfraction] == 3) {
						allarmy ++;
						}
					}
					format(String256, sizeof(String256), ""cWH"Министерство информации");
					format(String1024, sizeof(String1024), "\n\n"cWH"Введите сумму премии для подразделения Радиоцентр г.Арзамас\nПремию подразделению можно выдать 2 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\nСотрудников подразделения Радиоцентр г.Арзамас "cGR"Online:"cWH" %d\n", allarmy);
					SPD(playerid,dMinSMI8,DIALOG_STYLE_INPUT,String256, String1024 ,"Выдать","Отмена");
					SendErr(playerid, "В бюджете Министертсва информации недостаточно средств для премии");
					return 1;
				}
				GosMoney[3] -= vrachis*price;
				GosMoneySMI5 ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 10 && pData[d][pSubfraction] == 3)
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил подразделению {009966}Радиоцентр г.Арзамас"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						if( pData[i][pSubfraction] == 3) {
							SendInf(i, "Деньги будут добавлены к зарплате");
						}
						}
 				}
				SaveNewsMoney();
 			}
		}

		case dGlavMed:
		{
			if(!response) return 1;
			format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
			switch(listitem) {
				case 0: {
					format(String1024,sizeof(String1024), "\n\nВведите количество заказываемых медикаментов\nЦена за 1 ед. медикаментов: "cGR"P50"cWH"\n\
							Доставка медикаментов происхсодит на специальном фургоне\nСклад медикаментов находится в п.Батырево ({CC99CC}/gps - Работы"cWH")\nДоставить медикаменты может любой врач\n\
							Деньги за медикаменты будут списаны с бюджетных денег больницы\nМаксимальное общее количество заказанных медикаментов: {CC99CC}5000ед.\n\n");
					SPD(playerid,dGlavMed2,DIALOG_STYLE_INPUT,String256,String1024,"Купить","Отмена");
				}
				case 1: {
					if(BolnicaMoneyEX2[ pData[playerid][pSubfraction]-1 ] >= 1)
					{
						return 	SendErr(playerid, "Вы уже выдали премии всем сотрудникам за сегодня");
					}
					SPD(playerid,dGlavMed3,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\n\n","Выдать","Отмена");
				}
				case 2: {
					if(BolnicaMoneyEX[ pData[playerid][pSubfraction]-1 ] >= 3)
					{
						return 	SendErr(playerid, "Вы уже выдали 3 премии за сегодня");
					}
					SPD(playerid,dGlavMed4,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для одного сотрудника\nРазовую премию сотруднику можно выдать 3 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P9000"cWH"\n\n","Выдать","Отмена");
				}

			}
		}
		case dGlavMed4:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 && IsALeader(playerid) && pData[playerid][pSubfraction] != 0)
			{
				if(BolnicaMoneyEX[ pData[playerid][pSubfraction]-1 ] >= 3)
				{
					return 	SendErr(playerid, "Вы уже выдали 3 премии за сегодня");
				}
				new price = strval(inputtext);
				if(price < 100 || price > 9000) {
					SendErr(playerid, "Неверная сумма");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					SPD(playerid,dGlavMed4,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для одного сотрудника\nРазовую премию сотруднику можно выдать 3 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P9000"cWH"\n\n","Выдать","Отмена");
					return 1;
				}
				SetPVarIntNew(playerid, "premmoney", price);
				new want_text[64];
				format(String4096, sizeof(String4096), "");
				new Playerss;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[playerid][pSubfraction] == pData[ d ][pSubfraction])
					{
					format(want_text,sizeof(want_text), "{FFDD99}%d."cWH" %s\n", Playerss+1,pData[d][pNickname]);
					format(String4096, sizeof(String4096), "%s%s",String4096,want_text);
					BolnicaMenuPl[ pData[playerid][pSubfraction]-1 ][Playerss] = d;
					Playerss ++;
					if(Playerss >= 30) break;
					}
				}
				if(Playerss < 1) return SendErr(playerid, "Нет сотрудников");
				SPD(playerid, dGlavMed5, DIALOG_STYLE_LIST, ""cBLUE"Выдача премии сотруднику", String4096, "Выдать", "Отмена");
				return 1;
			}
		}
		case dGlavMed5:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 && IsALeader(playerid) && pData[playerid][pSubfraction] != 0)
			{
				new price = GetPVarIntNew(playerid, "premmoney");
				if(price < 100 || price > 9000) {
					SendErr(playerid, "Неверная сумма");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					SPD(playerid,dGlavMed4,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для одного сотрудника\nРазовую премию сотруднику можно выдать 3 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P9000"cWH"\n\n","Выдать","Отмена");
					return 1;
				}
				if(BolnicaMoney[pData[playerid][pSubfraction]-1] < price)
				{
					SendErr(playerid, "В бюджете больницы не достаточно средств для премии");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					SPD(playerid,dGlavMed4,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для одного сотрудника\nРазовую премию сотруднику можно выдать 3 раза в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P9000"cWH"\n\n","Выдать","Отмена");
					return 1;
				}

				new playid = BolnicaMenuPl[ pData[playerid][pSubfraction]-1 ][ listitem ];
				if(playid < 0 || playid >= MAX_PLAYERS || pData[playid][pFraction] != 2 || pData[playid][pSubfraction] != pData[playerid][pSubfraction])
				{
					SendErr(playerid, "Выбранный игрок вышел");
					return 1;
				}
				pData[playid][pSalary] += price;
 				UpdatePlayerData(playid, "salary", pData[playid][pSalary]);
				BolnicaMoney[pData[playerid][pSubfraction]-1] -= price;
				BolnicaMoneyEX[ pData[playerid][pSubfraction]-1 ] ++;

 				if(pData[playerid][pSubfraction] == 1) {
				format(String256,sizeof(String256),""cWH"[{F2FFA8}Южный"cWH"] {D4CCFF}%s"cWH" выдал премию сотруднику {D4CCFF}%s"cWH" в размере {00994D}%d рублей",pData[playerid][pNickname],pData[playid][pNickname],price);
				}
 				else if(pData[playerid][pSubfraction] == 2) {
				format(String256,sizeof(String256),""cWH"[{F2FFA8}Арзамас"cWH"] {D4CCFF}%s"cWH" выдал премию сотруднику {D4CCFF}%s"cWH" в размере {00994D}%d рублей",pData[playerid][pNickname],pData[playid][pNickname],price);
				}
 				else if(pData[playerid][pSubfraction] == 3) {
				format(String256,sizeof(String256),""cWH"[{F2FFA8}Батырево"cWH"] {D4CCFF}%s"cWH" выдал премию сотруднику {D4CCFF}%s"cWH" в размере {00994D}%d рублей",pData[playerid][pNickname],pData[playid][pNickname],price);
				}

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction] &&
					pData[i][pSubfraction] == pData[playerid][pSubfraction]) SCM(i,0xACE600FF,String256);// 4a7e2f
 				}
				SaveNewsMoney();
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Южный\n\n\n"cGR"%d рублей",BolnicaMoney[0]);
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ 0 ] , CWHITE , String256);
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Арзамас\n\n\n"cGR"%d рублей",BolnicaMoney[1]);
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ 1 ] , CWHITE , String256);
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}п.Батырево\n\n\n"cGR"%d рублей",BolnicaMoney[2]);
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ 2 ] , CWHITE , String256);

			}
		}
		case dGlavMed3:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 && IsALeader(playerid) && pData[playerid][pSubfraction] != 0)
			{
				new price = strval(inputtext);
				if(price < 100 || price > 3000) {
					SendErr(playerid, "Неверная сумма");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					SPD(playerid,dGlavMed3,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\n\n","Выдать","Отмена");
					return 1;
				}
				new vrachis;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[playerid][pSubfraction] == pData[ d ][pSubfraction])
					{
						vrachis ++;
					}
				}
				if(vrachis < 2) {
 					return SendErr(playerid, "В данный момент слишком мало врачей");
				}
				if(BolnicaMoney[pData[playerid][pSubfraction]-1] < vrachis*price)
				{
					SendErr(playerid, "В бюджете больницы не достаточно средств для премии");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					SPD(playerid,dGlavMed3,DIALOG_STYLE_INPUT,String256,"\n\n"cWH"Введите сумму премии для сотрудников\nПремию всем сотрудникам можно выдать раз в сутки\nСумма премии: от "cGR"P100"cWH" до "cGR"P3000"cWH"\n\n","Выдать","Отмена");
					return 1;
				}
				BolnicaMoney[pData[playerid][pSubfraction]-1] -= vrachis*price;
				BolnicaMoneyEX2[ pData[playerid][pSubfraction]-1 ] ++;
				foreach(new d: logged_players)
				{
					if(pData[d][pFraction] == 2 && pData[playerid][pSubfraction] == pData[ d ][pSubfraction])
					{
						pData[d][pSalary] += price;
		 				UpdatePlayerData(d, "salary", pData[d][pSalary]);
					}
				}
 				if(pData[playerid][pSubfraction] == 1) {
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил сотрудникам больницы {F2FFA8}г.Южный"cWH" премию в размере {00994D}%d рублей.",pData[playerid][pNickname],price);
				}
 				else if(pData[playerid][pSubfraction] == 2) {
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил сотрудникам больницы {F2FFA8}г.Аразамас"cWH" премию в размере {00994D}%d рублей",pData[playerid][pNickname],price);
				}
 				else if(pData[playerid][pSubfraction] == 3) {
				format(String256,sizeof(String256),"{D4CCFF}%s"cWH" назначил сотрудникам больницы {F2FFA8}п.Батырево"cWH" премию в размере {00994D}%d рублей",pData[playerid][pNickname],price);
				}

				foreach(new i: logged_players)
				{
					if(IsPlayerConnected(i) && pData[i][pFraction] == pData[playerid][pFraction] &&
					pData[i][pSubfraction] == pData[playerid][pSubfraction]) {
						SCM(i,0xACE600FF,String256);// 4a7e2f
						SendInf(i, " Деньги будут добавлены к зарплате");
						}
 				}
				SaveNewsMoney();
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Южный\n\n\n"cGR"%d рублей",BolnicaMoney[0]);
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ 0 ] , CWHITE , String256);
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Аразамас\n\n\n"cGR"%d рублей",BolnicaMoney[1]);
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ 1 ] , CWHITE , String256);
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}п.Батырево\n\n\n"cGR"%d рублей",BolnicaMoney[2]);
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ 2 ] , CWHITE , String256);

 			}
		}
		case dGlavMed2:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] == 2 && IsALeader(playerid) && pData[playerid][pSubfraction] != 0)
			{
				new price = strval(inputtext);
				if(price < 0 || price > 5000) {
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					format(String1024,sizeof(String1024), "\n\nВведите количество заказываемых медикаментов\nЦена за 1 ед. медикаментов: "cGR"P50"cWH"\n\
							Доставка медикаментов происхсодит на специальном фургоне\nСклад медикаментов находится в п.Батырево ({CC99CC}/gps - Работы"cWH")\nДоставить медикаменты может любой врач\n\
							Деньги за медикаменты будут списаны с бюджетных денег больницы\nМаксимальное общее количество заказанных медикаментов: {CC99CC}5000ед.\n\n");
					SPD(playerid,dGlavMed2,DIALOG_STYLE_INPUT,String256,String1024,"Купить","Отмена");
					return 1;
				}
				if(price*50 > BolnicaMoney[pData[playerid][pSubfraction]-1]) {
					SendErr(playerid, "В бюджете вашей больницы не достаточно денег");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					format(String1024,sizeof(String1024), "\n\nВведите количество заказываемых медикаментов\nЦена за 1 ед. медикаментов: "cGR"P50"cWH"\n\
							Доставка медикаментов происхсодит на специальном фургоне\nСклад медикаментов находится в п.Батырево ({CC99CC}/gps - Работы"cWH")\nДоставить медикаменты может любой врач\n\
							Деньги за медикаменты будут списаны с бюджетных денег больницы\nМаксимальное общее количество заказанных медикаментов: {CC99CC}5000ед.\n\n");
					SPD(playerid,dGlavMed2,DIALOG_STYLE_INPUT,String256,String1024,"Купить","Отмена");
					return 1;
				}
				if(BolnicaSkladZak[pData[playerid][pSubfraction]-1]+ price> 5000)
				{
					SendErr(playerid, "Вы уже заказали максимальное количество медикаментов");
					format(String256, sizeof(String256), ""cWH"Бюджет больницы "cGR"%d рублей", BolnicaMoney[pData[playerid][pSubfraction]-1]);
					format(String1024,sizeof(String1024), "\n\nВведите количество заказываемых медикаментов\nЦена за 1 ед. медикаментов: "cGR"P50"cWH"\n\
							Доставка медикаментов происхсодит на специальном фургоне\nСклад медикаментов находится в п.Батырево ({CC99CC}/gps - Работы"cWH")\nДоставить медикаменты может любой врач\n\
							Деньги за медикаменты будут списаны с бюджетных денег больницы\nМаксимальное общее количество заказанных медикаментов: {CC99CC}5000ед.\n\n");
					SPD(playerid,dGlavMed2,DIALOG_STYLE_INPUT,String256,String1024,"Купить","Отмена");
					return 1;
				}
				BolnicaSkladZak[pData[playerid][pSubfraction]-1] += price;
				BolnicaMoney[pData[playerid][pSubfraction]-1] -= price*50;
				SaveNewsMoney();
				if(pData[playerid][pSubfraction] == 1) {
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Южный\n\n\n"cGR"%d рублей",BolnicaMoney[0]);
				}
				else if(pData[playerid][pSubfraction] == 3) {
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}п.Батырево\n\n\n"cGR"%d рублей",BolnicaMoney[2]);
				}
				else if(pData[playerid][pSubfraction] == 2) {
				format(String256, sizeof(String256), ""cBLUE"Бюджет больницы\n{D9B3FF}г.Аразамас\n\n\n"cGR"%d рублей",BolnicaMoney[1]);
				}
			 	UpdateDynamic3DTextLabelText(BolnicaText2[ pData[playerid][pSubfraction]-1 ] , CWHITE , String256);
			 	SendSucc(playerid, "Вы успешно заказали медикаменты. Доставьте их со склада медикаментов (/gps - Работы) на специальном фургоне");
				SaveNewsMoney();
 			}
		}


		case dMAFBizz:
		{
			if(!response) return 1;

		}

		case dLeaderskin:
		{
			if(!response) return 1;
			new fractionid = listitem;

			SetPVarIntNew(playerid,"actfraction",fractionid);

			new mes[300];
			for(new i;i<12+8;i++)
			{
				new skinid = gFractionSkin[fractionid][i];
				if(!skinid) break;
				if(!i) format(mes,sizeof(mes),""cBLUE"-"cWH"Скин %d [%d]",i+1,skinid);
				else format(mes,sizeof(mes),"%s\n"cBLUE"-"cWH"Скин %d [%d]",mes,i+1,skinid);
			}
			new actplayerid = GetPVarIntNew(playerid,"actplayerid");
			SPD(playerid,dMakeleader,2,pData[actplayerid][pNickname],mes,"OK","Отмена");
		}
		case dWeather:
		{
			if(response)
			{
				switch (listitem)
				{
				case 0: SetWeather(1);
				case 1: SetWeather(2);
				case 2: SetWeather(3);
				case 3: SetWeather(4);
				case 4: SetWeather(5);
				case 5: SetWeather(6);
				case 6: SetWeather(7);
				case 7: SetWeather(8);
				case 8: SetWeather(9);
				case 9: SetWeather(10);
				case 10: SetWeather(11);
				case 11: SetWeather(12);
				case 12: SetWeather(13);
				case 13: SetWeather(14);
				case 14: SetWeather(15);
				case 15: SetWeather(16);
				case 16: SetWeather(17);
				case 17: SetWeather(18);
				case 18: SetWeather(19);
				case 19: SetWeather(20);
				case 20: SetWeather(21);
				case 21: SetWeather(22);
				case 22: SetWeather(23);
				case 23: SetWeather(26);
				case 24: SetWeather(27);
				case 25: SetWeather(29);
				case 26: SetWeather(30);
				case 27: SetWeather(32);
				case 28: SetWeather(33);
				case 29: SetWeather(34);
				case 30: SetWeather(35);
				case 31: SetWeather(36);
				case 32: SetWeather(38);
				case 33: SetWeather(39);
				case 34: SetWeather(40);
				case 35: SetWeather(42);
				case 36: SetWeather(43);
				case 37: SetWeather(44);
				case 38: SetWeather(45);
				case 39: SetWeather(81);
				case 40: SetWeather(91);
				case 41: SetWeather(200);
				}
				SCM(playerid, COLOR_ORANGE, "Погода установлена");
			}
		}
		case dSellZone:
		{
			if(!response) return 1;
			if(listitem+3 == pData[playerid][pFraction]) return SendErr(playerid, "Вы указали свою организацию");
			new leader = -1;
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(pData[i][pFraction] == listitem+3) {
					if(IsALeader(i)) {
				 		if(GetPlayerDistanceToPlayer(playerid,i) <= 3.0) {
	   						leader = i;
							break;
						}
					}
				}
			}
			if(leader == -1) return SendErr(playerid, "Лидер выбранной ОПГ должен находиться рядом с Вами");
			SetPVarIntNew(playerid, "sellzonelead", leader);
			SetPVarIntNew(playerid, "sellzone",listitem+3);
			SPD(playerid, dSellZone2, DIALOG_STYLE_INPUT,"Продажа территории", "Укажите предлагаемую цену для продажи своей территории\n(Цена может быть от 1 до 1.000.000P","Выбор","Отмена");
			return 1;
		}
		case dSellZone2:
		{
			if(!response) return 1;
			if(IsCapture == 1) return SendErr(playerid, "Вы не можете продать территорию во время капта");
			new price = strval(inputtext);
			if(price < 1 || price > 1000000) return SPD(playerid, dSellZone2, DIALOG_STYLE_INPUT,"Продажа территории", "Укажите предлагаемую цену для продажи своей территории\n(Цена может быть от 1 до 1.000.000P","Выбор","Отмена");
			new lead = GetPVarIntNew(playerid, "sellzonelead");
			new faction = GetPVarIntNew(playerid, "sellzone");
			if(!IsALeader(lead) || pData[lead][pFraction] != faction) return SendErr(playerid, "Лидер выбранной организации покинул игру");
			if(GetPlayerDistanceToPlayer(playerid,lead) > 3.0) return SendErr(playerid, "Вы находитесь далеко от лидера указанной ОПГ");
			for(new i=1;i<=TOTALGZ;i++)
			{
				if(PlayerToKvadrat(playerid,GZMZ[i][gCoords][0], GZMZ[i][gCoords][1],GZMZ[i][gCoords][2],GZMZ[i][gCoords][3]) && ZoneOnBattle[i] == 0)
				{
					if((i == 62 || i == 45 || i == 69 || i == 75 || i == 42) && pData[playerid][pAdmin] < 2) return SCM(playerid,COLOR_GREY, "Эту территорию нельзя продать!");
					if(GZMZ[i][gFrak] == pData[playerid][pFraction]) {
						SetPVarIntNew(playerid,"gzoffee",lead);
						SetPVarIntNew(lead,"gzoffee",lead);
						SetPVarIntNew(lead,"gzoffer",playerid);
						SetPVarIntNew(lead,"gzprice",price);
						SetPVarIntNew(lead,"gzvalue",i);
						new zStr[150];
						format(zStr, 150, "Вы предложили "cWH"%s"cBLUE" купить у вас гангзону"cBLUE" за "cWH"%d рублей",pData[lead][pNickname],price);
						SCM(playerid, CINFO, zStr);
						format(zStr, 150, ""cWH"%s "cBLUE"предложил Вам купить его гангзону за "cWH"%d рублей",pData[playerid][pNickname],price);
						SCM(lead, CINFO, zStr);
						SCM(lead,CINFO,"Чтобы согласиться нажмите "cBLUE"Y, "cBLUE"иначе - "cLRED"N");
						return 1;
					}
					break;
				}
			}
			SendErr(playerid, "Вы должны находиться на своей территории");
			return 1;
		}
		case dMakeleader:
		{
			if(!response) return 1;
			new actplayerid = GetPVarIntNew(playerid,"actplayerid");
			new fractionid = GetPVarIntNew(playerid,"actfraction");
			new skinid = gFractionSkin[fractionid][listitem];
			new rank = gFractionRankCount[fractionid];
			new query[128];
			format(query,sizeof(query),"UPDATE `accounts` SET `fraction` = '%d', rank = '%d', `fractionskin` = '%d', `subfraction` = '0' WHERE `id` = '%d'",fractionid+1,rank,skinid,pData[actplayerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			pData[actplayerid][pFraction] = fractionid+1;
			pData[actplayerid][pRank] = rank;
			pData[actplayerid][pFractionSkin] = skinid;
			pData[actplayerid][pSubfraction] = 0;
			pData[actplayerid][pJob] = 0;
			SetPlayerColor(actplayerid,gFractionColor[fractionid]);
			new mes[128];
			format(mes,sizeof(mes),"%s "cWH"был назначен лидером фракции "cBLUE"\"%s\"",pData[actplayerid][pNickname],gFractionName[fractionid]);
			SCM(playerid,CYELLOW,mes);
			format(mes,sizeof(mes),"Администратор %s назначил вас лидером фракции \"%s\"",pData[playerid][pNickname],gFractionName[fractionid]);
			SCM(actplayerid,CINFO,mes);
			format(mes,sizeof(mes),"Администратор %s назначил %s лидером фракции \"%s\"",pData[playerid][pNickname],pData[actplayerid][pNickname],gFractionName[fractionid]);
			AdminChat(0xff0000ff,mes);

		}
		case dInvite:
		{
			if(!response) {  SetPVarIntNew(playerid,"actinplayerid",0);  return 1; }
			new fractionid = pTemp[playerid][pOfferFractionid];
			if(fractionid < 0) {  SetPVarIntNew(playerid,"actinplayerid",0);  return 1; }
			new offer = pTemp[playerid][pOfferFraction];
 			new mes[300];
			for(new i;i<12+8;i++)
			{
				new skinid = gFractionSkin[fractionid][i];
				if(!skinid) break;
				if(!i) format(mes,sizeof(mes),"Скин %d [%d]",i+1,skinid);
				else format(mes,sizeof(mes),"%s\nСкин %d [%d]",mes,i+1,skinid);
			}
			SCM(playerid,CINFO,"Ждите, пока лидер выберет одежду для Вас");
			SPD(offer,dInviteSkin,2,pData[playerid][pNickname],mes,"Принять","");
		}
		case dInviteSkin:
		{
			if(!response) {  SetPVarIntNew(playerid,"actinplayerid",0);  return 1; }
			new actplayerid = GetPVarIntNew(playerid,"actinplayerid")-1;
 			if(actplayerid < 0) return 1;

			SetPVarIntNew(playerid, "actinplayerid",0);
			if(pTemp[actplayerid][pOfferFractionid] >= 3 && pTemp[actplayerid][pOfferFractionid] <= 7)
			{
				if(pData[actplayerid][pLevel] < 2 ) return SendErr(playerid, "У игрока должен быть 2 уровень");
			}
			else
			{
				if(pData[actplayerid][pLevel] < 3) return SendErr(playerid, "У игрока должен быть 3 уровень");
			}
			if(!IsPlayerConnected(actplayerid)) return SendErr(playerid, "Неверный ID игрока");
			else if(pData[actplayerid][pFraction]) return SendErr(playerid, "Игрок уже состоит в организации");
			if(pData[actplayerid][pWarnc]) return SendErr(playerid, "У игрока есть варн");

			if(GetPlayerDistanceToPlayer(playerid,actplayerid) > 5.0 || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(actplayerid)) return SendErr(playerid, "Вы далеко друг от друга");


			new fractionid = pTemp[actplayerid][pOfferFractionid];
			new skinid = gFractionSkin[fractionid][listitem];
			if(pData[playerid][pFraction] != fractionid+1) return SendErr(playerid, "Ошибка #001");
			pData[actplayerid][pFraction] = fractionid+1;
			pData[actplayerid][pRank] = 1;
			pData[actplayerid][pFractionSkin] = skinid;
			pData[actplayerid][pSubfraction] = pData[playerid][pSubfraction];
			pData[actplayerid][pJob] = 0;
			SetPlayerColor(actplayerid,gFractionColor[fractionid]);


			UpdatePlayerData(actplayerid,"fraction",pData[actplayerid][pFraction]);
			UpdatePlayerData(actplayerid,"rank",pData[actplayerid][pRank]);

			set_player_skin(actplayerid, pData[actplayerid][pFractionSkin]);

			pTemp[playerid][odetcol] = 0;
 			format(String256,sizeof(String256),"UPDATE `accounts` SET `fraction` = '%d', rank = '1', `fractionskin` = '%d', `subfraction` = '%d', `job` = '0' WHERE `id` = '%d'",fractionid+1,skinid,pData[playerid][pSubfraction],pData[actplayerid][pMysqlID]);
			sql_queryEx(zConn, String256, QUERY_THREADED);
			UpdatePlayerData(actplayerid,"subfraction",pData[actplayerid][pSubfraction]);
			new mes[128];
			format(mes,sizeof(mes),"%s был принят во фракцию \"%s\"",pData[actplayerid][pNickname],gFractionName[fractionid]);
			SCM(playerid,CINFO,mes);
//			print(mes);
			format(mes,sizeof(mes),"Вы были приняты во фракцию \"%s\"",gFractionName[fractionid]);
			SCM(actplayerid,CINFO,mes);

		}

		case dSetDivision:
		{
			if(!response) return 1;
			if(pData[playerid][pFraction] != 9 && pData[playerid][pRank] < 9) return SendErr(playerid, "Данная команда вам не доступна");
			if(GetPVarIntNew(playerid,"actgrplayerid") < 1) return 1;
			new actplayerid = GetPVarIntNew(playerid,"actgrplayerid")-1;
			if(pData[actplayerid][pFraction] != 9) return SendErr(playerid, "Данный игрок не находится в вашей фракции");
			UpdatePlayerData(actplayerid,"dvs",listitem);
			pData[actplayerid][pDivision] = listitem;
			new mes[128];
			if(!listitem)
			{
				format(mes,sizeof(mes),"Вы убрали подразделение для %s",pData[actplayerid][pNickname]);
				SCM(playerid,CINFO,mes);
				format(mes,sizeof(mes),"%s убрал Вам подразделение",pData[playerid][pNickname]);
				SCM(actplayerid,CINFO,mes);
			}
			else {
				format(mes,sizeof(mes),"Вы установили %s подразделение %s",pData[actplayerid][pNickname],Division[listitem-1]);
				SCM(playerid,CINFO,mes);
				format(mes,sizeof(mes),"%s установил Вам подразделение %s",pData[playerid][pNickname],Division[listitem-1]);
				SCM(actplayerid,CINFO,mes);
			}
		}

		case dSetRank:
		{
			if(!response) return 1;
			if(GetPVarIntNew(playerid,"actgrplayerid") < 1) return 1;
			new actplayerid = GetPVarIntNew(playerid,"actgrplayerid")-1;

			new fractionid = pData[playerid][pFraction] - 1;
			if(!IsPlayerConnected(playerid)) return 1;
			if(pData[playerid][pFraction] != pData[actplayerid][pFraction]) return 1;
			if(pData[playerid][pSubfraction] > 0)
			{
				if(pData[actplayerid][pSubfraction] != pData[playerid][pSubfraction]) return 1;
			}
			new rank = listitem+1;
			new action[16];
			new action2[16];
			if(rank == pData[actplayerid][pRank]) return 1;
			else if(rank < pData[actplayerid][pRank]) { action = "понизили"; action2 = "понизил"; }
			else { action = "повысили";  action2 = "повысил"; }
			UpdatePlayerData(actplayerid,"rank",rank);
			pData[actplayerid][pRank] = rank;
			new mes[128];
			format(mes,sizeof(mes),"Вы %s %s до ранга: \"%s\"",action,pData[actplayerid][pNickname],gFractionRankName[fractionid][rank-1]);
			if(fractionid+1 == 11 && !pData[actplayerid][pSubfraction] && rank <= 9)
				format(mes,sizeof(mes),"Вы %s %s до ранга: \"%s\"",action,pData[actplayerid][pNickname],gPrezRankName[rank-1]);
			if(fractionid+1 == 8 && pData[actplayerid][pSubfraction] == 3 && rank <= 12)
				format(mes,sizeof(mes),"Вы %s %s до ранга: \"%s\"",action,pData[actplayerid][pNickname],gVmfRankName[rank-1]);
			if(fractionid+1 == 8 && rank <= 12) { UpdatePlayerData(actplayerid,"armyrank",rank); pData[actplayerid][pArmyRank] = rank;}

			SCM(playerid,CINFO,mes);
			format(mes,sizeof(mes),"%s %s Вас до ранга: \"%s\"",pData[playerid][pNickname],action2,gFractionRankName[fractionid][rank-1]);
			if(fractionid+1 == 11 && !pData[actplayerid][pSubfraction] && rank <= 9)
				format(mes,sizeof(mes),"%s %s Вас до ранга: \"%s\"",pData[playerid][pNickname],action2,gPrezRankName[rank-1]);
			if(fractionid+1 == 8 &&  pData[actplayerid][pSubfraction] == 3 && rank <= 12)
				format(mes,sizeof(mes),"%s %s Вас до ранга: \"%s\"",pData[playerid][pNickname],action2,gVmfRankName[rank-1]);

			SCM(actplayerid,CINFO,mes);
		}
		case dFractionSkin:
		{
			if(!response) return 1;
			new actplayerid = GetPVarIntNew(playerid,"actplayerid");
			if(!IsPlayerConnected(actplayerid) || pData[actplayerid][pFraction] != pData[playerid][pFraction]) return 1;

			if(GetPlayerState(actplayerid) > 1 && GetPlayerState(actplayerid) < 4)			{
			SCM(playerid,CRED,"Игрок находится в автомобиле");
			return 1;																}
			if(GetPlayerSpecialAction(actplayerid) == SPECIAL_ACTION_ENTER_VEHICLE )			{
			SCM(playerid,CRED,"Игрок находится в автомобиле");
			return 1;																}

			new fractionid = pData[actplayerid][pFraction]-1;
			new skinid = gFractionSkin[fractionid][listitem];
			if(skinid == pData[actplayerid][pFractionSkin]) return 1;
			new mes[128];
			format(mes,sizeof(mes),"%s Выдал Вам новую фракционную одежду",pData[playerid][pNickname]);
			SCM(actplayerid,CINFO,mes);
			format(mes,sizeof(mes),"%s получил новую фракционную одежду",pData[actplayerid][pNickname]);
			SCM(playerid,CINFO,mes);
			UpdatePlayerData(actplayerid,"fractionskin",skinid);
			pData[actplayerid][pFractionSkin] = skinid;

			set_player_skin(actplayerid, skinid);
		}

		case dRestoran:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						SPD(playerid,dRestoranMenu1, DIALOG_STYLE_TABLIST_HEADERS,!""cBLUE"Ресторан:", "\
						"cGREY"Продукт\t"cGREY"Стоимость\n\
						"cBLUE"1. "cWH"Сок\t"cGR"150 рублей\n\
						"cBLUE"2. "cWH"Шампанское\t"cGR"1500 рублей\n\
						"cBLUE"3. "cWH"Вино\t"cGR"800 рублей\n\
						"cBLUE"4. "cWH"Виски\t"cGR"450 рублей\n\
						"cBLUE"5. "cWH"Мартини\t"cGR"850 рублей",!"Купить", !"Назад");
					}
					case 1:
					{
						SPD(playerid,dRestoranMenu2,DIALOG_STYLE_TABLIST_HEADERS,!""cBLUE"Ресторан:", "\
						"cGREY"Продукт\t"cGREY"Стоимость\n\
						"cBLUE"1. "cWH"Салат из крабовых палочек\t"cGR"450 рублей\n\
						"cBLUE"2. "cWH"Оливье\t"cGR"350 рублей\n\
						"cBLUE"3. "cWH"Курица с ананасами\t"cGR"500 рублей\n\
						"cBLUE"4. "cWH"Греческий салат\t"cGR"650 рублей",!"Купить", !"Назад");
					}
					case 2:
					{
						SPD(playerid,dRestoranMenu3,DIALOG_STYLE_TABLIST_HEADERS,!""cBLUE"Ресторан:", "\
						"cGREY"Продукт\t"cGREY"Стоимость\n\
						"cBLUE"1. "cWH"Фуа-Гра с цитрусовым перцем\t"cGR"650 рублей\n\
						"cBLUE"2. "cWH"Ризотто\t"cGR"765 рублей\n\
						"cBLUE"3. "cWH"Свинная отбивная\t"cGR"430 рублей\n\
						"cBLUE"4. "cWH"Плов\t"cGR"320 рублей\n\
						"cBLUE"5. "cWH"Макароны по-флотски\t"cGR"400 рублей",!"Купить", !"Назад");
					}
					case 3:
					{
						SPD(playerid,dRestoranMenu4,DIALOG_STYLE_TABLIST_HEADERS,!""cBLUE"Ресторан:", "\
						"cGREY"Продукт\t"cGREY"Стоимость\n\
						"cBLUE"1. "cWH"Тирамиссу\t"cGR"650 рублей\n\
						"cBLUE"2. "cWH"Фруктовое мороженное\t"cGR"85 рублей\n\
						"cBLUE"3. "cWH"Клубника со сливками\t"cGR"78 рублей",!"Купить", !"Назад");
					}
				}
			}
			else
			{
				return 1;
			}
		}
		case dShopAcc:
		{
			if(!response) return 1;
			if(listitem >=0 && listitem < 4)
			{
			  SetPVarIntNew(playerid,"BuyClass",listitem+1);
	 		  SetPVarIntNew(playerid,"BuyInvID",-1);
			}
		}
		case DIALOG_BUY_FASTFOOD_PRODUCT:
		{
			if(!response)
				return true;

			switch(listitem)
			{
				case 0:
				{
					if(GetPlayerMoneyEx(playerid) < BUISNESS_FASTFOOD_1_PRICE)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}

					new
						id = GetPVarIntNew(playerid, "buisnes_enter_id");


					if(id < 0)
						return true;

					if(pData[playerid][hungry]+2 < 100)
					{
						pData[playerid][hungry] += 2;
						check_quest_prize_start(playerid, 16);
						show_hud_hungry(playerid);
						player_eat_food(playerid, 3);
					}
					else
					{

					}

					buy_buisnes_all(BUISNES_FASTFOOD, id, BUISNESS_FASTFOOD_1_PRICE);

					buisness[id][buisnes_count_prod] -= 2;



				}
				case 1:
				{
					if(GetPlayerMoneyEx(playerid) < BUISNESS_FASTFOOD_2_PRICE)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}

					new
						id = GetPVarIntNew(playerid, "buisnes_enter_id");


					if(id < 0)
						return true;

					if(pData[playerid][hungry]+5 < 100)
					{
						pData[playerid][hungry] += 5;
						show_hud_hungry(playerid);
						check_quest_prize_start(playerid, 16);
						player_eat_food(playerid, 3);
					}
					else
					{

					}

					buy_buisnes_all(BUISNES_FASTFOOD, id, BUISNESS_FASTFOOD_2_PRICE);

					buisness[id][buisnes_count_prod] -= 2;



				}
				case 2:
				{
					if(GetPlayerMoneyEx(playerid) < BUISNESS_FASTFOOD_3_PRICE)
						return SendErr(playerid, "У вас недостаточно денег!");

					new
						id = GetPVarIntNew(playerid, "buisnes_enter_id");

					if(id < 0)
						return true;

					if(pData[playerid][hungry]+7 < 100)
					{
						pData[playerid][hungry] += 7;
						show_hud_hungry(playerid);
						check_quest_prize_start(playerid, 16);
						player_eat_food(playerid, 3);
					}
					else
					{

					}

					buy_buisnes_all(BUISNES_FASTFOOD, id, BUISNESS_FASTFOOD_3_PRICE);

					buisness[id][buisnes_count_prod] -= 2;



				}
				case 3:
				{
					if(GetPlayerMoneyEx(playerid) < BUISNESS_FASTFOOD_4_PRICE)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}

					new
						id = GetPVarIntNew(playerid, "buisnes_enter_id");

					if(id < 0)
						return true;

					if(pData[playerid][hungry]+10 < 100)
					{
						pData[playerid][hungry] += 10;
						show_hud_hungry(playerid);
						check_quest_prize_start(playerid, 16);
						player_eat_food(playerid, 3);
					}
					else
					{

					}

					buisness[id][buisnes_count_prod] -= 2;

					buy_buisnes_all(BUISNES_FASTFOOD, id, BUISNESS_FASTFOOD_4_PRICE);




				}
				case 4:
				{
					if(GetPlayerMoneyEx(playerid) < 19)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У вас недостаточно денег!");
					}

					new
						id = GetPVarIntNew(playerid, "buisnes_enter_id");

					if(id < 0)
						return true;

					if(pData[playerid][hungry]+10 < 100)
					{
						pData[playerid][hungry] += 10;
						show_hud_hungry(playerid);
						check_quest_prize_start(playerid, 16);
						player_eat_food(playerid, 3);
					}
					else
					{

					}

					buisness[id][buisnes_count_prod] -= 2;

					buy_buisnes_all(BUISNES_FASTFOOD, id, 19);


				}
			}

			return true;
		}
		case dRestoranMenu1:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(GetPlayerMoneyEx(playerid) < 150)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 1)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+1 < 100)
						{
							pData[playerid][hungry] += 1;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 2);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 150);

						buisness[id][buisnes_count_prod] -= 1;

						give_money(playerid, -150, "Покупка сока");

					}
					case 1:
					{
						if(GetPlayerMoneyEx(playerid) < 1500)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 1)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+2 < 100)
						{
							pData[playerid][hungry] += 2;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 1);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 1250);

						buisness[id][buisnes_count_prod] -= 1;

						give_money(playerid, -1250, "Покупка шампанского");


					}
					case 2:
					{
						if(GetPlayerMoneyEx(playerid) < 800)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+3 < 100)
						{
							pData[playerid][hungry] += 3;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 1);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 600);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -800, "Покупка вина");

					}
					case 3:
					{

						if(GetPlayerMoneyEx(playerid) < 450)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+4 < 100)
						{
							pData[playerid][hungry] += 4;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 1);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 270);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -450, "Покупка виски");

					}
					case 4:
					{

						if(GetPlayerMoneyEx(playerid) < 850)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+5 < 100)
						{
							pData[playerid][hungry] += 5;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 1);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 210);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -850, "Покупка мартини");

					}
				}
			}
			else
			{
				SPD(playerid,dRestoran,2, !""cBLUE"Ресторан:",""cBLUE"1. "cWH"Напитки\n"cBLUE"2. "cWH"Салаты\n"cBLUE"3. "cWH"Горячие блюда\n"cBLUE"4. "cWH"Десерты", !"Выбрать", !"Выход");
				return 1;
			}
		}
		case dRestoranMenu2:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(GetPlayerMoneyEx(playerid) < 450)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+13 < 100)
						{
							pData[playerid][hungry] += 13;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 350);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -450, "Покупка крабового салата");

					}
					case 1:
					{

						if(GetPlayerMoneyEx(playerid) < 350)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+14 < 100)
						{
							pData[playerid][hungry] += 14;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 250);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -350, "Покупка Оливье");

					}
					case 2:
					{
						if(GetPlayerMoneyEx(playerid) < 500)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+13 < 100)
						{
							pData[playerid][hungry] += 13;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 400);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -500, "Покупка курицы с ананасом");

					}
					case 3:
					{
						if(GetPlayerMoneyEx(playerid) < 650)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 2)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+16 < 100)
						{
							pData[playerid][hungry] += 16;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 550);

						buisness[id][buisnes_count_prod] -= 2;

						give_money(playerid, -650, "Покупка греческого салата");

					}
				}
			}
			else
			{
				SPD(playerid,dRestoran,2, !""cBLUE"Ресторан:",""cBLUE"1. "cWH"Напитки\n"cBLUE"2. "cWH"Салаты\n"cBLUE"3. "cWH"Горячие блюда\n"cBLUE"4. "cWH"Десерты", !"Выбрать", !"Выход");
				return 1;
			}
		}
		case dRestoranMenu3:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{

						if(GetPlayerMoneyEx(playerid) < 650)
						{
							SendErr(playerid, "У вас недостаточно денег");
							return 1;
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 4)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+17 < 100)
						{
							pData[playerid][hungry] += 17;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}


						buy_buisnes_all(BUISNES_RESTORAN, id, 530);

						buisness[id][buisnes_count_prod] -= 4;

						give_money(playerid, -650, "Покупка Фуа-Гра");

					}
					case 1:
					{

						if(GetPlayerMoneyEx(playerid) < 765)
						{
							SendErr(playerid, "У вас недостаточно денег");
							return 1;
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 4)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+18 < 100)
						{
							pData[playerid][hungry] += 18;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 740);

						buisness[id][buisnes_count_prod] -= 4;

						give_money(playerid, -765, "Покупка ризотты");

					}
					case 2:
					{

						if(GetPlayerMoneyEx(playerid) < 430)
						{
							SendErr(playerid, "У вас недостаточно денег");
							return 1;
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 4)
							return SCM(playerid, -1, "В ресторане нет продуктов!");


						if(pData[playerid][hungry]+19 < 100)
						{
							pData[playerid][hungry] += 19;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}


						buy_buisnes_all(BUISNES_RESTORAN, id, 400);

						buisness[id][buisnes_count_prod] -= 4;

						give_money(playerid, -430, "Покупка отбивной");

					}
					case 3:
					{

						if(GetPlayerMoneyEx(playerid) < 320)
						{
							SendErr(playerid, "У вас недостаточно денег");
							return 1;
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 4)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+20 < 100)
						{
							pData[playerid][hungry] += 20;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}


						buy_buisnes_all(BUISNES_RESTORAN, id, 300);

						buisness[id][buisnes_count_prod] -= 4;

						give_money(playerid, -320, "Покупка плова");

	  				}
					case 4:
					{

						if(GetPlayerMoneyEx(playerid) < 400)
						{
							SendErr(playerid, "У вас недостаточно денег");
							return 1;
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;



						if(buisness[id][buisnes_count_prod] < 4)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+21 < 100)
						{
							pData[playerid][hungry] += 21;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}


						buy_buisnes_all(BUISNES_RESTORAN, id, 300);

						buisness[id][buisnes_count_prod] -= 4;

						give_money(playerid, -400, "Покупка макарон по флотски");

					}
				}
			}
			else
			{
				SPD(playerid,dRestoran,2, !""cBLUE"Ресторан:",""cBLUE"1. "cWH"Напитки\n"cBLUE"2. "cWH"Салаты\n"cBLUE"3. "cWH"Горячие блюда\n"cBLUE"4. "cWH"Десерты", !"Выбрать", !"Выход");
				return 1;
			}
		}
		case dRestoranMenu4:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(GetPlayerMoneyEx(playerid) < 650)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 3)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+22 < 100)
						{
							pData[playerid][hungry] += 22;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}

						buy_buisnes_all(BUISNES_RESTORAN, id, 500);

						buisness[id][buisnes_count_prod] -= 3;

						give_money(playerid, -650, "Покупка Тирамиссу");

					}
					case 1:
					{
						if(GetPlayerMoneyEx(playerid) < 85)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}
						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 3)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+23 < 100)
						{
							pData[playerid][hungry] += 23;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}


						buy_buisnes_all(BUISNES_RESTORAN, id, 70);

						buisness[id][buisnes_count_prod] -= 3;

						give_money(playerid, -85, "Покупка мороженного");

					}
					case 2:
					{
						if(GetPlayerMoneyEx(playerid) < 80)
						{
							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
							return SendErr(playerid, "У вас недостаточно денег!");
						}

						new
							id = GetPVarIntNew(playerid, "buisnes_enter_id");

						if(id < 0)
							return true;

						if(buisness[id][buisnes_count_prod] < 3)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						if(pData[playerid][hungry]+24 < 100)
						{
							pData[playerid][hungry] += 24;
							show_hud_hungry(playerid);
							check_quest_prize_start(playerid, 16);
							player_eat_food(playerid, 3);
						}
						else
						{

						}


						if(buisness[id][buisnes_count_prod] < 3)
							return SCM(playerid, -1, "В ресторане нет продуктов!");

						buy_buisnes_all(BUISNES_RESTORAN, id, 65);

						buisness[id][buisnes_count_prod] -= 3;

						give_money(playerid, -78, "Покупка клубники");

					}
				}
			}
			else
			{
				SPD(playerid,dRestoran,2, !""cBLUE"Ресторан:",""cBLUE"1. "cWH"Напитки\n"cBLUE"2. "cWH"Салаты\n"cBLUE"3. "cWH"Горячие блюда\n"cBLUE"4. "cWH"Десерты", !"Выбрать", !"Выход");
				return 1;
			}
		}

		case dGun:
		{
			if(response)
			{
				new id = pTemp[playerid][pSelectedBusinessID];
			 	if(id < 0) return 1;
				switch(listitem)
				{
					case 0:
					{
						new price = 3500;

						if(GetPlayerMoneyEx(playerid) < price)
							return SelectTextDraw(playerid, COLOR_BLUE);


						SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили кастет за "cGR"%d рублей", price);

						if(buisness[id][buisnes_count_prod] >= price/25)
						{
							buisness[id][buisnes_count_prod] -= price/25;
		 					buisness_bank_update(id, price/2, "ammunation");
		 				}

		 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
						give_money(playerid, -price, String144);
						GivePlayerWeaponEx(playerid, 1, 1);
						SelectTextDraw(playerid, COLOR_BLUE);
					}
					case 1:
					{
						new price = 3500;

						if(GetPlayerMoneyEx(playerid) < price)
							return SelectTextDraw(playerid, COLOR_BLUE);


						SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили бейсбольную биту за "cGR"%d рублей", price);

						if(buisness[id][buisnes_count_prod] >= price/25)
						{
							buisness[id][buisnes_count_prod] -= price/25;
		 					buisness_bank_update(id, price/2, "ammunation");
		 				}

		 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
						give_money(playerid, -price, String144);
						GivePlayerWeaponEx(playerid, 5, 1);
						SelectTextDraw(playerid, COLOR_BLUE);
						return 1;
					}
					case 2:
					{
						SPD(playerid, dGun1, 1, ""cBLUE"Покупка оружия:", \
							""cWH"Укажите число десятков патронов для Дробовика \n\
							Цена одного патрона - "cGR"140P", "Купить", "Назад");
					}
					case 3:
					{
						SPD(playerid, dGun2, 1, ""cBLUE"Покупка оружия:", \
							""cWH"Укажите число обойм Пустынного орла \n\
							Цена одного патрона - "cGR"120P", "Купить", "Назад");
					}
					case 4:
					{
						SPD(playerid, dGun3, 1, ""cBLUE"Покупка оружия:", \
							""cWH"Укажите число патронов Полуавтомата МР5 \n\
							Цена одного патрона - "cGR"60P", "Купить", "Назад");
					}
					case 5:
					{
						SPD(playerid, dGun4, 1, ""cBLUE"Покупка оружия:", \
							""cWH"Укажите число обойм Автомата АК47 \n\
							Цена одной обоймы - "cGR"120P", "Купить", "Назад");
					}
					case 6:
					{
						SPD(playerid, dGun5, 1, ""cBLUE"Покупка оружия:", \
							""cWH"Укажите число десятков патронов Винтовки \n\
							Цена одного патрона - "cGR"140P", "Купить", "Назад");
					}
					case 7:
					{
						SPD(playerid, dGun6, 1, ""cBLUE"Покупка оружия:", \
							""cWH"Укажите число обойм Автомата M4 \n\
							Цена одного патрона - "cGR"120P", "Купить", "Назад");
					}
				}
			}
			else
			{
				return 1;
			}
		}
		case dGun1:
		{
			if(response)
			{
				new id = pTemp[playerid][pSelectedBusinessID];
				if(!strlen(inputtext)) return SelectTextDraw(playerid, COLOR_BLUE);
				if(id < 0) return 1;
				new ammo = strval(inputtext);
				new price = ammo * 140;

				new weapon3,ammo3;
				GetPlayerWeaponData(playerid,GetWeaponSlot(25),weapon3,ammo3);


				if(weapon3 != 0 && ammo + ammo3 > 500)
				{
					SendInf(playerid, "Вы не можете унести так много данного вида оружия (Максимум 500ед.)");

					return SPD(playerid, dGun1, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов для Дробовика \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");

				}

				new
					count_ammo = 100 + pData[playerid][pUpgrade][1]*100;

				if(ammo < 1 || count_ammo <= ammo)
				{
					SendInf(playerid, "Укажите значение патронов от 1 до 100 (200 с улучшением)");

					return SPD(playerid, dGun1, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов для Дробовика \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");

				}
				if(GetPlayerMoneyEx(playerid) < price)
				{
					NoMoney(playerid);


					return SPD(playerid, dGun1, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов для Дробовика \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");

				}


				SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили дробовик с "cGR"%d"cWH" патронами за "cGR"%d рублей", ammo, price);

				if(buisness[id][buisnes_count_prod]  >= price/25)
				{
					buisness[id][buisnes_count_prod] -= price/25;
					buisness_bank_update(id, price/2, "ammunation");
				}

 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
				give_money(playerid, -price, String144);
				GivePlayerWeaponEx(playerid, 25, ammo);
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
			else
			{
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
		}
		case dGun2:
		{
			if(response)
			{
				new
					id = pTemp[playerid][pSelectedBusinessID];

				if(!strlen(inputtext))
					return SelectTextDraw(playerid, COLOR_BLUE);

				new ammo = strval(inputtext);

				new
					count_ammo = 100 + pData[playerid][pUpgrade][1]*100;

				if(ammo < 1 || count_ammo <= ammo)
				{

					SendInf(playerid, "Укажите значение патронов от 1 до 100 (200 с улучшением)");

					return SPD(playerid, dGun2, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Пустынного орла \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}
				new weapon3,ammo3;
				GetPlayerWeaponData(playerid,GetWeaponSlot(24),weapon3,ammo3);
				if(weapon3 != 0 && ammo + ammo3 > 500)
				{
					SendInf(playerid, "Вы не можете унести так много данного вида оружия (Максимум 500ед.)");

					return SPD(playerid, dGun2, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Пустынного орла \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}

				new price = ammo * 120;
				if(GetPlayerMoneyEx(playerid) < price)
				{
					NoMoney(playerid);

					return SPD(playerid, dGun2, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Пустынного орла \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}


				SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили Пустынный орел с "cGR"%d"cWH" патронами за "cGR"%d рублей", ammo, price);

				if(buisness[id][buisnes_count_prod]  >= price/25)
				{
					buisness[id][buisnes_count_prod] -= price/25;
					buisness_bank_update(id, price/2, "ammunation");
				}

 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
				give_money(playerid, -price, String144);
				GivePlayerWeaponEx(playerid, 24, ammo);
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
			else
			{
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
		}
		case dGun3:
		{
			if(response)
			{
				new id = pTemp[playerid][pSelectedBusinessID];
				if(!strlen(inputtext)) return SelectTextDraw(playerid, COLOR_BLUE);
				new ammo = strval(inputtext);
				new price = ammo * 60;

				new
					count_ammo = 200 + pData[playerid][pUpgrade][1]*200;

				if(ammo < 1 || count_ammo <= ammo)
				{
					SendInf(playerid, "Укажите значение обойм от 1 до 200 (400 с улучшением)");

					return SPD(playerid, dGun3, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число патронов Полуавтомата МР5 \n\
						Цена одного патрона - "cGR"30P", "Купить", "Назад");

				}
				new weapon3,ammo3;
				GetPlayerWeaponData(playerid,GetWeaponSlot(29),weapon3,ammo3);
				if(weapon3 != 0 && ammo + ammo3 > 500)
				{
					SendInf(playerid, "Вы не можете унести так много данного вида оружия (Максимум 500ед.)");

					return SPD(playerid, dGun3, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число патронов Полуавтомата МР5 \n\
						Цена одного патрона - "cGR"30P", "Купить", "Назад");
				}

				if(GetPlayerMoneyEx(playerid) < price)
				{
					NoMoney(playerid);


					return SPD(playerid, dGun3, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число патронов Полуавтомата МР5 \n\
						Цена одного патрона - "cGR"30P", "Купить", "Назад");
				}


				SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили полуавтомат МР5 с "cGR"%d"cWH" патронами за "cGR"%d рублей", ammo, price);

				if(buisness[id][buisnes_count_prod]  >= price/25)
				{
					buisness[id][buisnes_count_prod] -= price/25;
					buisness_bank_update(id, price/2, "ammunation");
				}

 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
				give_money(playerid, -price, String144);
				GivePlayerWeaponEx(playerid, 29, ammo);
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
			else
			{
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
		}
		case dGun4:
		{
			if(response)
			{
				new id = pTemp[playerid][pSelectedBusinessID];
				if(!strlen(inputtext)) return SelectTextDraw(playerid, COLOR_BLUE);
				new ammo = strval(inputtext);
				new price = ammo * 120;

				new
					count_ammo = 100 + pData[playerid][pUpgrade][1]*100;

				if(ammo < 1 || count_ammo <= ammo)
				{

					SendInf(playerid, "Укажите значение обойм от 1 до 100 (200 с улучшением)");

					return SPD(playerid, dGun4, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата АК47 \n\
						Цена одной обоймы - "cGR"60P", "Купить", "Назад");
				}
				new weapon3,ammo3;
				GetPlayerWeaponData(playerid,GetWeaponSlot(30),weapon3,ammo3);
				if(weapon3 != 0 && ammo + ammo3 > 500)
				{
					SendInf(playerid, "Вы не можете унести так много данного вида оружия (Максимум 500ед.)");

					return SPD(playerid, dGun4, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата АК47 \n\
						Цена одной обоймы - "cGR"60P", "Купить", "Назад");
				}

				if(GetPlayerMoneyEx(playerid) < price)
				{
					NoMoney(playerid);


					return SPD(playerid, dGun4, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата АК47 \n\
						Цена одной обоймы - "cGR"60P", "Купить", "Назад");
				}

				SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили автомат АК47 с "cGR"%d"cWH" патронами за "cGR"%d рублей", ammo, price);


				if(buisness[id][buisnes_count_prod]  >= price/25)
				{
					buisness[id][buisnes_count_prod] -= price/25;
					buisness_bank_update(id, price/2, "ammunation");
				}

 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
				give_money(playerid, -price, String144);
				GivePlayerWeaponEx(playerid, 30, ammo);
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
			else
			{
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
		}
		case dGun5:
		{
			if(response)
			{
				new id = pTemp[playerid][pSelectedBusinessID];
				if(!strlen(inputtext))
				{
					return SPD(playerid, dGun5, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов Винтовки \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");
				}

				new ammo = strval(inputtext);
				new price = ammo * 140;

				new
					count_ammo = 100 + pData[playerid][pUpgrade][1]*100;

				if(ammo < 1 || count_ammo <= ammo)
				{
					SendInf(playerid, "Укажите значение обойм от 1 до 100 (200 с улучшением)");

					return SPD(playerid, dGun5, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов Винтовки \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");
				}

				new weapon3,ammo3;
				GetPlayerWeaponData(playerid,GetWeaponSlot(33),weapon3,ammo3);

				if(weapon3 != 0 && ammo + ammo3 > 500)
				{
					SendInf(playerid, "Вы не можете унести так много данного вида оружия (Максимум 500ед.)");

					return SPD(playerid, dGun5, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов Винтовки \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");
				}
				if(GetPlayerMoneyEx(playerid) < price)
				{
					NoMoney(playerid);


					return SPD(playerid, dGun5, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число десятков патронов Винтовки \n\
						Цена одного патрона - "cGR"70P", "Купить", "Назад");
				}


				SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили винтовку с "cGR"%d"cWH" патронами за "cGR"%d рублей", ammo, price);


				if(buisness[id][buisnes_count_prod]  >= price/25)
				{
					buisness[id][buisnes_count_prod] -= price/25;
					buisness_bank_update(id, price/2, "ammunation");
				}

 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
				give_money(playerid, -price, String144);
				GivePlayerWeaponEx(playerid, 33, ammo);
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
			else
			{
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
		}
		case dGun6:
		{
			if(response)
			{
				new id = pTemp[playerid][pSelectedBusinessID];
				if(!strlen(inputtext))
				{
					return SPD(playerid, dGun6, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата M4 \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}
				new ammo = strval(inputtext);
				new price = ammo * 120;

				new
					count_ammo = 100 + pData[playerid][pUpgrade][1]*100;

				if(ammo < 1 || count_ammo <= ammo)
				{
					SendInf(playerid, "Укажите значение обойм от 1 до 100 (200 с улучшением)");

					return SPD(playerid, dGun6, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата M4 \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}
				new weapon3,ammo3;
				GetPlayerWeaponData(playerid,GetWeaponSlot(31),weapon3,ammo3);
				if(weapon3 != 0 && ammo + ammo3 > 500)
				{
					SendInf(playerid, "Вы не можете унести так много данного вида оружия (Максимум 500ед.)");

					return SPD(playerid, dGun6, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата M4 \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}
				if(GetPlayerMoneyEx(playerid) < price)
				{
					NoMoney(playerid);


					return SPD(playerid, dGun6, 1, ""cBLUE"Покупка оружия:", \
						""cWH"Укажите число обойм Автомата M4 \n\
						Цена одного патрона - "cGR"60P", "Купить", "Назад");
				}

				SFCM(playerid, COLOR_WHITE, "• {FFC800}[Подсказка] "cWH"Вы купили автомат M4 с "cGR"%d"cWH" патронами за "cGR"%d рублей", ammo, price);

				if(buisness[id][buisnes_count_prod]  >= price/25)
				{
					buisness[id][buisnes_count_prod] -= price/25;
					buisness_bank_update(id, price/2, "ammunation");
				}

 				format(String144, sizeof(String144), "Покупка в аммунации №%d", id);
				give_money(playerid, -price, String144);
				GivePlayerWeaponEx(playerid, 31, ammo);
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
			else
			{
				SelectTextDraw(playerid, COLOR_BLUE);
				return 1;
			}
		}



		case dDutyGun:
		{
			if(!response) return true;
			new weapon,ammo;

			switch(listitem)
			{
				case 0:
				{
						GetPlayerWeaponData(playerid,GetWeaponSlot(3),weapon,ammo);
						if(weapon == 3 && ammo) return SendErr(playerid, "У вас уже есть дубинка");
						GivePlayerWeaponEx(playerid, 3, -ammo);
						GivePlayerWeaponEx(playerid, 3, 1);
						SendInf(playerid, "Вы взяли Дубинку");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}
				case 1:
				{
						if(pData[playerid][pRank] < 2) return SendErr(playerid, "У вас нет доступа к этому оружию");
						GetPlayerWeaponData(playerid,GetWeaponSlot(24),weapon,ammo);
						new weapon2,ammo2;
						GetPlayerWeaponData(playerid,GetWeaponSlot(23),weapon2,ammo2);
						if(weapon == 24 && ammo > 100 || weapon2 == 23 && ammo2 > 30) return SendErr(playerid, "У вас уже есть это оружие");
						if(weapon2 == 23)
						{
						GivePlayerWeaponEx(playerid, 23, -ammo2);
						}
						if(weapon == 24)
						{
						GivePlayerWeaponEx(playerid, 24, -ammo);
						}
						GivePlayerWeaponEx(playerid, 24, 100);
						SendInf(playerid, "Вы взяли Desert Eagle");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}
				case 2:
				{
						if(pData[playerid][pRank] < 2) return SendErr(playerid, "У вас нет доступа к этому оружию");
						GetPlayerWeaponData(playerid,GetWeaponSlot(23),weapon,ammo);
						new weapon2,ammo2;
						GetPlayerWeaponData(playerid,GetWeaponSlot(24),weapon2,ammo2);
						if(weapon == 23 && ammo > 30 || weapon2 == 24 && ammo2 > 100) return SendErr(playerid, "У вас уже есть это оружие");
						if(weapon2 == 24)
						{
						GivePlayerWeaponEx(playerid, 24, -ammo2);
						}
						if(weapon == 23) {
						GivePlayerWeaponEx(playerid, 23, -ammo);
						}
						GivePlayerWeaponEx(playerid,23,30);
						pTemp[playerid][pTazerGun] = true;
						SendInf(playerid, "Вы взяли SD Pistol");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}
				case 3:
				{
						new Float:zarm; GetPlayerArmour(playerid,zarm);
						SetPlayerArmourEx(playerid, 100);
						SendInf(playerid, "Вы надели Бронежилет");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}
				case 4:
				{
						if(pData[playerid][pRank] < 3) return SendErr(playerid, "У вас нет доступа к этому оружию");
						GetPlayerWeaponData(playerid,GetWeaponSlot(29),weapon,ammo);
						if(weapon == 29 && ammo > 249) return SendErr(playerid, "У вас уже есть это оружие");
						GivePlayerWeaponEx(playerid, 29, -ammo);
						GivePlayerWeaponEx(playerid, 29, 250);
						SendInf(playerid, "Вы взяли MP-5");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}
				case 5:
				{
						SetPlayerAttachedObject(playerid, 1, 18637, 14, 0.0, 0.0, 0.0, 0.0, 180.0, 180.0);
						SendInf(playerid, "Снять щит можно командой: /shieldoff");
				}
				case 6:
				{
						if(pData[playerid][pRank] < 3) return SendErr(playerid, "У вас нет доступа к этому оружию");
						GetPlayerWeaponData(playerid,GetWeaponSlot(25),weapon,ammo);
						if(weapon == 25 && ammo > 100) return SendErr(playerid, "У вас уже есть это оружие");
						GivePlayerWeaponEx(playerid, 25, -ammo);
						GivePlayerWeaponEx(playerid, 25, 100);
						SendInf(playerid, "Вы взяли Shotgun");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}
				case 7:
				{
						GetPlayerWeaponData(playerid,GetWeaponSlot(17),weapon,ammo);
						if(weapon == 17 && ammo > 2) return SendErr(playerid, "У вас уже есть cлезоточивый газ");
						GivePlayerWeaponEx(playerid, 17, 3);
						SendInf(playerid, "Вы взяли cлезоточивый газ");
				 		SPD(playerid, dDutyGun, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Щит\n"cBLUE"7. "cWH"Shotgun\n"cBLUE"8. "cWH"Слезоточивый газ", "Принять", "Отмена");
				}


			}
		}

		case dVMFLeader:
		{
			if(!response) return true;
			new weapon,ammo;
			if(IsPlayerInRangeOfPoint(playerid , 10.0, -740.3332,367.5763,6.7876)) {
			}
			else	{
				return 1;
			}

			switch(listitem)
			{
				case 0:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(24),weapon,ammo);
					new weapon2,ammo2;
					GetPlayerWeaponData(playerid,GetWeaponSlot(23),weapon2,ammo2);
					if(weapon == 24 && ammo >= 100 || weapon2 == 23 && ammo2 > 30) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 24, -ammo);
					GivePlayerWeaponEx(playerid, 24, 100);
					SendInf(playerid, "Вы взяли Desert Eagle");
				}
				case 1:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(25),weapon,ammo);
					if(weapon == 25 && ammo >= 50) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 25, -ammo);
					GivePlayerWeaponEx(playerid, 25, 50);
					SendInf(playerid, "Вы взяли Shotgun");
				}
				case 2:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(29),weapon,ammo);
					if(weapon == 29 && ammo >= 180) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 29, -ammo);
					GivePlayerWeaponEx(playerid, 29, 180);
					SendInf(playerid, "Вы взяли MP-5");
				}
				case 3:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(31),weapon,ammo);
					if(weapon == 31 && ammo >= 200) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 31, -ammo);
					GivePlayerWeaponEx(playerid, 31, 200);
					SendInf(playerid, "Вы взяли M4");
				}
				case 4:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(17),weapon,ammo);
					if(weapon == 17 && ammo > 2) return SendErr(playerid, "У вас уже есть дымовые шашки");
					GivePlayerWeaponEx(playerid, 17, 3);
					SendInf(playerid, "Вы взяли дымовые шашки");
				}
			}
		}

		case dDutyGunFbi:
		{
			if(!response) return true;
			new weapon,ammo;

			switch(listitem)
			{
				case 0:
				{

					GetPlayerWeaponData(playerid,GetWeaponSlot(3),weapon,ammo);
					if(weapon == 3 && ammo) return SendErr(playerid, "У вас уже есть дубинка");
					GivePlayerWeaponEx(playerid, 3, 1);
					SendInf(playerid, "Вы взяли Дубинку");
				}
				case 1:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(24),weapon,ammo);
					new weapon2,ammo2;
					GetPlayerWeaponData(playerid,GetWeaponSlot(23),weapon2,ammo2);
					if(weapon == 24 && ammo > 100 || weapon2 == 23 && ammo2 > 30) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 24, -ammo);
					GivePlayerWeaponEx(playerid, 24, 100);
					SendInf(playerid, "Вы взяли Desert Eagle");
				}
				case 2:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(23),weapon,ammo);
					new weapon2,ammo2;
					GetPlayerWeaponData(playerid,GetWeaponSlot(24),weapon2,ammo2);
					if(weapon == 23 && ammo > 30 || weapon2 == 24 && ammo2 > 100) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 23, -ammo);
					GivePlayerWeaponEx(playerid,23,30);
					pTemp[playerid][pTazerGun] = true;
					SendInf(playerid, "Вы взяли SD Pistol");
				}
				case 3:
				{
					SetPlayerArmourEx(playerid, 100);
					SendInf(playerid, "Вы надели бронежилет");
				}
				case 4:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(29),weapon,ammo);
					if(weapon == 29 && ammo > 249) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 29, -ammo);
					GivePlayerWeaponEx(playerid, 29, 250);
					SendInf(playerid, "Вы взяли MP-5");
				}
				case 5:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(31),weapon,ammo);
					if(weapon == 31 && ammo > 249) return SendErr(playerid, "У вас уже есть это оружие");
					GivePlayerWeaponEx(playerid, 31, -ammo);
					GivePlayerWeaponEx(playerid, 31, 250);
					SendInf(playerid, "Вы взяли M4");
				}
				case 6:
				{
					GetPlayerWeaponData(playerid,GetWeaponSlot(17),weapon,ammo);
					if(weapon == 17 && ammo > 2) return SendErr(playerid, "У вас уже есть дымовые шашки");
					GivePlayerWeaponEx(playerid, 17, 3);
					SendInf(playerid, "Вы взяли дымовые шашки");
				}
				case 7:
				{
					SetPlayerAttachedObject(playerid, 1, 18637, 14, 0.0, 0.0, 0.0, 0.0, 180.0, 180.0);
					SendInf(playerid, "Снять щит можно командой: /shieldoff");
				}
			}
			SPD(playerid, dDutyGunFbi, 2, ""cBLUE"Снаряжение", ""cBLUE"1. "cWH"Дубинка\n"cBLUE"2. "cWH"Desert Eagle\n"cBLUE"3. "cWH"SD Pistol\n"cBLUE"4. "cWH"Бронежилет\n"cBLUE"5. "cWH"MP5\n"cBLUE"6. "cWH"Винтовка M4\n"cBLUE"7. "cWH"Дымовые шашки (3 шт.)\n"cBLUE"8. "cWH"Щит", "Принять", "Отмена");
		}


		case dShowSobes:
		{
			if(!response) return 1;
			new x, z;
			format(String64, sizeof(String64),"sobes_%d", listitem);
			x = GetPVarIntNew(playerid, String64);
			format(String64, sizeof(String64),"sobess_%d", listitem);
			z = GetPVarIntNew(playerid, String64);
			if(z > 0) {
				new frid = GetSubfractionID(x);
				format(String2048, sizeof(String2048),"\n\n"cWH"Собеседование в организацию {B3B3FF}%s\n\n",gSubfractionName[frid][z-1]);
			}
			else {
				format(String2048, sizeof(String2048),"\n\n"cWH"Собеседование в организацию {B3B3FF}%s\n\n",gFractionName[x]);
			}

			if(x+1 == 1) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto1);
			}
			else if(x+1 == 2) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto2[z]);
			}
			else if(x+1 == 8) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto8[z]);
			}
			else if(x+1 == 9) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto9[z]);
			}
			else if(x+1 == 10) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto10[z]);
			}
			else if(x+1 == 11) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto11[z]);
			}
			else if(x+1 == 12) {
				format(String2048, sizeof(String2048),"%s"cWH"Место проведения и критерии:\n\t{FFFFB3}%s"cWH"\n",String2048,gFractionSobesMesto12[z]);
			}
			if(gFractionSobesTime[x][z] < 10) {
				if(gFractionSobesTimeM[x][z] < 10) {
					format(String2048, sizeof(String2048),"%s"cWH"Время проведения: \n\t{B3FFC6}0%d:0%d\n\n\n",String2048,gFractionSobesTime[x][z],gFractionSobesTimeM[x][z]);
				}
				else {
					format(String2048, sizeof(String2048),"%s"cWH"Время проведения: \n\t{B3FFC6}0%d:%d\n\n\n",String2048,gFractionSobesTime[x][z],gFractionSobesTimeM[x][z]);
				}
			}
			else {
				if(gFractionSobesTimeM[x][z] < 10) {
					format(String2048, sizeof(String2048),"%s"cWH"Время проведения: \n\t{B3FFC6}%d:0%d\n\n\n",String2048,gFractionSobesTime[x][z],gFractionSobesTimeM[x][z]);
				}
				else {
					format(String2048, sizeof(String2048),"%s"cWH"Время проведения: \n\t{B3FFC6}%d:%d\n\n\n",String2048,gFractionSobesTime[x][z],gFractionSobesTimeM[x][z]);
				}
			}
			SPD(playerid, dShowSobes2, DIALOG_STYLE_MSGBOX, "Собеседования" ,String2048, "Назад", "");

		}
		case dShowSobes2:
		{
			format(String4096,sizeof(String4096),"");
			new ff;
			for(new x; x < FRACTION_COUNT; x ++)
			{
				for(new z; z < 4; z ++)
				{
					if(gFractionSobes[ x ][ z ] > 0)
					{

					if(z > 0) {
					new frid = GetSubfractionID(x);
					format(String256,sizeof(String256),""cGR"%d. "cWH"%s\n",ff+1, gSubfractionName[frid][z-1]);
					}
					else
					{
					format(String256,sizeof(String256),""cGR"%d. "cWH"%s\n",ff+1, gFractionName[x]);
					}
					strcat(String4096, String256);
					format(String64, sizeof(String64),"sobes_%d", ff);
					SetPVarIntNew(playerid, String64, x);
					format(String64, sizeof(String64),"sobess_%d", ff);
					SetPVarIntNew(playerid, String64, z);
					ff ++;
					}
				}
			}
			if(ff == 0)
			{
				SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, "Собеседования" ,"\n\nВ данный момент собеседования не проводятся\n\n", "Закрыть", "");
				return 1;
			}


			SPD(playerid, dShowSobes, DIALOG_STYLE_LIST, "Собеседования" ,String4096, "Далее", "Закрыть");
		}

		case dDelSobes:
		{
			if(!response) return 1;
			if(gFractionSobes[ pData[playerid][pFraction]-1 ][ pData[playerid][pSubfraction] ] > 0)
			{
				gFractionSobes[ pData[playerid][pFraction]-1 ][ pData[playerid][pSubfraction] ] = 0;
				SendSucc(playerid, "Вы отменили собеседование");
  			}
		}
		case dAddSobes:
		{
			if(!response) return 1;
			if(strlen(inputtext) < 10)
			{
				SPD(playerid, dAddSobes, DIALOG_STYLE_INPUT, "{FFDB70}Добавить собеседование", \
				"Введите место проведения собеседования и критерии набора","Далее","Закрыть");
				SendErr(playerid ,"Слишком короткое описание");
				return 1;
			}
			if(strlen(inputtext) > 150)
			{
				SPD(playerid, dAddSobes, DIALOG_STYLE_INPUT, "{FFDB70}Добавить собеседование", \
				"Введите место проведения собеседования и критерии набора","Далее","Закрыть");
				SendErr(playerid ,"Слишком длинное описание");
				return 1;
			}
			if(strlen(inputtext) && (strfind(inputtext,"%") != -1 || strfind(inputtext,"\\") != -1 || strfind(inputtext,"`") != -1)) {
				return SCM(playerid,-1,"Ошибка. Вы использовали запрещенные символы.");
			}

			if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
			{
				SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
				return 1;
			}



			if(pData[playerid][pFraction] == 1) {
				format(gFractionSobesMesto1,256,inputtext);
			}
			else if(pData[playerid][pFraction] == 2) {
				format(gFractionSobesMesto2[ pData[playerid][pSubfraction] ],256,inputtext);
			}
			else if(pData[playerid][pFraction] == 8) {
				format(gFractionSobesMesto8[ pData[playerid][pSubfraction] ],256,inputtext);
			}
			else if(pData[playerid][pFraction] == 9) {
				format(gFractionSobesMesto9[ pData[playerid][pSubfraction] ],256,inputtext);
			}
			else if(pData[playerid][pFraction] == 10) {
				format(gFractionSobesMesto10[ pData[playerid][pSubfraction] ],256,inputtext);
			}
			else if(pData[playerid][pFraction] == 11) {
				format(gFractionSobesMesto11[ pData[playerid][pSubfraction] ],256,inputtext);
			}
			else if(pData[playerid][pFraction] == 12) {
				format(gFractionSobesMesto12,256,inputtext);
			}

			SPD(playerid, dAddSobes2, DIALOG_STYLE_INPUT, "{FFDB70}Добавить собеседование", \
			"Введите время проведения собеседования через знак ':'\n"cWH"Пример: "cWH"12:20\n"cWH"Пример: "cWH"09:00","Далее","Закрыть");


		}
		case dAddSobes2:
		{
			if(!response) return 1;
			new pon[6];
			format(pon, sizeof pon, inputtext);
			if(strlen(inputtext) != 5)
			{
				SPD(playerid, dAddSobes2, DIALOG_STYLE_INPUT, "{FFDB70}Добавить собеседование", \
				"Введите время проведения собеседования через знак ':'\nПример: "cWH"12:20","Далее","Закрыть");
				SendErr(playerid ,"Время введено не верно");
				return 1;
			}
			if(inputtext[2] != ':' || (inputtext[0] != '0' && inputtext[0] != '1' && inputtext[0] != '2'))
			{
				SPD(playerid, dAddSobes2, DIALOG_STYLE_INPUT, "{FFDB70}Добавить собеседование", \
				"Введите время проведения собеседования через знак ':'\nПример: "cWH"12:20","Далее","Закрыть");
				SendErr(playerid ,"Время введено не верно");
				return 1;
			}
			format(String64, sizeof(String64), inputtext);
			strdel(String64,2,5);
			strdel(inputtext,0,3);
			new time1 = strval(String64);
			new time2 = strval(inputtext);
			if(time1 < 0 || time1 > 23 || time2 < 0 || time2 > 59)
			{
				SPD(playerid, dAddSobes2, DIALOG_STYLE_INPUT, "{FFDB70}Добавить собеседование", \
				"Введите время проведения собеседования через знак ':'\nПример: "cWH"12:20","Далее","Закрыть");
				SendErr(playerid ,"Время введено не верно");
				return 1;
			}
			gFractionSobesTime[ pData[playerid][pFraction]-1 ][ pData[playerid][pSubfraction] ] = time1;
			gFractionSobesTimeM[ pData[playerid][pFraction]-1 ][ pData[playerid][pSubfraction] ] = time2;
			gFractionSobes[ pData[playerid][pFraction]-1 ][ pData[playerid][pSubfraction] ] = 1;
			SendSucc(playerid, "Вы добавили собеседование, для отмены введите /addvacancy");
		    
		    new mesto[64];
		    if(pData[playerid][pFraction] == 1) {
				format(mesto, sizeof mesto, gFractionSobesMesto1);
			}
			else if(pData[playerid][pFraction] == 2) {
				format(mesto, sizeof mesto, gFractionSobesMesto2[pData[playerid][pSubfraction]]);
			}
			else if(pData[playerid][pFraction] == 8) {
				format(mesto, sizeof mesto, gFractionSobesMesto8[pData[playerid][pSubfraction]]);
			}
			else if(pData[playerid][pFraction] == 9) {
				format(mesto, sizeof mesto, gFractionSobesMesto9[pData[playerid][pSubfraction]]);
			}
			else if(pData[playerid][pFraction] == 10) {
				format(mesto, sizeof mesto, gFractionSobesMesto10[pData[playerid][pSubfraction]]);
			}
			else if(pData[playerid][pFraction] == 11) {
				format(mesto, sizeof mesto, gFractionSobesMesto11[pData[playerid][pSubfraction]]);
			}
			else if(pData[playerid][pFraction] == 12) {
				format(mesto, sizeof mesto, gFractionSobesMesto12);
			}
		    new str[256];
			format(str, sizeof(str), "[Гос.Новости]:"cWH" Обьявлено собеседование в %s время %s", mesto, pon);
            SendClientMessageToAll(-1, str);
		}


		case dReport:
		{
			if(!response) return 1;
			if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
			if(pTemp[playerid][pNotReport]) return SendErr(playerid, "Нельзя писать сообщение чаще, чем 1 раз в минуту");
			if(strlen(inputtext) < 4)
			{
				PC_EmulateCommand(playerid, "/mn");
				SCM(playerid,-1,"Слишком короткий запрос");
				return 1;
			}
			if(strlen(inputtext) && (strfind(inputtext,"{") != -1 || strfind(inputtext,"}") != -1)) {
				return SCM(playerid,-1,"Ошибка. Вы использовали запрещенные символы.");
			}

			pTemp[playerid][pNotReport] = 1;
			new mes[128];
			format(mes,sizeof(mes),"%s[%d]: {FFCD00}%s",pData[playerid][pNickname],playerid,inputtext);
			AdminChat(0xfa5000FF,mes);
			SCM(playerid,CGREEN, mes);
  			SendInf(playerid, "Ожидайте, в ближайшее время Вам ответит администратор.");
		}
		case dNameChange:
		{
			if(!response) return 1;
			if(pTemp[playerid][pSetName] > 0) return SendErr(playerid, "Вы уже подавали заявку на смену ника");
			if(strlen(inputtext) < 3 || strlen(inputtext) > 20) return SendErr(playerid, "Длина ника не может быть меньше трех и больше 20 символов");
			if(strfind(inputtext,"|") != -1) return SendErr(playerid, "В нике не может содержаться симовл \"|\"");
			for(new i=0; i <strlen(inputtext); i++)                  {
			if(inputtext[i]>=0x00 && inputtext[i] <= 0x1F){
			inputtext[i]='#';}

			if(inputtext[i] == '\\') {
			inputtext[i]='#';		}
			if(inputtext[i]== '"'){
			inputtext[i]='#';}

			if(inputtext[i]==0x7F){
			inputtext[i]='#';}                                  	  }
   			sql_escape_string(zConn, inputtext,inputtext,32);
			new query[128];	format(query,sizeof(query),"SELECT `nickname` FROM `accounts` WHERE `nickname` = '%s'",inputtext);
			new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
			if(sql_num_rows(r))
			{
				SendErr(playerid, "Этот никнейм уже используется");
				sql_free_result(r);
				return 1;
			}
			sql_free_result(r);

			for(new i = 0; i < strlen(inputtext); i ++) {
				switch(inputtext[i]) {
					case 'a'..'z', 'A'..'Z', '_': continue;
					default: {
						return SendErr(playerid, "В никнейме найдены запрещенные символы!");
					}
				}
			}
			pTemp[playerid][pSetName] = 1;
			SetPVarStringNew(playerid,"nnick",inputtext);
			format(query,sizeof(query),"[Смена ника] %s желает сменить нонРП имя на %s [Подтвердить: /okay %d]",pData[playerid][pNickname],inputtext,playerid);
			AdminChat(COLOR_LIGHTGREEN,query);
			SendInf(playerid, "Ваша заявка на смену ника отправлена Администрации.");
		}
		case dKiosk:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
					SetPlayerHealth(playerid,100.0);
				}
				case 1:
				{
				}
			}
		}
		case DIALOG_GENERAL_ATM:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
					new mes[128];
					format(mes,sizeof(mes),""cWH"У Вас на счету: "cBLUE"%d рублей",pData[playerid][pBank]);
					SPD(playerid,dATMWatch,0,"Информация о счете",mes,"OK","");
				}
				case 1:
				{
					SPD(playerid,DIALOG_ATM_GET,1,""cBLUE"Вывод средств",""cWH"Укажите сумму, которую Вы хотели бы снять","Снять","Выход");
				}
				case 2:
				{
					SPD(playerid,DIALOG_ATM_PUT,1,""cBLUE"Положить деньги",""cWH"Укажите сумму, которую Вы хотите положить на счет","Положить","Выход");
				}
				case 3:
				{
					if(!pData[playerid][pPhone])
					{
						SendErr(playerid, "У Вас нет телефона. Вы можете купить его в Универмаге");
						SPD(playerid,dATM,2,""cBLUE"Меню",""cBLUE"1."cWH" Проверить счет\n\
							"cBLUE"2."cWH" Снять деньги со счета\n\
							"cBLUE"3."cWH" Положить деньги на счет\n\
							"cBLUE"4."cWH" Пополнить баланс мобильного","OK","Отмена");
						return 1;
					}
					SPD(playerid,DIALOG_ATM_PHONE,1,""cBLUE"Баланс мобильного",""cWH"Укажите сумму, которую Вы хотите положить на счет мобильного","Положить","Выход");
				}
			}
		}

		case dAcceptDel:
		{
 			if(!response) return 1;
			if(pData[playerid][pAdmin] < 7) return 1;
		   	new account[60];
			GetPVarStringNew(playerid, "delakk", account, 60);

		   	if(!strlen(account)) return SCM(playerid,COLOR_GREY,"Используй: /ssteretacc [ник игрока]");
	   		sql_escape_string(zConn, account, account, 24);

			if(strfind(account,"'") != -1 || strfind(account,"`") != -1 || strfind(account,"|") != -1 || strfind(account,"%%") != -1 || strfind(account,"\\") != -1)
	  		{
	 	 		return SCM(playerid, COLOR_WHITE ,"/ssteretacc [ Ник ]");
			}
			for(new i; i < sizeof(account); i++)
			{
				if(account[i]=='`'){
				account[i]='#';}
				if(account[i]==','){
				account[i]='#';}
				if(account[i]==')'){
				account[i]='#';}
				if(account[i]=='='){
				account[i]='#';}
				if(account[i]==';'){
				account[i]='#';}
				if(account[i]=='*'){
				account[i]='#';}
			}
			sql_escape_string(zConn, account, account, 256);


		   	new zID = GetPlayerID(account);
			if(zID != -1) {
			  	SCM(zID, 0xfb4d00FF,"Ваш аккаунт был удалён за нарушение правил сервера");
				NewKick(zID);
			}

		   	new query[256];
		   	format(query, sizeof(query), "SELECT `id` FROM `accounts` WHERE `nickname` = '%s'", account);
		   	new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
		   	if(!sql_num_rows(r)) return SendErr(playerid, "Неверный никнейм");
		   	new sqlid = sql_get_field_int(r, 0);
			sql_free_result(r);


			format(query, sizeof(query), "DELETE FROM `accounts` WHERE `nickname` = '%s'", account);
			sql_queryEx(zConn, query);
			format(String256,sizeof(String256),"Администратор %s удалил аккаунт %s",pData[playerid][pNickname], account);
			AdminChat(0xfb4d00FF,String256);

		}

		case dMEGAPHONE_MENU:
		{
			if(!response) return true;
			if(!IsACop(playerid)) return SendErr(playerid, "Эта функция только для МВД/ФСБ");
			if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");


			return 1;

		}

		case dRadio:
		{
			if(!response) return true;
			switch(listitem)
			{
			case 0:
				{
					PlayAudioStreamForPlayer(playerid, "http://radio.powerdance.ru:8018/power");
					SCM(playerid, 0x66CC00FF, "{66CC00}Онлайн радио включено");
				}
			case 1:
				{
					PlayAudioStreamForPlayer(playerid, "http://www.radioroks.com.ua/RadioROKS.m3u");
					SCM(playerid, 0x66CC00FF, "{66CC00}Онлайн радио включено");
				}
			case 2:
				{
					PlayAudioStreamForPlayer(playerid, "http://radiopotok.ru/f/m3u/station_2.m3u");
					SCM(playerid, 0x66CC00FF, "{66CC00}Онлайн радио включено");
				}
			case 3:
				{
					PlayAudioStreamForPlayer(playerid, "http://online.radiorecord.ru:8101/rr_128");
					SCM(playerid, 0x66CC00FF, "{66CC00}Онлайн радио включено");
				}

			case 4:
				{
					PlayAudioStreamForPlayer(playerid, "http://striiming.trio.ee/dfm64.mp3.m3u");
					SCM(playerid,  0x66CC00FF , "{66CC00}Онлайн радио включено");
				}
			case 5:
				{
					PlayAudioStreamForPlayer(playerid, "http://ep256.hostingradio.ru:8052/europaplus256.mp3");
					SCM(playerid, 0x66CC00FF , "{66CC00}Онлайн радио включено");
				}
			}
		}


		case dBankShow:
		{
			if(!response) return SPD(playerid, dBankMenu, 2, ""cBLUE"Банк", ""cBLUE"1."cWH" Мои счета\n"cBLUE"2."cWH" Открыть новый счёт", "Принять", "Отмена");
			if(!listitem) SPD(playerid,DIALOG_GENERAL_ATM,2,""cBLUE"Меню",""cBLUE"1."cWH" Проверить счет\n\
				"cBLUE"2."cWH" Снять деньги со счета\n\
				"cBLUE"3."cWH" Положить деньги на счет\n\
				"cBLUE"4."cWH" Пополнить баланс мобильного","OK","Отмена");
			else {
				pTemp[playerid][bankID][0] = pTemp[playerid][bankID][listitem];
				pTemp[playerid][bankCode][0] = pTemp[playerid][bankCode][listitem];
				SPD(playerid, dBankCode, DIALOG_STYLE_INPUT, ""cBLUE"Доступ к счету", ""cWH"Чтобы войти в меню управления счетом введите защитный код:", "Вход", "Назад");
			}
			return 1;
		}

		case dBankCode:
		{
			if(!response) return ShowPlayerBank(playerid);
			if(strval(inputtext) != pTemp[playerid][bankCode][0]) return SPD(playerid, dBankCode, DIALOG_STYLE_INPUT, "Доступ к счету", "{FF1000}Код введён неверно!\n\n"cWH"Чтобы войти в меню управления счетом введите защитный код:", "Вход", "Назад");
			ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			return 1;
		}

		case dBankShow1: {
			if(!response) return ShowPlayerBank(playerid);
			switch(listitem) {
				case 0: ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
				case 1: SPD(playerid, dBankWithdraw, DIALOG_STYLE_INPUT,""cBLUE"Вывод средств", ""cWH"Введите сумму, которую Вы хотите "cBLUE"снять"cWH" с банковского счёта:","Далее","Назад");
				case 2: SPD(playerid, dBankDeposit, DIALOG_STYLE_INPUT,""cBLUE"Пополнить счет", ""cWH"Введите сумму, которую Вы хотите "cBLUE"положить"cWH" на Ваш банковский счёт:","Далее","Назад");
				case 3:
				{
				if(pData[playerid][pLevel] < 7) return SendErr(playerid, "Для перевода средств на другие счета вам необходим 7 уровень");
 				new query[256];
				format(query, sizeof(query), "SELECT `bankstore2` FROM `accounts`  WHERE `id` = '%d'", pData[playerid][pMysqlID]);
				new Result:r = sql_queryEx(zConn, query,QUERY_CACHED);
 				new PID = sql_get_field_int(r, 0);
				sql_free_result(r);
				if(PID > 4) return SendErr(playerid, "Вы не можете совершить более 5 операций переводов за день");

				format(String256, sizeof(String256), "transferm_%d",pData[playerid][pMysqlID] );
				new transferm = GetGVarInt(String256, 1001);
 				if(transferm > 1000000) return SendErr(playerid, "Вы можете перевести более P1млн в сутки");

				SPD(playerid, dBankTransfer, DIALOG_STYLE_INPUT,"Перевод средств", ""cWH"Введите номер счета, на который Вы хотите "cBLUE"перевести"cWH" деньги:","Далее","Назад");
				}
				case 4: SPD(playerid, dBankSetCode, DIALOG_STYLE_INPUT,""cBLUE"Смена кода", ""cWH"Введите Ваш "cBLUE"текущий "cWH"защитный код:","Далее","Назад");
				case 5: SPD(playerid, dBankSetName, DIALOG_STYLE_INPUT,""cBLUE"Переименовать счет", ""cWH"Введите "cBLUE"новое "cWH"название счёта\n\nУчтите, что название не должно превышать 15 символов:","Далее","Назад");
			}
			return 1;
		}

		case dBankWithdraw: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			new zCost = strval(inputtext);
			if(zCost < 1 || zCost > GetBankBalance(pTemp[playerid][bankID][0])) {
				SendErr(playerid, "На Вашем счете недостаточно средств");
				SPD(playerid, dBankWithdraw, DIALOG_STYLE_INPUT, ""cBLUE"Вывод средств", ""cWH"Введите сумму, которую Вы хотите "cBLUE"снять"cWH" с банковского счёта:","Далее","Назад");
				return 1;
			}
			if(TransferBank(playerid,pTemp[playerid][bankID][0],-1,zCost,"bankWithdraw")) {
				SendSucc(playerid, "Деньги успешно выведены с банковского счёта");
				if(pData[playerid][pEConfirmed] < 99)
				{
					give_money(playerid, zCost, "Снятие денежных средств с банка");
				}
			}
			else SendErr(playerid, "Во время выполнения операции произошла ошибка. Попробуйте позже.");
			return 1;
		}

		case dBankDeposit: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			new zCost = strval(inputtext);
			if(zCost < 1 || zCost > GetPlayerMoneyEx(playerid)) {
				SendErr(playerid, "У вас недостаточно денег");
				SPD(playerid, dBankDeposit, DIALOG_STYLE_INPUT, ""cBLUE"Пополнить счет", ""cWH"Введите сумму, которую Вы хотите "cBLUE"положить"cWH" на Ваш банковский счёт:","Далее","Назад");
				return 1;
			}
			if(pData[playerid][pAdmin] < 8) {
			if(TransferBank(playerid,-1,pTemp[playerid][bankID][0],zCost,"bankDeposit")) {
				SendSucc(playerid, "Деньги зачислены на счёт");
				give_money(playerid, -zCost, "Деньги на депозит в банке");

			}
			else SendErr(playerid, "Во время выполнения операции произошла ошибка. Попробуйте позже.");
			}
			else {
			if(TransferBank(playerid,-1,pTemp[playerid][bankID][0],zCost,"bankDeposit")) {
				SendSucc(playerid, "Деньги зачислены на счёт.");
				give_money(playerid, -zCost, "Зачисление денег в банк");
			}
			else SendErr(playerid, "Во время выполнения операции произошла ошибка. Попробуйте позже.");
			}
			return 1;
		}

		case dBankTransfer: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			new trans = strval(inputtext);
			new query[256]; format(query, sizeof(query), "SELECT `name` FROM `bankdata` WHERE `id` = '%d'", trans);
			new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
			if(!sql_num_rows(r)) return sql_free_result(r), SendErr(playerid, "Не найден введённый банковский счёт");
			new name[32]; sql_get_field(r, 0, name);
			sql_free_result(r);

			if(pTemp[playerid][bankID][0] == trans)
			{
				SendErr(playerid, "Нельзя переводить денежные средств на свой банковский счёт!");
				return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			}

			SetPVarIntNew(playerid, "zTransfer", trans);
			format(query, sizeof(query), ""cWH"Номер счёта: %d\nНазвание счёта: %s\n\n"cBLUE"Если данные правильные, введите сумму, которую Вы хотите перевести на этот банковский счёт:",trans,name);
			SPD(playerid, dBankTransfer1, DIALOG_STYLE_INPUT, "Перевод средств", query, !"Далее", !"Отмена");
			return 1;
		}

		case dBankTransfer1: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			new zCost = strval(inputtext);
			if(zCost < 1 || zCost > GetBankBalance(pTemp[playerid][bankID][0])) {
				SendErr(playerid, "На Вашем счете недостаточно средств");
				ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
				return 1;
			}



			format(String256, sizeof(String256), "transferm_%d",pData[playerid][pMysqlID] );
			new transferm = GetGVarInt(String256, 1001);
			if(transferm + zCost > 1000000) return SendErr(playerid, "Вы можете перевести более P1млн в сутки");

			new trans = GetPVarIntNew(playerid, "zTransfer");
			if(pData[playerid][pAdmin] < 9)
			{

				if(pTemp[playerid][bankID][0] == trans)
					return SendErr(playerid, "Вы указали номер своего банковского счёта!");

				if(TransferBank(playerid,pTemp[playerid][bankID][0],trans,zCost,"bankDeposit")) SendSucc(playerid, "Вы перевели деньги на другой счёт");
				else SendErr(playerid, "Во время выполнения операции произошла ошибка. Попробуйте позже.");
 				new query[256]; format(query, sizeof(query), "SELECT `owner` FROM `bankdata` WHERE `id` = '%d'", trans);
				new Result:RB = sql_queryEx(zConn, query, QUERY_CACHED);
				if(!sql_num_rows(RB)) return sql_free_result(RB), SendErr(playerid, "Не найден введённый банковский счёт");



				new OWNERBK = sql_get_field_int(RB, 0);
				sql_free_result(RB);
				foreach(new x : Player) {
					if(OWNERBK == pData[x][pMysqlID])	{
						format(String256, sizeof(String256),""cBLUE"[BANK-INFO]"cWH" На ваш счет поступил перевод {00B359}%d рублей",zCost);
						SCM(x, 0xFFFF80FF,String256);
						break;
					}
				}

 				format(query,sizeof(query),"UPDATE `accounts` SET `bankstore` = bankstore + %i WHERE `id` = '%d'", 1, pData[playerid][pMysqlID]);
				sql_queryEx(zConn, query, QUERY_THREADED);
				format(query,sizeof(query),"UPDATE `accounts` SET `bankstore2` = bankstore2 + %i WHERE `id` = '%d'", 1, pData[playerid][pMysqlID]);
				sql_queryEx(zConn, query, QUERY_THREADED);
				format(String256, sizeof(String256), "transferm_%d",pData[playerid][pMysqlID] );
				SetGVarInt(String256, transferm + zCost ,1001);
			}
			else
			{
 			}

 			return 1;
		}

		case dBankSetCode: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			if(strlen(inputtext) < 4 || strlen(inputtext) > 8 || inputtext[0] == '0' || inputtext[0] == ' ') return SPD(playerid, dBankSetCode, DIALOG_STYLE_INPUT, "Смена кода", ""cWH"Введите Ваш "cBLUE"текущий "cWH"защитный код:","Далее","Назад");
			new query[128]; format(query, sizeof(query), "SELECT * FROM `bankdata` WHERE `id` = '%d' AND `code` = '%d'", pTemp[playerid][bankID][0], strval(inputtext));
			new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
			if(!sql_num_rows(r)) {
				SendErr(playerid, "Вы неверно ввели старый защитный код");
				SPD(playerid, dBankSetCode, DIALOG_STYLE_INPUT, ""cBLUE"Смена кода", ""cWH"Введите Ваш "cBLUE"текущий "cWH"защитный код:","Далее","Назад");
			}
			else SPD(playerid, dBankSetCode1, DIALOG_STYLE_INPUT, ""cBLUE"Смена кода", ""cWH"Введите "cBLUE"новый "cWH"защитный код\n\n{AAAAAA}Код может состоять только из цифр и не может начинаться с 0\nТребуется как минимум 4 цифры, максимальная длина кода 8 цифр","Далее","Выход");
			sql_free_result(r);
			return 1;
		}

		case dBankSetCode1: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			if(strlen(inputtext) < 4 || strlen(inputtext) > 8 || inputtext[0] == '0'  || inputtext[0] == ' ') return SPD(playerid, dBankSetCode1, DIALOG_STYLE_INPUT, "Смена кода", ""cWH"Введите "cBLUE"новый "cWH"защитный код\n\n{AAAAAA}Код может состоять только из цифр и не может начинаться с 0\nТребуется как минимум 4 цифры, максимальная длина кода 8 цифр","Далее","Выход");
			SetPVarIntNew(playerid, "zSetCode", strval(inputtext));
			SPD(playerid, dBankSetCode2, DIALOG_STYLE_INPUT, "Смена кода", ""cWH"Повторите "cBLUE"новый "cWH"защитный код для подтверждения:", "Далее", "Выход");
			return 1;
		}

		case dBankSetCode2: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			new code = GetPVarIntNew(playerid, "zSetCode");
			if(code != strval(inputtext)) {
				ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
				SendErr(playerid, "Вы неверно повторили новый защитный код. Попробуйте еще раз.");
			}
			else {
				new query[128];

				format(query,sizeof(query),"SELECT `id` FROM `bankdata` WHERE `id` = '%d'",pTemp[playerid][bankID][0]);
				new Result:r = sql_queryEx(zConn, query);
				if(!sql_num_rows(r)) 																			  		   {
				sql_free_result(r);
				return SendErr(playerid, "Во время выполнения операции произошла ошибка. Попробуйте позже."); 			   }

				sql_free_result(r);
				format(query, sizeof(query), "UPDATE `bankdata` SET `code` = '%d' WHERE `id` = '%d'", code, pTemp[playerid][bankID][0]);
				r = sql_queryEx(zConn, query);

				format(query, sizeof(query), "Вы сменили защитный код от счета №%d на %d", pTemp[playerid][bankID][0], code);
 				SendSucc(playerid, query);
 			}
			return 1;
		}


		case dBankSetName: {
			if(!response) return ShowPlayerBankMenu(playerid, pTemp[playerid][bankID][0]);
			if(!strlen(inputtext) || strlen(inputtext) > 15) {
				SendErr(playerid, "Название указано неверно. Максимальное количество символов: 15");
				SPD(playerid, dBankSetName, DIALOG_STYLE_INPUT,""cBLUE"Переименовать счет", ""cWH"Введите "cBLUE"новое "cWH"название счёта\n\nУчтите, что название не должно превышать 15 символов:","Далее","Назад");
			}
			else {
				new query[128];
				for(new i=0; i <strlen(inputtext); i++)                  {
				if(inputtext[i]>=0x00 && inputtext[i] <= 0x1F){
  				inputtext[i]='#';}
				if(inputtext[i] == '|') {
				inputtext[i]='#';		}

				if(inputtext[i] == '\\') {
				inputtext[i]='#';		}
				if(inputtext[i]== '"'){
				inputtext[i]='#';}

  				if(inputtext[i]==0x7F){
 				inputtext[i]='#';}                                  	  }
		   		sql_escape_string(zConn, inputtext, inputtext, 15);
				format(query, sizeof(query), "UPDATE `bankdata` SET `name` = '%s' WHERE `id` = '%d'", inputtext, pTemp[playerid][bankID][0]);
				new Result:r = sql_queryEx(zConn, query);
				format(query, sizeof(query), "Вы сменили название счета №%d на %s", pTemp[playerid][bankID][0], inputtext);
 				SendSucc(playerid, query);
 				sql_free_result(r);
			}
			return 1;
		}


		case dBankMenu: {
			if(response) {
				if(!listitem) ShowPlayerBank(playerid);
				else {
					new query[128]; format(query, sizeof(query), "SELECT * FROM `bankdata` WHERE `owner` = '%d'", pData[playerid][pMysqlID]);
					new Result:r = sql_queryEx(zConn, query);
					if(sql_num_rows(r) > 3) return SendErr(playerid, "Разрешено регистрировать только 4 банковских счета"),	sql_free_result(r);
					SPD(playerid, dCreateBank, DIALOG_STYLE_INPUT, ""cBLUE"Создать счет", ""cWH"Введите "cBLUE"название "cWH"счёта\n\nУчтите, что название не должно превышать 15 символов:","Далее","Назад");
					sql_free_result(r);
				}
			}
			return 1;
		}



		case dCreateBank: {
			if(pData[playerid][pLevel] < 3) return SendErr(playerid, "Создавать банковский счёт можно только с 3 уровня.");
			if(!response) return SPD(playerid, dBankMenu, 2, ""cBLUE"Банк", "Мои счета\nОткрыть новый счёт", "Принять", "Отмена");
			if(!strlen(inputtext) || strlen(inputtext) > 15) {
				SendErr(playerid, "Название указано неверно. Максимальное количество символов: 15");
				SPD(playerid, dCreateBank, DIALOG_STYLE_INPUT, ""cBLUE"Создать счет", ""cWH"Введите "cBLUE"название "cWH"счёта\n\nУчтите, что название не должно превышать 15 символов:","Далее","Назад");
			}
			else
			{
				if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
				{
					SPD(playerid, dCreateBank, DIALOG_STYLE_INPUT, ""cBLUE"Создать счет", ""cWH"Введите "cBLUE"название "cWH"счёта\n\nУчтите, что название не должно превышать 15 символов:","Далее","Назад");
					SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
					return 1;
				}

		   		sql_escape_string(zConn, inputtext, inputtext, 15);
				new query[256]; format(query, sizeof(query), "INSERT INTO `bankdata` VALUES ('','%s','9999','%d','0')", inputtext, pData[playerid][pMysqlID]);
				new Result:r = sql_queryEx(zConn, query);
				SCM(playerid, COLOR_YELLOW, "Вы успешно открыли новый счёт в банке.");
				new sqqsd[50];
				new insid = sql_insert_id(r);
				format(sqqsd, sizeof(sqqsd), "> Номер вашего счёта: %d", insid);
				SCM(playerid, COLOR_YELLOW, sqqsd);
				format(sqqsd, sizeof(sqqsd), "> Название счёта: %s", inputtext);
				SCM(playerid, COLOR_YELLOW, sqqsd);
 				SCM(playerid, COLOR_YELLOW, "> Секретный пин-код для доступа: 9999");
				SCM(playerid, COLOR_LIGHTRED, "ВНИМАНИЕ! Не забудьте запомнить пин-код. При его утере Вы не сможете получить доступ к счету");
				ShowPlayerBankMenu(playerid, insid);

				sql_free_result(r);
		 	}
		 	return 1;
		}


		case dBankMenuATM:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
					new mes[128];
					format(mes,sizeof(mes),""cWH"На счету: "cBLUE"%d рублей",pData[playerid][pBank]);
					SPD(playerid,0000,0,""cBLUE"Информация о счёте",mes,"OK","");
				}
				case 1:
				{
					SPD(playerid,DIALOG_ATM_GET,1,""cBLUE"Снять деньги",""cWH"Укажите сумму, которую хотите снять","Снять","Выход");
				}
				case 2:
				{
					SPD(playerid,DIALOG_ATM_PUT,1,""cBLUE"Положить деньги",""cWH"Укажите сумму, которую хотите положить на счет","Положить","Выход");
				}
				case 3:
				{
					if(!pData[playerid][pPhone])
					{
						SendErr(playerid, "У Вас нет телефона. Вы можете купить его в Универмаге");
						return 1;
					}
					SPD(playerid,DIALOG_ATM_PHONE,1,"Баланс мобильного",""cWH"Укажите сумму, которую хотите положить на счет мобильного","Положить","Выход");
				}

			}
		}
		case dATMWatch:
		{
			SPD(playerid,dATM,2,""cBLUE"Меню",""cBLUE"1."cWH" Проверить счет\n\
				"cBLUE"2."cWH" Снять деньги со счета\n\
				"cBLUE"3."cWH" Положить деньги на счет\n\
				"cBLUE"4."cWH" Пополнить баланс мобильного","OK","Отмена");
		}
		case DIALOG_ATM_GET:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(amount < 1 || amount > 100000) return SendErr(playerid, "Можно снимать от P1 до P100000");
			if(pData[playerid][pBank] < amount) return SendErr(playerid, "У Вас недостаточно денег на счету");
			pData[playerid][pBank] -= amount;
			UpdatePlayerData(playerid,"bank",pData[playerid][pBank]);

			give_money(playerid, amount,"Снятие денег");
			SendInf(playerid, "Вы сняли деньги со счета");
		}
		case DIALOG_ATM_PUT:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(amount < 1 || amount > 100000) return SendErr(playerid, "Можно класть от P1 до P100000");
			if(GetPlayerMoneyEx(playerid) < amount) return SendErr(playerid, "У Вас недостаточно денег на руках");
			if(GetPlayerMoneyEx(playerid) <= 0) return SendErr(playerid, "У Вас недостаточно денег на руках");
			pData[playerid][pBank] += amount;
			UpdatePlayerData(playerid,"bank",pData[playerid][pBank]);

			give_money(playerid, -amount,"Пополнение счета");
			SendInf(playerid, "Вы положили деньги на счет в банке");
		}
		case DIALOG_ATM_PHONE:
		{
			if(!response) return 1;
			new amount = strval(inputtext);
			if(amount < 5 || amount > 10000) return SendErr(playerid, "Можно класть от P5 до P10000");
			if(GetPlayerMoneyEx(playerid) < amount) return SendErr(playerid, "У Вас недостаточно денег на руках");
			if(GetPlayerMoneyEx(playerid) <= 0) return SendErr(playerid, "У Вас недостаточно денег на руках");
			pData[playerid][pPhoneMoney] += amount;

			give_money(playerid, -amount,"Пополнение телефона через банкомат");
			UpdatePlayerData(playerid,"phonemoney",pData[playerid][pPhoneMoney]);
   			GosMoney[0] += amount;
			SaveNewsMoneyEx();
			SendInf(playerid, "Вы успешно пополнили баланс мобильного телефона");
		}
		case dShop:
		{
			if(!response) return 1;
			new
				id = GetPlayerVirtualWorld(playerid);
			switch(listitem)
			{
				case 0:
				{
					if(pData[playerid][pPhone]) return SendErr(playerid, "У Вас уже есть телефон");
					new price = gShopPrice[0];
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					new number,count;
					new Result:r;
					new query[128];
					for(new d; d < 10; d ++)
					{
						count++;
						if(count >= 8) return SendErr(playerid, "Произошла ошибка, попробуйте еще раз");
						number = RandomEx(100000,999999);
						format(query,sizeof(query),"SELECT `id` FROM `accounts` WHERE `phone` = '%d'",number);
						r = sql_queryEx(zConn, query);
						if(!sql_num_rows(r)) break;
					}

					sql_free_result(r);
					pData[playerid][pPhone] = number;
					UpdatePlayerData(playerid,"phone",number);

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

 					give_money(playerid, -price, "Покупка телефона");


					new mes[128];
					format(mes,sizeof(mes),"Поздравляем Вы купили телефон. Ваш номер: "cGR"%d",number);
					SCM(playerid,COLOR_BLUE,mes);

					check_quest_prize_start(playerid, 11);

					SendInf(playerid, "Чтобы позвонить, используйте команду "cGR"/call"cWH", чтобы отправить SMS, используйте команду "cGR"/sms");

				}
				case 1:
				{
					if(!pData[playerid][pPhone]) return SendErr(playerid, "У Вас нет телефона");
					new price = gShopPrice[1]*1;
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					SetPVarIntNew(playerid,"pokuppr",price);
					SPD(playerid,dNumberPhone,1,"Смена номера SIM-карты",""cWH"Введите новый шестизначный номер телефона","Купить","Отмена");
					return 1;
				}
				case 2:
				{
					new price = gShopPrice[2]*1;
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка аптечки");


					give_inventory_items(playerid, 1, 2);

					SCM(playerid,0x9ADD78FF,"Вы купили 2-х разовую аптечку. {993333}/healme{9ADD78} - Вылечиться");
				}
				case 3:
				{
					if(get_inventory_items(playerid, 2))
						return SendErr(playerid, "У вас уже есть часы!");

					new price = gShopPrice[3]*1;
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка часов");

					give_inventory_items(playerid, 2, 1);

					check_quest_prize_start(playerid, 12);

					SCM(playerid,0x009900FF,"Вы купили часы. {FFCC00}/time"cGR" - Посмотреть время");
				}
				case 4:
				{
					new price = gShopPrice[4]*1;
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка цветов");
					SendInf(playerid, "Вы купили букет цветов. "cGR"/flower {33AA33}- подарить цветы");

					give_inventory_items(playerid, 3, 1);
				}
				case 5:
				{
					new price = gShopPrice[5]*1;
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка трости");
					GivePlayerWeaponEx(playerid,15,1);
					SendInf(playerid, "Вы купили топор");
				}
				case 6:
				{
					new price = gShopPrice[6]*1;
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка парашюта");
					GivePlayerWeaponEx(playerid,46,1);
					SendInf(playerid, "Вы купили {FFCC00}парашют");
				}

				case 7:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка фотоаппарата");
					GivePlayerWeaponEx(playerid, 43, 50);
					SendInf(playerid, "Вы купили {FFCC00}фотоаппарат");
				}
				case 8:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");

					if(get_inventory_items(playerid, 7))
						return SendErr(playerid, "У вас уже имеется телефонная книга!");

					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка телефонной книги");
					SendInf(playerid, "Вы купили телефонную книгу. Чтобы ей воспользоваться введите команду {FFCC00}/phonebook");

					give_inventory_items(playerid, 7, 1);

					check_quest_prize_start(playerid, 13);
				}

				case 9:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");
					for (new i = 0; i < 13; i++) {
						new weapid, ammo;
						GetPlayerWeaponData(playerid, i, weapid, ammo);
						if(weapid == 41 && ammo > 0)  return SendErr(playerid, "У Вас уже есть балончик с краской.");
					}
					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка мини-балончика с краской");
					SendInf(playerid, "Вы купили Маленький Балончик с краской{F7FE72}.");
					GivePlayerWeaponEx(playerid, 41, 500);
				}
				case 10:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У Вас недостаточно денег");
					for (new i = 0; i < 13; i++) {
						new weapid, ammo;
						GetPlayerWeaponData(playerid, i, weapid, ammo);
						if(weapid == 41 && ammo > 0)  return SendErr(playerid, "У Вас уже есть балончик с краской.");
					}
					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка балончика с краской");
					SendInf(playerid, "Вы купили Балончик с краской");
					GivePlayerWeaponEx(playerid, 41, 1500);
				}
				case 11:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У Вас недостаточно денег");
					}


					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка ремонтного комплекта");
					SendInf(playerid, "Вы купили ремонтный комплекта");

					give_inventory_items(playerid, 8, 1);

				}

				case 12:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У Вас недостаточно денег");
					}


					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка удочки");


					give_inventory_items(playerid, 373, 1);
				}
				case 13:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У Вас недостаточно денег");
					}


					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка удочки");


					give_inventory_items(playerid, 374, 1);
				}
				case 14:
				{
					new price = gShopPrice[listitem];
					if(GetPlayerMoneyEx(playerid) < price)
					{
						show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
						return SendErr(playerid, "У Вас недостаточно денег");
					}


					buy_buisnes_all(BUISNES_PRODUCTION, id, price);

					give_money(playerid, -price, "Покупка удочки");


					give_inventory_items(playerid, 375, 1);
				}
			}

			new
				str[1500];

			if(strlen(str) < 1) strcat(str, ""cGREY"Товар\t"cGREY"Стоимость\n");

			for(new x=0; x < SHOP_OBJECTS; x++)
			{
				format(str,sizeof(str),"%s"cBLUE"%d. "cWH"%s\t"cGR"%d рублей\n",str, x+1, gShopObject[x],gShopPrice[x]);

			}
			SPD(playerid,dShop, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Универмаг:",str,"Купить","Выход");


		}

		case dBank:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:
				{
					new mes[128];
					format(mes,sizeof(mes),""cWH"У Вас на счету: "cBLUE"%d рублей",pData[playerid][pBank]);
					SPD(playerid,dATMWatch,0,"Информация",mes,"OK","");
				}
				case 1:
				{
					SPD(playerid,DIALOG_ATM_GET,1,"Снятие средств",""cWH"Укажите сумму, которую хотите снять:","Снять","Выход");
				}
				case 2:
				{
					SPD(playerid,DIALOG_ATM_PUT,1,"Пополнить счет",""cWH"Укажите сумму, которую хотите положить на счет:","Снять","Выход");
				}
			}
		}
		case dInviteSkinLeader:
		{
			new id = GetPVarIntNew(playerid,"actsubleader");
			new fractionid = pTemp[id][pOfferFractionid];
			new skinid = gFractionSkin[fractionid][listitem];
 			new subid = GetPVarIntNew(playerid,"subidleader");
			new frid = GetSubfractionID(fractionid);
			pData[id][pFraction] = fractionid + 1;
			pData[id][pRank] = pData[playerid][pRank] - 1;
			pData[id][pSubfraction] = subid + 1;
			new query[128];
			format(query,sizeof(query),"UPDATE `accounts` SET `fraction` = '%d', `rank` = '%d', `fractionskin` = '%d', `subfraction` = '%d' WHERE `id` = '%d'",pData[id][pFraction],pData[id][pRank],skinid,pData[id][pSubfraction],pData[id][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			new mes[128];
			format(mes,sizeof(mes),"%s назначил вас лидером подфракции %s: \"%s\"",pData[playerid][pNickname],gFractionName[fractionid],gSubfractionName[frid][subid]);
			SCM(id,0xff0000ff,mes);
			format(mes,sizeof(mes),"Вы назначили %s управлять подфракцией: \"%s\"",pData[id][pNickname],gSubfractionName[frid][subid]);
			SCM(playerid,0xff0000ff,mes);
			SetPlayerColor(id,gFractionColor[fractionid]);
		}
		case dInviteLeader:
		{
			if(!response) return 1;
			new fractionid = pTemp[playerid][pOfferFractionid];
			new offer = pTemp[playerid][pOfferFraction];
 			new mes[300];
			for(new i;i<12+8;i++)
			{
				new skinid = gFractionSkin[fractionid][i];
				if(!skinid) break;
				if(!i) format(mes,sizeof(mes),"Скин %d [%d]",i+1,skinid);
				else format(mes,sizeof(mes),"%s\nСкин %d [%d]",mes,i+1,skinid);
			}
			SCM(playerid,CINFO,"Ждите, пока лидер выберет одежду для Вас");
			SPD(offer,dInviteSkinLeader,2,pData[playerid][pNickname],mes,"Принять","");
		}
		case dSubleader:
		{
			if(!response) return 1;
			if(!listitem) return 1;
			new id = GetPVarIntNew(playerid,"actsubleader");
			new subid = listitem-1;
			SetPVarIntNew(playerid,"subidleader",subid);
			new fractionid = pData[playerid][pFraction] - 1;
			new frid = GetSubfractionID(fractionid);
			if(!IsPlayerConnected(id) || !pData[id][pMysqlID]) return SendErr(playerid, "Неверный ID / игрок не зарегестрирован");
			new mes[128];
			format(mes,sizeof(mes),"Вы предложили %s вступить в вашу фракцию",pData[id][pNickname]);
			SCM(playerid,CBLUE,mes);
			format(mes,sizeof(mes),"%s предложил Вам стать лидером \"%s\"",pData[playerid][pNickname],gSubfractionName[frid][subid]);
			SPD(pTemp[playerid][pInviteLeader1],dInviteLeader,0,"Лидерство",mes,"Вступить","Отмена");
		}
		case dStopLoad:
		{
			if(!response) return RemovePlayerFromVehicle(playerid);
		}
		case dServicePrez:
		{
			if(!response) return 1;
 			new tazist;
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i) || !pData[i][pMysqlID]) continue;
				if((pData[i][pFraction] == 11 && pData[i][pRank] > 3) && IsPlayerInDynamicArea(i, gAreas[arPrezText4])) {}
				else continue;
				new mes[140];
				format(mes,sizeof(mes),"[Горячая линия] %s[%d]: %s",pData[playerid][pNickname],playerid,inputtext);
				SCM(i,CDEPARTMENT,mes);
				SendInf(i, "Введите {0066FF}/otvet"cWH" для ответа на звонок");
				tazist++;
			}
			if(tazist == 0)			{
				SPD(playerid,dMes,0,"Горячая линия",""cWH"В данный момент горячая линия президента недоступна","Закрыть","");
				return 1;
			}
			SetPVarIntNew(playerid, "prezcall", 1);
			pTemp[playerid][pNotReportP] = 1;
 			SPD(playerid,dMes,0,"Горячая линия Президента",""cWH"Вызов принят. Ожидайте ответа","Закрыть","");
		}

		case dMesVoen:
		{
			if(!response || listitem > 3) return 1;
			new want1;
			new want_text[120];
			format(want_text,sizeof(want_text),"ID\tУровень\tТелефон\tРанг\tВыговоры\tИмя игрока\n\n");
 			format(String4096,sizeof(String4096),"");
			strcat(String4096, want_text);
			if(listitem < 3 && pData[playerid][pFraction] != 8) {
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(pData[i][pAdmin] > 0) continue;

				if(pData[i][pFraction] != pData[playerid][pFraction] || (pData[i][pSubfraction] != listitem + 1)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn] , pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}

			else if(listitem < 2 && pData[playerid][pFraction] == 8) {
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(pData[i][pAdmin] > 0) continue;

				if(pData[i][pFraction] != pData[playerid][pFraction] || (pData[i][pSubfraction] != listitem + 1)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn] , pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}


			else {
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
 				if(pData[i][pFraction] != pData[playerid][pFraction] || (pData[i][pSubfraction] != 0)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}
			if(want1 == 0) strcat(String4096, ""cWH"Информация не найдена");

			if(listitem < 3) {
			new Fracid;
			if(pData[playerid][pFraction] == 8) { Fracid = 1; }
			else if(pData[playerid][pFraction] == 9) { Fracid = 2; }
			else if(pData[playerid][pFraction] == 10) { Fracid = 4; }
			else if(pData[playerid][pFraction] == 11) { Fracid = 3; }
			else if(pData[playerid][pFraction] == 2) { Fracid = 0; }
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gSubfractionName[Fracid][listitem], String4096, "Закрыть", "");
			}
			else {
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gFractionName[pData[playerid][pFraction] -1], String4096, "Закрыть", "");
			}
		}
		case dMesVoen2:
		{
			if(!response || listitem > 4) return 1;
			new want1;
			new want_text[120];
			format(want_text,sizeof(want_text),"ID\tУровень\tТелефон\tРанг\tВыговоры\tИмя игрока\n\n");
 			format(String4096,sizeof(String4096),"");
			strcat(String4096, want_text);
			new fracfind;
			if(pData[playerid][pRank] == 5) fracfind = 9;
			else if(pData[playerid][pRank] == 6) fracfind = 8;
			else if(pData[playerid][pRank] == 7) fracfind = 10;
			else if(pData[playerid][pRank] == 8) fracfind = 2;
			else if(pData[playerid][pRank] == 9) fracfind = GetPVarIntNew(playerid, "idfind");
			else return 1;

			if(listitem < 3) {
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(pData[i][pAdmin] > 0) continue;

				if(pData[i][pFraction] != fracfind || (pData[i][pSubfraction] != listitem + 1)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn] , pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}
			else if (listitem == 3){
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;

				if(pData[i][pFraction] != fracfind || (pData[i][pSubfraction] != 0)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}
			else if (listitem == 4){
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;

				if(pData[i][pFraction] != pData[playerid][pFraction] || (pData[i][pSubfraction] != 0)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}

			if(want1 == 0) strcat(String4096, ""cWH"Информация не найдена");

			if(listitem < 3) {
			new Fracid;
			if(fracfind == 8) { Fracid = 1; }
			else if(fracfind == 9) { Fracid = 2; }
			else if(fracfind == 10) { Fracid = 4; }
			else if(fracfind == 11) { Fracid = 3; }
			else if(fracfind == 2) { Fracid = 0; }
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gSubfractionName[Fracid][listitem], String4096, "Закрыть", "");
			}
			else if(listitem == 3) {
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gFractionName[ fracfind -1 ], String4096, "Закрыть", "");
			}
			else if(listitem == 4) {
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gFractionName[ pData[playerid][pFraction] -1 ], String4096, "Закрыть", "");
			}
		}
		case dMesVoen3:
		{
			if(!response || listitem > 4) return 1;
			new want1;
			new want_text[120];
			format(want_text,sizeof(want_text),"ID\tУровень\tТелефон\tРанг\tВыговоры\tИмя игрока\n\n");
 			format(String4096,sizeof(String4096),"");
			strcat(String4096, want_text);
			new fracfind;
			if(pData[playerid][pRank] == 4) fracfind = 1;
			else return 1;

			if(listitem < 1) {
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(pData[i][pAdmin] > 0) continue;

				if(pData[i][pFraction] != fracfind || (pData[i][pSubfraction] != listitem + 1)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn] , pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}

			else if (listitem == 2){
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
 				if(pData[i][pFraction] != pData[playerid][pFraction] || (pData[i][pSubfraction] != 0)) continue;
				if(pTemp[i][pAFK] < 2)
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname]);
				}
				else
				{
				if(pData[i][pPhone] > 0) format(want_text,sizeof(want_text), ""cWH"%d\t%d\t%i\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pPhone], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				else format(want_text,sizeof(want_text), ""cWH"%d\t%d\tNone\t\t%d\t%d/3\t%s {ffa800}[AFK: %s]"cWH"\n", i,pData[i][pLevel], pData[i][pRank], pData[i][pFWarn], pData[i][pNickname],Converts(pTemp[i][pAFK]));
				}

				strcat(String4096, want_text);
				want1+=1;
			}
			}

			if(want1 == 0) strcat(String4096, ""cWH"Информация не найдена");

			if(listitem < 3) {
			new Fracid;
			if(fracfind == 8) { Fracid = 1; }
			else if(fracfind == 9) { Fracid = 2; }
			else if(fracfind == 10) { Fracid = 4; }
			else if(fracfind == 11) { Fracid = 3; }
			else if(fracfind == 2) { Fracid = 0; }
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gSubfractionName[Fracid][listitem], String4096, "Закрыть", "");
			}
			else if(listitem == 3) {
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gFractionName[ fracfind -1 ], String4096, "Закрыть", "");
			}
			else if(listitem == 4) {
			format(String4096, sizeof(String4096), ""cWH"Всего онлайн: "cBLUE"%d\n%s",want1,String4096);
			SPD(playerid, dMes, DIALOG_STYLE_MSGBOX, gFractionName[ pData[playerid][pFraction] -1 ], String4096, "Закрыть", "");
			}
		}
		case dEmergencyCall:
		{
			if(!response) return 1;
			switch(listitem)
			{
				case 0:SPD(playerid,dEmergencyPolice1,1,"МВД",""cWH"Здравствуйте. Опишите ситуацию:",!"Далее",!"Отмена");
				case 1:SPD(playerid,dEmergencyMedic1,1,"Скорая помощь",""cWH"Здравствуйте. Опишите ситуацию:",!"Далее",!"Отмена");
				case 2:SPD(playerid,dEmergencyMechanic1,1,"Буксир / механик",""cWH"Здравствуйте. Опишите ситуацию:",!"Далее",!"Отмена");
			}
		}
		case dEmergencyPolice1:
		{
			if(!response) return 1;
			new Float:x, Float:y, Float:z;
			GetPlayerPos(playerid,x,y,z);

			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i) || !pData[i][pMysqlID]) continue;
				if(!IsACop(i)) continue;
				new mes[128];
				format(mes,sizeof(mes),"[Внимание] %s вызывает МВД/ФСБ. Чтобы принять вызов введите "cWH"/pc",pData[playerid][pNickname]);
				SCM(i,CDEPARTMENT,mes);
				format(mes,sizeof(mes),"[Внимание] Причина: %s",inputtext);
				SCM(i,CDEPARTMENT,mes);
			}
			gEmCall[0] = playerid;
			SPD(playerid,dMes,0,"МВД",""cWH"Вызов принят. Ждите","Далее","");
		}


		case dUnfill:
		{
			if(!response) return 1;
		}

		case dSu:
		{
			if(!response) return 1;
			new suid = GetPVarIntNew(playerid,"wantedsid");
 			if(pData[suid][pJail]) return SendErr(playerid, "Игрок уже находится в КПЗ");
			if(pData[suid][pWanted] >= 6) return SendErr(playerid, "У игрока уже имеется максимальный уровень розыска");

			SetPVarIntNew(playerid,"wantedsu",listitem);
			switch(listitem)
			{
				case 0: {
					format(String4096,sizeof(String4096),"- На гражданское лицо. {FF1A1A}Наказание: "cGR"2 звезды\n- На сотрудника государственной службы. {FF1A1A}Наказание: "cGR"4 звезды");
				}
				case 1: {
					format(String4096,sizeof(String4096),"- На гражданское лицо. {FF1A1A}Наказание: "cGR"4 звезды\n- На сотрудника государственной службы. {FF1A1A}Наказание: "cGR"6 звезд");
				}
				case 2: {
					format(String4096,sizeof(String4096),"- Порча личного имущества. {FF1A1A}Наказание: "cGR"2 звезды\n- Порча имущества государственной собственности и вандализм. {FF1A1A}Наказание: "cGR"4 звезды");
				}
				case 3: {
					format(String4096,sizeof(String4096),"- Ношение оружие в открытом виде и ношение оружия/патронов без лицензии. {FF1A1A}Наказание: "cGR"3 звезды\n- Нелегальная продажа оружия гражданину. {FF1A1A}Наказание: "cGR"5 звезд\n- Кража материалов, для создания оружия. {FF1A1A}Наказание: "cGR"6 звезд");
				}
				case 4: {
					format(String4096,sizeof(String4096),"- Попытка подкупа должностного лица. {FF1A1A}Наказание: "cGR"3 звезды");
				}
				case 5: {
					format(String4096,sizeof(String4096),"- Хранение и/или перевозка наркотических средств. {FF1A1A}Наказание: "cGR"4 звезды\n- Сбыт, распространение, приобретение наркотических средств. {FF1A1A}Наказание: "cGR"5 звезд");
				}
				case 6: {
					format(String4096,sizeof(String4096),"- Угон транспортного средства. {FF1A1A}Наказание: "cGR"3 звезды");
				}
				case 7: {
					format(String4096,sizeof(String4096),"- Неподчинение сотруднику МВД/ФСБ. {FF1A1A}Наказание: "cGR"3 звезды\n- Попытка побега с места преступления или во время ареста. {FF1A1A}Наказание: "cGR"4 звезды");
				}
				case 8: {
					format(String4096,sizeof(String4096),"- Укрывательство преступников/фактов/улик/важной для следствия информации.{FF1A1A}Наказание: "cGR"3 звезды");
				}
				case 9: {
					format(String4096,sizeof(String4096),"- Проникновение на охраняемую правоохранительными органами территорию. {FF1A1A}Наказание: "cGR"3 звезды\n- Проникновение на частную территорию без разрешения владельца. {FF1A1A}Наказание: "cGR"2 звезды\n- Проникновение на территорию закрытой военной базы. {FF1A1A}Наказание: "cGR"6 звезд");
				}
				case 10: {
					format(String4096,sizeof(String4096),"- Попытка похищения должностного/гражданского лица. {FF1A1A}Наказание: "cGR"4 звезды\n- Исполнение похищения должностного/гражданского лица. {FF1A1A}Наказание: "cGR"5 звезд");
				}
				case 11: {
					format(String4096,sizeof(String4096),"- Планирование теракта. {FF1A1A}Наказание: "cGR"5 звезд\n- Исполнение теракта. {FF1A1A}Наказание: "cGR"6 звезд");
				}
				case 12: {
					format(String4096,sizeof(String4096),"- Вооруженное насилие, а так же призывы к насилию на митингах. {FF1A1A}Наказание: "cGR"6 звезд\n- Участие в несанкционированных митингах. {FF1A1A}Наказание: "cGR"5 звезд\n- Организация незаконных митингов. {FF1A1A}Наказание: "cGR"6 звезд");
				}
			}
			SPD(playerid, dSu2, DIALOG_STYLE_LIST, sucmd[listitem] ,String4096, !"Далее", !"Отмена");

		}
		case dSu2:
		{
			if(!response) return 1;
			new suid = GetPVarIntNew(playerid,"wantedsid");
			new slid = GetPVarIntNew(playerid,"wantedsu");
 			if(pData[suid][pJail]) return SendErr(playerid, "Игрок уже находится в КПЗ");
			if(pData[suid][pWanted] >= 6) return SendErr(playerid, "У игрока уже имеется максимальный уровень розыска");
			new wantedpl;
			switch(slid)
			{
				case 0: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Нападение на гражданское лицо");
					wantedpl = 2;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Нападение на сотрудника государственной службы");
					wantedpl = 4;
					}
				}
				case 1: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Нападение на гражданское лицо с применением оружия");
					wantedpl = 4;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Нападение на сотрудника государственной службы с применением оружия");
					wantedpl = 6;
					}
				}
				case 2: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Порча личного имущества");
					wantedpl = 2;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Порча имущества государственной собственности и вандализм");
					wantedpl = 4;
					}
				}
				case 3: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Ношение оружие в открытом виде и ношение оружия/патронов без лицензии");
					wantedpl = 3;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Нелегальная продажа оружия гражданину");
					wantedpl = 5;
					}
					if(listitem == 2) {
					format(String256,sizeof(String256)," Кража материалов, для создания оружия");
					wantedpl = 6;
					}
				}
				case 4: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Попытка подкупа должностного лица");
					wantedpl = 3;
					}
				}
				case 5: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Хранение и/или перевозку наркотических средств");
					wantedpl = 4;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Сбыт, распространение, приобретение наркотических средств");
					wantedpl = 5;
					}
				}
				case 6: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Угон транспортного средства");
					wantedpl = 3;
					}
				}
				case 7: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Неподчинение сотруднику МВД/ФСБ, отказ показать документы и остановится на таможне");
					wantedpl = 3;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Попытка побега с места преступления или во время ареста");
					wantedpl = 4;
					}
				}
				case 8: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Укрывательство преступников/фактов/улик/важной для следствия информации");
					wantedpl = 3;
					}
				}
				case 9: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Проникновение на охраняемую правоохранительными органами территорию");
					wantedpl = 3;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Проникновение на частную территорию без разрешения владельца");
					wantedpl = 2;
					}
					if(listitem == 2) {
					format(String256,sizeof(String256),"Проникновение на территорию закрытой военной базы");
					wantedpl = 6;
					}
				}
				case 10: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Попытка похищения должностного/гражданского лица");
					wantedpl = 4;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Исполнение похищения должностного/гражданского лица");
					wantedpl = 5;
					}
				}
				case 11: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Планирование теракта");
					wantedpl = 5;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Исполнение теракта");
					wantedpl = 6;
					}
				}
				case 12: {
					if(listitem == 0) {
					format(String256,sizeof(String256),"Вооруженное насилие, а так же призывы к насилию на митингах");
					wantedpl = 6;
					}
					if(listitem == 1) {
					format(String256,sizeof(String256),"Участие в несанкционированных митингах");
					wantedpl = 5;
					}
					if(listitem == 2) {
					format(String256,sizeof(String256),"Организация незаконных митингов");
					wantedpl = 6;
					}
				}
			}

			pData[suid][pWanted] += wantedpl;
			if(pData[suid][pWanted] > 6) pData[suid][pWanted] = 6;
			UpdatePlayerData(suid,"wanted",pData[suid][pWanted]);
			SetPlayerWantedLevel(suid,pData[suid][pWanted]);
			new mes[256];
			format(mes,sizeof(mes),"%s объявил вас в розыск. Причина: %s. Уровень: %d",pData[playerid][pNickname],String256,wantedpl);
			SCM(suid,CBADINFO,mes);
			format(mes,sizeof(mes),"[Внимание] %s объявлен в розыск +%d["cWH"%d{"#cDEPARTMENT"}]",pData[suid][pNickname],wantedpl,pData[suid][pWanted]);
			CopMes(CDEPARTMENT,mes);
			format(mes,sizeof(mes)," Обвинитель: %s. Причина: %s",pData[playerid][pNickname],String256);
			CopMes(CDEPARTMENT,mes);
			format(mes,sizeof(mes),"Вы объявили %s в розыск. Причина: %s. Уровень: %d",pData[suid][pNickname],String256,wantedpl);
			SCM(playerid,CGREEN,mes);
			WantedStatus += 0.3;

			for(new d; d < 6; d++) {
			if(pData[suid][pWantedi][d] == 0) {
			pData[suid][pWantedi][d] = slid*10+listitem+1;
			break;
 			}
			}
			format(pData[suid][pWantedinf],80,"%d,%d,%d,%d,%d,%d",
			pData[suid][pWantedi][0],pData[suid][pWantedi][1],pData[suid][pWantedi][2],
			pData[suid][pWantedi][3],pData[suid][pWantedi][4],pData[suid][pWantedi][5]);
			format(String1024,sizeof(String1024),"UPDATE `accounts` SET `wantedi`='%s' WHERE `nickname`='%s'", pData[suid][pWantedinf] , pData[suid][pNickname]);
			sql_queryEx(zConn, String1024, QUERY_THREADED);

		}
		case dDissolution:
		{
			if(!response) return 1;
			new fractionid = pData[playerid][pFraction] - 1;
			new subfraction = GetSubfractionID(fractionid);
			foreach(new i: logged_players)
			{
				if(!IsPlayerConnected(i)) continue;
				if(pData[i][pFraction] != fractionid + 1) continue;
				if(subfraction != -1 && (pData[playerid][pSubfraction] != pData[i][pSubfraction] || pData[i][pRank] >= pData[playerid][pRank])) continue;
				else if(pData[i][pRank] >= gFractionRankCount[fractionid]) continue;
				new command[56];
				format(command,56,"/uninvite %d",i);
				PC_EmulateCommand(playerid, command);
			}
			new query[128];
			if(subfraction <= 0) format(query,sizeof(query),"UPDATE `accounts` SET `fraction` = '0', `rank` = '0', `fractionskin` = '0', `subfraction` = '0' WHERE `fraction` = '%d' AND `rank` < '%d'",fractionid + 1,gFractionRankCount[fractionid]);
			else format(query,sizeof(query),"UPDATE `accounts` SET `fraction` = '0', `rank` = '0', `fractionskin` = '0', `subfraction` = '0' WHERE `fraction` = '%d' AND `rank` < '%d' AND `subfraction` = '%d'",fractionid + 1,gFractionRankCount[fractionid],subfraction);
			new Result:r = sql_queryEx(zConn, query);
			format(query,sizeof(query),"Игроки которые оффлайн были уволены"); //sql_affected_rows(r)
			sql_free_result(r);
			SCM(playerid,CINFO,query);
		}

		case dAdvertSend:
		{
			if(!response) return 1;
			if(gAdvertCount >= MAX_ADVERT_COUNT) return SendErr(playerid, "К сожалению, очередь на объявления занята, попробуйте позже");
			new text[100];
			GetPVarStringNew(playerid,"advert",text,100);
			DeletePVarNew(playerid,"advert");
 			new price = AdPay;
			if(GetPlayerMoneyEx(playerid) < price) return SendErr(playerid, "У вас недостаточно денег");
			gAdvertCount ++;
			new slot = -1;
			for(new i;i<MAX_ADVERT_COUNT;i++)
			{
				if(!gAdvert[i][adBusy]) {slot = i; break;}
			}
			if(slot == -1) return SendErr(playerid, "Ошибка (#111)");


			give_money(playerid, -price, "Отправка рекламы");

			gAdvert[slot][adMoney] = price;
			gAdvert[slot][adSenderID] = playerid;
			format(gAdvert[slot][adSender],24,"%s",pData[playerid][pNickname]);
			gAdvert[slot][adPhone] = pData[playerid][pPhone];
			format(gAdvert[slot][adText],100,"%s",text);
			gAdvert[slot][adBusy] = true;
			pTemp[playerid][pAdvertTime] = 60;
			SendInf(playerid, "Ваше объявление отправлено на обработку.");
			new string[144];
			format(string, 144, "[R] Пришло новое объявление от "cWH"%s (ID: %i){4682B4} | Подробнее: /edit", pData[playerid][pNickname], playerid);
			SendFMes(10, CBLUE, string);
		}
		case dAdvertList:
		{
			if(!response) return 1;
			if(!gAdvert[listitem][adBusy] || gAdvert[listitem][adCheked] || gAdvert[listitem][adCheking]) return ShowAdvertList(playerid);
			SetPVarIntNew(playerid,"editadvert",listitem);
			gAdvert[listitem][adCheking] = true;
			gAdvert[listitem][adCheckerID] = playerid;
			new mes[256];
			format(mes,sizeof(mes),""cBLUE"Текст: "cWH"%s\n"cBLUE"1."cWH" Отправить\n"cBLUE"2."cWH" Редактировать\n"cBLUE"3."cWH" Удалить и отправить администрации\n"cBLUE"4."cWH" Удалить",gAdvert[listitem][adText]);
			SPD(playerid,dAdvertAction,2,gAdvert[listitem][adSender],mes,!"Далее",!"Отмена");
		}
		case dAdvertAction1:
		{
			new id = GetPVarIntNew(playerid,"editadvert");
			if(!response) {
				gAdvert[id][adCheking] = false;
				ShowAdvertList(playerid);
				return 1;
			}
			gAdvert[id][adTime] = gAdvertTime;
			gAdvertTime += 30;
			format(gAdvert[id][adCheker],MAX_PLAYER_NAME,"%s",pData[playerid][pNickname]);
			new rank = pData[playerid][pRank];
			new fractionid = pData[playerid][pFraction]-1;
			format(gAdvert[id][adRang],MAX_PLAYER_NAME,"%s",gFractionRankName[fractionid][rank-1]);
			gAdvert[id][adCheking] = false;
			gAdvert[id][adCheked] = true;
			pData[playerid][pAdver] ++;
			UpdatePlayerData(playerid,"adver", pData[playerid][pAdver] );
			ShowAdvertList(playerid);
		}

		case dAdvertAction:
		{
			new mes[160];
			new id = GetPVarIntNew(playerid,"editadvert");
			if(!response)
			{
				gAdvert[id][adCheking] = false;
				return ShowAdvertList(playerid);
			}
			switch(listitem)
			{
				case 1:
				{
					new MSG[255];
					format(MSG,sizeof(MSG),"\n\n\n"cWH"Вы действительно хотите опубликовать объявление?\n\n{FFFFCC}%s\n{DDFF99}%s\n\n\n",gAdvert[id][adText],gAdvert[id][adCheker]);
					SPD(playerid,dAdvertAction1,DIALOG_STYLE_MSGBOX,""cBLUE"Объявление", MSG ,!"Далее",!"Отмена");
				}
				case 2:
				{
					SPD(playerid,dAdvertEdit,1,gAdvert[id][adSender],gAdvert[id][adText],!"Далее",!"Отмена");
				}
				case 3:
				{
					format(mes,sizeof(mes),"[AD] %s[%d]:%s. Редактор:%s[%d]",gAdvert[id][adSender],gAdvert[id][adSenderID],gAdvert[id][adText],pData[playerid][pNickname],playerid);
					AdminChat(CYELLOW,mes);
					SCM(playerid,CYELLOW,mes);
					strdel(gAdvert[id][adSender],0,24);
					gAdvert[id][adPhone] = 0;
					strdel(gAdvert[id][adText],0,100);
					strdel(gAdvert[id][adCheker],0,24);
					strdel(gAdvert[id][adRang],0,24);
					gAdvert[id][adBusy] = false;
					gAdvert[id][adCheked] = false;
					gAdvert[id][adCheking] = false;
					gAdvert[id][adTime] = 0;
					if(gAdvertCount > 0) gAdvertCount--;
					ShowAdvertList(playerid);
				}
				case 4:
				{
					format(mes, sizeof(mes), ""cWH"Введите причину отклонения рекламы от {33AAFF}%s (ID: %i)", gAdvert[id][adSender], gAdvert[id][adSenderID]);
					SPD(playerid, dAdvertCancel, 1, ""cWH"Отклонение | Причина", mes, "Отклонить", "Назад");
				}
				default: {gAdvert[id][adCheking] = false; ShowAdvertList(playerid);}
			}
		}
		case dAdvertCancel: {
			new mes[256];
			new id = GetPVarIntNew(playerid,"editadvert");
			if(response) {
				if(!strlen(inputtext) || strlen(inputtext) > 50) {
					format(mes, sizeof(mes), ""cWH"Введите причину отклонения рекламы от {33AAFF}%s (ID: %i)", gAdvert[id][adSender], gAdvert[id][adSenderID]);
					SPD(playerid, dAdvertCancel, 1, ""cWH"Отклонение | Причина", mes, "Отклонить", "Назад");
					return true;
				}
				format(mes, sizeof(mes), "Вы отклонили рекламу игрока {33AAFF}%s (ID: %i)"cWH". Причина: {33AAFF}%s", gAdvert[id][adSender], gAdvert[id][adSenderID], inputtext);
				SCM(playerid, COLOR_WHITE, mes);
				format(mes, sizeof(mes), "%s {33AAFF}%s"cWH" отклонил вашу рекламу. Причина: {33AAFF}%s",gFractionRankName[pData[playerid][pFraction] -1][pData[playerid][pRank]-1], pData[playerid][pNickname], inputtext);
				SCM(gAdvert[id][adSenderID], COLOR_WHITE, mes);
				format(mes, sizeof(mes), "[AD] {FF0000}%s %s отклонил рекламу %s (ID: %i). Причина: %s",gFractionRankName[pData[playerid][pFraction] -1][pData[playerid][pRank]-1], pData[playerid][pNickname], gAdvert[id][adSender], gAdvert[id][adSenderID], inputtext);
				SendFMes(pData[playerid][pFraction], COLOR_WHITE, mes);
 				gAdvert[id][adSenderID] = INVALID_PLAYER_ID;
				strdel(gAdvert[id][adSender],0,24);
				gAdvert[id][adPhone] = 0;
				strdel(gAdvert[id][adText],0,100);
				strdel(gAdvert[id][adCheker],0,24);
				strdel(gAdvert[id][adRang],0,24);
				gAdvert[id][adBusy] = false;
				gAdvert[id][adCheked] = false;
				gAdvert[id][adCheking] = false;
				gAdvert[id][adTime] = 0;
				if(gAdvertCount > 0) gAdvertCount--;
				ShowAdvertList(playerid);
			}
			else {
				format(mes,sizeof(mes),"%s\n"cBLUE"1."cWH" Отправить\n2.Редактировать\n3.Удалить и отправить администрации\n4.Удалить",gAdvert[id][adText]);
				SPD(playerid,dAdvertAction,2,gAdvert[id][adSender],mes,!"Далее",!"Отмена");
			}
		}
		case dAdvertEdit:
		{
			new id = GetPVarIntNew(playerid,"editadvert");
			if(!response)
			{
				gAdvert[id][adCheking] = false;
				return ShowAdvertList(playerid);
			}
			if(!strlen(inputtext)) return SPD(playerid,dAdvertEdit,1,gAdvert[id][adSender],gAdvert[id][adText],"OK","Отмена");
			if(strlen(inputtext) && (strfind(inputtext,"{") != -1 || strfind(inputtext,"}") != -1)) {
				SCM(playerid,-1,"Ошибка. Вы использовали запрещенные символы.");
				gAdvert[id][adCheking] = false;
				return ShowAdvertList(playerid);
			}

			format(gAdvert[id][adText],100,"%s",inputtext);

			gAdvert[id][adTime] = gAdvertTime;
			gAdvertTime += 30;
			format(gAdvert[id][adCheker],MAX_PLAYER_NAME,"%s",pData[playerid][pNickname]);
			new rank = pData[playerid][pRank];
			new fractionid = pData[playerid][pFraction]-1;
			format(gAdvert[id][adRang],MAX_PLAYER_NAME,"%s",gFractionRankName[fractionid][rank-1]);
			gAdvert[id][adCheking] = false;
			gAdvert[id][adCheked] = true;

			pData[playerid][pAdver] ++;
			UpdatePlayerData(playerid,"adver", pData[playerid][pAdver] );

			ShowAdvertList(playerid);
		}
		case dNumberPhone:
		{
			if(!response) return 1;
			if(!IsNumeric(inputtext) || strlen(inputtext) != 6 || !('0' < inputtext[0] <= '9') || GetPVarIntNew(playerid, "SimTime2") > GetTickCount())
			{
				SendErr(playerid, "Номер должен состоять из "cWH"6 {"#cGRAY"}цифр. Первая цифра не должна быть "cWH"\"ноль\"");
				SPD(playerid,dNumberPhone,1,"Смена номера SIM-карты",""cWH"Введите новый шестизначный номер телефона","Купить","Отмена");
				return 1;
			}
			new query[128], mes[128];
			format(query,sizeof(query),"SELECT `id` FROM `accounts` WHERE `phone` = '%i'",strval(inputtext));
			new Result:r = sql_queryEx(zConn, query);
			SetPVarIntNew(playerid, "SimTime2", GetTickCount()+900);
			if(sql_num_rows(r))
			{
				SendErr(playerid, "Такой номер уже используется");
				SPD(playerid,dNumberPhone,1,"Смена номера SIM-карты",""cWH"Введите новый шестизначный номер телефона","Купить","Отмена");
				sql_free_result(r);
				return 1;
			}
			sql_free_result(r);
			pData[playerid][pPhone] = strval(inputtext);
			format(mes,sizeof(mes),"Ваш новый номер телефона: "cWH"%i.",pData[playerid][pPhone]);
			SCM(playerid,CLIGHTGREEN,mes);
			UpdatePlayerData(playerid,"phone",pData[playerid][pPhone]);
			new bsim = GetPVarIntNew(playerid,"pokuppr");


			give_money(playerid, -bsim, "Покупка сим-карты");

		}

		case dNewsDial:
		{
			if(!response) return 1;
			new ndial = GetPVarIntNew(playerid, "newsdial")-1;
			if(GetPlayerMoneyEx(playerid) < gNewsDialPrice[ndial]) return SendErr(playerid, "У вас недостаточно денег");
			if(!gNewsDialing[ndial]) return SendErr(playerid, "Звонки не принимаются");
			if(gNewsDialee[ndial] != INVALID_PLAYER_ID) return SendErr(playerid, "Линия занята");
			pData[playerid][pPhoneMoney] -= gNewsDialPrice[ndial];
			UpdatePlayerData(playerid,"phonemoney",pData[playerid][pPhoneMoney]);
			gNewsDialMoney[ndial] += gNewsDialPrice[ndial];
			pTemp[playerid][radioTime] = gettime()+30;
			new mes[128]; format(mes, sizeof(mes), "{FFAF05}Радиослушатель %s пытается дозвониться в эфир. Чтобы принять звонок введите /indial {FF0510}%d",pData[playerid][pNickname],playerid);
			SCM(gNewsDialer[ndial], -1, mes);
			SendInf(playerid, "Ваш звонок отправлен в эфир. Ожидайте, возможно именно Вас подключат к эфиру");
		}
		case dUnemplyment:
		{
			if(!response) return 1;
			if((pData[playerid][pFraction] < 3 && pData[playerid][pFraction] != 0) || pData[playerid][pFraction] > 7) return SendErr(playerid, "Нельзя получать пособие, находясь во фракции");
			if(pData[playerid][pJob]) return SendErr(playerid, "Вы не безработный");
 			SCM(playerid,CWHITE,"Теперь вы будете получать пособие по безработице");
		}


		case dDonate:
		{
			if(!response) return 1;
			switch(listitem)
			{
				/*case 0:
				{
					SPD(playerid,dDonateSnowNew, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите количество снежинок, которые хотите приобрести\n\n\
					Стоимость: "cGR"1 снежинка"cWH" - "cBLUE"5 RUB", !"Далее", !"Отмена");
				}*/
				case 0: //Игровая валюта
				{
					SPD(playerid,dDonateMoney1, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите сумму, которую вы хотите получить (в игровых рублях).\nСтоимость: "cGR"1200 игровых рублей"cWH" - "cBLUE"1 RUB", !"Далее", !"Отмена");
				}
				case 1: //Смена ника
				{
					if(pData[playerid][pDonate] < 50)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы поменять ник", 50);
						return SendErr(playerid, don_string);
					}
					SPD(playerid,dDonateNickname1,1,""cBLUE"Смена ника",""cWH"Введите игровой ник, на который вы хотите поменять свой:", !"Далее", !"Отмена");
				}
				case 2: //Смена цвета кожи и национальности
				{
					if(pData[playerid][pDonate] < 75)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить национальность", 75);
						return SendErr(playerid, don_string);
					}
					SPD(playerid,dDonateNation2,2,""cBLUE"Смена национальности","Выберите национальность:\n"cBLUE"-"cWH" Русский\n\
					"cBLUE"-"cWH" Украинец\n\
					"cBLUE"-"cWH" Белорус\n\
					"cBLUE"-"cWH" Казах\n\
					"cBLUE"-"cWH" Литовец\n\
					"cBLUE"-"cWH" Татар\n\
					"cBLUE"-"cWH" Молдаванин\n\
					"cBLUE"-"cWH" Узбек\n\
					"cBLUE"-"cWH" Армянин\n\
					"cBLUE"-"cWH" Азербайджанец","Далее","Назад");
 				}
				case 3: //Смена возраста
				{
					if(pData[playerid][pDonate] < 50)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить Ваш возраст.", 50);
						return SendErr(playerid, don_string);
					}
					SPD(playerid,dDonateAge1,1,""cBLUE"Смена возраста",""cWH"Введите желаемый возраст:",!"Далее",!"Отмена");
				}
				case 4: // пол
				{
					if(pData[playerid][pDonate] < 30)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить Ваш пол.", 30);
						return SendErr(playerid, don_string);
					}
					SPD(playerid,dDonateSex, DIALOG_STYLE_LIST,""cBLUE"Смена пола",""cBLUE"-"cWH"Мужской\n"cBLUE"-"cWH"МужскойЖенский",!"Далее",!"Отмена");
				}
				case 5: // варн
				{
					if(pData[playerid][pDonate] < 100)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы снять 1 варн.", 100);
						return SendErr(playerid, don_string);
					}
					format(don_string, sizeof(don_string), ""cWH"Вы уверены, что хотите снять 1 варн?\nСтоимость: "cGR"%i рублей"cWH"", 100);
					SPD(playerid,dDonateWarn,0,""cBLUE"Снятие варна",don_string,"Да","Отмена");
				}
				case 6: //законка
				{
					if(pData[playerid][pDonate] < 25)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы пополнить законопослушность.", 25);
						return SendErr(playerid, don_string);
					}
					format(don_string, sizeof(don_string), ""cWH"Вы уверены, что хотите добавить +10 законопослушности?\nСтоимость: "cGR"%i рублей"cWH"", 25);
					SPD(playerid,dDonateZak,0,""cBLUE"Законопослушность",don_string,"Да","Отмена");
				}

				case 7:
				{
					if(pData[playerid][pDonate] < 200)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы купить Решительность.", 200);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][pUpgrade][0] == 1)
						return SendErr(playerid, "Вы уже открыли это улучшение");

					pData[playerid][pDonate] -= 200;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);

					pData[playerid][pUpgrade][0] = 1;
					UpdatePlayerData(playerid, "upgrade1", 1);
					SendSucc(playerid, "Вы успешно открыли улучшение 'Решительность'");
					PC_EmulateCommand(playerid, "/donate");
				}

				case 8:
				{
					if(pData[playerid][pDonate] < 3000)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести номер", 3000);
						return SendErr(playerid, don_string);
					}
					SPD(playerid,dDonatePhone1,1,""cBLUE"Выбор номера телефона",""cWH"Введите желаемый 5-ти значный номер:", !"Далее", !"Отмена");
				}


				case 9:
				{
					if(pData[playerid][pDonate] < 200)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести максимальный оружия!", 800);
						return SendErr(playerid, don_string);
					}

					if(pTemp[playerid][pGunSkill][0] == 100 && pTemp[playerid][pGunSkill][1] ==  100 && pTemp[playerid][pGunSkill][2] == 100 &&
					pTemp[playerid][pGunSkill][3] == 100 && pTemp[playerid][pGunSkill][4] == 100 && pTemp[playerid][pGunSkill][5] == 100)
					{
						PC_EmulateCommand(playerid, "/donate");
						return SendErr(playerid, "У вас уже имеются максимальные скиллы на оружие!");
					}

					pTemp[playerid][pGunSkill][0] = 100;
					pTemp[playerid][pGunSkill][1] = 100;
					pTemp[playerid][pGunSkill][2] = 100;
					pTemp[playerid][pGunSkill][3] = 100;
					pTemp[playerid][pGunSkill][4] = 100;
					pTemp[playerid][pGunSkill][5] = 100;

					pData[playerid][pDonate] -= 200;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальное количество скиллов!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат скиллов оружия. Потрачено: 200 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 200, String144);

				}

				case 10:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык шахтёра", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_MINER] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык шахтёра!");

					pData[playerid][job_skill][SKILL_MINER] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык шахтёра!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат скиллов шахтера. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

					check_quest_prize_start(playerid, 5);
					check_quest_prize_start(playerid, 6);
					check_quest_prize_start(playerid, 2);

				}
				case 11:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык лесоруба", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_WOODCUTTER] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык лесоруба!");

					pData[playerid][job_skill][SKILL_WOODCUTTER] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык лесоруба!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат скиллов лесоруба. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);


					check_quest_prize_start(playerid, 5);
					check_quest_prize_start(playerid, 6);
					check_quest_prize_start(playerid, 4);

				}
				case 12:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык сборщика мебели", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_FACTORY] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык сборщика мебели!");

					pData[playerid][job_skill][SKILL_FACTORY] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык сборщика мебели!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат скиллов сборщика мебели. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

					check_quest_prize_start(playerid, 5);
					check_quest_prize_start(playerid, 6);
					check_quest_prize_start(playerid, 3);


				}
				case 13:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык сборщика мебели", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_SNOWWORK] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык Снегоуборщика!");

					pData[playerid][job_skill][SKILL_SNOWWORK] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык Снегоуборщика!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат скиллов Снегоуборщика. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);


				}

				case 14:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык сборщика мебели", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_FIRE] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык Пожарного!");


					pData[playerid][job_skill][SKILL_FIRE] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык Пожарного!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат скиллов пожарного. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

				}
				case 15:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык сборщика мебели", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_BANK] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык Инкассатора!");

					pData[playerid][job_skill][SKILL_BANK] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык Инкассатора!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат навыка инкассатора. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

				}
				case 16:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести навык сборщика мебели", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][job_skill][SKILL_PICKER] >= 500)
						return SendErr(playerid, "У вас уже имеется максимальный навык Водителя Мусоровоза!");

					pData[playerid][job_skill][SKILL_PICKER] = 500;
					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
					SendSucc(playerid, "Вы успешно приобрели максимальный навык Водителя Мусоровоза!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат навыка водителя мусоровоза. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

				}
				case 17:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести лицензии на транспорт", 150);
						return SendErr(playerid, don_string);
					}

					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);


					pData[playerid][pLicenses][LIC_DRIVING] = 1;
					UpdatePlayerData(playerid, "licDrive", 1);
					pData[playerid][pLicenses][LIC_BOAT] = 1;
					UpdatePlayerData(playerid, "licBoat", 1);
					pData[playerid][pLicenses][LIC_FLY] = 1;
					UpdatePlayerData(playerid, "licFly", 1);

					SendSucc(playerid, "Вы успешно приобрели все лицензии на транспорт!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат всех лицензий. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

				}
				case 18:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести лицензии на оружие", 150);
						return SendErr(playerid, don_string);
					}

					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);


					pData[playerid][pLicenses][LIC_WEAP] = 1;
					UpdatePlayerData(playerid, "licWeap", 1);

					SendSucc(playerid, "Вы успешно приобрели лицензию оружие!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат лицензии на оружие. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

				}
				case 19:
				{
					if(pData[playerid][pDonate] < 150)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести дополнительную страницу в инвентаре", 150);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][pInventoryLevel] == 2)
					{
						PC_EmulateCommand(playerid, "/donate");
						return SendErr(playerid, "У Вас уже имеется вторая страница!");
					}

					pData[playerid][pDonate] -= 150;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);


					pData[playerid][pInventoryLevel] = 2;
					UpdatePlayerData(playerid, "pInventoryLevel", 2);

					SendSucc(playerid, "Вы успешно приобрели дополнительную вторую страницу в инвентаре!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат второй страница инвентаря. Потрачено: 150 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 150, String144);

				}
				case 20:
				{
					if(pData[playerid][pDonate] < 250)
					{
						PC_EmulateCommand(playerid, "/donate");
						format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы приобрести дополнительную страницу в инвентаре", 250);
						return SendErr(playerid, don_string);
					}

					if(pData[playerid][pInventoryLevel] == 1)
					{
						PC_EmulateCommand(playerid, "/donate");
						return SendErr(playerid, "Сперва Вам требуется приобрести вторую страницу!");
					}
					if(pData[playerid][pInventoryLevel] == 3)
					{
						PC_EmulateCommand(playerid, "/donate");
						return SendErr(playerid, "У Вас уже имеется третья страница!");
					}


					pData[playerid][pDonate] -= 250;
					UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);


					pData[playerid][pInventoryLevel] = 3;
					UpdatePlayerData(playerid, "pInventoryLevel", 3);

					SendSucc(playerid, "Вы успешно приобрели дополнительную третью страницу в инвентаре!");
					PC_EmulateCommand(playerid, "/donate");

					format(String144, sizeof(String144), "Покупка за донат третьей страница инвентаря. Потрачено: 250 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
					logs_donate(playerid, pData[playerid][pMysqlID], 250, String144);

				}
				case 21: //Баланс
				{
					UpdateDonate(playerid);
					format(don_string,sizeof(don_string),"У вас на донат счете "cWH"%d "cBLUE"рублей",pData[playerid][pDonate]);
					SCM(playerid,CINFO,don_string);
					PC_EmulateCommand(playerid, "/donate");
				}
				case 22:
				{
					OpenLinkForPlayer(playerid, "https://b-rp.ru/index.php");
					PC_EmulateCommand(playerid, "/donate");
				}
			}
		}

		case dDonateSex:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			if(pData[playerid][pDonate] < 30)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить Ваш пол.", 30);
				return SendErr(playerid, don_string);
			}
			pData[playerid][pSex] = listitem+1;
			pData[playerid][pDonate] -= 30;
			new zS[90];
			switch(listitem)
			{
				case 0: format(zS,sizeof(zS), "Вы успешно изменили игровой пол на: Мужской");
				case 1: format(zS,sizeof(zS), "Вы успешно изменили игровой пол на: Женский");
			}
			SendSucc(playerid, zS);
			new query[128];
			format(query,sizeof(query),"UPDATE `accounts` SET `sex` = '%d', donate = '%d' WHERE `id` = '%d'",pData[playerid][pSex], pData[playerid][pDonate], pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query);

			PC_EmulateCommand(playerid, "/donate");

			format(String144, sizeof(String144), "Покупка за донат смену пола. Потрачено: 30 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
			logs_donate(playerid, pData[playerid][pMysqlID], 30, String144);

		}

		case dDonateWarn:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			if(pData[playerid][pDonate] < 100)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы снять 1 варн.", 100);
				return SendErr(playerid, don_string);
			}
			if(!pData[playerid][pWarnc]) return SendErr(playerid, "У вас нет варнов");
			else if(pData[playerid][pWarn] > 7)
			{
				pData[playerid][pWarn] -= 7;
				pData[playerid][pWarnc]--;
			}
			else {
			pData[playerid][pWarnc] = 0;
			pData[playerid][pWarn] = 0;
   			}
			pData[playerid][pDonate] -= 100;
			SendSucc(playerid, "Вы успешно сняли варн");
			new query[128];
			format(query,sizeof(query),"UPDATE `accounts` SET `warn` = '%d', `warnc` = '%d', donate = '%d' WHERE `id` = '%d'",pData[playerid][pWarn], pData[playerid][pWarnc], pData[playerid][pDonate], pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
   			DonateLog(playerid,-100,13);

   			PC_EmulateCommand(playerid, "/donate");

			format(String144, sizeof(String144), "Покупка за донат снятия варна. Потрачено: 100 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
			logs_donate(playerid, pData[playerid][pMysqlID], 100, String144);


		}

		case dDonateZak:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			if(pData[playerid][pDonate] < 25)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы пополнить законопослушность.", 25);
				return SendErr(playerid, don_string);
			}
			if(pData[playerid][pZakon] == 100) return SendErr(playerid, "У вас уже максимальный уровень законопослушности");
			else if(pData[playerid][pZakon]+10 > 100) pData[playerid][pZakon]=100;
			else pData[playerid][pZakon] += 10;
			pData[playerid][pDonate] -= 25;
			UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);
			UpdatePlayerData(playerid, "zakon", pData[playerid][pZakon]);
			SendSucc(playerid, "Законопослушность повышена на 10");

			PC_EmulateCommand(playerid, "/donate");

			format(String144, sizeof(String144), "Покупка за донат законопослушности (10). Потрачено: 25 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
			logs_donate(playerid, pData[playerid][pMysqlID], 25, String144);

		}

		case dDonatePhone1:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			if(!IsNumeric(inputtext) || !strlen(inputtext))
			{
				SPD(playerid,dDonatePhone1,1,""cBLUE"Выбор номера телефона",""cWH"Введите желаемый 5-ти значный номер:", !"Далее", !"Отмена");
				return 1;
			}

			new
				number_phone = strval(inputtext);

			if(number_phone < 10000 || number_phone >= 99999)
			{
				SPD(playerid,dDonatePhone1,1,""cBLUE"Выбор номера телефона",""cWH"Введите желаемый 5-ти значный номер:", !"Далее", !"Отмена");
				return 1;
			}

			new
				query[144];

			format(query,sizeof(query),"SELECT `id` FROM `accounts` WHERE `phone` = '%i'", number_phone);
			new Result:r = sql_queryEx(zConn, query);
			if(sql_num_rows(r))
			{
				SendErr(playerid, "Данный номер телефона используется уже кем-то другим!");
				return sql_free_result(r);
			}
			sql_free_result(r);

			pData[playerid][pDonate] -= 3000;
			UpdatePlayerData(playerid, "donate", pData[playerid][pDonate]);

			pData[playerid][pPhone] = strval(inputtext);
			format(String64,sizeof(String64),"Ваш новый номер телефона: "cWH"%i.",pData[playerid][pPhone]);
			SCM(playerid,CLIGHTGREEN,String64);
			UpdatePlayerData(playerid,"phone",pData[playerid][pPhone]);

			PC_EmulateCommand(playerid, "/donate");

			format(String144, sizeof(String144), "Покупка за донат пятизначного номера. Потрачено: 3000 рублей | Остаток: %d рублей", pData[playerid][pDonate]);
			logs_donate(playerid, pData[playerid][pMysqlID], 3000, String144);

		}

		case dDonateSnowNew:
		{
			if(!response)
				return PC_EmulateCommand(playerid, "/donate");


			if(!IsNumeric(inputtext) || !strlen(inputtext))
			{
				SPD(playerid,dDonateSnowNew, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите количество снежинок, которые хотите приобрести\n\n\
				Стоимость: "cGR"1 снежинка"cWH" - "cBLUE"5 RUB", !"Далее", !"Отмена");
				return true;
			}

			new amount = strval(inputtext);

			if(amount < 0 || amount > 100000)
			{
				SPD(playerid,dDonateSnowNew, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите количество снежинок, которые хотите приобрести\n\n\
				Стоимость: "cGR"1 снежинка"cWH" - "cBLUE"5 RUB", !"Далее", !"Отмена");
				return true;
			}



			new
				donate_money = amount*5;

			if(pData[playerid][pDonate] < donate_money)
			{
				SPD(playerid,dDonateSnowNew, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите количество снежинок, которые хотите приобрести\n\n\
				Стоимость: "cGR"1 снежинка"cWH" - "cBLUE"5 RUB", !"Далее", !"Отмена");
				return SendErr(playerid, "У вас недостаточно денег на донат счете");
			}

			pData[playerid][pDonate] -= donate_money;
			UpdatePlayerData(playerid,"donate",pData[playerid][pDonate]);

			pData[playerid][pCountSnow] += amount;
			UpdatePlayerData(playerid, "pCountSnow", pData[playerid][pCountSnow]);

			show_notify_gui_newyear(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:newyear_snow_give_6", 4500);

			format(String144, sizeof(String144),"Вы успешно перевели %d донат-валюты в %d снежинок!", donate_money, amount);
			SendSucc(playerid, String144);

		}

		case dDonateMoney1:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");

			if(!IsNumeric(inputtext) || !strlen(inputtext))
			{
				SPD(playerid,dDonateMoney1, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите сумму, которую вы хотите получить (в игровых рублях).\nСтоимость: "cGR"1000 игровых рублей"cWH" - "cBLUE"1Rub.", !"Далее", !"Отмена");
				return 1;
			}
			new amount = strval(inputtext);

			if(amount < 1200)
			{
				SPD(playerid,dDonateMoney1, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите сумму, которую вы хотите получить (в игровых рублях).\nСтоимость: "cGR"1000 игровых рублей"cWH" - "cBLUE"1Rub.", !"Далее", !"Отмена");
				return 1;
			}
			new money = floatround(amount/1200);
			amount = money*1200;
			if(money < 1) return 1;
			if(pData[playerid][pDonate] < money)
			{
				SPD(playerid,dDonateMoney1, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите сумму, которую вы хотите получить (в игровых рублях).\nСтоимость: "cGR"1000 игровых рублей"cWH "- "cBLUE"1Rub.", !"Далее", !"Отмена");
				return SendErr(playerid, "У вас недостаточно денег на донат счете");
			}
			SetPVarIntNew(playerid,"donatemoney",money);
			SetPVarIntNew(playerid,"donateamount",amount);

			SetPVarIntNew(playerid, "donate_amount_t", pData[playerid][pDonate]);

			new mes[256];
			format(mes,sizeof(mes),""cWH"Будет снято: "cGR"%d рублей"cWH"\nБудет зачислено: "cGR"%d игровых рублей"cWH"\nОстанется на донат счете: "cGR"%d рублей"cWH"",money,amount,pData[playerid][pDonate] - money);
			SPD(playerid,dDonateMoney2,0,""cBLUE"Услуги доната",mes,!"Далее",!"Отмена");
		}
		case dDonateMoney2:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			new money = GetPVarIntNew(playerid,"donatemoney");
			new amount = GetPVarIntNew(playerid,"donateamount");
			DeletePVarNew(playerid,"donatemoney");
			DeletePVarNew(playerid,"donateamount");

			if(money < 1 || amount < 1200)
			{
				SPD(playerid,dDonateMoney1, DIALOG_STYLE_INPUT,""cBLUE"Услуги доната",""cWH"Введите сумму, которую вы хотите получить (в игровых рублях).\nСтоимость: "cGR"1000 игровых рублей"cWH"- "cBLUE"1Rub.", !"Далее", !"Отмена");
				return SendErr(playerid, "Минимальная сумма к оплате: 1 рубль");
			}
			UpdateDonate(playerid);
			if(pData[playerid][pDonate] < money) return SendErr(playerid, "У вас недостаточно денег на донат счете");
			pData[playerid][pDonate] -= money;
			UpdatePlayerData(playerid,"donate",pData[playerid][pDonate]);

			give_money(playerid, amount, "Перевод доната в игровые рубли");

			DonateLog(playerid,-money,7);
			new mes[256];
			format(mes,sizeof(mes),"[Донат] "cGR"%d"cWH" рублей переведено в "cGR"%d"cWH" игровых рублей | Было: %d доната | Остаток: %d доната",money,amount, GetPVarIntNew(playerid, "donate_amount_t"), pData[playerid][pDonate]);
			SCM(playerid,CWHITE,mes);

			new mess[256];
			format(mess,sizeof(mess),"[Донат] %d рублей переведено в %d игровых рублей | Было: %d доната | Остаток: %d доната",money,amount, GetPVarIntNew(playerid, "donate_amount_t"), pData[playerid][pDonate]);
			logs_donate(playerid, pData[playerid][pMysqlID], amount, mess);

			new messs[256];
			format(messs,sizeof(messs),"[Донат] %d рублей переведено в %d игровых рублей | Было: %d доната | Остаток: %d доната",money,amount, GetPVarIntNew(playerid, "donate_amount_t"), pData[playerid][pDonate]);
			logs_money(playerid, pData[playerid][pMysqlID], amount, messs);

			PC_EmulateCommand(playerid, "/donate");

			format(String144, sizeof(String144), "Покупка за донат %d рублей переведено в %d игровых рублей | Остаток: %d рублей", money,amount, pData[playerid][pDonate]);
			logs_donate(playerid, pData[playerid][pMysqlID], 30, String144);

			DeletePVarNew(playerid, "donate_amount_t");
		}

		case dDonateNickname1:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			if(pData[playerid][pDonate] < 50)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы поменять ник", 50);
				return SendErr(playerid, don_string);
			}
			if(strlen(inputtext) < 3 || strlen(inputtext) > 20)
			{
				PC_EmulateCommand(playerid, "/donate");
				return SendErr(playerid, "Длина ника не может быть меньше трех и больше 20 символов");
			}

			for(new i = 0; i < strlen(inputtext); i ++)
			{
				switch(inputtext[i]) {
					case 'a'..'z', 'A'..'Z', '_': continue;
					default: {
						return SendErr(playerid, "В никнейме найдены запрещенные символы!");
					}
				}
			}

			new query[256];

			if(check_no_valid_symbol_text(inputtext) || check_sql_injection_text(inputtext))
			{
				PC_EmulateCommand(playerid, "/donate");
				SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
				return 1;
			}



			sql_escape_string(zConn, inputtext, query, sizeof(query));
			format(query,sizeof(query),"SELECT `nickname` FROM `accounts` WHERE `nickname` = '%s'", query);
			new Result:r = sql_queryEx(zConn, query);
			if(sql_num_rows(r))
			{
				SendErr(playerid, "Этот никнейм уже используется");
				PC_EmulateCommand(playerid, "/donate");
				sql_free_result(r);
				return 1;
			}
			sql_free_result(r);
			SetPVarStringNew(playerid,"nnick",inputtext);
			format(query,sizeof(query),""cWH"Новый никнейм: "cBLUE"%s"cWH".\nБудет снято: "cGR"%i рублей"cWH"\nОстанется на донат счете: "cGR"%i рублей"cWH"\n\t\tПродолжить?", inputtext, 50, pData[playerid][pDonate] - 50);
			SPD(playerid,dDonateNickname2,0,""cBLUE"Смена ника",query,"Да","Нет");
		}
		case dDonateNickname2:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			UpdateDonate(playerid);
			if(pData[playerid][pDonate] < 50)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы поменять ник", 50);
				return SendErr(playerid, don_string);
			}
			new nickname[24];
			GetPVarStringNew(playerid,"nnick",nickname,24);
			DeletePVarNew(playerid,"nnick");
			if(strlen(nickname) < 3 || strlen(nickname) > 20)
			{
				PC_EmulateCommand(playerid, "/donate");
				return SendErr(playerid, "Длина ника не может быть меньше трех и больше 20 символов");
			}

			sql_escape_string(zConn, nickname,nickname,24);
			format(String256 ,sizeof(String256),"SELECT `nickname` FROM `accounts` WHERE `nickname` = '%s'",nickname);
			new Result:r = sql_queryEx(zConn, String256);
			if(sql_num_rows(r))
			{
				SendErr(playerid, "Этот никнейм уже используется");
				PC_EmulateCommand(playerid, "/donate");
				sql_free_result(r);
				return 1;
			}
			sql_free_result(r);
			if(!SetPlayerName(playerid,nickname))
			{
				PC_EmulateCommand(playerid, "/donate");
				return SendErr(playerid, "Произошла ошибка при смене ника");
			}


			pData[playerid][pDonate] -= 50;
			format(String256 ,sizeof(String256),"UPDATE `accounts` SET `nickname` = '%s', `donate` = '%d' WHERE `id` = '%d'",nickname,pData[playerid][pDonate],pData[playerid][pMysqlID]);
			sql_queryEx(zConn, String256, QUERY_THREADED);
			format(String256,sizeof(String256),"Ваш никнейм был изменен на: "cWH"%s",nickname);
			SCM(playerid,CGREEN, String256);
 			if(pData[playerid][pAdmin] < 8)
 			{
				format(String256 ,sizeof(String256),"%s изменил имя на %s", pData[playerid][pNickname], nickname);
				SendClientMessageToAll(CORANGE, String256);
			}
 			format(String256 ,sizeof(String256),"Ваш ник изменен на %s. Не забудьте указать новый ник в SA-MP клиенте.", nickname);
			SCM(playerid,0xFF7640FF, String256);

			NewKick(playerid);


 		}

		case dDonateNation1:
		{
			if(pData[playerid][pDonate] < 75)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить национальность и цвет кожи", 75);
				return SendErr(playerid, don_string);
			}
			else
			{
				SetPVarIntNew(playerid,"donatecolor",response);//nАмериканец
				SPD(playerid,dDonateNation2,2,""cWH"Смена национальности","Выберите национальность:\nРусский\nУкраинец\nБелрус\nКазах\nЛитовец\nТатар\nМолдаванин\nУзбек\nАрмянин\nАзербайджанец","Далее","Назад");
			}
		}
		case dDonateNation2:
		{
			if(!response) return 1;
 			if(!listitem) return SPD(playerid,dDonateNation2,2,""cWH"Смена национальности","Выберите национальность:\nРусский\nУкраинец\nБеларус\nКазах\nЛитовец\nТатар\nМолдаванин\nУзбек\nАрмянин\nАзербайджанец","Далее","Назад");
			if(pData[playerid][pDonate] < 75)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить национальность и цвет кожи", 75);
				return SendErr(playerid, don_string);
			}
			new mes[256];
			SetPVarIntNew(playerid,"donatecolor", 0);//
			SetPVarIntNew(playerid,"donatenation",listitem);
			if(GetPVarIntNew(playerid, "donatecolor")) strcat(mes, ""cWH"\tСмена национальности\n");
			else strcat(mes, ""cWH"\tСмена национальности\n");
			format(mes,sizeof(mes),"%s\nНациональность: %s\nБудет снято: "cGR"%i рублей"cWH"\nОстанется на донат счете: "cGR"%i рублей"cWH"\n\n\t"cBLUE"Продолжить?",mes,inputtext, 75, pData[playerid][pDonate] - 75);
			SPD(playerid,dDonateNation3,0,"Смена национальности",mes,"Да","Нет");
		}
		case dDonateNation3:
		{
			if(!response) return SPD(playerid,dDonateNation2,2,""cWH"Смена национальности","Выберите национальность:\nРусский\nУкраинец\nБеларус\nКазах\nЛитовец\nТатар\nМолдаванин\nУзбек\nАрмянин\nАзербайджанец","Далее","Назад");
			if(pData[playerid][pDonate] < 75)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить национальность и цвет кожи", 75);
				return SendErr(playerid, don_string);
			}
			UpdateDonate(playerid);
			new color = GetPVarIntNew(playerid,"donatecolor");
			new nation = GetPVarIntNew(playerid,"donatenation");
			pData[playerid][pColor] = color;
			pData[playerid][pNation] = nation;
			pData[playerid][pDonate] -= 75;
			new query[148];
			format(query,sizeof(query),"UPDATE `accounts` SET `color` = '%d', `nation` = '%d', `donate` = '%d' WHERE `id` = '%d'",color,nation, pData[playerid][pDonate],pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			DonateLog(playerid,-150,9);
			SendInf(playerid, "Национальность изменена");
		}

		case dDonateAge1:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			UpdateDonate(playerid);
			if(pData[playerid][pDonate] < 50)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить Ваш возраст.", 50);
				return SendErr(playerid, don_string);
			}
			if(!IsNumeric(inputtext) || !strlen(inputtext)) SPD(playerid,dDonateAge1,1,"Смена возраста",""cWH"Введите желаемый игровой возраст:",!"Далее",!"Отмена");
			new age = strval(inputtext);
			if(age < 4 || age > 110)
			{
				SendErr(playerid, "Возраст не может быть менее 4 и более 110");
				return PC_EmulateCommand(playerid, "/donate");
			}
			SetPVarIntNew(playerid,"donateage",age);
			new mes[256];
			format(mes,sizeof(mes),""cWH"\tСмена возраста\n\nНовый игровой возраст: %d\nБудет снято: "cGR"%i рублей"cWH"\nОстанется на донат счете: "cGR"%i рублей"cWH"\n\t"cBLUE"Продолжить?",age, 50,pData[playerid][pDonate] - 50);
			SPD(playerid,dDonateAge2,0,""cBLUE"Смена возраста",mes,"Да","Нет");
		}
		case dDonateAge2:
		{
			if(!response) return PC_EmulateCommand(playerid, "/donate");
			UpdateDonate(playerid);
			if(pData[playerid][pDonate] < 50)
			{
				PC_EmulateCommand(playerid, "/donate");
				format(don_string, sizeof(don_string), "Вам нужно иметь "cGR"%i рублей"cWH" на донат счете, чтобы сменить Ваш возраст.", 50);
				return SendErr(playerid, don_string);
			}
			new age = GetPVarIntNew(playerid,"donateage");
			if(age < 4 || age > 110)
			{
				SendErr(playerid, "Возраст не может быть менее 4 и более 110");
				return SPD(playerid,dDonateAge1,1,"Смена возраста",""cWH"Введите желаемый игровой возраст:",!"Далее",!"Отмена");
			}
			pData[playerid][pAge] = age;
			pData[playerid][pDonate] -= 50;
			new query[128];
			format(query,sizeof(query),"UPDATE `accounts` SET `age` = '%d', donate = '%d' WHERE `id` = '%d'",age,pData[playerid][pDonate],pData[playerid][pMysqlID]);
			sql_queryEx(zConn, query, QUERY_THREADED);
			DonateLog(playerid,-100,10);
			SendInf(playerid, "Игровой возраст изменен");
		}
    }

	if(debug_mode)
	{
		printf("[OnDialogResponse]: Времени затрачено: <%d мс>" , GetTickCount() - time_debug);
	}

	return 0;
}

public OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
	return 1;
}

public OnVehicleDamageStatusUpdate(vehicleid, playerid)
{
	new
		Float:car_health;
	GetVehicleHealth(vehicleid, car_health);

	if(car_health <= 150.0)
	{
		vehicle_engine_status(vehicleid, false);
		repair_vehicle_damage_status(vehicleid);
	}

	repair_vehicle_damage_status(vehicleid);

	return 1;
}

public OnPlayerClickTextDraw(playerid, Text:clickedid)
{
	if(pData[playerid][p_dialog] != -1)
		return 1;

	if(!PlayerConnect[playerid]) return 1;
	if(!pTemp[playerid][pLogined]) SelectTextDraw(playerid, 0xFFFFFFFF);

	new time = GetTickCount();

	PlayerBot[playerid] = 1;
	PlayerBotEx[playerid] ++;
	PlayerBotEx2[playerid] ++;

	circle_veh_textdraw_select_el(playerid, clickedid);

	if(clickedid == Text:INVALID_TEXT_DRAW)
	{
		return true;
	}

	if(clickedid == speec_panel_admin[2])
    {
		return SPD(playerid, 4002, DIALOG_STYLE_INPUT, "Мут", "Введите время мута в минутах:", "Мут", "Отмена");
	}
	else if(clickedid == speec_panel_admin[3])
	{
		return SPD(playerid, 4006, DIALOG_STYLE_INPUT, "КПЗ", "Введите время в минутах:", "Посадить", "Отмена");
	}
	else if(clickedid == speec_panel_admin[4])
	{
		return SPD(playerid, 4000, DIALOG_STYLE_INPUT, "Кик игрока", "Введите причину кика данного игрока:", "Кикнуть", "Отмена");
	}
	else if(clickedid == speec_panel_admin[5])
	{
		return SPD(playerid, 4001, DIALOG_STYLE_INPUT, "Выдача варна", "Введите причину выдачи варна данному игроку:", "Варн", "Отмена");
	}
	else if(clickedid == speec_panel_admin[6])
	{
		new id = spec_ad[playerid];
	       if(!IsPlayerConnected(id)) 
		   return SendErr(playerid,"Неверный ID");
           new mes[128];
	       new nick[24];
	       if(pData[id][pAdmin] > pData[playerid][pAdmin]) 
	       {
              format(mes,sizeof(mes),"Администратор %s попытался кикнуть Администратора %s",pData[playerid][pNickname],pData[id][pNickname]);
		      AdminChat(CGRAY,mes);
		      return 1;
	       }
	       if(pData[id][pAdmin] == 7 && pData[playerid][pAdmin] < 8) 
		       return SendClientMessage(playerid, -1, "Данный игрок является старшим администратором!");

	       GetPlayerName(id,nick,24);
	       format(mes,sizeof(mes),"Администратор %s кикнул игрока %s. Причина: %s",pData[playerid][pNickname],nick,"ЕПП");
	       SendAdminMessage(COLOR_LIGHTRED,mes,id);
           logs_admin(playerid, pData[playerid][pMysqlID], mes);
	       show_notify_gui(id, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_33", 4000);
           NewKick(id);
	       pData[ playerid ][pScoreGame][11] += 2;
	       UpdatePlayerData( playerid , "game12", pData[ playerid ][ pScoreGame ][11] );
	       StopSpectate(playerid);
	       return true;
	}
	else if(clickedid == speec_panel_admin[7])
	{
		return SpawnPlayer(spec_ad[playerid]);
	}
	else if(clickedid == speec_panel_admin[8])
	{
		return SendErr(playerid, "В разработке...");
	}
	else if(clickedid == speec_panel_admin[9])
	{
		return show_stats(playerid, spec_ad[playerid]);
	}
	else if(clickedid == speec_panel_admin[10])
	{
		return StartSpectate(playerid, spec_ad[playerid]);
	}
	else if(clickedid == speec_panel_admin[11])
	{
		return StopSpectate(playerid);
	}

	else if(clickedid == speec_panel_admin[12])
	{
		new maxplayers = GetMaxPlayers();
		for(new id = spec_ad[playerid]-1, bool:secondloop; id >= 0; id--)
		{
			if(id <= 0 && !secondloop)
			{
				secondloop = true, id = maxplayers;
				continue;
			}
			if(!IsPlayerConnected(id)) continue;
			switch(GetPlayerState(id))
			{
				case 1..3: {}
				default: continue;
			}
			StartSpectate(playerid, id);
			break;
		}
		return true;
	}
	else if(clickedid == speec_panel_admin[13])
	{
		new maxplayers = GetMaxPlayers();
		for(new id = spec_ad[playerid]+1, bool:secondloop; id >= 0; id--)
		{
			if(id <= 0 && !secondloop)
			{
				secondloop = true, id = maxplayers;
				continue;
			}
			if(!IsPlayerConnected(id)) continue;
			switch(GetPlayerState(id))
			{
				case 1..3: {}
				default: continue;
			}
			StartSpectate(playerid, id);
			break;
		}
		return true;
	}

	else if(clickedid == free_number_gai[4])
		return select_number_veh_free(playerid, TEXTDRAW_HIDE);

	else if(clickedid == voice_global_td[1])
	{
		return hide_setting_voice_player(playerid);
	}

	else if(clickedid == race_interface_g[5])
		return gui_interface_race_start(playerid, TEXTDRAW_HIDE);

	else if(clickedid == race_interface_g_snow[5])
		return gui_interface_race_snow_start(playerid, TEXTDRAW_HIDE);

	else if(clickedid == inventory_gui_back[3])
		return inventory_gui_panel(playerid, TEXTDRAW_HIDE);

	else if(clickedid == teplica_buy_menu[6])
	{
		show_menu_buy_teplica_flate(playerid, TEXTDRAW_HIDE);
		show_menu_buy_teplica_house(playerid, TEXTDRAW_HIDE);
		return show_menu_start_teplica(playerid, TEXTDRAW_SHOW);
	}

	else if(clickedid == fish_prefinal_panel[0])
		return fish_car_open_panel(playerid, TEXTDRAW_SHOW, fish_active_player[playerid]);

	else if(clickedid == inventory_gui_back[1])
	{
		if(pData[playerid][pInventoryLevel] == 1)
			return SendErr(playerid, "Вам доступна только 1 страница инвентаря!");

		if(GetPVarIntNew(playerid, "inventory_show_page") == PAGE_INVENTORY_2)
		{
			inventory_gui_panel(playerid, TEXTDRAW_HIDE);
			inventory_gui_panel(playerid, TEXTDRAW_SHOW, PAGE_INVENTORY_1);
		}
		else if(GetPVarIntNew(playerid, "inventory_show_page") == PAGE_INVENTORY_3)
		{
			inventory_gui_panel(playerid, TEXTDRAW_HIDE);
			inventory_gui_panel(playerid, TEXTDRAW_SHOW, PAGE_INVENTORY_2);
		}
		return true;
	}

	else if(clickedid == inventory_gui_back[2])
	{
		if(pData[playerid][pInventoryLevel] == 1)
			return SendErr(playerid, "Вам доступна только 1 страница инвентаря!");

		if(GetPVarIntNew(playerid, "inventory_show_page") == PAGE_INVENTORY_1)
		{
			inventory_gui_panel(playerid, TEXTDRAW_HIDE);
			inventory_gui_panel(playerid, TEXTDRAW_SHOW, PAGE_INVENTORY_2);
		}
		else if(GetPVarIntNew(playerid, "inventory_show_page") == PAGE_INVENTORY_2)
		{
			if(pData[playerid][pInventoryLevel] == 2)
				return SendErr(playerid, "Вам доступна только 2 страницы инвентаря!");

			inventory_gui_panel(playerid, TEXTDRAW_HIDE);
			inventory_gui_panel(playerid, TEXTDRAW_SHOW, PAGE_INVENTORY_3);
		}

		return true;
	}

	else if(clickedid == hospital_npc[0])
		return select_medic_type(playerid, TYPE_MED_DEF);

	else if(clickedid == hospital_npc[2])
		return select_medic_type(playerid, TYPE_MED_ADRENALIN);

	else if(clickedid == hospital_npc[1])
		return hide_npc_heal_panel(playerid);

	else if(clickedid == teplica_buy_menu[3])
		return buy_teplica_pre_finall(playerid, 1);
	else if(clickedid == teplica_buy_menu[4])
		return buy_teplica_pre_finall(playerid, 2);
	else if(clickedid == teplica_buy_menu[5])
		return buy_teplica_pre_finall(playerid, 3);

	else if(clickedid == mine_job_3[2] || clickedid == mine_job_3[3] || clickedid == mine_job_3[4]
	|| clickedid == mine_job_3[5] || clickedid == mine_job_3[6] || clickedid == mine_job_3[7])
	{
		return selectable_material_konveer(playerid, clickedid);
	}
	else if(clickedid == mine_job_3[1])
	{
		return close_player_miner_sort(playerid);
	}
	else if(clickedid == mine_job_1[1])
	{
		return close_player_miner_mining(playerid);
	}

	else if(clickedid == mine_job_2[1])
	{
		return close_player_miner_konveer(playerid);
	}

	/*else if(clickedid == select_spawn[1])
	{
		hide_select_spawn(playerid);
		pTemp[playerid][spawn_id] = SPAWN_LAST_POS;
		return SpawnPlayer(playerid);
	}
	else if(clickedid == select_spawn[2])
	{
		if(pData[playerid][pFlate] != -1 || pData[playerid][pFlateRent] != -1 || pData[playerid][pHotelRoom] != -1 || pData[playerid][pHouse] != -1 || pData[playerid][pHouseRent] != -1)
		{
			pTemp[playerid][spawn_id] = SPAWN_HOUSE;
			SpawnPlayer(playerid);
		}
		else
		{
			SendErr(playerid, "У вас отсутствует жильё!");
		}
		return true;
	}
	else if(clickedid == select_spawn[3])
	{
		if(!pData[playerid][pFraction])
			return SendErr(playerid, "У вас отсутствует организация!");

		hide_select_spawn(playerid);
		pTemp[playerid][spawn_id] = SPAWN_ORG;
		return SpawnPlayer(playerid);
	}
	else if(clickedid == select_spawn[4])
	{
		hide_select_spawn(playerid);
		pTemp[playerid][spawn_id] = SPAWN_DEFAULT;
		return SpawnPlayer(playerid);
	}*/

	else if(clickedid == fast_menu_general_1[0])
		return show_fast_menu_other(playerid);
	else if(clickedid == fast_menu_general_1[1])
		return PC_EmulateCommand(playerid, "/car");
	else if(clickedid == fast_menu_general_1[2])
		return PC_EmulateCommand(playerid, "/donate");
	else if(clickedid == fast_menu_general_1[3])
		return PC_EmulateCommand(playerid, "/gps");
	else if(clickedid == fast_menu_general_1[4])
		return PC_EmulateCommand(playerid, "/setting");
	else if(clickedid == fast_menu_general_1[5])
		return PC_EmulateCommand(playerid, "/report");
	else if(clickedid == fast_menu_general_1[6])
		return show_fast_menu(playerid, FAST_MENU_GENERAL_MENU, TEXTDRAW_HIDE);

	else if(clickedid == fast_menu_general_2[0])
	{

		SetPVarIntNew(playerid, "fast_menu_select_type", FAST_MENU_TYPE_MONEY);
		return select_player_fast_menu(playerid);
	}
	else if(clickedid == fast_menu_general_2[1])
	{

		SetPVarIntNew(playerid, "fast_menu_select_type", FAST_MENU_TYPE_SKILL);
		return select_player_fast_menu(playerid);
	}
	else if(clickedid == fast_menu_general_2[2])
	{

		SetPVarIntNew(playerid, "fast_menu_select_type", FAST_MENU_TYPE_MED);
		return select_player_fast_menu(playerid);
	}
	else if(clickedid == fast_menu_general_2[3])
	{

		SetPVarIntNew(playerid, "fast_menu_select_type", FAST_MENU_TYPE_HI);
		return select_player_fast_menu(playerid);
	}
	else if(clickedid == fast_menu_general_2[4])
	{

		SetPVarIntNew(playerid, "fast_menu_select_type", FAST_MENU_TYPE_PASS);
		return select_player_fast_menu(playerid);
	}
	else if(clickedid == fast_menu_general_2[5])
	{

		SetPVarIntNew(playerid, "fast_menu_select_type", FAST_MENU_TYPE_UDOST);
		return select_player_fast_menu(playerid);
	}

	else if(clickedid == fast_menu_general_2[6])
		return show_fast_menu(playerid, FAST_MENU_GENERAL_PLAYER, TEXTDRAW_HIDE);

	else if(clickedid == player_veh_key_back[2])
		return show_car_fast_menu(playerid, TEXTDRAW_HIDE);

	else if(clickedid == key_vehicle_electrog[6])
		return show_car_fast_menu(playerid, TEXTDRAW_HIDE);


	else if(clickedid == menu_teplica_general_st[3])
		return show_menu_start_teplica(playerid, TEXTDRAW_HIDE);

	else if(clickedid == autoschool_info_td[3])
		return hide_select_autoschool_exam(playerid);

	else if(clickedid == autoschool_info_td[4])
		return show_info_exam_auto(playerid);

	else if(clickedid == autoschool_info_td[5])
		return show_info_exam_vert(playerid);

	else if(clickedid == autoschool_info_td[6])
		return show_info_exam_aqua(playerid);

	else if(clickedid == autoschool_info_td_3[1] || clickedid == autoschool_info_td_2[1] || clickedid == autoschool_info_td_1[1])
		return close_info_exam_all(playerid);

	else if(clickedid == factory_job_1[1])
		return hide_work_factory_click(playerid);

	else if(clickedid == factory_job_2[1])
		return hide_work_factory_click_mith(playerid);

	else if(clickedid == clothes_select_td[0])
		return show_clothes_prew_1(playerid);
	else if(clickedid == clothes_select_td[1])
		return show_clothes_next_1(playerid);
	else if(clickedid == clothes_select_td[4])
		return exit_select_clothes(playerid);
	else if(clickedid == clothes_select_td[3])
		return buy_skin_player_click(playerid);

	else if(clickedid == quest_newyear_start[3])
		return close_prewiow_quest_newyear(playerid);

	else if(clickedid == quest_newyear_start[2])
	{
		pData[playerid][pQuestShow] = 1;
		UpdatePlayerData(playerid, "pQuestShow", pData[playerid][pQuestShow]);

		return show_quest_newyear(playerid, TEXTDRAW_SHOW);
	}

	else if(clickedid == rent_katok_menu[2])
		return rent_katok_menus(playerid, TEXTDRAW_HIDE);

	else if(clickedid == aks_select_td[0])
	{
		if(GetPVarIntNew(playerid, "type_select_aks") == 1)
		{
			return show_aks_prew_1(playerid);
		}
		else if(GetPVarIntNew(playerid, "type_select_aks") == 2)
		{
			return show_aks_prew_2(playerid);
		}
		else if(GetPVarIntNew(playerid, "type_select_aks") == 3)
		{
			return show_aks_prew_3(playerid);
		}
	}

	else if(clickedid == aks_select_td[1])
	{
		if(GetPVarIntNew(playerid, "type_select_aks") == 1)
		{
			return show_aks_next_1(playerid);
		}
		else if(GetPVarIntNew(playerid, "type_select_aks") == 2)
		{
			return show_aks_next_2(playerid);
		}
		else if(GetPVarIntNew(playerid, "type_select_aks") == 3)
		{
			return show_aks_next_3(playerid);
		}
	}

	else if(clickedid == aks_select_td[4])
	{
		return exit_select_aks(playerid);
	}

	else if(clickedid == aks_select_td[3])
		return buy_aks_player_click(playerid);


	else if(clickedid == rent_katok_menu[1])
		return rent_katok_menu_push(playerid);
	else if(clickedid == rent_katok_menu[3])
		return rent_katok_menu_push(playerid);


	else if(clickedid == buy_number_gai[9])
	{
		if(!GetPVarIntNew(playerid, "select_region_number"))
			return SendInf(playerid, "Сперва Вам требуется выбрать регион, который Вы хотите получить!");

		new
			i = pData[playerid][car_id];

		if(i == INVALID_VEHICLE_ID)
			return SendErr(playerid, "Или Вы не имеете транспортное средство или оно находится на парковке!");

		new
			type = GetPVarIntNew(playerid, "select_region_number");


		switch(type)
		{
			case NUMBER_REGION_RU:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") < 5)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")+1);

				}

			}
			case NUMBER_REGION_KZ:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") < 5)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")+1);
				}
			}
			case NUMBER_REGION_BY:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") < 6)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")+1);
				}
			}
			case NUMBER_REGION_UA:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") < 6)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")+1);
				}

			}
		}
	}
	else if(clickedid == buy_number_gai[8])
	{
		if(!GetPVarIntNew(playerid, "select_region_number"))
			return SendInf(playerid, "Сперва Вам требуется выбрать регион, который Вы хотите получить!");

		new
			i = pData[playerid][car_id];

		if(i == INVALID_VEHICLE_ID)
			return SendErr(playerid, "Или Вы не имеете транспортное средство или оно находится на парковке!");

		new
			type = GetPVarIntNew(playerid, "select_region_number");


		switch(type)
		{
			case NUMBER_REGION_RU:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") > 0)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")-1);
				}

			}
			case NUMBER_REGION_KZ:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") > 0)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")-1);
				}
			}
			case NUMBER_REGION_BY:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") > 0)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")-1);
				}
			}
			case NUMBER_REGION_UA:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number") > 0)
				{
					SetPVarIntNew(playerid, "symbol_buy_number", GetPVarIntNew(playerid, "symbol_buy_number")-1);
				}

			}
		}
	}



	else if(clickedid == buy_number_gai[7])
	{
		if(!GetPVarIntNew(playerid, "select_region_number"))
			return SendInf(playerid, "Сперва Вам требуется выбрать регион, который Вы хотите получить!");

		new
			i = pData[playerid][car_id];

		if(i == INVALID_VEHICLE_ID)
			return SendErr(playerid, "Или Вы не имеете транспортное средство или оно находится на парковке!");

		new
			type = GetPVarIntNew(playerid, "select_region_number");

		switch(type)
		{
			case NUMBER_REGION_RU:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number_2") > 11)
				{
					SetPVarIntNew(playerid, "symbol_buy_number_2", GetPVarIntNew(playerid, "symbol_buy_number_2")+1);

				}

			}
			case NUMBER_REGION_KZ:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number_2") > 11)
				{
					SetPVarIntNew(playerid, "symbol_buy_number_2", GetPVarIntNew(playerid, "symbol_buy_number_2")+1);
				}
			}
			case NUMBER_REGION_BY:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number_2") > 11)
				{
					SetPVarIntNew(playerid, "symbol_buy_number_2", GetPVarIntNew(playerid, "symbol_buy_number_2")+1);
				}
			}
			case NUMBER_REGION_UA:
			{
				if(GetPVarIntNew(playerid, "symbol_buy_number_2") > 11)
				{
					SetPVarIntNew(playerid, "symbol_buy_number_2", GetPVarIntNew(playerid, "symbol_buy_number_2")+1);
				}

			}
		}

	}

	else if(clickedid == prizenewyear_background[1])
		return show_dialog_open_new_year_prize(playerid);
	else if(clickedid == prizenewyear_background[2])
		return menu_select_prize_newyear(playerid, TEXTDRAW_HIDE);

	else if(clickedid == phone_general_player[0])
		return show_calendar_phone(playerid);

	else if(clickedid == phone_general_player[1])
		return show_note_phone(playerid);

	else if(clickedid == phone_general_player[2])
		return show_setting_phone(playerid);

	else if(clickedid == phone_general_player[5])
		return show_phone_page_taxi(playerid, TAXI_COMPANY_UBER);

	else if(clickedid == phone_general_player[3])
		return show_phone_page_taxi(playerid, TAXI_COMPANY_CITY);

	else if(clickedid == phone_general_player[4])
		return show_phone_page_taxi(playerid, TAXI_COMPANY_YANDEX);


	else if(clickedid == trucker_select_job[1])
		return select_job_trucker_final(playerid, TRUCKER_JOB_ZAVOD);

	else if(clickedid == trucker_select_job[2])
		return select_job_trucker_final(playerid, TRUCKER_JOB_SHOP);

	else if(clickedid == trucker_select_job[3])
		return select_job_trucker_final(playerid, TRUCKER_JOB_FILL_1);

	else if(clickedid == trucker_select_job[4])
		return select_job_trucker_final(playerid, TRUCKER_JOB_FILL_2);

	else if(clickedid == trucker_select_job[5])
		return select_job_trucker_final(playerid, TRUCKER_JOB_SAMWILL);

	else if(clickedid == trucker_select_job[8])
		return select_job_trucker_final(playerid, TRUCKER_JOB_MINER);

	else if(clickedid == trucker_select_job[7])
		return hide_trucker_menu_select(playerid);


	else if(clickedid == menu_teplica_general_st[0])
		return show_menu_buy_teplica_house(playerid, TEXTDRAW_SHOW);
	else if(clickedid == menu_teplica_general_st[1])
		return show_menu_buy_teplica_flate(playerid, TEXTDRAW_SHOW);
	else if(clickedid == menu_teplica_general_st[2])
		return enter_teplice_player(playerid);

	else if(clickedid == menu_teplica_general_st[4])
		return green_house_menu_semena(playerid, 1);
	else if(clickedid == menu_teplica_general_st[5])
		return green_house_menu_semena(playerid, 2);
	else if(clickedid == menu_teplica_general_st[6])
		return green_house_menu_semena(playerid, 3);
	else if(clickedid == menu_teplica_general_st[7])
		return green_house_menu_semena(playerid, 4);
	else if(clickedid == menu_teplica_general_st[8])
		return green_house_menu_semena(playerid, 5);
	else if(clickedid == menu_teplica_general_st[9])
		return green_house_menu_semena(playerid, 6);
	else if(clickedid == menu_teplica_general_st[10])
		return green_house_menu_semena(playerid, 7);
	else if(clickedid == menu_teplica_general_st[11])
		return green_house_menu_semena(playerid, 8);

	else if(clickedid == menu_teplica_general_st[3])
		return show_menu_start_teplica(playerid, TEXTDRAW_HIDE);

	else if(clickedid == autosalon_middle_class[2])
		return show_car_autosalon_next_1(playerid);
	else if(clickedid == autosalon_middle_class[1])
		return show_car_autosalon_prew_1(playerid);
	else if(clickedid == autosalon_middle_class[3])
		return move_camera_vehicle_shop_1(playerid);

	else if(clickedid == autosalon_middle_class[6])
		return prew_color_page_autosalon(playerid);
	else if(clickedid == autosalon_middle_class[7])
		return next_color_page_autosalon(playerid);

	else if(clickedid == autosalon_middle_class[4])
		return select_buy_car_autosalon(playerid);

	else if(clickedid == autosalon_elite_class[2])
		return show_car_autosalon_next_2(playerid);
	else if(clickedid == autosalon_elite_class[1])
		return show_car_autosalon_prew_2(playerid);
	else if(clickedid == autosalon_elite_class[3])
		return move_camera_vehicle_shop_2(playerid);

	else if(clickedid == autosalon_elite_class[6])
		return prew_color_page_autosalon(playerid);
	else if(clickedid == autosalon_elite_class[7])
		return next_color_page_autosalon(playerid);

	else if(clickedid == autosalon_elite_class[4])
		return select_buy_car_autosalon(playerid);


	else if(clickedid == autosalon_low_class[2])
		return show_car_autosalon_next_3(playerid);
	else if(clickedid == autosalon_low_class[1])
		return show_car_autosalon_prew_3(playerid);
	else if(clickedid == autosalon_low_class[3])
		return move_camera_vehicle_shop_3(playerid);
	else if(clickedid == autosalon_low_class[6])
		return prew_color_page_autosalon(playerid);
	else if(clickedid == autosalon_low_class[7])
		return next_color_page_autosalon(playerid);
	else if(clickedid == autosalon_low_class[4])
		return select_buy_car_autosalon(playerid);


	else if(clickedid == autosalon_elite_class[8] || clickedid == autosalon_middle_class[8] || clickedid == autosalon_low_class[8])
		return exit_select_car_autosalon(playerid);


	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		if(GetPVarIntNew(playerid, "in_fuel_station") == 1)
		{
			if(clickedid == fill_gazprom_panel[0] || clickedid == fill_lukoil_panel[2])
			{
				new
					fill_id = GetPVarIntNew(playerid, "fuel_station_id");

				new
					type = filling[fill_id][filling_type_name];

				new
					veh_ids = GetPlayerVehicleID(playerid);

				if(transport_config[GetVehicleModel(veh_ids)-400][transport_fuel_type] != 1)
				{
					SendErr(playerid, "Данный тип топлива не доступен для Вашего транспортного средства!");
					return SelectTextDraw(playerid, COLOR_BLUE);
				}

				switch(type)
				{
					case 1:
					{
						PlayerTextDrawSetString(playerid, filling_gazprom_p[0][playerid], "brilliantother:fill_panel_1_92");
						PlayerTextDrawShow(playerid, filling_gazprom_p[0][playerid]);
					}
					case 2:
					{
						PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[0][playerid], "brilliantother:fill_panel_2_92");
						PlayerTextDrawShow(playerid, fill_lukoil_panel_p[0][playerid]);
					}
				}
				SetPVarIntNew(playerid, "fuel_type_filling", 1);

				if(GetPVarIntNew(playerid, "count_fill_input") > 0)
				{
					update_info_count_fuel(playerid);
				}

				return true;
			}
			else if(clickedid == fill_gazprom_panel[1] || clickedid == fill_lukoil_panel[3])
			{
				new
					fill_id = GetPVarIntNew(playerid, "fuel_station_id");

				new
					type = filling[fill_id][filling_type_name];

				new
					veh_ids = GetPlayerVehicleID(playerid);

				if(transport_config[GetVehicleModel(veh_ids)-400][transport_fuel_type] != 2)
				{
					SendErr(playerid, "Данный тип топлива не доступен для Вашего транспортного средства!");
					return SelectTextDraw(playerid, COLOR_BLUE);
				}

				switch(type)
				{
					case 1:
					{
						PlayerTextDrawSetString(playerid, filling_gazprom_p[0][playerid], "brilliantother:fill_panel_1_95");
						PlayerTextDrawShow(playerid, filling_gazprom_p[0][playerid]);
					}
					case 2:
					{
						PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[0][playerid], "brilliantother:fill_panel_2_95");
						PlayerTextDrawShow(playerid, fill_lukoil_panel_p[0][playerid]);
					}
				}

				SetPVarIntNew(playerid, "fuel_type_filling", 2);

				if(GetPVarIntNew(playerid, "count_fill_input") > 0)
				{
					update_info_count_fuel(playerid);
				}

				return true;
			}
			else if(clickedid == fill_gazprom_panel[2] || clickedid == fill_lukoil_panel[4])
			{
				new
					fill_id = GetPVarIntNew(playerid, "fuel_station_id");

				new
					type = filling[fill_id][filling_type_name];

				new
					veh_ids = GetPlayerVehicleID(playerid);

				if(transport_config[GetVehicleModel(veh_ids)-400][transport_fuel_type] != 3)
				{
					SendErr(playerid, "Данный тип топлива не доступен для Вашего транспортного средства!");
					return SelectTextDraw(playerid, COLOR_BLUE);
				}

				switch(type)
				{
					case 1:
					{
						PlayerTextDrawSetString(playerid, filling_gazprom_p[0][playerid], "brilliantother:fill_panel_1_98");
						PlayerTextDrawShow(playerid, filling_gazprom_p[0][playerid]);
					}
					case 2:
					{
						PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[0][playerid], "brilliantother:fill_panel_2_98");
						PlayerTextDrawShow(playerid, fill_lukoil_panel_p[0][playerid]);
					}
				}

				SetPVarIntNew(playerid, "fuel_type_filling", 3);

				if(GetPVarIntNew(playerid, "count_fill_input") > 0)
				{
					update_info_count_fuel(playerid);
				}


				return true;
			}
			else if(clickedid == fill_gazprom_panel[3] || clickedid == fill_lukoil_panel[5])
			{
				new
					fill_id = GetPVarIntNew(playerid, "fuel_station_id");

				new
					type = filling[fill_id][filling_type_name];

				new
					veh_ids = GetPlayerVehicleID(playerid);

				if(transport_config[GetVehicleModel(veh_ids)-400][transport_fuel_type] != 4)
				{
					SendErr(playerid, "Данный тип топлива не доступен для Вашего транспортного средства!");
					return SelectTextDraw(playerid, COLOR_BLUE);
				}

				switch(type)
				{
					case 1:
					{
						PlayerTextDrawSetString(playerid, filling_gazprom_p[0][playerid], "brilliantother:fill_panel_1_dt");
						PlayerTextDrawShow(playerid, filling_gazprom_p[0][playerid]);
					}
					case 2:
					{
						PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[0][playerid], "brilliantother:fill_panel_2_dt");
						PlayerTextDrawShow(playerid, fill_lukoil_panel_p[0][playerid]);
					}
				}
				SetPVarIntNew(playerid, "fuel_type_filling", 4);

				if(GetPVarIntNew(playerid, "count_fill_input") > 0)
				{
					update_info_count_fuel(playerid);
				}


				return true;
			}
			else if(clickedid == fill_gazprom_panel[4] || clickedid == fill_lukoil_panel[0])
			{
				show_select_count_fill(playerid);
				return true;
			}

			else if(clickedid == fill_gazprom_panel[6] || clickedid == fill_lukoil_panel[1])
			{
				if(!GetPVarIntNew(playerid, "fuel_type_filling"))
					return SendErr(playerid, "Сперва Вам требуется выбрать тип топлива для заправки!");

				start_filling_car(playerid);
				return true;
			}
			else if(clickedid == charge_tesla_button[0])
			{
				start_charging_tesla(playerid);
				return true;
			}

			else if(clickedid == charge_tesla_button[1])
			{
				close_charging_tesla(playerid);
				return true;
			}

			else if(clickedid == fill_gazprom_panel[7] || clickedid == fill_lukoil_panel[6])
			{
				close_filling_car(playerid);
				return true;
			}
		}
	}


	else if(clickedid == mine_job_1[1])
	{
		if(GetPVarIntNew(playerid, "panel_mine_active") == 1)
		{
			return close_player_miner_mining(playerid);
		}
	}
	else if(clickedid == mine_job_2[1])
	{
		if(GetPVarIntNew(playerid, "panel_mine_active") == 1)
		{
			return close_player_miner_mining(playerid);
		}
	}
	if(debug_mode)
	{
		printf("[OnPlayerClickTextDraw]: Времени затрачено: <%d мс>" , GetTickCount() - time);
	}


	return 0;
}

public OnPlayerClickPlayerTextDraw(playerid, PlayerText:playertextid)
{

	if(pData[playerid][p_dialog] != -1)
		return 1;

	if(!PlayerConnect[playerid]) return 1;
	if(!IsPlayerConnected(playerid))
	{
		return 0;
	}
	
	if(playertextid == ammo_panel_menu_biz[19][playerid])
		return buy_menu_ammo_magazin(playerid);

	circle_veh_textdraw_select(playerid, playertextid);

	if(playertextid == wood_point_p[playerid])
			return click_random_point_wood(playerid);

	else if(playertextid == miner_job_2_p[12][playerid])
		return next_position_konveer_mine(playerid);

	else if(playertextid == quest_newyear_p[13][playerid])
		return check_status_quest_newyear(playerid, GetPVarIntNew(playerid, "quest_count_newyear_panel")-1);

	if(playertextid == inventory_gui_p[0][playerid])
		return select_items_player(playerid, 0);
	if(playertextid == inventory_gui_p[1][playerid])
		return select_items_player(playerid, 1);
	if(playertextid == inventory_gui_p[2][playerid])
		return select_items_player(playerid, 2);
	if(playertextid == inventory_gui_p[3][playerid])
		return select_items_player(playerid, 3);
	if(playertextid == inventory_gui_p[4][playerid])
		return select_items_player(playerid, 4);
	if(playertextid == inventory_gui_p[5][playerid])
		return select_items_player(playerid, 5);
	if(playertextid == inventory_gui_p[6][playerid])
		return select_items_player(playerid, 6);
	if(playertextid == inventory_gui_p[7][playerid])
		return select_items_player(playerid, 7);
	if(playertextid == inventory_gui_p[8][playerid])
		return select_items_player(playerid, 8);
	if(playertextid == inventory_gui_p[9][playerid])
		return select_items_player(playerid, 9);
	if(playertextid == inventory_gui_p[10][playerid])
		return select_items_player(playerid, 10);

	if(playertextid == inventory_gui_p[10][playerid])
		return select_items_player(playerid, 10);
	if(playertextid == inventory_gui_p[11][playerid])
		return select_items_player(playerid, 11);
	if(playertextid == inventory_gui_p[12][playerid])
		return select_items_player(playerid, 12);
	if(playertextid == inventory_gui_p[13][playerid])
		return select_items_player(playerid, 13);
	if(playertextid == inventory_gui_p[14][playerid])
		return select_items_player(playerid, 14);
	if(playertextid == inventory_gui_p[15][playerid])
		return select_items_player(playerid, 15);
	if(playertextid == inventory_gui_p[16][playerid])
		return select_items_player(playerid, 16);
	if(playertextid == inventory_gui_p[17][playerid])
		return select_items_player(playerid, 17);
	if(playertextid == inventory_gui_p[18][playerid])
		return select_items_player(playerid, 18);
	if(playertextid == inventory_gui_p[19][playerid])
		return select_items_player(playerid, 19);
	if(playertextid == inventory_gui_p[20][playerid])
		return select_items_player(playerid, 20);

	if(playertextid == inventory_gui_p[21][playerid])
		return select_items_player(playerid, 21);
	if(playertextid == inventory_gui_p[22][playerid])
		return select_items_player(playerid, 22);
	if(playertextid == inventory_gui_p[23][playerid])
		return select_items_player(playerid, 23);


	if(playertextid == inventory_gui_p[24][playerid])
		return select_items_player(playerid, 24);

	if(playertextid == inventory_gui_p[26][playerid])
		return select_items_player(playerid, 26);

	if(playertextid == inventory_gui_p[31][playerid])
		return select_items_player(playerid, 29);

	if(playertextid == general_green_house[12][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 1);
	if(playertextid == general_green_house[13][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 2);
	if(playertextid == general_green_house[14][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 3);
	if(playertextid == general_green_house[15][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 4);
	if(playertextid == general_green_house[16][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 5);
	if(playertextid == general_green_house[17][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 6);
	if(playertextid == general_green_house[18][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 7);
	if(playertextid == general_green_house[19][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_SHOW, 8);

	if(playertextid == general_green_house[26][playerid])
		return show_player_green_house_p(playerid, TEXTDRAW_HIDE);

	if(playertextid == general_green_house[22][playerid])
		return green_house_semena_all(playerid);

	if(playertextid == general_green_house[2][playerid])
		return green_house_place_semena(playerid);

	if(playertextid == general_green_house[1][playerid])
		return water_rice_plant_player(playerid);

	if(playertextid == general_green_house[3][playerid])
		return give_final_product_green_h(playerid);

	if(playertextid == fish_panel_all[16][playerid])
		return fish_panel_all_fish(playerid, TEXTDRAW_HIDE);

	if(playertextid == fish_p_general[1][playerid])
		return click_random_point_fish(playerid);

	if(playertextid == fish_p_general[2][playerid])
		return check_status_button_fish(playerid, GetPVarIntNew(playerid, "fish_status_player"));

	if(playertextid == fish_panel_final[2][playerid])
		return final_give_fish_player(playerid);

	if(playertextid == fish_panel_final[3][playerid])
		return outpout_fish_player(playerid);

	if(playertextid == work_taxi_panel[3][playerid])
		return panel_working_td_other(playerid, 0, TEXTDRAW_HIDE);

	if(playertextid == work_taxi_panel[1][playerid])
		return start_working_taxi_other(playerid, WORKING_TAXI_HOUSE_OTHER);
	if(playertextid == work_taxi_panel[2][playerid])
		return start_working_taxi_other(playerid, WORKING_TAXI_PEOPLE_OTHER);

	if(playertextid == work_trash_panel_p[1][playerid])
		return click_button_trash_panel(playerid);
	if(playertextid == work_trash_panel_p[2][playerid])
		return panel_trash_work(playerid, TEXTDRAW_HIDE);

	if(playertextid == work_bank_panel_p[1][playerid])
		return click_button_bank_panel(playerid);
	if(playertextid == work_bank_panel_p[2][playerid])
		return panel_bank_work(playerid, TEXTDRAW_HIDE);


	
	if(playertextid == ammo_panel_menu_biz[1][playerid])
		return click_menu_ammo_magazin(playerid, 1);
	if(playertextid == ammo_panel_menu_biz[2][playerid])
		return click_menu_ammo_magazin(playerid, 2);
	if(playertextid == ammo_panel_menu_biz[3][playerid])
		return click_menu_ammo_magazin(playerid, 3);
	if(playertextid == ammo_panel_menu_biz[4][playerid])
		return click_menu_ammo_magazin(playerid, 4);
	if(playertextid == ammo_panel_menu_biz[19][playerid])
		return buy_menu_ammo_magazin(playerid);
	if(playertextid == ammo_panel_menu_biz[7][playerid])
		return click_menu_ammo_magazin(playerid, 5);
	if(playertextid == ammo_panel_menu_biz[8][playerid])
		return click_menu_ammo_magazin(playerid, 6);
	if(playertextid == ammo_panel_menu_biz[9][playerid])
		return click_menu_ammo_magazin(playerid, 7);
	if(playertextid == ammo_panel_menu_biz[10][playerid])
		return click_menu_ammo_magazin(playerid, 8);
	if(playertextid == ammo_panel_menu_biz[15][playerid])
		return show_ammo_menu_magazin(playerid, TEXTDRAW_HIDE);

	if(playertextid == fish_p_general[3][playerid])
	{
		show_info_gui(playerid, TEXTDRAW_SHOW);
		TogglePlayerControllable(playerid, true);
		fish_attach_player_ud(playerid, TEXTDRAW_HIDE);
		ClearAnimations(playerid);
		clear_fish_pvar(playerid);
		return fish_panel_general_panel(playerid, TEXTDRAW_HIDE);
	}

	if(playertextid == fire_work_panel[1][playerid])
	{
		if(pData[playerid][pJob] == SKILL_FIRE)
		{
			PlayerTextDrawSetString(playerid, fire_work_panel[1][playerid], "brilliantother:fire_work_gui_2");
			PlayerTextDrawShow(playerid,  fire_work_panel[1][playerid]);

			end_fire_job(playerid);
		}
		else
		{
			PlayerTextDrawSetString(playerid,  fire_work_panel[1][playerid], "brilliantother:fire_work_gui_1");
			PlayerTextDrawShow(playerid,  fire_work_panel[1][playerid]);

			start_fire_job(playerid);
		}
	}

	if(playertextid == fire_work_panel[2][playerid])
		return fire_work_panel_p(playerid, TEXTDRAW_HIDE);

	else if(playertextid == quest_panel_general_p[4][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_1);
		return show_quest_panel_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_panel_general_p[5][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_2);
		return show_quest_panel_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_panel_general_p[6][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_3);
		return show_quest_panel_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_panel_general_p[7][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_4);
		return show_quest_panel_page(playerid, page_quest_panel[playerid]);
	}


	else if(playertextid == quest_newyear_p[1][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_1);
		return show_quest_panel_newyear_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_newyear_p[2][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_2);
		return show_quest_panel_newyear_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_newyear_p[6][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_3);
		return show_quest_panel_newyear_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_newyear_p[7][playerid])
	{
		SetPVarIntNew(playerid, "select_quest_number_panel", QUEST_PAGE_SELECT_4);
		return show_quest_panel_newyear_page(playerid, page_quest_panel[playerid]);
	}

	else if(playertextid == quest_panel_general_p[2][playerid])
	{
		show_quest_systems_panel(playerid, TEXTDRAW_HIDE);
		show_quest_systems_general(playerid, TEXTDRAW_SHOW);
		return SelectTextDraw(playerid, COLOR_BLUE);
	}

	else if(playertextid == quest_newyear_p[4][playerid])
	{
		show_quest_newyear(playerid, TEXTDRAW_HIDE);
		show_quest_systems_general(playerid, TEXTDRAW_SHOW);
		return true;
	}


	else if(playertextid == quest_newyear_p[8][playerid])
		return pre_page_quest_panel_newyear(playerid);

	else if(playertextid == quest_newyear_p[9][playerid])
		return next_page_quest_panel_newyear(playerid);

	else if(playertextid == quest_newyear_p[5][playerid])
		return close_quest_panel_newyear(playerid);


	else if(playertextid == quest_general_panel_s[2][playerid])
		return show_quest_systems_panel(playerid, TEXTDRAW_SHOW);

	else if(playertextid == quest_general_panel_s[3][playerid])
		return show_quest_newyear_panel(playerid);


	else if(playertextid == race_player_button[playerid])
	{
		if(GetPVarIntNew(playerid, "RegInRace"))
		{
			PC_EmulateCommand(playerid, "/leave_race");
			gui_interface_race_start(playerid, TEXTDRAW_UPDATE);
		}
		else
		{
			invite_to_race_player(playerid);
			gui_interface_race_start(playerid, TEXTDRAW_UPDATE);
		}
		return true;
	}

	else if(playertextid == race_player_button_snow[playerid])
	{
		if(GetPVarIntNew(playerid, "reg_in_snow_race"))
		{
			PC_EmulateCommand(playerid, "/leaveracesnow");
			gui_interface_race_snow_start(playerid, TEXTDRAW_UPDATE);
		}
		else
		{
			invite_to_snow_race_player(playerid);
			gui_interface_race_snow_start(playerid, TEXTDRAW_UPDATE);
		}
	}

	/*else if(playertextid == quest_panel_general_p[10][playerid])
	{
		return start_quest_panel_new(playerid);
	}*/

	else if(playertextid == casino_general_p[8][playerid])
	{
		if(GetPVarIntNew(playerid, "player_in_table") != -1)
		{

			return exit_sum_casino_bet(playerid);
		}
	}

	else if(playertextid == casino_general_p[5][playerid])
	{
		if(GetPVarIntNew(playerid, "player_in_table") != -1 && GetPVarIntNew(playerid,"player_in_the_crupie") == 0)
		{
			return select_sum_casino_bet(playerid);
		}
		else if(GetPVarIntNew(playerid, "player_in_table") != -1 && GetPVarIntNew(playerid,"player_in_the_crupie") != 0)
		{
			crupie_start_bet_menu(playerid);
		}
		return true;
	}
	else if(playertextid == casino_general_p[6][playerid])
	{
		if(GetPVarIntNew(playerid, "player_in_table") != -1)
		{
			return exit_sum_casino_bet(playerid);
		}
	}




	else if(playertextid ==  quest_panel_general_p[3][playerid])
		return close_quest_panel(playerid);
	else if(playertextid == quest_panel_general_p[8][playerid])
		return prew_page_quest_panel(playerid);
	else if(playertextid == quest_panel_general_p[9][playerid])
		return next_page_quest_panel(playerid);


	else if(playertextid == yandex_taxi_td[0][playerid])
		return update_phone_status_yandex(playerid, CLICK_SELECT_TARIF_ECONOM);
	else if(playertextid == yandex_taxi_td[1][playerid])
		return update_phone_status_yandex(playerid, CLICK_SELECT_TARIF_COMFORT);
	else if(playertextid == yandex_taxi_td[2][playerid])
		return update_phone_status_yandex(playerid, CLICK_SELECT_TARIF_BUISNES);
	else if(playertextid == yandex_taxi_td[3][playerid])
		return update_phone_status_yandex(playerid, CLICK_SELECT_TAXI_TEXT);
	else if(playertextid == yandex_taxi_td[4][playerid])
		return update_phone_status_yandex(playerid, CLICK_SELECT_TAXI_CALL);

	else if(playertextid == uber_taxi_td[0][playerid])
		return update_phone_status_uber(playerid, CLICK_SELECT_TARIF_ECONOM);
	else if(playertextid == uber_taxi_td[1][playerid])
		return update_phone_status_uber(playerid, CLICK_SELECT_TARIF_COMFORT);
	else if(playertextid == uber_taxi_td[2][playerid])
		return update_phone_status_uber(playerid, CLICK_SELECT_TARIF_BUISNES);
	else if(playertextid == uber_taxi_td[3][playerid])
		return update_phone_status_uber(playerid, CLICK_SELECT_TAXI_TEXT);
	else if(playertextid == uber_taxi_td[4][playerid])
		return update_phone_status_uber(playerid, CLICK_SELECT_TAXI_CALL);


	else if(playertextid == siti_taxi_select[0][playerid])
		return update_phone_status_city(playerid, CLICK_SELECT_TARIF_ECONOM);
	else if(playertextid == siti_taxi_select[1][playerid])
		return update_phone_status_city(playerid, CLICK_SELECT_TARIF_COMFORT);
	else if(playertextid == siti_taxi_select[2][playerid])
		return update_phone_status_city(playerid, CLICK_SELECT_TARIF_BUISNES);
	else if(playertextid == siti_taxi_select[3][playerid])
		return update_phone_status_city(playerid, CLICK_SELECT_TAXI_TEXT);
	else if(playertextid == siti_taxi_select[4][playerid])
		return update_phone_status_city(playerid, CLICK_SELECT_TAXI_CALL);


	else if(playertextid == free_number_gai_p[0][playerid])
		return select_number_veh_region_free(playerid, NUMBER_REGION_RU);
	else if(playertextid == free_number_gai_p[1][playerid])
		return select_number_veh_region_free(playerid, NUMBER_REGION_KZ);
	else if(playertextid == free_number_gai_p[2][playerid])
		return select_number_veh_region_free(playerid, NUMBER_REGION_BY);
	else if(playertextid == free_number_gai_p[3][playerid])
		return select_number_veh_region_free(playerid, NUMBER_REGION_UA);

	else if(playertextid == buy_number_gai_p[0][playerid])
		return select_number_veh_region_buy(playerid, NUMBER_REGION_RU);
	else if(playertextid == buy_number_gai_p[1][playerid])
		return select_number_veh_region_buy(playerid, NUMBER_REGION_KZ);
	else if(playertextid == buy_number_gai_p[2][playerid])
		return select_number_veh_region_buy(playerid, NUMBER_REGION_BY);
	else if(playertextid == buy_number_gai_p[3][playerid])
		return select_number_veh_region_buy(playerid, NUMBER_REGION_UA);




	else if(playertextid == free_number_gai_p[4][playerid])
		return select_region_number_free(playerid);

	else if(playertextid == autosalon_info_td_p[7][playerid])
		return use_sellcar_color(playerid, 1);
	else if(playertextid == autosalon_info_td_p[8][playerid])
		return use_sellcar_color(playerid, 2);
	else if(playertextid == autosalon_info_td_p[9][playerid])
		return use_sellcar_color(playerid, 3);
	else if(playertextid == autosalon_info_td_p[10][playerid])
		return use_sellcar_color(playerid, 4);
	else if(playertextid == autosalon_info_td_p[11][playerid])
		return use_sellcar_color(playerid, 5);
	else if(playertextid == autosalon_info_td_p[12][playerid])
		return use_sellcar_color(playerid, 6);
	else if(playertextid == autosalon_info_td_p[13][playerid])
		return use_sellcar_color(playerid, 7);
	else if(playertextid == autosalon_info_td_p[14][playerid])
		return use_sellcar_color(playerid, 8);


	else if(playertextid == factory_job_two_1_p[10][playerid])
		return work_factory_click_mith(playerid, 4);
	else if(playertextid == factory_job_two_1_p[11][playerid])
		return work_factory_click_mith(playerid, 2);
	else if(playertextid == factory_job_two_1_p[12][playerid])
		return work_factory_click_mith(playerid, 6);
	else if(playertextid == factory_job_two_1_p[13][playerid])
		return work_factory_click_mith(playerid, 1);
	else if(playertextid == factory_job_two_1_p[14][playerid])
		return work_factory_click_mith(playerid, 3);
	else if(playertextid == factory_job_two_1_p[15][playerid])
		return work_factory_click_mith(playerid, 5);
	else if(playertextid == factory_job_two_1_p[16][playerid])
		return work_factory_click_mith(playerid, 7);


	else if(playertextid == factory_job_two_2_p[10][playerid])
		return work_factory_click_mith(playerid, 4);
	else if(playertextid == factory_job_two_2_p[11][playerid])
		return work_factory_click_mith(playerid, 2);
	else if(playertextid == factory_job_two_2_p[12][playerid])
		return work_factory_click_mith(playerid, 6);
	else if(playertextid == factory_job_two_2_p[13][playerid])
		return work_factory_click_mith(playerid, 1);
	else if(playertextid == factory_job_two_2_p[14][playerid])
		return work_factory_click_mith(playerid, 3);
	else if(playertextid == factory_job_two_2_p[15][playerid])
		return work_factory_click_mith(playerid, 5);
	else if(playertextid == factory_job_two_2_p[16][playerid])
		return work_factory_click_mith(playerid, 7);

	else if(playertextid == factory_job_two_3_p[10][playerid])
		return work_factory_click_mith(playerid, 4);
	else if(playertextid == factory_job_two_3_p[11][playerid])
		return work_factory_click_mith(playerid, 2);
	else if(playertextid == factory_job_two_3_p[12][playerid])
		return work_factory_click_mith(playerid, 6);
	else if(playertextid == factory_job_two_3_p[13][playerid])
		return work_factory_click_mith(playerid, 1);
	else if(playertextid == factory_job_two_3_p[14][playerid])
		return work_factory_click_mith(playerid, 3);
	else if(playertextid == factory_job_two_3_p[15][playerid])
		return work_factory_click_mith(playerid, 5);
	else if(playertextid == factory_job_two_3_p[16][playerid])
		return work_factory_click_mith(playerid, 7);

	else if(playertextid == factory_job_two_4_p[10][playerid])
		return work_factory_click_mith(playerid, 4);
	else if(playertextid == factory_job_two_4_p[11][playerid])
		return work_factory_click_mith(playerid, 2);
	else if(playertextid == factory_job_two_4_p[12][playerid])
		return work_factory_click_mith(playerid, 6);
	else if(playertextid == factory_job_two_4_p[13][playerid])
		return work_factory_click_mith(playerid, 1);
	else if(playertextid == factory_job_two_4_p[14][playerid])
		return work_factory_click_mith(playerid, 3);
	else if(playertextid == factory_job_two_4_p[15][playerid])
		return work_factory_click_mith(playerid, 5);
	else if(playertextid == factory_job_two_4_p[16][playerid])
		return work_factory_click_mith(playerid, 7);

	else if(playertextid == factory_job_two_5_p[9][playerid])
		return work_factory_click_mith(playerid, 4);
	else if(playertextid == factory_job_two_5_p[10][playerid])
		return work_factory_click_mith(playerid, 2);
	else if(playertextid == factory_job_two_5_p[11][playerid])
		return work_factory_click_mith(playerid, 6);
	else if(playertextid == factory_job_two_5_p[12][playerid])
		return work_factory_click_mith(playerid, 1);
	else if(playertextid == factory_job_two_5_p[13][playerid])
		return work_factory_click_mith(playerid, 3);
	else if(playertextid == factory_job_two_5_p[14][playerid])
		return work_factory_click_mith(playerid, 5);


	else if(playertextid == factory_job_1_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_1_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_1_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_1_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_1_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_1_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);


	else if(playertextid == factory_job_2_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_2_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_2_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_2_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_2_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_2_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_3_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_3_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_3_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_3_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_3_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_3_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_4_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_4_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_4_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_4_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_4_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_4_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_5_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_5_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_5_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_5_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_5_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_5_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_6_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_6_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_6_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_6_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_6_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_6_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_7_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_7_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_7_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_7_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_7_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_7_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_8_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_8_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_8_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_8_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_8_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_8_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);

	else if(playertextid == factory_job_9_p[9][playerid])
		return work_factory_click_furniture(playerid, 4);
	else if(playertextid == factory_job_9_p[10][playerid])
		return work_factory_click_furniture(playerid, 2);
	else if(playertextid == factory_job_9_p[11][playerid])
		return work_factory_click_furniture(playerid, 6);
	else if(playertextid == factory_job_9_p[12][playerid])
		return work_factory_click_furniture(playerid, 1);
	else if(playertextid == factory_job_9_p[13][playerid])
		return work_factory_click_furniture(playerid, 3);
	else if(playertextid == factory_job_9_p[14][playerid])
		return work_factory_click_furniture(playerid, 5);


	else if(playertextid == voice_setting_player[0][playerid])
		return update_voice_setting_active(playerid);

	else if(playertextid == voice_setting_player[1][playerid])
	{
		pData[playerid][pVoiceVolume] = 25;
		UpdatePlayerData(playerid, "pVoiceVolume", pData[playerid][pVoiceVolume]);
		VoiceChat_SetVolume(playerid, 50);

		return show_setting_voice_player(playerid);
	}
	else if(playertextid == voice_setting_player[2][playerid])
	{
		pData[playerid][pVoiceVolume] = 50;
		UpdatePlayerData(playerid, "pVoiceVolume", pData[playerid][pVoiceVolume]);
		VoiceChat_SetVolume(playerid, 100);

		return show_setting_voice_player(playerid);
	}
	else if(playertextid == voice_setting_player[3][playerid])
	{
		pData[playerid][pVoiceVolume] = 75;
		UpdatePlayerData(playerid, "pVoiceVolume", pData[playerid][pVoiceVolume]);
		VoiceChat_SetVolume(playerid, 150);

		return show_setting_voice_player(playerid);
	}
	else if(playertextid == voice_setting_player[4][playerid])
	{
		pData[playerid][pVoiceVolume] = 100;
		UpdatePlayerData(playerid, "pVoiceVolume", pData[playerid][pVoiceVolume]);
		VoiceChat_SetVolume(playerid, 200);

		return show_setting_voice_player(playerid);
	}

	if(mine_random_material_active[playerid] != -1)
	{
		for(new i = 3; i < 18; i++)
		{
			if(playertextid == miner_job_1_p[i][playerid])
			{
				if(i == mine_random_material_active[playerid])
				{
					SetPVarIntNew(playerid, "mining_count_diamond", GetPVarIntNew(playerid, "mining_count_diamond")+1);

					return reload_mine_panel_mining(playerid);
				}

				return realod_mine_panel_mining_faily(playerid);
			}
		}
	}


	return 1;
}



public OnPlayerTakeDamage(playerid, issuerid, Float:amount, weaponid, bodypart)
{
	if(issuerid == INVALID_PLAYER_ID)
		return true;

	if(weaponid == 38 && pData[issuerid][pAdmin] < 7 || weaponid == 27 && pData[issuerid][pAdmin] < 7 || weaponid == 4 && pData[issuerid][pAdmin] < 7
	|| weaponid == 18 && pData[issuerid][pAdmin] < 7 || weaponid == 27 && pData[issuerid][pAdmin] < 7 || weaponid == 34 && pData[issuerid][pAdmin] < 7
	|| weaponid == 35 && pData[issuerid][pAdmin] < 7 || weaponid == 36 && pData[issuerid][pAdmin] < 7 || weaponid == 36 && pData[issuerid][pAdmin] < 7 ||  weaponid == 39 && pData[issuerid][pAdmin] < 7
	|| weaponid == 40 && pData[issuerid][pAdmin] < 7 || weaponid == 45 && pData[issuerid][pAdmin] < 7)
	{
		return anticheat_kick_player(issuerid);
	}

	if(GetPVarIntNew(playerid, "hud_hide") != 1)
	{
		show_hud_element(playerid);
	}


	return 1;
}

public OnPlayerGiveDamageActor(playerid, damaged_actorid, Float:amount, weaponid, bodypart)
{
	return 1;
}
public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)
{
	//
	SetPlayerTeam(playerid, 1);


	if(weaponid == 0 && GetPlayerState(playerid) != PLAYER_STATE_ONFOOT ) return 0;
	if(weaponid == 20090) return 0;
	if(amount > 1000000) return 0;

	if(weaponid == 38 && pData[playerid][pAdmin] < 7 || weaponid == 27 && pData[playerid][pAdmin] < 7 || weaponid == 4 && pData[playerid][pAdmin] < 7
	|| weaponid == 18 && pData[playerid][pAdmin] < 7 || weaponid == 27 && pData[playerid][pAdmin] < 7 || weaponid == 34 && pData[playerid][pAdmin] < 7
	|| weaponid == 35 && pData[playerid][pAdmin] < 7 || weaponid == 36 && pData[playerid][pAdmin] < 7 || weaponid == 39 && pData[playerid][pAdmin] < 7 || weaponid == 37 && pData[playerid][pAdmin] < 7
	|| weaponid == 40 && pData[playerid][pAdmin] < 44 || weaponid == 45)
	{
		return anticheat_kick_player(playerid);
	}

	if(playerid != INVALID_PLAYER_ID)
	{
		if(GetPVarIntNew(damagedid, "hud_hide") != 1)
		{
			show_hud_element(damagedid);
		}
	}
	if(weaponid == 3)
	{
		if(pData[playerid][pFraction] == 9 || pData[playerid][pFraction] == 12 || (pData[playerid][pFraction] == 11 && pData[playerid][pRank] >= 2))
		{
			if(IsPlayerInAnyVehicle(playerid)) return 1;
			new id = damagedid;
			if(GetPlayerDistanceToPlayer(playerid,damagedid) < 3 && id >= 0)
			{
 			 	if(pData[id][pFraction] == 11 && pData[playerid][pFraction] == 11) return 1;
				if(IsPlayerInAnyVehicle(id)) return 1;
				if(pTemp[id][pTazer] || pTemp[id][pCuffee] == id) return 1;
				if(GetPlayerTargetPlayer(id) == playerid && GetPlayerWeapon(id) > 21) return 1;
 				new mes[128];
				if(pData[playerid][pSex] == 1) format(mes,sizeof(mes),"оглушил %s",pData[id][pNickname]);
				else format(mes,sizeof(mes),"оглушил(а) %s",pData[id][pNickname]);
				MeAction(playerid,mes);
				TogglePlayerControllable(id, 0);
				GoAnim(id,"CRACK","Crckidle2",4.1,1,0,0,0,0,0);
 				pTemp[id][pTazer] = 15;
				return 1;
			}
		}
	}
	if(weaponid == 23 && pData[playerid][pFraction] == 9 || pData[playerid][pFraction] == 12)
	{
		if(pTemp[playerid][pTazerGun])
		{
			new id = damagedid;
 			if(IsPlayerInAnyVehicle(id)) return SCM(playerid, CGRAY, "Человек в машине!");
			if(pTemp[id][pTazer] || pTemp[id][pCuffee] == id) return SCM(playerid,CGRAY,"Игрок уже оглушен / в наручниках");
			new mes[128];
			if(pData[playerid][pSex] == 1) format(mes,sizeof(mes),"ударил электрошокером %s",pData[id][pNickname]);
			else format(mes,sizeof(mes),"Ударила электрошокером %s",pData[id][pNickname]);
			MeAction(playerid,mes);
			TogglePlayerControllable(id, 0);
			SetPlayerSpecialAction(id,SPECIAL_ACTION_HANDSUP);
			pTemp[id][pTazer] = 15;
		}
	}

	for(new i; i < sizeof(gAreas[arGreenZone]); i ++)
	{
		if(IsPlayerInDynamicArea(playerid,gAreas[arGreenZone][i]))
		{
			if((!weaponid && i == 27) || i == 29 && pData[playerid][pFraction] == 11 || pData[playerid][pAdmin] > 1 || GetPVarIntNew(playerid, "player_in_rent_zone") ||  (GetPlayerWeapon(playerid) < 24 && IsACop(playerid)) || (i == 31 && pTemp[playerid][hotelEnter] == 0)) {}
			else {

			pTemp[playerid][pDM] += 1;
			if(pTemp[playerid][pDM] >= 5)
			{
				SCM(playerid,CBADINFO,"Вы были кикнуты за ДМ");
				NewKick(playerid);
			}
			else
			{
				new mes[64];
				format(mes,sizeof(mes),""cWH"ДМ в зеленых зонах запрещен (%d/5).",pTemp[playerid][pDM]);
				SPD(playerid,dMes,0,""cBLUE"Предупреждение",mes,"Далее","");
				return 1;
			}
			}
		}
	}

	if(damagedid != INVALID_PLAYER_ID && weaponid != 3 && weaponid != 23)
	{
		new Float:health, Float:armour;
		GetPlayerHealth(damagedid, health);
		GetPlayerArmour(damagedid, armour);

		if(armour <= 0.0)
		{
			health -= amount;
			if(health < 0.0) health = 0.0;

			SetPlayerHealth(damagedid, health);

			if(GetPVarIntNew(damagedid, "hud_hide") != 1)
			{
				show_hud_element(damagedid);
			}
			return true;

		}
		else
		{
			armour -= amount;

			if(armour < 0.0)
			{
				armour = 0.0;

			}

			SetPlayerArmour(damagedid, armour);

			if(GetPVarIntNew(damagedid, "hud_hide") != 1)
			{
				show_hud_element(damagedid);
			}
			return true;

		}
	}

	return 1;
}

public AnimationDelay(playerid,id)
{
	switch(id)
	{
		case 1: ApplyAnimation(playerid,"CARRY","crry_prtial",1.0,1,1,1,1,1,1);
	}
}


public AbleToSelectCar(playerid)
{
	if(pTemp[playerid][pSellCarSelectTrue]) {
	pTemp[playerid][pSellCarSelect] = true;   }
}




callback:: SetPlayerToFacePlayer(playerid, targetid)
{
	new
		Float:sspX,
		Float:sspY,
		Float:sspZ,
		Float:ssX,
		Float:ssY,
		Float:ssZ,
		Float:ssang;
	GetPlayerPos(targetid, ssX, ssY, ssZ);
	GetPlayerPos(playerid, sspX, sspY, sspZ);
	if(ssY > sspY) ssang = (-acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 90.0);
	else if(ssY < sspY && ssX < sspX) ssang = (acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 450.0);
	else if(ssY < sspY) ssang = (acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 90.0);
	if(ssX > sspX) ssang = (floatabs(floatabs(ssang) + 180.0));
	else ssang = (floatabs(ssang) - 180.0);
	SetPlayerFacingAngle(playerid, ssang);
	return 0;
}

callback:: SetPlayerToFacePos(playerid, Float: X, Float:Y, Float:Z)
{
	new
		Float:sspX,
		Float:sspY,
		Float:sspZ,
		Float:ssX = X,
		Float:ssY = Y,
		Float:ssang;
	GetPlayerPos(playerid, sspX, sspY, sspZ);
	if(ssY > sspY) ssang = (-acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 90.0);
	else if(ssY < sspY && ssX < sspX) ssang = (acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 450.0);
	else if(ssY < sspY) ssang = (acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 90.0);
	if(ssX > sspX) ssang = (floatabs(floatabs(ssang) + 180.0));
	else ssang = (floatabs(ssang) - 180.0);
	SetPlayerFacingAngle(playerid, ssang);
	return 0;
}


callback:: SetActorToFacePos(playerid, Float: X, Float:Y, Float:Z)
{
	new
		Float:sspX,
		Float:sspY,
		Float:sspZ,
		Float:ssX = X,
		Float:ssY = Y,
		Float:ssang;
	GetActorPos(playerid, sspX, sspY, sspZ);
	if(ssY > sspY) ssang = (-acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 90.0);
	else if(ssY < sspY && ssX < sspX) ssang = (acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 450.0);
	else if(ssY < sspY) ssang = (acos((ssX - sspX) / floatsqroot((ssX - sspX)*(ssX - sspX) + (ssY - sspY)*(ssY - sspY))) - 90.0);
	if(ssX > sspX) ssang = (floatabs(floatabs(ssang) + 180.0));
	else ssang = (floatabs(ssang) - 180.0);
	SetActorFacingAngle(playerid, ssang);
	return 0;
}


callback:: MainTimer3()
{
	new h, m, s; gettime(h, m, s);
 	foreach(new i: logged_players)
 	{
		if(!PlayerConnect[i]) continue;


		if(pTemp[i][pHolder] != INVALID_PLAYER_ID && pTemp[i][pHolder] > 0 && (pTemp[i][pCuffee] == i || pTemp[i][pTied]>0) && pTemp[i][pInCasino] < 1 && pData[ pTemp[i][pHolder]-1 ][pFraction] != 11)	{
			new Holerid = pTemp[i][pHolder]-1;
 			if(Holerid < 0 || Holerid > MAX_PLAYERS || (!IsACop(Holerid) && !IsAMafia(Holerid)) || !pData[Holerid][pMysqlID] || pRealState[i] != 1) {
				 if(pRealState[i] == 2 || pRealState[i] == 3) {}
				 else	{
				 ClearAnimations(i, 1);
			 	 ApplyAnimation(i,"ped","IDLE_chat",4.1,1,0,0,0,1,1);
				 if(ControllableTimer[i] != -1) 	{
				 KillTimer(ControllableTimer[i]);
				 ControllableTimer[i] = - 1;		}
				 TogglePlayerControllable(i, false);
				 ControllableTimer[i] = SetTimerEx("ToggleControllable", 1000, false, "ii", i, 1);
				 }
				 pTemp[i][pHolder] = INVALID_PLAYER_ID;

		 	}
			else {
					if(GetPlayerDistanceToPlayer(i,Holerid) > 15.0 || GetPlayerVirtualWorld(i) != GetPlayerVirtualWorld(Holerid)) {
						if(setpos2[Holerid] > GetTickCount()) { }
						else {
						pTemp[i][pHolder] = INVALID_PLAYER_ID;
						if(IsAMafia(Holerid)) SCM(Holerid,CINFO,"Вы отошли слишком далеко от игрока, ведение прервано");
						else SCM(Holerid,CINFO,"Вы отошли слишком далеко от преступника, ведение прервано");
						ClearAnimations(i, 1);
					 	ApplyAnimation(i,"ped","IDLE_chat",4.1,1,0,0,0,1,1);
					 	SetPlayerVelocity(i, 0.0, 0.0, 0.0);
						GetPlayerPos(i,zPos[i][0],zPos[i][1],zPos[i][2]);
						SetPlayerPosDebug(i, zPos[i][0], zPos[i][1], zPos[i][2]);
						if(ControllableTimer[i] != -1) 	{
						KillTimer(ControllableTimer[i]);
						ControllableTimer[i] = - 1;		}
						TogglePlayerControllable(i, false);
						ControllableTimer[i] = SetTimerEx("ToggleControllable", 1000, false, "ii", i, 1);
						}
					}
					else {
						new Float:pvcshld[3];
					 	GetPlayerVelocity(Holerid, pvcshld[0], pvcshld[1], pvcshld[2]);
						if (GetPlayerDistanceToPlayer(i,Holerid) > 2.0 && (pvcshld[0] != 0 || pvcshld[1] != 0) || GetPlayerDistanceToPlayer(i,Holerid) > 4.0) {
						TogglePlayerControllable(i, true);
						SetPlayerToFacePlayer(i, Holerid);
						ClearAnimations(i, 1);
						new Float:HSpeed = floatsqroot(floatadd(floatpower(pvcshld[0], 2.0), floatpower(pvcshld[0], 2.0)));
						if(HSpeed > 0.11 && HSpeed < 0.2) ApplyAnimation(i,"FAT","FatSprint",4.1,1,1,1,0,3000,1);
						else if(HSpeed > 0.05) ApplyAnimation(i,"FAT","FatSprint",4.1,1,1,1,0,3000,1);
						else ApplyAnimation(i,"FAT","FatWalk",4.1,1,1,1,0,3000,1);
						new Float:pvcshld2[3];
					 	GetPlayerVelocity(i, pvcshld2[0], pvcshld2[1], pvcshld2[2]);
					 	SetPlayerVelocity(i, pvcshld[0], pvcshld[1], pvcshld2[2]);
						}
						else    {
//							if((pvcshld[0] > 0.01 || pvcshld[0] > 0.02)
							ClearAnimations(i, 1);
						 	ApplyAnimation(i,"ped","IDLE_chat",4.1,1,0,0,0,1,1);
						 	SetPlayerVelocity(i, 0.0, 0.0, 0.0);
							GetPlayerPos(i,zPos[i][0],zPos[i][1],zPos[i][2]);
							SetPlayerPosDebug(i, zPos[i][0], zPos[i][1], zPos[i][2]);
							TogglePlayerControllable(i, false);
						}
					}
				}
		}

		if(pTemp[i][pHolder] != INVALID_PLAYER_ID && pTemp[i][pHolder] > 0 && pData[ pTemp[i][pHolder]-1 ][pFraction] == 11 && pData[ pTemp[i][pHolder]-1 ][pRank] >= 2 && pData[ pTemp[i][pHolder]-1 ][pRank] <= 3 && pTemp[i][pInCasino] < 1)	{
			new Holerid = pTemp[i][pHolder]-1;
			if(Holerid < 0 || Holerid > MAX_PLAYERS || !pData[Holerid][pMysqlID] || pRealState[i] != 1) {
				 if(pRealState[i] == 2 || pRealState[i] == 3) {}
				 else	{
				 ClearAnimations(i, 1);
			 	 ApplyAnimation(i,"ped","IDLE_chat",8.1,1,0,0,0,1,1);
				 if(ControllableTimer[i] != -1) 	{
				 KillTimer(ControllableTimer[i]);
				 ControllableTimer[i] = - 1;		}
				 TogglePlayerControllable(i, false);
				 SetPlayerSpecialAction(i,SPECIAL_ACTION_NONE);
				 ControllableTimer[i] = SetTimerEx("ToggleControllable", 1000, false, "ii", i, 1);
				 }
				 pTemp[i][pHolder] = INVALID_PLAYER_ID;

		 	}
			else {
					if(GetPlayerDistanceToPlayer(i,Holerid) > 15.0 || GetPlayerVirtualWorld(i) != GetPlayerVirtualWorld(Holerid)) {
						if(setpos2[Holerid] > GetTickCount()) { }
						else {
							pTemp[i][pHolder] = INVALID_PLAYER_ID;
							SCM(Holerid,CINFO,"Вы отошли слишком далеко от нарушителя, ведение прервано");
							ClearAnimations(i, 1);
							SetPlayerSpecialAction(i,SPECIAL_ACTION_NONE);

						 	ApplyAnimation(i,"ped","IDLE_chat",4.1,1,0,0,0,1,1);
						 	SetPlayerVelocity(i, 0.0, 0.0, 0.0);
							GetPlayerPos(i,zPos[i][0],zPos[i][1],zPos[i][2]);
							SetPlayerPosDebug(i, zPos[i][0], zPos[i][1], zPos[i][2]);
							if(ControllableTimer[i] != -1) 	{
							KillTimer(ControllableTimer[i]);
							ControllableTimer[i] = - 1;		}
							TogglePlayerControllable(i, false);
							ControllableTimer[i] = SetTimerEx("ToggleControllable", 1000, false, "ii", i, 1);
						}
					}
					else {
						new Float:pvcshld[3];
					 	GetPlayerVelocity(Holerid, pvcshld[0], pvcshld[1], pvcshld[2]);
						if (GetPlayerDistanceToPlayer(i,Holerid) > 1.0 && (pvcshld[0] != 0 || pvcshld[1] != 0) || GetPlayerDistanceToPlayer(i,Holerid) > 2.0) {
						TogglePlayerControllable(i, true);
						SetPlayerToFacePlayer(i, Holerid);
						ClearAnimations(i, 1);
						ApplyAnimation(i,"FAT","FatWalk",8.1,1,1,1,0,3000,1);
						new Float:pvcshld2[3];
					 	GetPlayerVelocity(i, pvcshld2[0], pvcshld2[1], pvcshld2[2]);
					 	SetPlayerVelocity(i, pvcshld[0], pvcshld[1], pvcshld2[2]);
						}
						else    {
 							ClearAnimations(i, 1);
						 	ApplyAnimation(i,"ped","IDLE_chat",4.1,1,0,0,0,1,1);
						 	SetPlayerVelocity(i, 0.0, 0.0, 0.0);
							GetPlayerPos(i,zPos[i][0],zPos[i][1],zPos[i][2]);
							SetPlayerPosDebug(i, zPos[i][0], zPos[i][1], zPos[i][2]);
							TogglePlayerControllable(i, false);
						}
					}
				}
		}


		if(pTemp[i][pLogined] == false && pTemp[i][pInTime] > 1)	{ pTemp[i][pInTime] --;	}
		if(pTemp[i][pLogined] == false && pTemp[i][pInTime] == 1 && pNPC[i] == 0)				{
		SCM(i, CGREEN , "Время на авторизацию вышло. Вы были отсоединены от сервера.");
		pTemp[i][pInTime] = 0;
		NewKick(i);																}



  		if(pTemp[i][pAbletoGun]) pTemp[i][pAbletoGun] --;
		if(pTemp[i][pAdvertTime] > 0) pTemp[i][pAdvertTime]--;
 		pTemp[i][pShotTime] = 0;
		if(pTemp[i][pShotTimeEx] > 0) pTemp[i][pShotTimeEx] --;
		if(pTemp[i][AntiCrack]) pTemp[i][AntiCrack]--;

		pTemp[i][pAFK]++;

	}

	return 1;
}

callback:: timer_every_20_sec()
{
	new hour, second, minute;
	gettime(hour, minute, second);

	foreach(Vehicles, i)
	{
		new driver_id = vehicle[i][vehicle_driver];


		if(vehicle[i][cEngine] && get_vehicle_type(i) != TYPE_BYCICLE)
		{

			if(GetVehicleModel(i) == TYPE_TESLA_1)
			{
				vehicle[i][cEnergy] -= 0.8;
				vehicle[i][cBatteryEnergy] -= 0.01;

				vehicle_params_textdraw_update(driver_id, vehicle[i][cEnergy]);

				if(vehicle[i][cBatteryEnergy] < 0.00)
				{
					vehicle[i][cBatteryEnergy] = 0.00;
					SendInf(driver_id, "У вас полностью износилась батарея! Вам требуется заменить её на СТО!");
					vehicle_engine_status(i, false);
				}

				if(vehicle[i][cEnergy] < 0.0)
				{
					vehicle[i][cEnergy] = 0.0;

					SendInf(driver_id, "В Вашем транспорте полностью разрядилась батарея!");
					vehicle_engine_status(i, false);
				}

			}
			else
			{
				vehicle[i][cFuel] -= 0.7;
				vehicle[i][consumables_oil] -= 0.1;

				vehicle_params_textdraw_update(driver_id, vehicle[i][cFuel]);

				if(vehicle[i][cFuel] < 0.0)
				{
					vehicle[i][cFuel] = 0.0;

					SendInf(driver_id, "В Вашем транспорте кончилось топливо");
					vehicle_engine_status(i, false);
				}
				if(vehicle[i][consumables_oil] < 0.0)
				{
					vehicle[i][consumables_oil] = 0.0;

					SendInf(driver_id, "В Вашем транспорте кончилось автомобильное масло");
					vehicle_engine_status(i, false);
				}
			}
		}
	}

	return true;
}







callback:: gamemode_info_timer()
{
	new
		restart_time[30];

	if(params_gamemode_change == 2)
	{
		SetGameModeText(""MODE_VERSION"");
		params_gamemode_change = 1;
	}
	else if(params_gamemode_change == 1)
	{
		format(restart_time, 20, "GMX: %02i:%02i:%02i", restart_time_hour, restart_time_minute, restart_time_second);
		SetGameModeText(restart_time);
		params_gamemode_change = 2;
	}

	SetTimer("gamemode_info_timer", 2500, false);
	return true;
}


callback:: hungry_timer_all()
{
	new zztime = GetTickCount();

	foreach(new i: logged_players)
	{
		if(pData[i][pAdmin] == 0)
		{
			if(pData[i][hungry] > 0)
			{
				pData[i][hungry]--;
				show_hud_hungry(i);

				if(pData[i][hungry] == 50)
				{
					show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_128_RIGHT, "brilliantother:notify_player_28", 4000);
					SendInf(i, "Вы начинаете голодать, посетите ближайшую закусочную!");
				}
				if(pData[i][hungry] == 25)
				{
					show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_28", 4000);
					SendInf(i, "Вы слишком сильно проголодались, посетите ближайшую закусочную!");
				}
				if(pData[i][hungry] == 10)
				{
					show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_29", 4000);
					SendInf(i, "Вы слишком сильно голодны, посетите ближайшую закусочную!");
				}
			}
			else if(pData[i][hungry] == 0)
			{
				show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_29", 4000);
				SendInf(i, "Вы слишком сильно голодны, посетите ближайшую закусочную!");

				new
					Float:health;
				GetPlayerHealth(i, health);
				SetPlayerHealth(i, health-15.0);
			}
		}
	}
	hungry_time = GetTickCount()-zztime;

	if(hungry_time > TickMax)
	{
		new MSG[144];
		format(MSG,sizeof(MSG),"[hungry_timer_all] Задержка таймер составил -  %d мс!", hungry_time);
		AdminChatEx(0x007fffff,MSG);

		logs_status_server_info(MSG);
	}
	return true;
}

callback:: player_timer(playerid)
{
	if(!IsPlayerConnected(playerid)) KillTimer(pData[playerid][main_timer]), pData[playerid][main_timer] = -1;


   	return true;

}

callback:: PlayerTimerMinute()
{
	new zztime = GetTickCount();

	foreach(new i: logged_players)
	{

		if(!PlayerConnect[i]) continue;

		update_time_kd_repot(i);

	}

	PlayerTimerMinute_time = GetTickCount()-zztime;

	if(PlayerTimerMinute_time > TickMax)
	{
		new MSG[144];
		format(MSG,sizeof(MSG),"[PlayerTimerMinute] Задержка таймер составил -  %d мс!", PlayerTimerMinute_time);
		AdminChatEx(0x007fffff,MSG);

		logs_status_server_info(MSG);

	}

	return true;
}

callback:: PlayerTimer()
{

	new zztime = GetTickCount();


	foreach(new i: logged_players)
	{

		if(!PlayerConnect[i]) continue;

		if(pData[i][hour_played] < 3600)
		{
			pData[i][hour_played]++;
		}

		if(GetPVarIntNew(i, "active_katok_player") == 1 && GetPVarIntNew(i, "rent_katok_player") == 1)
		{
			ApplyAnimation(i, "SKATE","skate_sprint",4.1,1,1,1,1,1,1);

		}

		if(fire_id >= 0)
		{
			new
				v = GetPlayerVehicleID(i);

			if(IsPlayerInRangeOfPoint(i, 25.0, fire_info[fire_id][fire_x], fire_info[fire_id][fire_y], fire_info[fire_id][fire_z]))
			{
				if(pData[i][pJob] == SKILL_FIRE)
				{
					new
						keys, ud;

					GetPlayerKeys(i, keys, ud, ud);

					if(keys == KEY_FIRE || keys == 4 || keys == KEY_ACTION)
					{
						if(fire_progress >= 100)
						{
							end_fire();

						}
						else
						{
							if(GetPlayerWeapon(i) == 42 && GetPlayerState(i) == PLAYER_STATE_ONFOOT)
							{
								if(IsPlayerInRangeOfPoint(i, 5.0, fire_info[fire_id][fire_x], fire_info[fire_id][fire_y], fire_info[fire_id][fire_z]))
								{
									fire_progress += get_job_level(i, SKILL_FIRE);
									pTemp[i][fire_count] += get_job_level(i, SKILL_FIRE);

									fire_panel_p(i, TEXTDRAW_UPDATE);

									format(String64, sizeof(String64), "~y~FIRE DESTROY...");
									GameTextForPlayer(i, String64, 3000, 1);
								}
							}
							else if(GetPlayerVehicleModel(i) == 407 && GetPlayerState(i) == PLAYER_STATE_DRIVER)
							{
								if(IsPlayerInRangeOfPoint(i, 15.0, fire_info[fire_id][fire_x], fire_info[fire_id][fire_y], fire_info[fire_id][fire_z]))
								{
									if(vehicle[v][cWater] >= 10)
									{
										vehicle[v][cWater] -= 10;

										format(String64, sizeof(String64), "~y~FIRE DESTROY...");
										GameTextForPlayer(i, String64, 3000, 1);



										format(String144,sizeof(String144),"\
										"cLRED"Воды в цистернах:\n\
										"cWH"%d/%d литров", vehicle[v][cWater], MAX_FIRE_WATER_FILLED);
										UpdateDynamic3DTextLabelText(vehicle[v][cMechText], -1, String144);

										fire_progress += get_job_level(i, SKILL_FIRE) * 2;
										pTemp[i][fire_count] += get_job_level(i, SKILL_FIRE) * 2;

										fire_panel_p(i, TEXTDRAW_UPDATE);
									}
								}
							}
						}
					}
				}
				else
				{
					if(IsPlayerInRangeOfPoint(i, 5.0, fire_info[fire_id][fire_x], fire_info[fire_id][fire_y], fire_info[fire_id][fire_z]))
					{
						new Float:ac_heal;
						GetPlayerHealth(i, ac_heal);
						SetPlayerHealth(i, ac_heal - 4.0);
					}
				}
			}
		}


		if(pData[i][promocode_admin] != -1)
		{
			pData[i][promocode_admin_time_player]++;

			if(pData[i][promocode_admin_time_player] >= 60*(60*pData[i][promocode_admin_time]))
			{
				give_promocode_prize_admin(i, pData[i][promocode_admin]);
				pData[i][promocode_admin] = -1;
			}
		}

		if(!pData[i][ActionStatusMoney])
		{
			pData[i][ActionTimeMoney]++;
			if(pData[i][ActionTimeMoney] >= 36000)
			{
				pData[i][ActionTimeMoney] = 0;
				pData[i][ActionStatusMoney] = 1;
				give_money(i, 100000, "Акцию отыграй 10 часов");
				UpdatePlayerData(i, "ActionTimeMoney", pData[i][ActionTimeMoney]);
				UpdatePlayerData(i, "ActionStatusMoney", pData[i][ActionStatusMoney]);

			}
		}

		if(!pData[i][pPlayrCarStatus])
		{
			if(pData[i][pLevel] <= 5)
			{
				pData[i][pPlayCar] ++;
				if(pData[i][pPlayCar] >= 72000)
				{
					format(String144, sizeof(String144), "[Акция] "cWH"Вы отыграли 20 часов и получили в подарок автомобиль! Используйте: /cars");
					SCM(i, COLOR_BLUE, String144);

					give_bonus_vehicle_player(i);

					pData[i][pPlayrCarStatus] = 1;
					UpdatePlayerData(i, "pPlayrCarStatus", pData[i][pPlayrCarStatus]);
					UpdatePlayerData(i, "pPlayCar", pData[i][pPlayCar]);

				}
			}
		}

		new h;
		gettime(h);

		if(h >= 15)
		{
			if(!pData[i][pPlayOnlineDonateStatus])
			{
				pData[i][pPlayOnlineDonate] ++;
				if(pData[i][pPlayOnlineDonate] >= 18000)
				{
					format(String144, sizeof(String144), "[Акция] "cWH"Вы отыграли 5 часов в промежуток с 15:00 до 00:00 и получили "cBLUE"%i "cWH"донат рублей", DONATE_BONUS_5_HOUR_PLAY);
					SCM(i, COLOR_BLUE, String144);
					pData[i][pDonate] += DONATE_BONUS_5_HOUR_PLAY;
					UpdatePlayerData(i, "donate", pData[i][pDonate]);

					pData[i][pPlayOnlineDonateStatus] = 1;
					UpdatePlayerData(i, "pPlayOnlineDonateStatus", pData[i][pPlayOnlineDonateStatus]);
					UpdatePlayerData(i, "pPlayOnlineDonate", pData[i][pPlayOnlineDonate]);

				}
			}
		}

		if(timer_key_state_change[i])
		{
			timer_key_state_change[i]--;
		}

		if(pTemp[i][pLastPay] > 0)
		{
			pTemp[i][pLastPay] --;
		}
		if(pData[i][pGaOnTime] > 0)
		{
			pData[i][pGaOnTime] --;
		}
		if(pTemp[i][pAFK] >= 5 && pNPC[i] == 0)
		{
			format(String256,sizeof(String256),"На паузе %s",time_to_string(pTemp[i][pAFK]));
			SetPlayerChatBubble(i,String256,CWHITE,10.0,1600);
			pTemp[i][pIsAFK] = true;
		}

		if(pTemp[i][offer_time])
		{
			pTemp[i][offer_time]--;
			if(!pTemp[i][offer_time]) offer_cancel(i);
		}

		/*if(taxi_client_timer[i])
		{
			taxi_client_timer[i]--;
			if(!taxi_client_timer[i]) taxi_cancel_call(i);
		}*/

		update_player_online(i);

		if(CountFloodForPlayer[i] > 0) CountFloodForPlayer[i] = 0;


		if(pData[i][pAdmin] < 3 && (pTemp[i][pAFK] > 1800 || pTemp[i][pDarkAFK] > 900))
		{
			if(pNPC[i] != 0 ) {}
			else
			{

				SCM(i,CGRAY,"Вы были кикнуты за простой в АФК");
				NewKick(i);
			}
		}
		if(pTemp[i][pAnimationTime] > 0)
		{
			pTemp[i][pAnimationTime] --;
			if(pTemp[i][pAnimationTime] == 0) ApplyAnimation(i ,"CARRY","crry_prtial",4.0,0,0,0,0,0);
		}


		if(GetPlayerState(i) == PLAYER_STATE_DRIVER)
		{
			new
				vehicleid = GetPlayerVehicleID(i);

			new
				Float:car_health;
			GetVehicleHealth(vehicleid, car_health);


			if(car_health < 150.0)
			{
				vehicle_engine_status(vehicleid, false);
				repair_vehicle_damage_status(vehicleid);
			}
		}

		if(!pTemp[i][pIsAFK])
		{
			new Float:zHealth; GetPlayerHealth(i, zHealth);
			/*--------------------------------------------------------------------*/

			if(IsPlayerInDynamicArea(i, hospital_area_heal))
			{
				if(zHealth < 100.0)
				{
					SetPlayerHealth(i, zHealth+1);
					GameTextForPlayer(i, "~n~~n~~n~~n~~n~~n~~g~+1", 1000, 3);

					if(zHealth >= 100.0)
					{
						pTemp[i][pInHospital] = false;
						pData[i][pHospital] = 0;
						UpdatePlayerData(i, "hospital", pData[i][pHospital]);

						show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_128_CENTER, "brilliantother:info_gui_hospital_end", 4000);

						return SendSucc(i, "Вы полностью вылечились и можете покинуть больницу!");

					}
				}
				else
				{
					if(zHealth >= 100.0 && pTemp[i][pInHospital] == true)
					{
						pTemp[i][pInHospital] = false;
						pData[i][pHospital] = 0;
						UpdatePlayerData(i, "hospital", pData[i][pHospital]);

						show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_128_CENTER, "brilliantother:info_gui_hospital_end", 4000);

						return SendSucc(i, "Вы полностью вылечились и можете покинуть больницу!");
					}
				}
			}

			if(pTemp[i][pTazer])
			{
				GoAnim(i,"CRACK","Crckidle2",4.1,1,0,0,0,0,0);
				pTemp[i][pTazer]--;
				if(!pTemp[i][pTazer])
				{
					ClearAnimations(i);
					SetPlayerSpecialAction(i,SPECIAL_ACTION_NONE);
					TogglePlayerControllable(i,1);
				}
			}

			if(pData[i][pAdmin])
			{
				if(spec_ad[i] != INVALID_PLAYER_ID)
				{
					new
						specid = spec_ad[i];

					UpdateSpectateText(i, specid);
				}
			}

			new surf_car_status = GetPlayerSurfingVehicleID(i);

			if(surf_car_status != INVALID_VEHICLE_ID)
			{
				new Float:speed = get_vehicle_speed(surf_car_status);
				new vehicle_model = GetVehicleModel(surf_car_status);
				switch(vehicle_model)
				{
					case 430, 446, 452, 453, 454, 472, 473, 478, 484, 493, 554, 543, 595, 422, 605, 600, 592: {}
					default:
					{
						if(speed > 30)
						{
							new Float:slx, Float:sly, Float:slz;
							GetPlayerPos(i, slx, sly, slz);
							SetPlayerPosDebug(i, slx, sly, slz + 2.5);
							ApplyAnimation(i, !"ped", !"getup", 4.0, 0, 1, 0, 0, 0,0);
						}
					}
				}
			}

			/*--------------------------------------------------------------------*/
			if(ClearAnimationsDelay[i] > 0)
			{
				ClearAnimationsDelay[i] --;
				if(ClearAnimationsDelay[i] == 0) ApplyAnimation(i,"ped","IDLE_chat",4.1,1,0,0,0,1,1);
			}
			if(CLEARRR[i] > 0)
			{
				CLEARRR[i]--;
				if(CLEARRR[i] == 0) {
					ClearAnimations(i);
					ClearAnimationsDelay[i] = 1;
				}
			}
			if(Playernarko[i] > 0)
			{
			Playernarko[i] --;
			new Float:health;
			GetPlayerHealth(i, health);
			if(Playernarko[i] > 80)
			{
			if(health < 250)
			{
			SetPlayerHealth(i, health+ (-1 + random(6)));
			}
			new randsd = random(5);
			if(randsd == 1 || randsd == 4)
			{
				PlayerPlaySound(i,17801,0.0+random(3),0.0+random(3),0.0+random(3));
			}
			else if(randsd == 2)
			{
				PlayerPlaySound(i,40403,0.0+random(1),0.0+random(1),0.0+random(2));
			}

			}
			if(Playernarko[i] < 50 || Playernarko[i] > 80)
			{
			if(Playernarko[i] > 10)
			{
			ApplyAnimation(i,"PED","sprint_civi",4.1,1,1,1,1,1,1);
	 		}
			new randnrj = random(20);
			if(randnrj == 15 || randnrj == 14 || randnrj == 9)
			{
				PlayerPlaySound(i,5206,0.0+random(1),0.0+random(1),0.0+random(2));
			}
			else if(randnrj == 16  || randnrj == 13 || randnrj == 3)
			{
				PlayerPlaySound(i,5204,0.0+random(1),0.0+random(1),0.0+random(2));
			}
			else if(randnrj == 17 || randnrj == 12 || randnrj == 4 )
			{
				PlayerPlaySound(i,5200,0.0+random(1),0.0+random(1),0.0+random(2));
				SetPlayerHealth(i, health+ (-1 + random(4)));
			}


			SetPlayerWeather(i, random(45));
			new randtime = random(10);
			if(randtime < 8)
			{
			SetPlayerTime(i,17,0); //noon
			}
			else        {
			SetPlayerTime(i,random(23),0); //noon
			}

			}
			else
			{
			if(Playernarko[i] > 60 && Playernarko[i] < 79)
			{
			ApplyAnimation(i,"PED","Sprint_Wuzi",4.1,1,1,1,1,1);

			new dierandom = random(30);
			if(dierandom > 25)	{
			SetPlayerFacingAngle(i, 0.0+random(360));
			PlayerPlaySound(i,6200,0.0 ,0.0,0.0+random(1));
			}
			if(dierandom == 12 || dierandom < 5  || (dierandom > 23 &&  dierandom < 27))
			{
				PlayerPlaySound(i,3200,0.0+random(3),0.0,0.0+random(3));
			}
			else if(dierandom == 13 || dierandom == 29 ||  dierandom == 15 ||  dierandom == 16)
			{
				PlayerPlaySound(i,3201,0.0,0.0+random(4),0.0+random(2));
				SetPlayerHealth(i, health+ (-1 + random(4)));
			}
			else if(dierandom == 8)
			{
			PlayerPlaySound(i,32402,0.0+random(1),0.0+random(1),0.0+random(2));
			SetPlayerHealth(i, 0);
			}
			else if(dierandom == 23 || dierandom == 22 || dierandom == 9  || dierandom == 10 )
			{
			PlayerPlaySound(i,1140,0.0+random(1),0.0+random(1),0.0+random(2));
			SetPlayerHealth(i, 50.0+random(100));
			}
	   		}
	  		else {
			ApplyAnimation(i,"PED","Run_Wuzi",4.1,1,1,1,1,1,1); }// WALK_start
			new randweath[] = {5,589,604, 654,609,658,700,777};
	 		SetPlayerWeather(i,randweath[random(sizeof(randweath))]);
			SetPlayerTime(i,17,0);
			}

			}

			if(pData[i][pJail])
			{
				pData[i][pJail]--;
				if(pData[i][pJail] <= 0)
				{
					pData[i][pJail] = 0;
					SCM(i,CGRAY,"Вы были освобождены");
					new prison = pData[i][pPrison];
					set_player_skin(i,pData[i][pSkin]);

					SetPlayerVirtualWorld(i,0);
					//HideCopMap(i);
					if(prison < 4) {
					SetPlayerPosDebug(i,camExit[prison][0],camExit[prison][1],camExit[prison][2]);
					SetPlayerFacingAngle(i,camExit[prison][3]);
					}
					else {
					SetPlayerPosDebug(i, -2261.5, 2312.66 , 4.81);
					SetPlayerFacingAngle(i, 0);
					}
					PlayerDelo[i] = 0;
					pData[i][pPrison] = 0;
					new mes[256];
					format(mes,sizeof(mes),"UPDATE `accounts` SET `jail` = '%d', `prison` = '%d' WHERE `id` = '%d'",pData[i][pJail],pData[i][pPrison],pData[i][pMysqlID]);
					sql_queryEx(zConn, mes, QUERY_THREADED);

					for(new d; d < 6; d++) {
					pData[i][pWantedi][d] = 0;
					}
					format(pData[i][pWantedinf],80,"%d,%d,%d,%d,%d,%d",
					pData[i][pWantedi][0],pData[i][pWantedi][1],pData[i][pWantedi][2],
					pData[i][pWantedi][3],pData[i][pWantedi][4],pData[i][pWantedi][5]);
					format(String1024,sizeof(String1024),"UPDATE `accounts` SET `wantedi`='%s' WHERE `nickname`='%s'", pData[i][pWantedinf] , pData[i][pNickname]);
					sql_queryEx(zConn, String1024, QUERY_THREADED);

					if(pTemp[i][pCuffer] != INVALID_PLAYER_ID)
					{
						new cuffer = pTemp[i][pCuffer];
						SetPlayerSpecialAction(i,SPECIAL_ACTION_NONE);
						RemovePlayerAttachedObject(i,0);
						pTemp[i][pCuffer] = INVALID_PLAYER_ID;
						pTemp[i][pCuffee] = INVALID_PLAYER_ID;
						pTemp[cuffer][pCuffee] = INVALID_PLAYER_ID;
						pTemp[cuffer][pCuffer] = INVALID_PLAYER_ID;
					}
					pTemp[i][pCuffer] = INVALID_PLAYER_ID;
					pTemp[i][pCuffee] = INVALID_PLAYER_ID;

				}
			}
		}
		else
		{

		}
	}


	PlayerTimer_time = GetTickCount()-zztime;

	if(PlayerTimer_time > TickMax)
	{
		new MSG[144];
		format(MSG,sizeof(MSG),"[PlayerTimerSecond] Задержка таймер составил -  %d мс!", PlayerTimer_time);
		AdminChatEx(0x007fffff,MSG);

		logs_status_server_info(MSG);

	}


	return 1;
}

public MainTimer2()
{
 	new TickSt = GetTickCount();
	new zztime = GetTickCount();

	if(FrakCD > 0 && IsCapture == 0) FrakCD--;
	if(gAdvertTime > 0) gAdvertTime--;


	new
		hor, m, s;
	gettime(hor, m, s);
	if(m == 0 && s >= 11 && s <= 16) pay_day = 0;
   	if(m == 0 && s >= 0 && s <= 10 && pay_day == 0)
   	{
   		pay_day = 1;
   		pay_day_time();
   		update_all_property_sell();

   	}


   	if(hor == 0 && m == 1 && s == 3)
   	{
		sql_queryEx(zConn, "UPDATE `ban_accounts` SET `time` = time-1 WHERE time > 0", QUERY_THREADED);
		sql_queryEx(zConn, "UPDATE `accounts` SET `pMedcard` = pMedcard-1 WHERE pMedcard > 0", QUERY_THREADED);
		sql_queryEx(zConn, "UPDATE taxi_personal SET user_money_day = 0", QUERY_THREADED);
		sql_queryEx(zConn, "UPDATE trucker_personal SET user_money_day = 0", QUERY_THREADED);
		sql_queryEx(zConn, "UPDATE mechanic_personal SET user_money_day = 0", QUERY_THREADED);

		sql_queryEx(zConn, "UPDATE `accounts` SET `pCarNumberStatus` = -1", QUERY_THREADED);

		foreach(new i: logged_players)
		{
			if(pData[i][pMedcard] > 0)
			{
				pData[i][pMedcard]--;
			}

		 	pData[i][pCarNumberStatus] = -1;
		 	//UpdatePlayerData(i, "pCarNumberStatus", pData[i][pCarNumberStatus]);
		}

		new
			year, month, day;

		getdate(year, month, day);

		statistic_player_play_day = 0;

		update_finka_all_property(); // Снятие ограничений по финке для бизнесов
		get_day_player_week();

		/*sql_queryEx(zConn, "UPDATE `accounts` SET `pCarNumberStatus` = '-1'", QUERY_THREADED);

		foreach(new i: logged_players)
		{
		 	pData[i][pCarNumberStatus] = 1;
		 	UpdatePlayerData(i, "pCarNumberStatus", pData[i][pCarNumberStatus]);
		}*/

		//update_server_money_stats_week();
		update_player_online_week();
		update_day_donate_bonus_time();
		check_payday_all_property(); // Проверка имущества на слёт


		clear_stats_casino_newday();
		clear_stats_mechanic_newday();
		clear_stats_hotel_newday();
		clear_stats_fillings_newday();
		clear_stats_buisness_newday();
		clear_stats_taxi_day();
		clear_stats_trucker_newday();

		if(month == 11 && day == 1 || month == 12 && day == 1 || month == 1 && day == 1 || month == 2 && day == 1
		|| month == 3 && day == 1 || month == 4 && day == 1 || month == 5 && day == 1 || month == 6 && day == 1 || month == 7 && day == 1
		|| month == 8 && day == 1 || month == 9 && day == 1 || month == 10 && day == 1)
		{
			clear_stats_casino_newmouth();
			clear_stats_casino_newmouth();
			clear_stats_hotel_newmouth();
			clear_stats_fillings_newmouth();
			clear_stats_buisness_newmouth();
			clear_stats_taxi_mounth();
			clear_stats_trucker_mounth();

		}


   	}


	if(fire_timer)
	{
		fire_timer--;
		if(!fire_timer)
		{
			create_fire_global_params(-1);
			create_fire_global_params(random(sizeof fire_info));
		}
	}

	if(hospital_timer)
	{
		hospital_timer--;
		if(!hospital_timer)
		{
			create_help_people(-1);
			create_help_people(random(sizeof hospital_help));
		}
	}

   	update_mafia_time();
   	update_family_war_time();

   	gmx_mode();
   	race_start_mode();
   	end_race_timer();
   	race_player_timer();
   	race_timer_start();

   //	snow_race_start_mode();
   //	snow_race_start_player();
   	end_snow_race_timer();
   	snow_race_timer_start();



	for(new i;i<MAX_ADVERT_COUNT;i++)
	{
		if(gAdvert[i][adTime]) gAdvert[i][adTime]--;
		if(gAdvert[i][adCheked] && !gAdvert[i][adTime])
		{
			new mes[168];
			format(mes,sizeof(mes),"%s Отправитель: %s (тел. %d)",gAdvert[i][adText],gAdvert[i][adSender],gAdvert[i][adPhone]);
			SendClientMessageToAll(0x00FF00FF,mes);//0x00FF00FF,mes);
			format(mes,sizeof(mes),"  Объявление проверил: %s %s (%d)",gAdvert[i][adRang], gAdvert[i][adCheker], gAdvert[i][adCheckerID]);
			SendClientMessageToAll(CGREEN,mes);//CGREEN,mes);
			strdel(gAdvert[i][adSender],0,24);
			new zID = gAdvert[i][adCheckerID];
			give_money(zID, 50, "Проверка объявления");
			if(zID != -1)
			{
				if(pData[zID][pFraction] == 10)
				{



			  		if(pData[zID][pSubfraction]) gNewsMoney[pData[zID][pSubfraction]-1] += 150;
				}

			  	SaveNewsMoney();
			  	gAdvert[i][adCheckerID] = -1;
			}
			gAdvert[i][adPhone] = 0;
			strdel(gAdvert[i][adText],0,100);
			strdel(gAdvert[i][adCheker],0,24);
			gAdvert[i][adBusy] = false;
			gAdvert[i][adCheked] = false;
			gAdvert[i][adCheking] = false;
			gAdvert[i][adTime] = 0;
			if(gAdvertCount > 0) gAdvertCount--;
		}
	}

	MainTimer2_time = GetTickCount()-zztime;

	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[144];
		format(MSG,sizeof(MSG),"[MainTimer] Задержка таймера составил -  %d мс!",GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG);
		logs_status_server_info(MSG);

	}


	return 1;
}


callback:: MinuteTimer()
{
	new zz = GetTickCount();
 	new TickSt = GetTickCount();

	new gunids[40], ammos[80], pgun[120];

	new h,m,s; gettime(h,m,s);


	if(h == 4 && m == 55) SendClientMessageToAll(COLOR_LIGHTRED, !"Внимание! Сервер будет автоматически перезагружен через 10 минут");
	if(h == 5 && m == 0) SendClientMessageToAll(COLOR_LIGHTRED, !"Внимание! Сервер будет автоматически перезагружен через 5 минут");
	if(h == 5 && m == 3) SendClientMessageToAll(COLOR_LIGHTRED, !"Внимание! Сервер будет автоматически перезагружен через 2 минуты");
	if(h == 5 && m == 4) SendClientMessageToAll(COLOR_LIGHTRED, !"Внимание! Сервер будет автоматически перезагружен через 1 минуту");
	if(h == 5 && m >= 5 && m <= 7) gmx_time = 1;


	if(h == 2 && m == 10 || h == 4 && m == 10 || h == 6 && m == 10 || h == 8 && m == 10 || h == 10 && m == 10 || h == 12 && m == 10 || h == 14 && m == 10
	|| h == 16 && m == 10 || h == 18 && m == 10 || h == 20 && m == 10 || h == 22 && m == 10 || h == 00 && m == 10)
	{
		start_race_new();
	}

	if(h == 1 && m == 10 || h == 3 && m == 10 || h == 5 && m == 10 || h == 7 && m == 10 || h == 9 && m == 10 || h == 11 && m == 10 || h == 13 && m == 10
	|| h == 15 && m == 10 || h == 17 && m == 10 || h == 19 && m == 10 || h == 21 && m == 10 || h == 23 && m == 10)
	{
		//start_snow_race_new();
	}

	/*if(m == 0 || m == 5 || m == 10 || m == 15 || m == 20 || m == 25 || m == 30 || m == 35 || m == 40 || m == 45 || m == 50 || m == 55)
	{
		if(debug_packet_loss == 1)
		{
			check_packet_player_all();
		}
	}*/


	if(!(m % 5))
	{
		create_fire_global_params(-1);
		create_fire_global_params(random(sizeof(fire_info)));
	}
	if(!(m % 5))
	{
		create_help_people(-1);
		create_help_people(random(sizeof hospital_help));
	}

	new postplayers[3];
	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;
 		if(pData[i][pMut])
		{
			pData[i][pMut]--;
			UpdatePlayerData(i,"mut",pData[i][pMut]);
			if(!pData[i][pMut]) SCM(i,CGREEN,"Вы снова можете использовать текстовый и голосовой чат!");
			VoiceChat_UnMutePlayer(i);
		}
 		if(pData[i][pMutFamily])
		{
			pData[i][pMutFamily]--;
			UpdatePlayerData(i,"pMutFamily",pData[i][pMutFamily]);
			if(!pData[i][pMutFamily]) SCM(i,CGREEN,"Вы снова можете использовать семейный голосовой чат!");
		}
 		if(pData[i][pMutTK])
		{
			pData[i][pMutTK]--;
			UpdatePlayerData(i,"pMutTK",pData[i][pMutTK]);
			if(!pData[i][pMutTK]) SCM(i,CGREEN,"Вы снова можете использовать рабочий чат!");
		}
 		if(pData[i][pMutTaxi])
		{
			pData[i][pMutTaxi]--;
			UpdatePlayerData(i,"pMutTaxi",pData[i][pMutTaxi]);
			if(!pData[i][pMutTaxi]) SCM(i,CGREEN,"Вы снова можете использовать рабочий чат!");
		}
 		if(pData[i][pMutMech])
		{
			pData[i][pMutMech]--;
			UpdatePlayerData(i,"pMutMech",pData[i][pMutMech]);
			if(!pData[i][pMutMech]) SCM(i,CGREEN,"Вы снова можете использовать рабочий чат!");
		}

		//update_clock_phone(i);

		if(PlayerBotEx[i] > 0) PlayerBotEx[i] -= 5;

		PlayerCMDHP[i] = 0;

		if(pTemp[i][pNotReport]) pTemp[i][pNotReport]--;
		if(pTemp[i][pNotReportR]) pTemp[i][pNotReportR]--;
		if(pTemp[i][pNotRadio]) pTemp[i][pNotRadio]--;
		if(pTemp[i][pNotReportG]) pTemp[i][pNotReportG]--;
		if(pTemp[i][pNotReportP]) pTemp[i][pNotReportP]--;
		if(pTemp[i][pTakeGun]) pTemp[i][pTakeGun]--;


		if((pData[i][pFraction] == 9 || pData[i][pFraction] == 12) && pData[i][pRank] > 1 && pTemp[i][pAFK] < 10)
		{
			for(new hp; hp < 3; hp ++)
			{
				if(IsPlayerInDynamicArea(i,gAreas[arPOSTEX][hp]))
				{
					postplayers[hp] ++;
				}
			}
		}

		if(!pTemp[i][pLogined] || !pTemp[i][pJoined])
			continue;

		if(pData[i][pAdmin] > 0 && admloged[i] == 1 && pTemp[i][pAFK] < 3)
		{
			pTemp[i][pAdminExp] ++ ;

			UpdatePlayerData(i, "atime", pTemp[i][pAdminExp]);
		}

		if(h == 5)
		{
			gmx_reload_automatic();
		}
 		if(h == 5 || sRR == 1)
 		{
			for (new d = 0; d < 13; d++)
			{
				new weapid, ammo;
				GetPlayerWeaponData(i, d, weapid, ammo);
				if(weapid != gGuns[i][d]) gGuns[i][d] = 0, gAmmos[i][d] = 0,gAmmosMax[i][d] = 0;
				if(ammo < gAmmos[i][d]) gAmmos[i][d] = ammo;
				if(!d)
				{
		   			gGuns[i][d] = 0;  gAmmos[i][d] = 0;
					format(gunids,sizeof(gunids), "%02i", gGuns[i][d]);
					format(ammos,sizeof(ammos), "%05i", gAmmos[i][d]);
				}
				else
				{
		   			gGuns[i][d] = 0;  gAmmos[i][d] = 0;
					format(gunids,sizeof(gunids), "%s %02i", gunids, gGuns[i][d]);
					format(ammos,sizeof(ammos), "%s %05i", ammos, gAmmos[i][d]);
				}
			}
			format(pgun,sizeof(pgun), "%s:%s", gunids, ammos);

			format(pData[i][pSkills],80,"%d,%d,%d,%d,%d,%d",
			pTemp[i][pGunSkill][0],pTemp[i][pGunSkill][1],pTemp[i][pGunSkill][2],
			pTemp[i][pGunSkill][3],pTemp[i][pGunSkill][4],pTemp[i][pGunSkill][5]);
			GetPlayerHealth(i, pData[i][pHealth]);
			if(pData[i][pLicenses][LIC_WEAP]) format(String1024,sizeof(String1024),"UPDATE `accounts` SET `skills`='%s',`health` = '%.2f',`money` = %d,`jail`='%d',`wanted`='%d',`otigral`='%d',`status`='0',`hungry`='%d' WHERE `nickname`='%s'", pData[i][pSkills], pData[i][pHealth],pData[i][pMoney],pData[i][pJail], pData[i][pWanted], pTemp[i][pGiveExp], pData[i][hungry], pData[i][pNickname]);
			else format(String1024,sizeof(String1024),"UPDATE `accounts` SET `skills`='%s',`health` = '%.2f',`money` = %d,`jail`='%d',`wanted`='%d',`otigral`='%d',`status`='0',`hungry`='%d' WHERE `nickname`='%s'", pData[i][pSkills], pData[i][pHealth],pData[i][pMoney],pData[i][pJail], pData[i][pWanted], pTemp[i][pGiveExp], pData[i][hungry], pData[i][pNickname]);
			sql_queryEx(zConn, String1024, QUERY_THREADED); //,`online`='0',`online`='0'
		}

	}


	Minute_timer = GetTickCount()-zz;

	if(GetTickCount() - TickSt > TickMax)
	{
		new MSG[144];
		format(MSG,sizeof(MSG),"[MinuteTimer] Задержка таймера составил -  %d мс!", GetTickCount() - TickSt);
		AdminChatEx(0x007fffff,MSG);
		logs_status_server_info(MSG);

	}


	return true;
}

public PlayerPlaySoundDelay(playerid,soundid)
{
	PlayerPlaySound(playerid,soundid,0.0,0.0,0.0);
	return 1;
}


public OnTrailerUpdate(playerid, vehicleid)
{
   	return 1;
}

public OnUnoccupiedVehicleUpdate(vehicleid, playerid, passenger_seat, Float:new_x, Float:new_y, Float:new_z, Float:vel_x, Float:vel_y, Float:vel_z)
{
	return 1;
}


callback:: GameModeExitDelay()
{
	GameModeExit();
}



callback:: ClearPhone(playerid)
{
	RemovePlayerAttachedObject(playerid,0);
	return 1;
}


callback:: SetPlayerPosExA(playerid,Float:x,Float:y,Float:z)
{
	SetPlayerPosEx(playerid,x,y,z,0);
	return 1;
}

callback:: Unfreez(playerid)
{
	TogglePlayerControllable(playerid,1);
	ClearAnimations(playerid);
	SetCameraBehindPlayer(playerid);
	return 1;
}

callback:: UnfreezSmi(playerid ,vw)
{
	if(pData[playerid][pMysqlID] != 0)
	{
	//LoadSmiMap(playerid);
	TogglePlayerControllable(playerid,1);
	SetPlayerVirtualWorld(playerid, vw);
	ClearAnimations(playerid);
	SetCameraBehindPlayer(playerid);
	}
	return 1;
}


callback:: CrackTime(playerid)
{
	GoAnim(playerid,"CRACK","Crckidle2",4.1,1,0,0,0,0,0);
	return 1;
}


stock SetPlayerDataToDefault(playerid)
{
	KICKED[playerid] = 0;
	ExitOtladka[playerid] = 0;
	NopTP[playerid] = 0;
	last_upd[playerid] = 0;
	Jetpacked[playerid] = 0;
	pRealState[playerid] = 0;

	PSPAWN[playerid] = 1;
	object2[playerid] = -1;
	object[playerid] = -1;

	MAX_ARM[playerid] = 0;
	pTemp[playerid][pTakeShots] = 0;
	pTemp[playerid][pDamage] = 0;
	pTemp[playerid][pDamage2] = 0;
	pTemp[playerid][pCarDamage] = 0;
	pTemp[ playerid ][pSUD] = 0;
	pTemp[ playerid ][pPOST] = 0;
	pTemp[playerid][pReave] = 0;
	zSelected[playerid] = 0;
	pTemp[playerid][pFuel] = 0;
	pTemp[playerid][pFuel2] = 0;
	ClearAnimationsDelay[playerid] = 0;
	CLEARRR[playerid] = 0;

 	pTemp[playerid][pTied] = 0;

	pTemp[playerid][ModShop] = 0;
	pTemp[playerid][WarningFuel] = 0;
	pTemp[playerid][WarningFuel2] = 0;
	pTemp[playerid][Dritang] = 0;
	pTemp[playerid][LastSKey] = 0;
	pTemp[playerid][LastLRKey] = 0;
	pTemp[playerid][voentime] = 0;
	pTemp[playerid][LastSpeeds] = 0.0;
	pTemp[playerid][LASTpX] = 0.0;
	pTemp[playerid][LASTpY] = 0.0;
	pTemp[playerid][LASTpZ] = 0.0;

	PlayerHelmet[playerid] = 0;

	PlayerDelo[playerid] = 0;
	PlayerDelo2[playerid] = 0;
	PlayerCAM[playerid] = -1;
	AdminGM[playerid] = 0;

	pTemp[playerid][pDialog] = false;
	pTemp[playerid][pDialogID] = 0;

	PlayerVoenKey[playerid] = 0;
	PlayerVoen[playerid] = 0;

	pTemp[playerid][pArmarea] = 0;

 	PlayerForma[playerid] = 0;
	FormaNum[playerid] = MAX_PLAYERS;

	pTemp[playerid][BizWar] = false;

	PCPlayer[playerid] = 0;

	zShowEstate[playerid] = 0;
	setpos[playerid] = 0;

	pTemp[playerid][pHealing] = 0;

	pTemp[playerid][pAnimation] = 0;
	pTemp[playerid][pAnimationTime] = 0;
	pTemp[playerid][pWarningkey] = 0;
	pTemp[playerid][pWarninggun] = 0;
	pTemp[playerid][pmaskedf] = 0;
	pTemp[playerid][coalamount] = 0;
	pTemp[playerid][coalkeys] = 0;
	pTemp[playerid][coalkeysW] = 0;
	pTemp[playerid][odetcol] = 0;
	pTemp[playerid][pinformed] = 0;

	pTemp[playerid][pDrugTimes] = 0;
	pTemp[playerid][zSteals] = 0;


	pTemp[playerid][pDChat] = 0;
	pTemp[playerid][pFChat] = 0;
	pTemp[playerid][pEars] = 0;
	pTemp[playerid][pEarsM] = 0;
	pTemp[playerid][pEarsD] = 0;
	pTemp[playerid][pEarsT] = 0;

	pTemp[playerid][pLastPay] = -1;

	pTemp[playerid][pNotReportG] = 0;
	pTemp[playerid][pNotReportP] = 0;
	pTemp[playerid][pNotRadio] = 0;

	pData[playerid][pMask] = 0;
	pData[playerid][pMasked] = 0;

 	pTemp[playerid][radioTime] = 0;
	pTemp[playerid][pJoined] = false;
	pTemp[playerid][pLogined] = false;
	pTemp[playerid][pLoginAttempt] = 0;
	pTemp[playerid][pChoosingSkin] = false;
	pTemp[playerid][pWork] = 0;
	pTemp[playerid][pWorkSalary] = 0;
 	pTemp[playerid][pDozerText] = Text3D:INVALID_3DTEXT_ID;
	pTemp[playerid][pDozerID] = INVALID_VEHICLE_ID;
	pTemp[playerid][pJustTP] = false;

	pTemp[playerid][AntiCrack] = 0;
	pTemp[playerid][PlayerStoned] = 0;
	pTemp[playerid][FBISkip] = 0;
	pTemp[playerid][Friend] = 0;
	pTemp[playerid][PDSkip] = 0;

	pTemp[playerid][pSmokeUp] = 0;

	pTemp[playerid][pSelectMafStoreGun] = false;

	pTemp[playerid][pIsInHouse] = false;
	pTemp[playerid][pIsInHouseID] = 0;

	pTemp[playerid][pSelectedHouseID] = -1;
	pTemp[playerid][pSelectedDomID] = -1;
	pTemp[playerid][pSellHouseOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellHouseOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellPhoneOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellPhoneOffee] = INVALID_PLAYER_ID;

	pTemp[playerid][pSellBiletOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBiletOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBiletPrice] = 0;

	pTemp[playerid][pSellEggOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellEggOffee] = INVALID_PLAYER_ID;


	pTemp[playerid][pSellPhonePrice] = 0;
	pTemp[playerid][pSellHousePrice] = 0;
	pTemp[playerid][pSellFillingOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellFillingOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellFillingPrice] = 0;
	pTemp[playerid][pSellHouseID] = 0;
	pTemp[playerid][pSettleHouseOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSettleHouseOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSettleHouseID] = 0;
	pTemp[playerid][pSellVertSelect] = false;
	pTemp[playerid][pSellCarSelect] = false;
	pTemp[playerid][pSellCarSelectTrue] = false;
	pTemp[playerid][pSellCarOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellCarOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellCarPrice] = 0;
	pTemp[playerid][pSellCarNum] = 0;

	pTemp[playerid][pSellCarID] = 0;

	pTemp[playerid][pSellBoatOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBoatOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBoatPrice] = 0;
	pTemp[playerid][pSellBoatID] = 0;


	pTemp[playerid][pSellVertOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellVertOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellVertPrice] = 0;
	pTemp[playerid][pSellVertID] = 0;


	pTemp[playerid][pSellBusinessOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBusinessOffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBusinessOffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pSellBusinessPrice] = 0;
	pTemp[playerid][pSellBusinessID] = 0;
	pTemp[playerid][pActPlayer] = INVALID_PLAYER_ID;
	pTemp[playerid][pAFK] = 0;
	pTemp[playerid][pAFKText] = Text3D:INVALID_3DTEXT_ID;
	pTemp[playerid][pIsAFK] = false;
	pTemp[playerid][pShowNicknames] = true;
	pTemp[playerid][pFilling] = false;
	pTemp[playerid][pFillGoing] = false;
	pTemp[playerid][pFillingAmount] = 0.0;
	pTemp[playerid][pFillingSpeed] = 0.0;
	pTemp[playerid][pFillingAccel] = 0.0;
	pTemp[playerid][pFillingID] = 0;
	pTemp[playerid][pFillingPrice] = 0;
	pTemp[playerid][pSelectStoreGun] = false;
	pTemp[playerid][pStoreGun] = 0;
	pTemp[playerid][pMafStoreGun] = 0;
	pTemp[playerid][pHealth] = 100.0;
	pData[playerid][hungry] = 100;
	pTemp[playerid][pChangingSkin] = false;
	pTemp[playerid][pCarryProducts] = 0;
	pData[playerid][hungry] = 0;
	pTemp[playerid][pGPS] = false;
	pTemp[playerid][Marked] = false;
	pTemp[playerid][MarkedEx] = false;
	pTemp[playerid][pUseButton] = true;

	pTemp[playerid][pTestQNumber] = 0;
	pTemp[playerid][pCheat] = false;
	pTemp[playerid][pX] = 0.0;
	pTemp[playerid][pY] = 0.0;
	pTemp[playerid][pZ] = 0.0;
	pTemp[playerid][pSpectating] = false;
	pTemp[playerid][pSpectator] = INVALID_PLAYER_ID;
	pTemp[playerid][ pCamFly ] = 0;
	pTemp[playerid][pWorld] = 0;


	PlayerTimerWanted[playerid] = 0;

	if(PlayerTimerWantedEx[playerid] != 0)
	{
		KillTimer(PlayerTimerWantedEx[playerid]);
		PlayerTimerWantedEx[playerid] = 0;
	}

	foreach(new d: logged_players)
	{
	 	if(d > MAX_PLAYERS) break;
		if(PLAYERPDELPER[ d ] == playerid+1)
		{
			PLAYERPDELPER[ d ] = 0;
			SendErr(d, "Сотрудник пропал с радара");
			DisablePlayerCheckpoint(d);
		}

	}

	for(new bb = 0; bb < sizeof(PDhelp); bb++)
	{
	if(PDhelp[bb] == playerid+1)
	{
	PDhelp[bb] = 0;
	new mes[256];
	format(mes,sizeof(mes),"[Внимание] Сотрудник "cBLUE"%s{007FFF} больше не нуждается в помощи",pData[playerid][pNickname]);
	CopMes(CDEPARTMENT,mes);
	}
	}
	PLAYERPDELPER[playerid] = 0;
	pTemp[playerid][pSpecOn] = 0;
	pTemp[playerid][pSpectatee] = INVALID_PLAYER_ID;
	pTemp[playerid][pAbletoTP] = false;
	pTemp[playerid][pAbletoGun] = 0;
	pTemp[playerid][pAbletoHP] = false;
	pTemp[playerid][pLoginTime] = 100;
	pTemp[playerid][pAntiDM] = false;
	pTemp[playerid][pCall] = false;
	pTemp[playerid][pDM] = 0;
	pTemp[playerid][pDarkAFK] = 0;
	pTemp[playerid][pCaller] = INVALID_PLAYER_ID;
	pTemp[playerid][pCallee] = INVALID_PLAYER_ID;
	pTemp[playerid][pInHospital] = false;
	pTemp[playerid][pDead] = false;
	pTemp[playerid][pGangKey] = 0;
	pTemp[playerid][pEnterVehicle] = INVALID_VEHICLE_ID;
	pTemp[playerid][pCleoFail] = 0;
	pTemp[playerid][pTakeGun] = 0;


	pTemp[playerid][pTazer] = 0;
	pTemp[playerid][pCuffer] = INVALID_PLAYER_ID;
	pTemp[playerid][pCuffee] = INVALID_PLAYER_ID;
	pTemp[playerid][pHolder] = INVALID_PLAYER_ID;
	pTemp[playerid][pControllable] = 1;
	pTemp[playerid][pGiveExp] = 0;
	pTemp[playerid][pPayDays] = 0;
	pTemp[playerid][pAdminExp] = 0;
	pTemp[playerid][pCoalmanTime] = 0;
	pTemp[playerid][pTPhone] = true;
	pTemp[playerid][pAngle] = 0.0;
	pTemp[playerid][pBangam] = true;
	pTemp[playerid][pSLimit] = 0;
	pTemp[playerid][pSelectedBusinessID] = -1;
	pTemp[playerid][pEconomicLog] = false;
	pTemp[playerid][pDeliving] = false;
	pTemp[playerid][pDeliveryid] = 0;
	pTemp[playerid][pDeliveryNumber] = 0;
	pTemp[playerid][pDFTID] = INVALID_VEHICLE_ID;
	pTemp[playerid][pDFTSelected] = -1;
	pTemp[playerid][pDFTLOAD] = 0;
	pTemp[playerid][pDFTLOAD2] = 0;
	pTemp[playerid][pDFTLOADEX] = 0;
	pTemp[playerid][pEther] = false;
	pTemp[playerid][pAntiCleoWood] = 0;
	pTemp[playerid][pAntiCleoWoodKick] = 0;
	pTemp[playerid][pPresentOn] = false;
	pTemp[playerid][pTazerGun] = false;
	pTemp[playerid][pWantedListIndex] = -1;
	pTemp[playerid][pLastTick] = 0;
	pTemp[playerid][pLastTick2] = 0;
	pTemp[playerid][pFrags] = 0;
	pTemp[playerid][pCasino] = 0;
	if(	pTemp[playerid][pWantedSu] != 0)
	{
	pTemp[playerid][pWantedSu] = 0;
	}


	Playernarko[playerid] = 0;


//==========================================

	CancelSelectTextDraw(playerid);
 	SetPVarIntNew(playerid,"gunoffee",-1);
	SetPVarIntNew(playerid,"gunoffer",-1);
	SetPVarIntNew(playerid,"gunprice",0);
 	return 1;
}

stock RegisterPlayer(playerid)
{

	new
		ip[15];
	GetPlayerIp(playerid,ip,15);
	sql_escape_string(zConn, ip, ip, 15);

	if(check_no_valid_symbol_text(ip) || check_sql_injection_text(ip))
	{
		SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
		return Kick(playerid);
	}

	if(check_no_valid_symbol_text(pData[playerid][pPassword]) || check_sql_injection_text(pData[playerid][pPassword]))
	{
		SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
		return Kick(playerid);
	}

	if(check_no_valid_symbol_text(pData[playerid][pEmail]) || check_sql_injection_text(pData[playerid][pEmail]))
	{
		SendErr(playerid, "Присутствуют запрещенные символы. Попробуйте еще раз.");
		return Kick(playerid);
	}


	sql_escape_string(zConn, MD5_Hash(pData[playerid][pPassword]), pData[playerid][pPassword], 35);


	format(String1024,sizeof(String1024),"INSERT INTO `accounts`(`nickname`,`password`,`email`,`ip`,`sex`,`color`,`age`,`status`,`money`,`bank`,`level`,`nation`,`skills`,`health`,`friend`,`MD5`)\
	VALUES('%s','%s','%s','%s','%d','%d','%d','1','150','100','1','%d','0,0,0,0,0,0','100.0','%d','1')",
		pData[playerid][pNickname],
		pData[playerid][pPassword],
		pData[playerid][pEmail],
		ip,
		pData[playerid][pSex],
		pData[playerid][pColor],
		pData[playerid][pAge],
  		pData[playerid][pNation],
		pTemp[playerid][Friend]
	);
	if(!sql_queryEx(zConn, String1024)) Kick(playerid);

	else
	{
		SendSucc(playerid, "Аккаунт успешно зарегистрирован");
		SendInf(playerid, "Чтобы открыть меню игрока введите {FFC800}/menu (/mn)");
		SendInf(playerid, "Возник вопрос? Используйте {FFC800}/ask (/report)");
		SendInf(playerid, "Больше информации можно получить у пикапа на спавне!");

		SCM(playerid, COLOR_ORANGE, "");
		SCM(playerid, COLOR_ORANGE, "Внимание! Список доступных акций - /action!");

		LoadPlayerData(playerid);
		gen_random_position_parnew(playerid);
		pTemp[playerid][pLogined] = true;
		pTemp[playerid][pREGISKL] = true;

		pTemp[playerid][spawn_id] = SPAWN_DEFAULT;

		show_hud_hungry(playerid);

		PSPAWN[ playerid ] = 1;

		TogglePlayerSpectating(playerid,0);
 		SpawnPlayer(playerid);
		CancelSelectTextDraw(playerid);
	}
	return 1;
}

stock UpdatePlayerData(playerid,field[],data)
{
	new
		fmt_str[512];

	if(!PlayerConnect[playerid]) return 1;
 	if(pData[playerid][pMysqlID] != 0)
	{
 		format(fmt_str,sizeof(fmt_str),"UPDATE `accounts` SET `%s` = '%d' WHERE `id` = '%d'",field,data,pData[playerid][pMysqlID]);
		mysql_query(connect_main, fmt_str);
	}
	return 1;
}

stock LoadPlayerData(playerid)
{
	//PlayerTextDrawHideEx(playerid, background_login[playerid]);

	new
		fmt_str[512];

	format(fmt_str, sizeof(fmt_str), "SELECT * FROM `accounts` WHERE nickname = '%s'",pData[playerid][pNickname]);
	new Result:pldata = sql_queryEx(zConn, fmt_str, QUERY_CACHED);
	if(sql_num_rows(pldata))
	{
		pData[playerid][pMysqlID] = sql_get_field_assoc_int_ex(pldata, 0, "id");
		sql_get_field_assoc_ex(pldata, 0, "nickname", pData[playerid][pNickname], 24);
		sql_get_field_assoc_ex(pldata, 0, "email", pData[playerid][pEmail], 64);
		sql_get_field_assoc_ex(pldata, 0, "ip", pData[playerid][pRegIP], 16);
		pData[playerid][pMarried] = sql_get_field_assoc_int_ex(pldata, 0, "married");
		sql_get_field_assoc_ex(pldata, 0, "divorce", pData[playerid][pDivorce], 24);
		pData[playerid][pWarn] = sql_get_field_assoc_int_ex(pldata, 0, "warn");
		pData[playerid][pWarnc] = sql_get_field_assoc_int_ex(pldata, 0, "warnc");
		pData[playerid][pMut] = sql_get_field_assoc_int_ex(pldata, 0, "mut");
		pData[playerid][pMutFamily] = sql_get_field_assoc_int_ex(pldata, 0, "pMutFamily");
		pData[playerid][pMutTK] = sql_get_field_assoc_int_ex(pldata, 0, "pMutTK");
		pData[playerid][pMutTaxi] = sql_get_field_assoc_int_ex(pldata, 0, "pMutTaxi");
		pData[playerid][pMutMech] = sql_get_field_assoc_int_ex(pldata, 0, "pMutMech");

		pData[playerid][pEConfirmed] = sql_get_field_assoc_int_ex(pldata, 0, "econfirmed");
		pData[playerid][pSex] = sql_get_field_assoc_int_ex(pldata, 0, "sex");
		pTemp[playerid][pGiveExp] = sql_get_field_assoc_int_ex(pldata, 0, "otigral");
		pData[playerid][pColor] = sql_get_field_assoc_int_ex(pldata, 0, "color");
		pData[playerid][pAge] = sql_get_field_assoc_int_ex(pldata, 0, "age");
		pData[playerid][pNation] = sql_get_field_assoc_int_ex(pldata, 0, "nation");
		pData[playerid][pSkin] = sql_get_field_assoc_int_ex(pldata, 0, "skin");
		pData[playerid][pFractionSkin] = sql_get_field_assoc_int_ex(pldata, 0, "fractionskin");
		pData[playerid][pHealth] = sql_get_field_assoc_float_ex(pldata, 0, "health");
		pData[playerid][hungry] = sql_get_field_assoc_int_ex(pldata, 0, "hungry");
		pData[playerid][pHouse] = sql_get_field_assoc_int_ex(pldata, 0, "house");
		pData[playerid][pHouseRent] = sql_get_field_assoc_int_ex(pldata, 0, "house_rent");

		pData[playerid][pGreenHouse] = sql_get_field_assoc_int_ex(pldata, 0, "pGreenHouse");

		pData[playerid][hour_played] = sql_get_field_assoc_int_ex(pldata, 0, "count_time_payday");
		pData[playerid][pMedcard] = sql_get_field_assoc_int_ex(pldata, 0, "pMedcard");

		pData[playerid][pQuestMarch1] = sql_get_field_assoc_int_ex(pldata, 0, "pQuestMarch1");
		pData[playerid][pQuestMarch2] = sql_get_field_assoc_int_ex(pldata, 0, "pQuestMarch2");
		pData[playerid][pQuestMarch3] = sql_get_field_assoc_int_ex(pldata, 0, "pQuestMarch3");
		pData[playerid][pQuestMarch4] = sql_get_field_assoc_int_ex(pldata, 0, "pQuestMarch4");
		pData[playerid][pAdminCode] = sql_get_field_assoc_int_ex(pldata, 0, "AdminCode");
		pData[playerid][pQuestMarch5] = sql_get_field_assoc_int_ex(pldata, 0, "pQuestMarch5");
		pData[playerid][pSnowdrops] = sql_get_field_assoc_int_ex(pldata, 0, "pSnowdrops");

		pData[playerid][promocode_admin] = sql_get_field_assoc_int_ex(pldata, 0, "promocode_admin");
		pData[playerid][promocode_admin_time] = sql_get_field_assoc_int_ex(pldata, 0, "promocode_admin_time");
		pData[playerid][promocode_admin_time_player] = sql_get_field_assoc_int_ex(pldata, 0, "promocode_admin_time_player");

		pData[playerid][ActionStatusMoney] = sql_get_field_assoc_int_ex(pldata, 0, "ActionStatusMoney");
		pData[playerid][ActionTimeMoney] = sql_get_field_assoc_int_ex(pldata, 0, "ActionTimeMoney");

		pData[playerid][pPlayCar] = sql_get_field_assoc_int_ex(pldata, 0, "pPlayCar");
		pData[playerid][pPlayrCarStatus] = sql_get_field_assoc_int_ex(pldata, 0, "pPlayrCarStatus");
		pData[playerid][pPlayOnlineDonate] = sql_get_field_assoc_int_ex(pldata, 0, "pPlayOnlineDonate");
		pData[playerid][pPlayOnlineDonateStatus] = sql_get_field_assoc_int_ex(pldata, 0, "pPlayOnlineDonateStatus");



		pData[playerid][pVoiceVolume] = sql_get_field_assoc_int_ex(pldata, 0, "pVoiceVolume");
		pData[playerid][pVoiceStatus] = sql_get_field_assoc_int_ex(pldata, 0, "pVoiceStatus");

		pData[playerid][pFamily] = sql_get_field_assoc_int_ex(pldata, 0, "pFamily");
		pData[playerid][pFamilyRank] = sql_get_field_assoc_int_ex(pldata, 0, "pFamilyRank");

		pData[playerid][election_status_p] = sql_get_field_assoc_int_ex(pldata, 0, "election_status_p");

		pData[playerid][pGarage] = sql_get_field_assoc_int_ex(pldata, 0, "pGarage");

		pData[playerid][pCarNumberStatus] = sql_get_field_assoc_int_ex(pldata, 0, "pCarNumberStatus");

		pData[playerid][pCasinoOwner] = sql_get_field_assoc_int_ex(pldata, 0, "pCasinoOwner");

		pData[playerid][pSecurityCode] = sql_get_field_assoc_int_ex(pldata, 0, "security_code");

		pData[playerid][pHotelOwner] = sql_get_field_assoc_int_ex(pldata, 0, "pHotelOwner");

		pData[playerid][pPromoFriend] = sql_get_field_assoc_int_ex(pldata, 0, "pPromoFriend");
		pData[playerid][pPromoFriendActive] = sql_get_field_assoc_int_ex(pldata, 0, "pPromoFriendActive");
		pData[playerid][pPromoActiveID] = sql_get_field_assoc_int_ex(pldata, 0, "pPromoActiveID");

		pData[playerid][pFillCanistra] = sql_get_field_assoc_int_ex(pldata, 0, "pFillCanistra");
		pData[playerid][pOilCanistra] = sql_get_field_assoc_int_ex(pldata, 0, "pOilCanistra");

		pData[playerid][pInventoryLevel] = sql_get_field_assoc_int_ex(pldata, 0, "pInventoryLevel");

		pData[playerid][pTruckerOwnerID] = sql_get_field_assoc_int_ex(pldata, 0, "pTruckerOwnerID");
		pData[playerid][pTruckerOwnerLowID] = sql_get_field_assoc_int_ex(pldata, 0, "pTruckerOwnerLowID");
		pData[playerid][pTrucker] = sql_get_field_assoc_int_ex(pldata, 0, "pTrucker");
		pData[playerid][pTruckerRank] = sql_get_field_assoc_int_ex(pldata, 0, "pTruckerRank");


		pData[playerid][pTaxiOwnerID] = sql_get_field_assoc_int_ex(pldata, 0, "pTaxiOwnerID");
		pData[playerid][pTaxiOwnerLowID] = sql_get_field_assoc_int_ex(pldata, 0, "pTaxiOwnerLowID");
		pData[playerid][pTaxi] = sql_get_field_assoc_int_ex(pldata, 0, "pTaxi");
		pData[playerid][pTaxiRank] = sql_get_field_assoc_int_ex(pldata, 0, "pTaxiRank");

		pData[playerid][pFlate] = sql_get_field_assoc_int_ex(pldata, 0, "flate");
		pData[playerid][pFlateRent] = sql_get_field_assoc_int_ex(pldata, 0, "flate_rent");

	   	pData[playerid][pFillStation] = sql_get_field_assoc_int_ex(pldata, 0, "pFillStation");

		pData[playerid][pHotel] = sql_get_field_assoc_int_ex(pldata, 0, "hotel");
		pData[playerid][pHotelRoom] = sql_get_field_assoc_int_ex(pldata, 0, "pHotel");
		pData[playerid][pCar] = sql_get_field_assoc_int_ex(pldata, 0, "car");
		pData[playerid][pJob] = sql_get_field_assoc_int_ex(pldata, 0, "job");
		pData[playerid][pSalary] = sql_get_field_assoc_int_ex(pldata, 0, "salary");
		pData[playerid][pMoney] = sql_get_field_assoc_int_ex(pldata, 0, "money");
		pData[playerid][pBank] = sql_get_field_assoc_int_ex(pldata, 0, "bank");
		pData[playerid][pLevel] = sql_get_field_assoc_int_ex(pldata, 0, "level");
		pData[playerid][pExp] = sql_get_field_assoc_int_ex(pldata, 0, "exp");
		pData[playerid][pBook] = sql_get_field_assoc_int_ex(pldata, 0, "book");
		pData[playerid][pPhone] = sql_get_field_assoc_int_ex(pldata, 0, "phone");
		pData[playerid][pPhoneMoney] = sql_get_field_assoc_int_ex(pldata, 0, "phonemoney");
		pData[playerid][pWanted] = sql_get_field_assoc_int_ex(pldata, 0, "wanted");
		pData[playerid][pJail] = sql_get_field_assoc_int_ex(pldata, 0, "jail");
		pData[playerid][pPrison] = sql_get_field_assoc_int_ex(pldata, 0, "prison");
		pData[playerid][pDrugs] = sql_get_field_assoc_int_ex(pldata, 0, "drugs");
		pData[playerid][pRadio] = sql_get_field_assoc_int_ex(pldata, 0, "radio");
		pData[playerid][pSpawn] = sql_get_field_assoc_int_ex(pldata, 0, "spawn");
		pData[playerid][pAmmo] = sql_get_field_assoc_int_ex(pldata, 0, "ammo");
		pData[playerid][pGunAmount] = sql_get_field_assoc_int_ex(pldata, 0, "gunamount");
		pData[playerid][pFraction] = sql_get_field_assoc_int_ex(pldata, 0, "fraction");
		pData[playerid][pSubfraction] = sql_get_field_assoc_int_ex(pldata, 0, "subfraction");
		pData[playerid][pRank] = sql_get_field_assoc_int_ex(pldata, 0, "rank");
		pData[playerid][pDivision] = sql_get_field_assoc_int_ex(pldata, 0, "dvs");

		pData[playerid][pBusiness] = sql_get_field_assoc_int_ex(pldata, 0, "bussiness");
		pData[playerid][pWatch] = sql_get_field_assoc_int_ex(pldata, 0, "watch");

		pData[playerid][pLicenses][LIC_DRIVING] = sql_get_field_assoc_int_ex(pldata, 0, "licDrive");
		pData[playerid][pLicenses][LIC_FLY] = sql_get_field_assoc_int_ex(pldata, 0, "licFly");
		pData[playerid][pLicenses][LIC_BOAT] = sql_get_field_assoc_int_ex(pldata, 0, "licBoat");
		pData[playerid][pLicenses][LIC_WEAP] = sql_get_field_assoc_int_ex(pldata, 0, "licWeap");

		pData[playerid][pUnemployment] = sql_get_field_assoc_int_ex(pldata, 0, "unemployment");
		pData[playerid][pArmyTime] = sql_get_field_assoc_int_ex(pldata, 0, "armytime");
		pData[playerid][pArmyRank] = sql_get_field_assoc_int_ex(pldata, 0, "armyrank");
		pData[playerid][pDrunk] = sql_get_field_assoc_int_ex(pldata, 0, "drunk");
		pData[playerid][pZakon] = sql_get_field_assoc_int_ex(pldata, 0, "zakon");
		pData[playerid][pPick] = sql_get_field_assoc_int_ex(pldata, 0, "pick");
		pData[playerid][pJimmy] = sql_get_field_assoc_int_ex(pldata, 0, "jimmy");
		pData[playerid][pBCTime] = sql_get_field_assoc_int_ex(pldata, 0, "bctime");
		pData[playerid][pReturnMoney] = sql_get_field_assoc_int_ex(pldata, 0, "returnmoney");
		pData[playerid][pUpgrade][0] = sql_get_field_assoc_int_ex(pldata, 0, "upgrade1");
		pData[playerid][pUpgrade][1] = sql_get_field_assoc_int_ex(pldata, 0, "upgrade2");
		pData[playerid][pTextType] = sql_get_field_assoc_int_ex(pldata, 0, "table");
		pData[playerid][pMedCard] = sql_get_field_assoc_int_ex(pldata, 0, "medkart");
		pData[playerid][pFight] = sql_get_field_assoc_int_ex(pldata, 0, "fight");
		pData[playerid][pSkin2] = sql_get_field_assoc_int_ex(pldata, 0, "skin2");
		pData[playerid][pCodeIP] = sql_get_field_assoc_int_ex(pldata, 0, "codeip");

		pData[playerid][pRation] = sql_get_field_assoc_int_ex(pldata, 0, "racia");

		pData[playerid][pJailKey] = sql_get_field_assoc_int_ex(pldata, 0, "jailkey");
		pData[playerid][pHDrugs] = sql_get_field_assoc_int_ex(pldata, 0, "hdrugs");
		pData[playerid][pSmoke] = sql_get_field_assoc_int_ex(pldata, 0, "smoke");
		pData[playerid][pFWarn] = sql_get_field_assoc_int_ex(pldata, 0, "fwarn");
		pData[playerid][pKlist] = sql_get_field_assoc_int_ex(pldata, 0, "klist");
		sql_get_field_assoc_ex(pldata, 0, "mob", pData[playerid][pMob], 32);
		pData[playerid][pLmt] = sql_get_field_assoc_int_ex(pldata, 0, "lmt");
		sql_get_field_assoc_ex(pldata, 0, "blist", pData[playerid][pBlack]);
		sql_get_field_assoc_ex(pldata, 0, "blist2", pData[playerid][pBlack2]);

		sql_get_field_assoc_ex(pldata, 0, "jskills", pData[playerid][pJSkills]);

		sql_get_field_assoc_ex(pldata, 0, "wantedi", pData[playerid][pWantedinf]);

		pData[playerid][pAdver] = sql_get_field_assoc_int_ex(pldata, 0, "adver");
		pData[playerid][pAdver2] = sql_get_field_assoc_int_ex(pldata, 0, "adver2");
		pData[playerid][pAdver3] = sql_get_field_assoc_int_ex(pldata, 0, "adver3");

		pData[playerid][pTurma] = sql_get_field_assoc_int_ex(pldata, 0, "turma");
		pData[playerid][pTurmaraz] = sql_get_field_assoc_int_ex(pldata, 0, "turmaraz");

 		pData[playerid][pMobBonus] = sql_get_field_assoc_int_ex(pldata, 0, "mobbonus");
		pData[playerid][pHospital] = sql_get_field_assoc_int_ex(pldata, 0, "hospital");

		pData[playerid][pGolos] = sql_get_field_assoc_int_ex(pldata, 0, "golos");

		pTemp[playerid][pHealing] = sql_get_field_assoc_int_ex(pldata, 0, "punishes");
		pData[playerid][pMask] = sql_get_field_assoc_int_ex(pldata, 0, "armytime");

	 	pData[playerid][pRacket] = sql_get_field_assoc_int_ex(pldata, 0, "racket");
		pData[playerid][pRacketFr] = sql_get_field_assoc_int_ex(pldata, 0, "racketfr");
		pData[playerid][pRacketDay] = sql_get_field_assoc_int_ex(pldata, 0, "racketday");
		pData[playerid][pCase] = sql_get_field_assoc_int_ex(pldata, 0, "pcase");


		pData[playerid][pOnlineDay1] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay1");
		pData[playerid][pOnlineDay2] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay2");
		pData[playerid][pOnlineDay3] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay3");
		pData[playerid][pOnlineDay4] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay4");
		pData[playerid][pOnlineDay5] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay5");
		pData[playerid][pOnlineDay6] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay6");
		pData[playerid][pOnlineDay7] = sql_get_field_assoc_int_ex(pldata, 0, "pOnlineDay7");

		pData[playerid][pMech] = sql_get_field_assoc_int_ex(pldata, 0, "mech");

		pData[playerid][pBus] = sql_get_field_assoc_int_ex(pldata, 0, "bus");

		pData[playerid][pMechOwnerID] = sql_get_field_assoc_int_ex(pldata, 0, "pMechOwnerID");
		pData[playerid][pMechOwnerLowID] = sql_get_field_assoc_int_ex(pldata, 0, "pMechOwnerLowID");

		pData[playerid][pParkingVehicle] = sql_get_field_assoc_int_ex(pldata, 0, "pParkingVehicle");

		pTemp[playerid][pAdminExp] = sql_get_field_assoc_int_ex(pldata, 0, "atime");

		pTemp[playerid][pPayDays] = sql_get_field_assoc_int_ex(pldata, 0, "paydays");

		phone_background_img[playerid] = sql_get_field_assoc_int_ex(pldata, 0, "phone_background_img");

		pData[playerid][pTester] = sql_get_field_assoc_int_ex(pldata, 0, "tester_status");

		pData[playerid][promocode_bonus_active] = sql_get_field_assoc_int_ex(pldata, 0, "promocode_bonus_active");


		pData[playerid][pRemComplect] = sql_get_field_assoc_int_ex(pldata, 0, "pRemComplect");

		pData[playerid][pQuestShow] = sql_get_field_assoc_int_ex(pldata, 0, "pQuestShow");

		pData[playerid][pCountSnow] = sql_get_field_assoc_int_ex(pldata, 0, "pCountSnow");

		pData[playerid][pCar] = sql_get_field_assoc_int_ex(pldata, 0, "car");

		pTemp[playerid][crash_pos_x] = sql_get_field_assoc_float_ex(pldata, 0, "crash_exit_pos_x");
		pTemp[playerid][crash_pos_y] = sql_get_field_assoc_float_ex(pldata, 0, "crash_exit_pos_y");
		pTemp[playerid][crash_pos_z] = sql_get_field_assoc_float_ex(pldata, 0, "crash_exit_pos_z");

		pTemp[playerid][crash_virtual_world] = sql_get_field_assoc_int_ex(pldata, 0, "crash_virtual_world");

		Iter_Add(logged_players, playerid);

		statistic_player_play_hour++;
		statistic_player_play_day++;

		UpdatePlayerData(playerid, "status", 1);

		SetLevelProgresss(playerid, pData[playerid][pExp], (pData[playerid][pLevel] * 6));


		if(!pData[playerid][pInventoryLevel])
		{
			pData[playerid][pInventoryLevel] = 1;
			UpdatePlayerData(playerid,"pInventoryLevel", pData[playerid][pInventoryLevel]);
		}

		if(pData[playerid][pHospital] != 0)
		{
			pTemp[playerid][pInHospital] = true;
		}

		if(pData[playerid][pMech] != -1)
		{

			mechanic_job_initialization(playerid);
		}

		if(pData[playerid][pTaxiOwnerID] != -1)
		{
			pData[playerid][pTaxi] = pData[playerid][pTaxiOwnerID];
			UpdatePlayerData(playerid,"pTaxi", pData[playerid][pTaxi]);
		}

		if(pData[playerid][pTruckerOwnerID] != -1)
		{
			pData[playerid][pTrucker] = pData[playerid][pTruckerOwnerID];
			pData[playerid][pTruckerRank] = 3;
			pData[playerid][pJob] = SKILL_TRUCKER;
			UpdatePlayerData(playerid,"pTrucker", pData[playerid][pTrucker]);
			UpdatePlayerData(playerid,"pTruckerRank", pData[playerid][pTruckerRank]);
			UpdatePlayerData(playerid, "job", pData[playerid][pJob]);
		}

		SetTimeoutChatDissappearTime(playerid, 750, 25500);


		if(pData[playerid][pLevel] >= 4 && pData[playerid][pPromoActiveID] != -1 && !pData[playerid][promocode_bonus_active] && SERVER_SELECT_MODE == 1)
		{
			pData[playerid][promocode_bonus_active] = 1;
			UpdatePlayerData(playerid, "promocode_bonus_active", pData[playerid][promocode_bonus_active]);
			give_money(playerid, 25000, "Активация промокода");
			SendInf(playerid, "Вы получили бонус в 25 тыс. рублей за активацию промокода друга!");


		}

		new ipadd[16];
		GetPlayerIp(playerid, ipadd, 16);

		sql_get_field_assoc_ex(pldata, 0, "skills", pData[playerid][pSkills]);

		new tmp_weap_1, tmp_weap_2, tmp_weap_3, tmp_weap_4, tmp_weap_5, tmp_ammo_1, tmp_ammo_2, tmp_ammo_3, tmp_ammo_4, tmp_ammo_5;

		sql_get_field_assoc_ex(pldata, 0, "weapons", String512, 45);
		sscanf(String512, "p<,>ddddd", tmp_weap_1, tmp_weap_2, tmp_weap_3, tmp_weap_4, tmp_weap_5);

		SetPVarIntNew(playerid, "tmp_weap_1", tmp_weap_1); SetPVarIntNew(playerid, "tmp_weap_2", tmp_weap_2); SetPVarIntNew(playerid, "tmp_weap_3", tmp_weap_3);
		SetPVarIntNew(playerid, "tmp_weap_4", tmp_weap_4); SetPVarIntNew(playerid, "tmp_weap_5", tmp_weap_5);

		sql_get_field_assoc_ex(pldata, 0, "ammo", String512, 70);
		sscanf(String512, "p<,>ddddd", tmp_ammo_1, tmp_ammo_2, tmp_ammo_3, tmp_ammo_4, tmp_ammo_5);

		SetPVarIntNew(playerid, "tmp_ammo_1", tmp_ammo_1); SetPVarIntNew(playerid, "tmp_ammo_2", tmp_ammo_2); SetPVarIntNew(playerid, "tmp_ammo_3", tmp_ammo_3);
		SetPVarIntNew(playerid, "tmp_ammo_4", tmp_ammo_4); SetPVarIntNew(playerid, "tmp_ammo_5", tmp_ammo_5);


		sql_get_field_assoc_ex(pldata, 0, "job_skill", String512, MAX_JOB_SKILLS * 15);
		sscanf(String512, "p<,>ddddddddddddd", pData[playerid][job_skill][SKILL_MINER], pData[playerid][job_skill][SKILL_WOODCUTTER],
			pData[playerid][job_skill][SKILL_BUS_DRIVER], pData[playerid][job_skill][SKILL_TRUCKER], pData[playerid][job_skill][SKILL_FACTORY], pData[playerid][job_skill][SKILL_TAXI],
			pData[playerid][job_skill][SKILL_MECHANIC], pData[playerid][job_skill][SKILL_SNOWWORK], pData[playerid][job_skill][SKILL_FIRE], pData[playerid][job_skill][SKILL_BANK],
			pData[playerid][job_skill][SKILL_PICKER], pData[playerid][job_skill][SKILL_FISHER]);

		sql_get_field_assoc_ex(pldata, 0, "settings", String512, 6 * 5);
		sscanf(String512, "p<,>dddddddddddddd", pData[playerid][pSettings][0], pData[playerid][pSettings][1], pData[playerid][pSettings][2], pData[playerid][pSettings][3],
		pData[playerid][pSettings][4], pData[playerid][pSettings][5], pData[playerid][pSettings][6], pData[playerid][pSettings][7], pData[playerid][pSettings][8], pData[playerid][pSettings][9],
		pData[playerid][pSettings][10], pData[playerid][pSettings][11], pData[playerid][pSettings][12], pData[playerid][pSettings][13]);

		sql_get_field_assoc_ex(pldata, 0, "pSlotItem", String512, 6 * 5);
		sscanf(String512, "p<,>ddddd", pData[playerid][pSlotItem][0], pData[playerid][pSlotItem][1], pData[playerid][pSlotItem][2], pData[playerid][pSlotItem][3],
		pData[playerid][pSlotItem][4], pData[playerid][pSlotItem][5]);

		sql_get_field_assoc_ex(pldata, 0, "pQuestStandart", String512, 6 * 15);
		sscanf(String512, "p<,>dddddddddddddddddddd", pData[playerid][pQuestStandart][0], pData[playerid][pQuestStandart][1], pData[playerid][pQuestStandart][2], pData[playerid][pQuestStandart][3],
		pData[playerid][pQuestStandart][4], pData[playerid][pQuestStandart][5], pData[playerid][pQuestStandart][6], pData[playerid][pQuestStandart][7], pData[playerid][pQuestStandart][8]
		, pData[playerid][pQuestStandart][9], pData[playerid][pQuestStandart][10], pData[playerid][pQuestStandart][11], pData[playerid][pQuestStandart][12], pData[playerid][pQuestStandart][13]
		, pData[playerid][pQuestStandart][14], pData[playerid][pQuestStandart][15], pData[playerid][pQuestStandart][16], pData[playerid][pQuestStandart][17], pData[playerid][pQuestStandart][18]
		, pData[playerid][pQuestStandart][19], pData[playerid][pQuestStandart][20]);


		sql_get_field_assoc_ex(pldata, 0, "pQuestNewYear", String512, 6 * 15);
		sscanf(String512, "p<,>dddddddd", pData[playerid][pQuestNewYear][0], pData[playerid][pQuestNewYear][1], pData[playerid][pQuestNewYear][2], pData[playerid][pQuestNewYear][3],
		pData[playerid][pQuestNewYear][4], pData[playerid][pQuestNewYear][5], pData[playerid][pQuestNewYear][6], pData[playerid][pQuestNewYear][7]);


		sql_free_result(pldata);

		if(pData[playerid][pFamily] != -1)
		{
			if(!pData[playerid][pFamilyRank])
			{
				pData[playerid][pFamilyRank] = 1;
			}
			create_family_label_text(playerid);
		}

		family_war_connect(playerid);

		SetSpawnInfo(playerid, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);

		if(pData[playerid][pSettings][5] == 1)
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_VOICE, HUD_ELEMENT_SHOW);
		}
		else
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_VOICE, HUD_ELEMENT_HIDE);
		}

		if(pData[playerid][pSettings][7] == 1)
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_SHOW);
		}
		else
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_HIDE);
		}

		if(pData[playerid][pSettings][8] == 1)
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_MAP, HUD_ELEMENT_SHOW);
		}
		else
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_MAP, HUD_ELEMENT_HIDE);
		}

		if(pData[playerid][pSettings][9] == 1)
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_BUTTONS, HUD_ELEMENT_SHOW);
		}
		else
		{
			TogglePlayerHudElement(playerid, HUD_ELEMENT_BUTTONS, HUD_ELEMENT_HIDE);
		}


		if(pData[playerid][pSettings][11] == 1)
		{
			TogglePlayerAllHudElements(playerid, HUD_ELEMENT_SHOW);
		}
		else
		{
			TogglePlayerAllHudElements(playerid, HUD_ELEMENT_HIDE);
		}



		if(pData[playerid][pHouse] == -1)
		{
			vehicle_player_max_user[playerid] = 1;
		}
		else if(pData[playerid][pHouse] != -1 && House[pData[playerid][pHouse]][house_garage_class] == 0)
		{
			vehicle_player_max_user[playerid] = 1;
		}
		else if(pData[playerid][pHouse] != -1 && House[pData[playerid][pHouse]][house_garage_class] == 1)
		{
			vehicle_player_max_user[playerid] = 2;
		}
		else if(pData[playerid][pHouse] != -1 && House[pData[playerid][pHouse]][house_garage_class] == 2)
		{
			vehicle_player_max_user[playerid] = 4;
		}
		else if(pData[playerid][pHouse] != -1 && House[pData[playerid][pHouse]][house_garage_class] == 4)
		{
			vehicle_player_max_user[playerid] = 8;
		}

		admin_login(playerid);

		new PlayerSerial[64];
		gpci(playerid, PlayerSerial, sizeof(PlayerSerial));
 		sql_escape_string(zConn, PlayerSerial, PlayerSerial, 64);

		new player_ip[16];
		GetPlayerIp(playerid, player_ip, 16);
 		sql_escape_string(zConn, player_ip, player_ip, 16);

		new date[12];
		new y,m,ddd;
		getdate(y,m,ddd);
 		format(date,12,"%d-%d-%d",y,m,ddd);
 		sql_escape_string(zConn, date, date, 12);
		format(String256, sizeof(String256), "UPDATE `accounts` SET `LastIP` = '%s', `hash` = '%s', `datas` = '%s' WHERE `nickname` = '%s'", player_ip, PlayerSerial,date, pData[playerid][pNickname]);
 		sql_queryEx(zConn, String256, QUERY_THREADED);

   		GivePlayerWeaponEx(playerid, GetPVarIntNew(playerid, "tmp_weap_1"), GetPVarIntNew(playerid, "tmp_ammo_1"));
		GivePlayerWeaponEx(playerid, GetPVarIntNew(playerid, "tmp_weap_2"), GetPVarIntNew(playerid, "tmp_ammo_2"));
		GivePlayerWeaponEx(playerid, GetPVarIntNew(playerid, "tmp_weap_3"), GetPVarIntNew(playerid, "tmp_ammo_3"));
		GivePlayerWeaponEx(playerid, GetPVarIntNew(playerid, "tmp_weap_4"), GetPVarIntNew(playerid, "tmp_ammo_4"));
		GivePlayerWeaponEx(playerid, GetPVarIntNew(playerid, "tmp_weap_5"), GetPVarIntNew(playerid, "tmp_ammo_5"));


		if(pData[playerid][pFraction] == 12) pTemp[playerid][PDSkip] = 1;
		if(pData[playerid][pAdmin] && pData[playerid][pAdmin] < 8 && pData[playerid][pFraction])
		{
			pData[playerid][pFraction] = 0;
			SCM(playerid, COLOR_GREY, "Вы были автоматически уволены из организации, т.к. вы Администратор");
		}


		sscanf(pData[playerid][pSkills], "p<,>a<i>[6]",pTemp[playerid][pGunSkill]); //Считываем скилы
		sscanf(pData[playerid][pBlack], "p<,>a<i>[5]",pData[playerid][pBlackList]); //Считываем чс
		sscanf(pData[playerid][pBlack2], "p<,>a<i>[15]",pData[playerid][pBlackListNew]); //Считываем чс
		sscanf(pData[playerid][pJSkills], "p<,>a<i>[6]",pData[playerid][pJSkill]); //Считываем чс

		sscanf(pData[playerid][pWantedinf], "p<,>a<i>[6]",pData[playerid][pWantedi]); //Считываем чс

		SetPlayerSkills(playerid);
		pTemp[playerid][pLogin4] = false;
		UpdatePlayerData(playerid,"status",1);

		show_hud_hungry(playerid);
		show_info_gui(playerid, TEXTDRAW_SHOW);

		new warn = pData[playerid][pWarn];
		if(warn && warn <= gCurDay)
		{
			pData[playerid][pWarn] = 0;
			pData[playerid][pWarnc] = 0;
			UpdatePlayerData(playerid,"warn",0);
			UpdatePlayerData(playerid,"warnc",0);
			SendInf(playerid, "Срок всех варнов истёк");
		}

		load_player_inventory(playerid);
		check_hunter_license(playerid);
		load_player_fish_statistic(playerid);

		ApplyAnimation(playerid,"DEALER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"LOWRIDER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SUNBATHE","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"Freeweights","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SPRAYCAN","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"ON_LOOKERS","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"PLAYIDLES","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SHOP","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"MEDIC","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"GRAVEYARD","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"INT_OFFICE","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BAR","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"KISSING","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"POLICE","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"COP_AMBIENT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"INT_HOUSE","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CRIB","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"VAN","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"RYDER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_open",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_getout_LHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_getout_RHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_open_RHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_getin_LHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_getin_RHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_pullout_LHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BUS","BUS_close",0.0,0,0,0,0,0);

		ApplyAnimation(playerid,"VAN","VAN_open_back_RHS",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"VAN","VAN_open_back_LHS",0.0,0,0,0,0,0);

		ApplyAnimation(playerid,"BD_FIRE","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BEACH","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"benchpress","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BOMBER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CAR","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"COP_AMBIENT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CRACK","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CARRY","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"DANCING","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"DEALER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"FAT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"FOOD","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"GANGS","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"GHANDS","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"GRAFFITI","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"GRAVEYARD","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"MISC","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SNM","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"VENDING","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"OTB","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SMOKING","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SHOP","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"RIOT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CAR_CHAT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CAR_CHAT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"FAT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"KNIFE","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"GHETTO_DB","GDB_Car_SMO",0.0,0,0,0,0,0); //
		ApplyAnimation(playerid,"SNIPER","null",0.0,0,0,0,0,0); //


		UpdateDonate(playerid);
		UpdatePlayerData(playerid, "online", 1);
		LoadPBook(pData[playerid][pMysqlID] ,playerid);

		load_setting_voice_player(playerid);

		check_status_quest_start(playerid, 0);
		check_status_quest_start(playerid, 2);
		check_status_quest_start(playerid, 3);
		check_status_quest_start(playerid, 4);
		check_status_quest_start(playerid, 5);
		check_status_quest_start(playerid, 6);
		check_status_quest_start(playerid, 7);
		check_status_quest_start(playerid, 8);
		check_status_quest_start(playerid, 9);
		check_status_quest_start(playerid, 10);
		check_status_quest_start(playerid, 11);
		check_status_quest_start(playerid, 12);
		check_status_quest_start(playerid, 13);

		if(pData[playerid][pMoney] < 0)
		{
			//pData[playerid][pMoney] = 0;

			SetPlayerData(playerid, pMoney, 0);

			ResetPlayerMoney(playerid);
			GivePlayerMoney(playerid, pData[playerid][pMoney]);
			UpdatePlayerData(playerid,"money",pData[playerid][pMoney]);
		}

		if(pData[playerid][pAdmin] > 0) {
			// if(!strcmp(GetPlayerName(playerid), "Weikton_Weikton", true))
			//    SetPlayerSkin(playerid, 0);

            SetPlayerVirtualWorldEx(playerid, 0);
            //SetPlayerInterior(playerid, 2);
			SetPlayerPosDebug(playerid, ADMZONE_POS);
			set_player_skin(playerid, pData[playerid][pSkin]);
			
		//	SendClientMessage(playerid, COLOR_WHITE, "%s (%d уровень) добро пожаловать, рады снова видеть вас на "cBLUE""SERVER_NAME"!", GetPlayerName(playerid), pData[playerid][pAdmin]);
		//	SendInf(playerid, "Вам было установлено появление в админ-зоне");
		} else {
			new frac, house;

			if(pData[playerid][pFlate] != -1 ||
					pData[playerid][pFlateRent] != -1 ||
		  	 	 		pData[playerid][pHotelRoom] != -1 ||
		   	 	 			pData[playerid][pHouse] != -1 ||
		     	 				pData[playerid][pHouseRent] != -1)
				house = 1;
			else
				house = 0;

			if(!pData[playerid][pFraction])
				frac = 0;
			else
				frac = 1;

			WN_showSelectSpawn(playerid, house, frac);
		}
	}
	else
	{
		new player_name[24];
		GetPlayerName(playerid, player_name, 24);
		new File:file = fopen("load_fails.ini", io_append);
		format(String512, sizeof(String512), "\nFail loading data. Account %s is not exist", player_name);
		fwrite(file, String512), fclose(file);

		print("LOAD PLAY DATA DEBUG KICK FAIL");
	}

	return 1;
}


stock GetPlayerMoneyEx(playerid)
{
 	return pData[playerid][pMoney];
}


stock show_player_udost(playerid, actplayerid)
{
	if(IsACop(playerid) || pData[playerid][pFraction] == 12 || pData[playerid][pFraction] == 11 || pData[playerid][pFraction] == 2 && pData[playerid][pSubfraction] == 2 || pData[playerid][pFraction] == 2 && pData[playerid][pSubfraction] == 1)
	{
		new army[35],jobname[42],jobstat[42],classname[42],housenumber[42];

		format(String1024, sizeof(String1024), "");

		if(pData[playerid][pFraction] && pData[playerid][pRank] > 0)
		{
			new fractionid = pData[playerid][pFraction];
			new rank = pData[playerid][pRank];
			if(fractionid == 11 && !pData[playerid][pSubfraction] && rank <= 9)
			{
				strcat(jobname,gFractionName[fractionid-1]);
				strcat(jobstat, gPrezRankName[rank-1]);
	  		}
			else if(fractionid == 8 && pData[playerid][pSubfraction] == 3 && rank <= 12)
			{
				strcat(jobname,gFractionName[fractionid-1]);
				strcat(jobstat, gVmfRankName[rank-1]);
			}
			else if(fractionid == 12)
			{
				new randk = random(3);
				if( GetPVarIntNew(playerid,"maskedfr") > 0 )
				{
					strcat(jobstat,gFractionRankName[GetPVarIntNew(playerid,"maskedfr")-1][1+randk]);
		  			strcat(jobname,gFractionName[GetPVarIntNew(playerid,"maskedfr")-1]);	//}
					format(String256, sizeof(String256), "Маскировка: Вы представились как %s фракции %s",gFractionRankName[GetPVarIntNew(playerid,"maskedfr")-1][1+randk],gFractionName[GetPVarIntNew(playerid,"maskedfr")-1] );
					SCM(playerid,-1,String256);
				}
				else
				{
					strcat(jobname,gFractionName[fractionid-1]);
					strcat(jobstat,gFractionRankName[fractionid-1][rank-1]);
				}
			}
			else
			{
				strcat(jobname,gFractionName[fractionid-1]);	//}
				strcat(jobstat,gFractionRankName[fractionid-1][rank-1]);
			}
		}
		else
		{
			jobname = "Отсутствует";
			jobstat = "Отсутствует";
		}

		format(String1024,sizeof(String1024),""cWH"ДАННЫЕ:\n\
			Имя: "cBLUE"%s\n\
			"cWH"Возраст: "cBLUE"%d\n\
			"cWH"Лет в государстве: "cBLUE"%d",pData[playerid][pNickname],pData[playerid][pAge],pData[playerid][pLevel]);

		format(String1024,sizeof(String1024),"%s\n\n"cWH"ТРУДОВОЕ УСТРОЙСТВО:\n\
			Место работы: "cBLUE"%s\n\
			"cWH"Должность: "cBLUE"%s",String1024,jobname,jobstat);

	 	SPD(actplayerid,dMes,0,""cBLUE"Удостоверение",String1024,"Закрыть","");

		new mese[64];
		format(mese,sizeof(mese),"достал(а) удостоверение и рассматривает его");
		MeAction( playerid ,mese);
	}
	else
	{
		return SendErr(playerid, "Вам недоступна данная команда!");
	}
 	return true;
}


stock show_player_pass(playerid, actplayerid)
{

	new army[35],jobname[42],jobstat[42],classname[42],housenumber[42];

	if(pData[playerid][pHouse] == -1 && pData[playerid][pFlate] == -1 && pData[playerid][pHotelRoom] != -1)
	{
		format(housenumber,40,"Номер в отеле: "cBLUE"№%d",pData[playerid][pHotelRoom]+1);

		new
			hotel_id = hotel_room[pData[playerid][pHotelRoom]][hotel_h_id];

		format(classname,40,"Отель: "cBLUE"%s",hotel[hotel_id][hotel_name]+1);
	}
	else if(pData[playerid][pHouse] == -1 && pData[playerid][pFlate] != -1 && pData[playerid][pHotelRoom] == -1)
	{
		format(housenumber,40,"Квартира: "cBLUE"№%d",pData[playerid][pFlate]+1);
	}
	else if(pData[playerid][pHouse] != -1 && pData[playerid][pFlate] == -1 && pData[playerid][pHotelRoom] == -1)
	{
		format(housenumber,40,"Дом: "cBLUE"№%d",pData[playerid][pHouse]+1);
	}
	else
	{
		format(housenumber,40,""cBLUE"Отсутствует");
		format(classname,40,""cBLUE"Отсутствует");
	}

	format(String1024, sizeof(String1024), "");

	if(pData[playerid][pFraction] && pData[playerid][pRank] > 0)
	{
		new fractionid = pData[playerid][pFraction];
		new rank = pData[playerid][pRank];
		if(fractionid == 11 && !pData[playerid][pSubfraction] && rank <= 9)
		{
			strcat(jobname,gFractionName[fractionid-1]);
			strcat(jobstat, gPrezRankName[rank-1]);
  		}
		else if(fractionid == 8 && pData[playerid][pSubfraction] == 3 && rank <= 12)
		{
			strcat(jobname,gFractionName[fractionid-1]);
			strcat(jobstat, gVmfRankName[rank-1]);
		}
		else if(fractionid == 12)
		{
			new randk = random(3);
			if( GetPVarIntNew(playerid,"maskedfr") > 0 )
			{
				strcat(jobstat,gFractionRankName[GetPVarIntNew(playerid,"maskedfr")-1][1+randk]);
	  			strcat(jobname,gFractionName[GetPVarIntNew(playerid,"maskedfr")-1]);	//}
				format(String256, sizeof(String256), "Маскировка: Вы представились как %s фракции %s",gFractionRankName[GetPVarIntNew(playerid,"maskedfr")-1][1+randk],gFractionName[GetPVarIntNew(playerid,"maskedfr")-1] );
				SCM(playerid,-1,String256);
			}
			else
			{
				strcat(jobname,gFractionName[fractionid-1]);
				strcat(jobstat,gFractionRankName[fractionid-1][rank-1]);
			}
		}
		else
		{
			strcat(jobname,gFractionName[fractionid-1]);	//}
			strcat(jobstat,gFractionRankName[fractionid-1][rank-1]);
		}
	}
	else
	{
		jobname = "Отсутствует";
		jobstat = "Отсутствует";
	}

	if(pData[playerid][pArmyRank] > 0)
	{
		if(pData[playerid][pFraction] == 8 && pData[playerid][pSubfraction] == 3 && pData[playerid][pArmyRank] <= 12)
		{
			format(army,35,""cBLUE"%s",gVmfRankName [pData[playerid][pArmyRank]-1]);
		}
		else
		{
			format(army,35,""cBLUE"%s",gFractionRankName[7][pData[playerid][pArmyRank]-1]);
		}
	}
	else format(army,35,""cLRED" ---");
	new wanted = 0;
	if(pData[playerid][pWanted]) wanted = pData[playerid][pWanted];

	format(String1024,sizeof(String1024),""cWH"ДАННЫЕ:\n\
		Имя: "cBLUE"%s\n\
		"cWH"Возраст: "cBLUE"%d\n\
		"cWH"Лет в государстве: "cBLUE"%d\n\
		"cWH"Законопослушность: "cBLUE"%d\n\
		"cWH"Уровень розыска: "cBLUE"%d\n\
		"cWH"Воинский учет: %s",pData[playerid][pNickname],pData[playerid][pAge],pData[playerid][pLevel],pData[playerid][pZakon],wanted,army);

	format(String1024,sizeof(String1024),"%s\n\n"cWH"ПРОПИСКА:\n%s\n"cWH"%s",String1024,classname, housenumber);

	format(String1024,sizeof(String1024),"%s\n\n"cWH"ТРУДОВОЕ УСТРОЙСТВО:\n\
		Место работы: "cBLUE"%s\n\
		"cWH"Должность: "cBLUE"%s",String1024,jobname,jobstat);

	if(pData[playerid][pMarried] != 0 && pData[playerid][pSex] == 1)
	{
		format(String1024,sizeof(String1024),"%s\n\n"cWH" СЕМЕЙНОЕ ПОЛОЖЕНИЕ:\n\
			Женат на: "cBLUE"%s",String1024, pData[playerid][pDivorce] );
	}
	else if(pData[playerid][pMarried] != 0 && pData[playerid][pSex] == 2)
	{
		format(String1024,sizeof(String1024),"%s\n\n"cWH" СЕМЕЙНОЕ ПОЛОЖЕНИЕ:\n\
			Замужем за: "cBLUE"%s",String1024, pData[playerid][pDivorce] );
	}

 	SPD(actplayerid,dMes,0,""cBLUE"Паспорт",String1024,"Закрыть","");

	new mese[64];
	format(mese,sizeof(mese),"достал(а) паспорт и рассматривает его");
	MeAction( playerid ,mese);

 	return true;
}

stock ShowPassFbi(playerid,actplayerid)
{

}
stock MeActionEx(playerid,action[],Float:distance = 13.0)
{
	if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;


	new mes[128];
	format(mes,sizeof(mes),"%s %s",pData[playerid][pNickname],action);
   	SetPlayerChatBubble(playerid, action ,CPINK,1.2,9000);

	new pworld = GetPlayerVirtualWorld(playerid);
 	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;
  		if(GetPlayerDistanceToPlayer(playerid,i) < distance && GetPlayerVirtualWorld(i) == pworld) {
		SCM(i,CPINK,mes);
		}
	}
	return 1;
}


stock MeAction(playerid,action[],Float:distance = 13.0)
{
 	new mes[128];
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	format(mes,sizeof(mes),"%s %s",pData[playerid][pNickname],action);

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;

	new pworld = GetPlayerVirtualWorld(playerid);
	foreach(new i: logged_players)
 	{
		if(!PlayerConnect[i]) continue;
  		if(GetPlayerDistanceToPlayer(playerid,i) < distance && GetPlayerVirtualWorld(i) == pworld) {
		SCM(i,CPINK,mes);
		}
	}
	return 1;
}


stock MeActionExes(playerid,action[],Float:distance = 7.0)
{
	if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;


	new mes[128];
	format(mes,sizeof(mes),"%s",action);
   	SetPlayerChatBubble(playerid, action ,CPINK,1.2,9000);

	new pworld = GetPlayerVirtualWorld(playerid);
 	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;
 		if(GetPlayerDistanceToPlayer(playerid,i) < distance && GetPlayerVirtualWorld(i) == pworld) {
		SCM(i,CPINK,mes);
		}
	}
	return 1;
}

stock ToDoAction(playerid,action[],action2[],Float:distance = 13.0)
{
	if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;

	new mes[128];
	format(mes,sizeof(mes),"- %s{DD90FF} - сказал %s, %s",action,pData[playerid][pNickname],action2);
	new pworld = GetPlayerVirtualWorld(playerid);
	foreach(new i: logged_players)
 	{
		if(!PlayerConnect[i]) continue;
		if(GetPlayerDistanceToPlayer(playerid,i) > distance || GetPlayerVirtualWorld(i) != pworld) continue;
		SCM(i,0xFFFFFFFF,mes);
	}
	return 1;
}



stock DoAction(playerid,action[],Float:distance = 13.0)
{
	if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;

	new mes[128];
	format(mes,sizeof(mes),"%s (%s)",action,pData[playerid][pNickname]);
	new pworld = GetPlayerVirtualWorld(playerid);
	foreach(new i: logged_players)
 	{
		if(!PlayerConnect[i]) continue;
		if(GetPlayerDistanceToPlayer(playerid,i) > distance || GetPlayerVirtualWorld(i) != pworld) continue;
		SCM(i,CPINK,mes);
	}
	return 1;
}

stock TryAction(playerid,action[],Float:distance = 13.0)
{
	if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;

	new mes[144], luck[24], is_try = random(2);
	if(is_try == 1) strcat(luck, ""cGR"Удачно");
	else strcat(luck, ""cLRED"Неудачно");

	new pworld = GetPlayerVirtualWorld(playerid);
	format(mes,sizeof(mes),"%s %s | %s", pData[playerid][pNickname], action, luck);
 	foreach(new i: logged_players)
 	{
		if(!PlayerConnect[i]) continue;
 		if(GetPlayerDistanceToPlayer(playerid,i) > distance) continue;
		if(GetPlayerVirtualWorld(i) != pworld) continue;
		SCM(i, CPINK, mes);
	}
	return is_try;
}






stock TryAction2(playerid,action[],Float:distance = 13.0)
{
 	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;

	new mes[144], luck[24], is_try = random(5);
	if(is_try == 1) strcat(luck, ""cGR"Удачно");
	else strcat(luck, ""cLRED"Неудачно");
	if(is_try != 1) {
		is_try = 0;
	}
	new pworld = GetPlayerVirtualWorld(playerid);
	format(mes,sizeof(mes),"%s %s | %s", pData[playerid][pNickname], action, luck);
 	foreach(new i: logged_players)
 	{
		if(!PlayerConnect[i]) continue;
		if(GetPlayerDistanceToPlayer(playerid,i) > distance) continue;
		if(GetPlayerVirtualWorld(i) != pworld) continue;
		SCM(i, CPINK, mes);
	}
	return is_try;
}








stock Speech(playerid,text[],language,Float:distance = 13.0,anim = 1,color = 1)
{
	new string[64];
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;

	if(pData[playerid][pBilet] == 102)
	{
		for(new di; di < strlen(text); di ++)
		{
			new randd = random(15);
			if(randd == 1) text[di] = 'к';
			if(randd == 2) text[di] = 'х';
		}

	}

	if(pData[playerid][pMut])
	{
		SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
		format(string,sizeof(string),"пытается что-то сказать",pData[playerid][pNickname]);
		SetPlayerChatBubble(playerid,string,CPINK,10.0,5000);
		MeAction(playerid,string);
		StopFlood[playerid] = gettime()+CHAT_INTERVAL+10;
		return 0;
	}
	if(pTemp[playerid][pMutM])
	{
		SendErr(playerid, "У Вас затычка во рту.");

		format(string,sizeof(string),"пытается что-то сказать",pData[playerid][pNickname]);
		SetPlayerChatBubble(playerid,string,CPINK,10.0,5000);
		MeAction(playerid,string);
		StopFlood[playerid] = gettime()+CHAT_INTERVAL+10;

		return 0;
	}
	if(GetString(text,")"))
	{
		format(string,sizeof(string),"улыбается",pData[playerid][pNickname]);
		MeAction(playerid,string);
		return false;
	}
	if(GetString(text,"))"))
	{
		format(string,sizeof(string),"смеётся",pData[playerid][pNickname]);
		MeAction(playerid,string);
		return false;
	}
	if(GetString(text,"("))
	{
		if(pData[playerid][pSex] == 2) {
		format(string,sizeof(string),"расстроилась",pData[playerid][pNickname]);
	 	}
	 	else{
		format(string,sizeof(string),"расстроился",pData[playerid][pNickname]);
		}
		MeAction(playerid,string);
		return false;
	}
	if(GetString(text,"(("))
	{
		if(pData[playerid][pSex] == 2)
		{
			format(string,sizeof(string),"сильно расстроилась",pData[playerid][pNickname]);
		}
		else
		{
			format(string,sizeof(string),"сильно расстроился",pData[playerid][pNickname]);
		}
		MeAction(playerid,string);
		return false;
	}


	if(pTemp[playerid][pControllable] && anim)
	{
		if(pTemp[playerid][pAnimation] == 0 && !GetPVarIntNew(playerid, "player_seat_down") && pTemp[playerid][pTazer] < 1 && pTemp[playerid][pHolder] == INVALID_PLAYER_ID && JobTimer[playerid] == -1 && pTemp[playerid][pWash] < 2)
		{
			ApplyAnimation(playerid,"PED","IDLE_CHAT",8.1,0,1,1,1,1);
			pTemp[playerid][pAnimationTime] = 2;

		}
	}
	new mes[250],mes2[64],langname[32];
	new mesid[250];
	if(language != LANG_ENGLISH)
	{
		switch(language)
		{
			case LANG_JAPAN: strcat(langname,"Японский");
			case LANG_ITALIAN: strcat(langname,"Итальянский");
			case LANG_PORTUGAL: strcat(langname,"Португальский");
			case LANG_FRENCH: strcat(langname,"Французский");
			case LANG_SPAIN: strcat(langname,"Испанский");
			case LANG_RUSSIAN: strcat(langname,"Русский");
		}
		format(mes,sizeof(mes),"%s [%s]: %s",pData[playerid][pNickname],langname,text);
		format(mesid,sizeof(mesid),"%s [%d] [%s]: %s",pData[playerid][pNickname],playerid,langname,text);
	}
	else
	{
		if(!IsPlayerInAnyVehicle(playerid))
		{
			if(pData[playerid][pFraction] > 0)
			{
				if(pTemp[playerid][pmaskedf] > 0)
				{
					switch(pTemp[playerid][pmaskedf])
					{
						case 1:
						{
							format(mes,sizeof(mes),"- "cGR"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- "cGR"%s[%d]:"cWH" %s",pData[playerid][pNickname],playerid, text);
						}
						case 2:
						{
							format(mes,sizeof(mes),"- {CC00FF}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {CC00FF}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 3:
						{
							format(mes,sizeof(mes),"- {6666FF}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {6666FF}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 4:
						{
							format(mes,sizeof(mes),"- {FBD400}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {FBD400}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 5:
						{
							format(mes,sizeof(mes),"- {00EEEE}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {00EEEE}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 6:
						{
							format(mes,sizeof(mes),"- {6300f8}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {6300f8}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 7:
						{
							format(mes,sizeof(mes),"- {9eff4f}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {9eff4f}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 8:
						{
							format(mes,sizeof(mes),"- {ff0000}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {ff0000}%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						default:
						{
							format(mes,sizeof(mes),"- "cWH"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- "cWH"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
					}
				}
				else
				{
					if(pTemp[playerid][odetcol] > 0)
					{
						format(mes,sizeof(mes),"- "cWH"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						format(mesid,sizeof(mesid),"- "cWH"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
					}
					else
					{


						format(mes,sizeof(mes),"- {%s}%s[%d]:"cWH" %s",GetColor(playerid), pData[playerid][pNickname], playerid, text);
						format(mesid,sizeof(mesid),"- {%s}%s[%d]:"cWH" %s",GetColor(playerid), pData[playerid][pNickname], playerid, text);
					}
				}
			}
			else
			{
				format(mes,sizeof(mes),"- "cWH"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
				format(mesid,sizeof(mesid),"- "cWH"%s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
			}
		}
		else
		{
			if(pData[playerid][pFraction] > 0)
			{
				if(pTemp[playerid][pmaskedf] > 0)
				{
					switch(pTemp[playerid][pmaskedf])
					{
						case 1:
						{
							format(mes,sizeof(mes),"- "cGR"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- "cGR"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname],playerid, text);
						}
						case 2:
						{
							format(mes,sizeof(mes),"- {CC00FF}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {CC00FF}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 3:
						{
							format(mes,sizeof(mes),"- {6666FF}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {6666FF}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 4:
						{
							format(mes,sizeof(mes),"- {FBD400}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {FBD400}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 5:
						{
							format(mes,sizeof(mes),"- {00EEEE}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {00EEEE}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 6:
						{
							format(mes,sizeof(mes),"- {6300f8}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {6300f8}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 7:
						{
							format(mes,sizeof(mes),"- {9eff4f}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {9eff4f}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						case 8:
						{
							format(mes,sizeof(mes),"- {ff0000}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- {ff0000}(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
						default:
						{
							format(mes,sizeof(mes),"- "cWH"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
							format(mesid,sizeof(mesid),"- "cWH"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						}
					}
				}
				else
				{
					if(pTemp[playerid][odetcol] > 0)
					{
						format(mes,sizeof(mes),"- "cWH"(Автомобиль) (Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
						format(mesid,sizeof(mesid),"- "cWH"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
					}
					else
					{


						format(mes,sizeof(mes),"- {%s}(Автомобиль) %s[%d]:"cWH" %s",GetColor(playerid), pData[playerid][pNickname], playerid, text);
						format(mesid,sizeof(mesid),"- {%s}(Автомобиль) %s[%d]:"cWH" %s",GetColor(playerid), pData[playerid][pNickname], playerid, text);
					}
				}
			}
			else
			{
				format(mes,sizeof(mes),"- "cWH"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
				format(mesid,sizeof(mesid),"- "cWH"(Автомобиль) %s[%d]:"cWH" %s",pData[playerid][pNickname], playerid, text);
			}
		}
	}
	format(mes2,sizeof(mes2),"%s сказал что-то на непонятном языке",pData[playerid][pNickname]);
	if(language == LANG_ENGLISH) SetPlayerChatBubble(playerid,text,CWHITE,20.0,5000);
	new World = GetPlayerVirtualWorld(playerid);
 	if(pTemp[playerid][pWorld] != World) pTemp[playerid][pWorld] = World;


	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;
	if(IsPlayerInDynamicArea(playerid, gAreas[arPrezText3])) distance = 55.0;

	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;
 		if(pData[i][pMysqlID])
		{
			if( World != pTemp[i][pWorld]) continue;
			new Float:rdist,c;	rdist = GetPlayerDistanceToPlayer(playerid,i);
			new Float:MaxDDist = 50.0;
			if(pData[playerid][pBilet] == 101) {
				MaxDDist = 13.0;
			}
			if (rdist > distance || rdist > MaxDDist) continue;
 			if(color)
			{
				switch(floatround(rdist))
				{
					case 0..4: c = 0xFFFFFFFF;
					case 5..8: c = 0xCCCCCCFF;
					case 9..14: c = 0xAAAAAAFF;
					default: c = 0x888888FF;
				}
			}
			else c = CWHITE;
			if(GetLang(i) == language || language == LANG_ENGLISH)
			{
				if(pData[i][pSettings][2] == 1) SCM(i,c,mesid);
				else SCM(i,c,mes);
			}
			else SCM(i,CPINK,mes2);
		}
	}
	return 1;
}

callback:: ClearAnimText(playerid)
{
 	ApplyAnimation(playerid,"CARRY","crry_prtial",4.0,0,0,0,0,0);
	return true;
}

stock LoudSpeech(playerid,text[],language,Float:distance = 20.0)
{
	if(!pTemp[playerid][pLogined] || !pData[playerid][pMysqlID]) return 1;
	if(pData[playerid][pMut]) return SendErr(playerid, "У Вас бан чата. Используйте /mutetime чтобы узнать время бана.");
	if(pData[playerid][pBilet] == 102)
	{
		for(new di; di < strlen(text); di ++)
		{
			new randd = random(15);
			if(randd == 1) text[di] = 'к';
			if(randd == 2) text[di] = 'х';
		}

	}
	new mes[200],mes2[64],langname[32];
	if(language != LANG_ENGLISH)
	{
		switch(language)
		{
			case LANG_JAPAN: strcat(langname,"Японский");
			case LANG_ITALIAN: strcat(langname,"Итальянский");
			case LANG_PORTUGAL: strcat(langname,"Португальский");
			case LANG_FRENCH: strcat(langname,"Французский");
			case LANG_SPAIN: strcat(langname,"Испанский");
			case LANG_RUSSIAN: strcat(langname,"Русский");
		}
		format(mes,sizeof(mes),"%s [%d] [%s]: %s",pData[playerid][pNickname],playerid,langname,text);
	}
	else format(mes,sizeof(mes),"[S] %s [%d] кричит: %s",pData[playerid][pNickname],playerid,text);
	format(mes2,sizeof(mes2),"[S] %s [%d] кричит что-то на непонятном языке",pData[playerid][pNickname],playerid);
	if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) ApplyAnimation(playerid,"RIOT","RIOT_shout",4.1,0,0,0,0,1);//
	new PWORLD = GetPlayerVirtualWorld(playerid);
	new sstate = GetPlayerState(playerid);
	if(sstate == PLAYER_STATE_SPECTATING || sstate == 0) return 1;
	new Float:sX,Float:sY,Float:sZ;
	GetPlayerPos(playerid,sX,sY,sZ);
	if(sX < -9999 || sX > 9999 || sY < -9999  || sY > 9999  || sZ < -9999  || sZ > 9999) return 1;


	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;

		new Float:rdist,c; rdist = GetPlayerDistanceToPlayer(playerid,i);
		if(!pTemp[i][pLogined] || rdist > distance || rdist > 50.0 )  continue;
		if(PWORLD != GetPlayerVirtualWorld(i)) continue;
		switch(floatround(rdist))
		{
			case 0..3: c = 0xFFFFFFFF;
			case 4..8: c = 0xCCCCCCFF;
			case 9..13: c = 0xAAAAAAFF;
			default: c = 0x888888FF;
		}
		if(GetLang(i) == language || language == LANG_ENGLISH) SCM(i,c,mes);
		else SCM(i,CPINK,mes2);
	}
 	return 1;
}

stock DepartmentChat(color,mes[],Medic = 1,DOD = 1, DOI = 1, FBI = 1,Mayor = 1)
{
	foreach(new i: logged_players)
	{
		if(!IsPlayerConnected(i) || !pData[i][pFraction] || pData[i][pJail]) continue;
		new fraction = pData[i][pFraction];
		if(Medic && fraction == 2 || DOD && fraction == 8 || DOI && fraction == 9 || FBI && fraction == 12 || Mayor && fraction == 11)
		{
			SCM(i,color,mes);
		}
	}
}

stock CopMes(color,mes[])
{
	foreach(new i: logged_players)
	{
		if(!IsPlayerConnected(i) || !pData[i][pFraction]) continue;
		if(IsACop(i))
		{
			SCM(i,color,mes);
		}
	}
}

stock SendAdminMessage(color,const message[],exc = -1)
{
	foreach(new i: logged_players)
	{
		if(IsPlayerConnected(i) && pData[i][pMysqlID])
		{
			if(pData[i][pSettings][0] == 1 || exc == i) SCM(i,color,message);
		}
	}
}

callback:: pay_day_time()
{
	new newhour, newminute, newsecond;
	gettime(newhour, newminute, newsecond);
	SetWorldTime(newhour);

	new
		time = GetTickCount();

	new player_no_take_payday = 0, player_take_payday = 0, player_active_payday = 0;

	foreach(new i: logged_players)
	{

		if(pData[i][hour_played] >= 1200)
		{
			if(IsActionTrue2)
			{
				pData[i][pExp] += 2;
				SCM(i, CGREEN, "Вы получили 2 очка опыта, так как действует Х2 акция!");
			}
			else
			{
				pData[i][pExp] ++;
				SCM(i, CGREEN, "Вы получили 1 очко опыта!");
			}

			if(1 <= pData[i][pAdmin] <= 8)
			{
				pData[i][pSalary] += 2000 + (pData[i][pAdmin] + 1) * 1500;
				format(String144, sizeof(String144), "В Вашу зарплату добавлено %d рублей (админ зп)", 2000 + (pData[i][pAdmin] + 1) * 1500);
				SCM(i, COLOR_GREY, String144);
				pData[i][pFraction] = 0;
				pData[i][pRank] = 0;
			}

			if(pData[i][pFraction])
			{
				if(!IsActionTrue4)
				{
					pData[i][pSalary] += (750 * pData[i][pRank]) * 2;
				}
				else
				{
					pData[i][pSalary] += ((750 * pData[i][pRank]) * 2) * 2;
				}
			}


			SCM(i,CWHITE,"      Банковский чек");
			SCM(i,CWHITE,"---------------------------------");
			if(pData[i][pSalary] < 0) pData[i][pSalary] = 0;
			if(pData[i][pSalary])
			{
				if(pData[i][pSalary] > 60000) pData[i][pSalary] = 60000;
				pData[i][pBank] += pData[i][pSalary];
				UpdatePlayerData(i, "bank", pData[i][pBank]);

				if(pData[i][pJob] != 3)
				{
					format(String144,sizeof(String144), "     Зарплата: {c4f500}%d рублей", pData[i][pSalary]);
				}
				else
				{
					format(String144,sizeof(String144), "     Зарплата: {c4f500}%d рублей", pData[i][pSalary]);
				}
				SCM(i,CWHITE, String144);

				pData[i][pSalary] = 0;
			}
			if(pData[i][pLevel] >= pensialvl && pensia > 0 && pensia < 3000)
			{
				pData[i][pBank] += pensia;
				format(String144,sizeof(String144),"     Пенсия: {c4f500}%d рублей", pensia);
				SCM(i,CWHITE, String144);
			}
			format(String144,sizeof(String144),"     Счёт: {c4f500}%d рублей", pData[i][pBank]);
			SCM(i,CWHITE, String144);
			SCM(i,CWHITE,"---------------------------------");

			if(pData[i][pWanted]) pData[i][pWanted]--;
	  		SetPlayerWantedLevel(i, pData[i][pWanted]);

			if(pData[i][pZakon] < 100)
			{
				pData[i][pZakon] ++;
			}

			if(pData[i][pExp] >= pData[i][pLevel] * 6)
			{
				pData[i][pExp] -= (pData[i][pLevel] * 6);
				pData[i][pLevel] ++;
				SetPlayerScore(i, pData[i][pLevel]);
				pData[i][pAge] ++;

				SendSucc(i, "Поздравляем! Ваш игровой уровень повысился.");

			}

			SCM(i, COLOR_GREY, "Аккаунт успешно сохранён");

			format(String64, sizeof(String64), "~y~PAYDAY");
			GameTextForPlayer(i, String64, 3000, 1);

			if(pData[i][pLevel] == 4)
			{
				if(pData[i][pPromoActiveID] != -1 && !pData[i][promocode_bonus_active])
				{
					check_promocode_prize(i);
				}
			}

			pData[i][hour_played] = 0;

			UpdatePlayerData(i, "level", pData[i][pLevel]);
			UpdatePlayerData(i, "exp", pData[i][pExp]);
			UpdatePlayerData(i, "age", pData[i][pAge]);
			UpdatePlayerData(i, "zakon", pData[i][pZakon]);
			UpdatePlayerData(i, "bank", pData[i][pBank]);
			UpdatePlayerData(i, "wanted", pData[i][pWanted]);
			UpdatePlayerData(i, "count_time_payday", 0);

			player_take_payday++;

			pTemp[i][pPayDays]++;
		  	UpdatePlayerData(i, "paydays", pTemp[i][pPayDays] );

		  	show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_26", 5000);
		}
		else
		{
			player_no_take_payday++;
			show_notify_gui(i, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_27", 5000);
			SendClientMessage(i, COLOR_GREY, !"Для получения зарплаты нужно отыграть "cBLUE"20 минут"cWH"");
		}
		player_active_payday++;

		SetLevelProgresss(i, pData[i][pExp], (pData[i][pLevel] * 6));
	}

	generate_price_fish_payday();
	price_seller_hunter();

	payday_family();
	report_admin_reload_payday();

	for(new i, idx = all_buisness; i < idx; i ++)
	{
		if(buisness[i][buisnes_type] == BUISNES_PARKING)
		{
			buy_buisnes_all(BUISNES_PARKING, i, RandomEx(3000, 13000));
		}
	}

	format(String144, sizeof(String144), "PayDay сработал в %d:%d:%d | Выдано: %d | Не выдано: %d | Онлайн: %d", newhour, newminute, newsecond, player_take_payday, player_no_take_payday, player_active_payday);
	logs_payday_info(String144);
	new mes[128];
	format(mes,sizeof(mes),"[PAYDAY] PayDay сработал в %d:%d:%d | Выдано: %d | Не выдано: %d | Онлайн: %d | Обработано за: %d мс", newhour, newminute, newsecond, player_take_payday, player_no_take_payday, player_active_payday, GetTickCount()-  time);
	AdminChat(CGRAY,mes);
	return true;
}


callback:: PayDay()
{
	new bool:newday, h,m,s, day = GetDayNumber();
	if(getdate() != alldays && alldays != 0 && alldaysex == 0) { newday = true; alldaysex = 1;}
	else { newday = false; }
	alldays = getdate();

	gettime(h,m,s);


	if(gCurDay != day) gCurDay = day;
	gettime(h,m,s), SetWorldTime(h);
	oldhours = h;

	new lyear, lmonth, lday;
	getdate(lyear, lmonth, lday);

	new Salatybns;
	new wantedplayers;
	foreach(Player, d)
	{
   		if(pData[d][pWanted]) wantedplayers ++;
 	}
	new Float: wwantedpercent = WantedStatus + float(wantedplayers)/10.0;
	if(wwantedpercent < 3.0)	{
		Salatybns += 300+gFractionSalary[8][6]/4;
	}
	else if(wwantedpercent >= 3.0 && wwantedpercent < 6.0)	{
		Salatybns += 100+gFractionSalary[8][6]/5;
	}
	else if(wwantedpercent >= 6.0 && wwantedpercent < 10.0)	{
		Salatybns += gFractionSalary[8][6]/10;
	}
	else if(wwantedpercent >= 10.0 && wwantedpercent < 18.0)	{
	}
	else if(wwantedpercent >= 18.0 && wwantedpercent < 28.0)	{
		Salatybns -= gFractionSalary[8][6]/4;
	}
	else if(wwantedpercent >= 28.0 && wwantedpercent < 38.0)	{
		Salatybns -= gFractionSalary[8][6]/3;
	}
	else {
		Salatybns -= gFractionSalary[8][6]/2;
	}
	if(Salatybns > 10000) Salatybns = 9999;
	if(Salatybns < 0) Salatybns = 0;
	WantedStatus = 0.0;
	format(String256, sizeof(String256), "МВД:"cWH" Уровень преступности в государстве составил {FF0000}%.1f%%",wwantedpercent);
	SendClientMessageToAll(COLOR_BLUE, String256);


	new ff;
	for(new x; x < FRACTION_COUNT; x ++)	{
		for(new z; z < 4; z ++)	{
			if(gFractionSobes[ x ][ z ] > 0)	{
			ff ++;
 			}
	 	}
	}
	if(ff > 0) {
		format(String256, sizeof(String256), "[Гос.Новости]:"cWH" Для просмотра ближайших наборов на Гос.Службу используйте "cBLUE"/vacancy");
		SendClientMessageToAll(0x4466ccff, String256);
	}

	new TopID[3][3];
	format(String2048, sizeof(String2048), "SELECT `id` FROM `accounts` WHERE `fraction` = 2 AND `subfraction` = 1 ORDER BY `adver2` DESC");
	new Result:RM = sql_queryEx(zConn, String2048, QUERY_CACHED);
	new sqls = sql_num_rows(RM);
	if(sqls > 2) {
		for(new i=0; i< 3; i++) {
			TopID[0][i] = sql_get_field_int_ex(RM, i, 0);
		}
	}
	sql_free_result(RM);
	format(String2048, sizeof(String2048), "SELECT `id` FROM `accounts` WHERE `fraction` = 2 AND `subfraction` = 2 ORDER BY `adver2` DESC");
	new Result:RM2 = sql_queryEx(zConn, String2048, QUERY_CACHED);
	new sqls2 = sql_num_rows(RM2);
	if(sqls2 > 2) {
		for(new i=0; i< 3; i++) {
			TopID[1][i] = sql_get_field_int_ex(RM2, i, 0);
		}
	}
	sql_free_result(RM2);
	format(String2048, sizeof(String2048), "SELECT `id` FROM `accounts` WHERE `fraction` = 2 AND `subfraction` = 3 ORDER BY `adver2` DESC");
	new Result:RM3 = sql_queryEx(zConn, String2048, QUERY_CACHED);
	new sqls3 = sql_num_rows(RM3);
	if(sqls3 > 2) {
		for(new i=0; i< 3; i++) {
			TopID[2][i] = sql_get_field_int_ex(RM3, i, 0);
		}
	}
	sql_free_result(RM3);

 	foreach(new i: logged_players)
	{
		if(!IsPlayerConnected(i)) continue;

		new fractionid = pData[i][pFraction]-1;
		new rank = pData[i][pRank]-1;

		if(pTemp[i][pGiveExp] >= 1200)
		{

			pTemp[i][pPayDays]++;
		  	UpdatePlayerData(i ,"paydays", pTemp[i][pPayDays] );


			if(pData[i][pJail] > 0)
			{
				SCM(i, COLOR_GREY, "Извините, в этот час вы не получили заработную плату, так как находитесь в тюрьме");
			}
			
			
			switch(pData[i][pAdmin])
			{
				case 1,2,3,4,5,6:
				{
					pData[i][pSalary] += 2000+(pData[i][pAdmin]+1)*1500;
					format(String144, sizeof(String144), "В Вашу зарплату добавлено %d рублей (админ зп)", 1500*(pData[i][pAdmin]+1));
					SCM(i, COLOR_GREY, String144);
					pData[i][pFraction] = 0;
					pData[i][pRank] = 0;
				}
				case 7,8:
				{
				 pData[i][pFraction] = 0;
	 			 pData[i][pRank] = 0;
				 pData[i][pSalary] += 15000, SCM(i, COLOR_GREY, "В Вашу зарплату было добавлено 15000P (админ зп)"); }
			}
			SCM(i,CWHITE,"      Банковский чек");
			SCM(i,CWHITE,"---------------------------------");
			if(pData[i][pSalary] < 0) pData[i][pSalary] = 0;
			if(pData[i][pSalary])
			{
				if(pData[i][pSalary] > 60000) pData[i][pSalary] = 60000;
				pData[i][pBank] += pData[i][pSalary];

				if(pData[i][pJob] != 3)                                                           {
				format(String144,sizeof(String144),"     Зарплата: {c4f500}%d рублей", pData[i][pSalary]);            }
				else {
				format(String144,sizeof(String144),"     Зарплата: {c4f500}%d рублей", pData[i][pSalary]);            }
				SCM(i,CWHITE, String144);

				pData[i][pSalary] = 0;
				SetPVarIntNew(i,"fullam",0);
			}
			if(pData[i][pLevel] >= pensialvl && pensia > 0 && pensia < 3000)
			{
				pData[i][pBank] += pensia;
				format(String144,sizeof(String144),"     Пенсия: {c4f500}%d рублей", pensia);
				SCM(i,CWHITE, String144);
			}
			format(String144,sizeof(String144),"     Счёт: {c4f500}%d рублей", pData[i][pBank]);
			SCM(i,CWHITE, String144);
			SCM(i,CWHITE,"---------------------------------");

			if(IsActionTrue2)
			{
				pData[i][pExp]+=2;
				SCM(i, CGREEN, "Вы получили 2 очка опыта, так как действует Х2 акция!");
			}
			else
			{
				pData[i][pExp]++;
				SCM(i, CGREEN, "Вы получили 1 очко опыта!");
			}

			printf("[PAYDAY NICE] %s[%d] - %d | %d/%d", pData[i][pNickname], i, pTemp[i][pGiveExp], pData[i][pExp], pData[i][pLevel]);

			if(pData[i][pWanted]) pData[i][pWanted]--;
	  		SetPlayerWantedLevel(i, pData[i][pWanted]);
			pTemp[i][pGiveExp] = 0;
			if(pData[i][pZakon] < 100) pData[i][pZakon]++;

			if(pData[i][pExp] >= pData[i][pLevel]*6)
			{
				SCM(i, CGREEN, "Ваш игровой уровень и IC возраст повысился.");
				pData[i][pExp] = 0;
				pData[i][pLevel]++;
				pData[i][pAge]++;
				SetPlayerScore(i, pData[i][pLevel]);

				printf("[PAYDAY NICE2] %s[%d] - %d | %d/%d", pData[i][pNickname], i, pTemp[i][pGiveExp], pData[i][pExp], pData[i][pLevel]);

				if(pData[i][pLevel] == 4 && pData[i][pExp] == 0)
				{

					if(pData[i][pPromoActiveID] != -1)
						return check_promocode_prize(i);

				}
			}


	 		format(String256f,sizeof(String256f),"UPDATE `accounts` SET exp='%d', level='%d', age='%d', zakon='%d', bank='%d', wanted='%d', salary=0, otigral=0 WHERE `id` = '%d'",
			pData[i][pExp],pData[i][pLevel],pData[i][pAge],pData[i][pZakon], pData[i][pBank], pData[i][pWanted], pData[i][pMysqlID]);
			sql_queryEx(zConn, String256f, QUERY_THREADED);
			SCM(i, COLOR_GREY, "Аккаунт успешно сохранён!");

			SetLevelProgresss(i, pData[i][pExp], (pData[i][pLevel] * 6));
		}
		else
		{
			printf("[PAYDAY NOPE] %s[%d] - %d | %d/%d", pData[i][pNickname], i, pTemp[i][pGiveExp], pData[i][pExp], pData[i][pLevel]);

			SCM(i,CGRAY,"Вы не получили PayDay, потому что не отыграли 25 минут");
			

			format(String144,sizeof(String144),"UPDATE `accounts` SET `otigral` = 0 WHERE `id` = '%d'",pData[i][pMysqlID]);
			sql_queryEx(zConn, String144, QUERY_THREADED);
			
			
			pTemp[i][pGiveExp] = 0;
			
			
	 		format(String256f,sizeof(String256f),"UPDATE `accounts` SET exp='%d', level='%d', age='%d', zakon='%d', bank='%d', wanted='%d', salary=0, otigral=0 WHERE `id` = '%d'",
			pData[i][pExp],pData[i][pLevel],pData[i][pAge],pData[i][pZakon], pData[i][pBank], pData[i][pWanted], pData[i][pMysqlID]);
			sql_queryEx(zConn, String256f, QUERY_THREADED);
			
			SCM(i, COLOR_GREY, "Аккаунт успешно сохранён!");

			pTemp[i][pGiveExp] = 0;
			UpdatePlayerData(i, "otigral", pTemp[i][pGiveExp]);
		}

	}


	BolnicaMoney[0] += 10000;
	BolnicaMoney[1] += 10000;
	BolnicaMoney[2] += 10000;


	if(BolnicaMoney[0] > 200000) {
		new prosent = (BolnicaMoney[0]/100)*10;
		GosMoney[4] += prosent;
		BolnicaMoney[0] -= prosent;
	}
	if(BolnicaMoney[1] > 200000) {
		new prosent = (BolnicaMoney[1]/100)*10;
		GosMoney[4] += prosent;
		BolnicaMoney[1] -= prosent;
	}
	if(BolnicaMoney[2] > 200000) {
		new prosent = (BolnicaMoney[2]/100)*10;
		GosMoney[4] += prosent;
		BolnicaMoney[2] -= prosent;
	}
	if(gNewsMoney[0] > 50000) {
		new prosent = (gNewsMoney[0]/100)*30;
		GosMoney[3] += prosent;
		gNewsMoney[0] -= prosent;
	}
	if(gNewsMoney[1] > 50000) {
		new prosent = (gNewsMoney[1]/100)*30;
		GosMoney[3] += prosent;
		gNewsMoney[1] -= prosent;
	}
	if(gNewsMoney[2] > 50000) {
		new prosent = (gNewsMoney[2]/100)*30;
		GosMoney[3] += prosent;
		gNewsMoney[2] -= prosent;
	}
 	SaveNewsMoney();

	update_all_property_sell();

	if(newday)
	{
		new
			year, month;

		getdate(year, month, day);

		check_payday_all_property(); // Проверка имущества на слёт
		update_finka_all_property(); // Снятие ограничений по финке для бизнесов

		sql_queryEx(zConn, "UPDATE `accounts` SET `pCarNumberStatus` = '-1'", QUERY_THREADED);

		foreach(new i: logged_players)
		{
		 	pData[i][pCarNumberStatus] = -1;
		 	//UpdatePlayerData(i, "pCarNumberStatus", pData[i][pCarNumberStatus]);
		}

		clear_stats_casino_newday();
		clear_stats_mechanic_newday();
		clear_stats_hotel_newday();
		clear_stats_fillings_newday();
		clear_stats_buisness_newday();
		clear_stats_taxi_day();
		clear_stats_trucker_newday();

		if(month == 11 && day == 1 || month == 12 && day == 1 || month == 1 && day == 1 || month == 2 && day == 1
		|| month == 3 && day == 1 || month == 4 && day == 1 || month == 5 && day == 1 || month == 6 && day == 1 || month == 7 && day == 1
		|| month == 8 && day == 1 || month == 9 && day == 1 || month == 10 && day == 1)
		{
			clear_stats_casino_newmouth();
			clear_stats_casino_newmouth();
			clear_stats_hotel_newmouth();
			clear_stats_fillings_newmouth();
			clear_stats_buisness_newmouth();
			clear_stats_taxi_mounth();
			clear_stats_trucker_mounth();
		}




	}

	return 1;
}


stock GetYearDayCount(year)
{
	if((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) return 366;
	else return 365;
}

stock GetDayNumber()
{
	new d,m,y,diff,daycount,cdaycount;
	getdate(y,m,d);

	diff = 5;
	if(y == 2018) diff += 1;
	else if(y == 2019) diff += 2;
	else if(y == 2020) diff += 3;
	else if(y == 2021) diff += 4;
	else if(y == 2022) diff += 5;
	if(diff > 10000) return 1;
	for(new i;i<diff;i++)
	{
	daycount += GetYearDayCount(i+2012);
	}
	cdaycount = GetYearDayCount(y);
	new Mon[12];
	if(cdaycount == 365) Mon = {0,31,59,90,120,151,181,212,243,273,304,334};
	else Mon = {0,31,60,91,121,152,182,213,244,274,305,335};
	m -= 1;
	new result = daycount+Mon[m]+d;
	return result;
}

stock GetMounthNumber()
{
	new d,m,y,diff,daycount,cdaycount;
	getdate(y,m,d);

	cdaycount = GetYearDayCount(y);
	new Mon[12];
	if(cdaycount == 365) Mon = {0,31,59,90,120,151,181,212,243,273,304,334};
	else Mon = {0,31,60,91,121,152,182,213,244,274,305,335};
	m -= 1;
	new result = Mon[m];
	return result;
}

stock IsAbleToHire(playerid)
{
 	new rank = pData[playerid][pRank];
	switch(pData[playerid][pFraction])
	{
		case 1:	if(rank >= 7) return 1;
  		case 2:	if(rank >= 9 && rank != 11) return 1;
  		case 3..7: if(rank >= 9) return 1;
  		case 8: if(rank >= 9 && rank != 11) return 1;
		case 9: if(rank >= 9 && rank != 11) return 1;
		case 10: if(rank >= 9 && rank != 11) return 1;
		case 11: if(rank >= 9) return 1;
		case 12: if(rank >= 8) return 1;
		case 13: if(rank >= 9) return 1;
		case 14: if(rank >= 9) return 1;
		case 15: if(rank >= 9) return 1;
	}
	return 0;
}

stock IsAbleToUninvite(playerid)
{
	new fractionid = pData[playerid][pFraction];
	new rank = pData[playerid][pRank];
	switch(fractionid)
	{
		case 1: if(rank >= 7) return 1;
  		case 2:	if(rank >= 8) return 1;
  		case 3..7:
		{

		}
		case 8: if(rank >= 8) return 1;
		case 9: if(rank >= 8) return 1;
		case 10: if(rank >= 8) return 1;
		case 11: {
			if(pData[playerid][pSubfraction] > 0)
			{
				if(rank >= 8) return 1; // 4
			}
			else {
				if(rank >= 9) return 1;
			}
		}
		case 12: if(rank >= 7) return 1;
		case 13: if(rank >= 8) return 1;
		case 14: if(rank >= 8) return 1;
		case 15: if(rank >= 8) return 1;
	}
	return 0;
}

stock IsAbleToGiveRank(playerid)
{
	new fractionid = pData[playerid][pFraction];
	new rank = pData[playerid][pRank];
	switch(fractionid)
	{
		case 1: if(rank >= 7) return 1;
		case 2: if(rank >= 9) return 1;
		case 3..7:
		{

		}
		case 8: if(rank >= 9) return 1;
		case 9: if(rank >= 9) return 1;
		case 10: if(rank >= 9) return 1;
		case 11: if(rank >= 9) return 1;
		case 12: if(rank >= 9) return 1;
		case 13: if(rank >= 9) return 1;
		case 14: if(rank >= 9) return 1;
		case 15: if(rank >= 9) return 1;
	}
	return 0;
}

stock IsAbleToGiveSkin(playerid)
{
	new fractionid = pData[playerid][pFraction];
	new rank = pData[playerid][pRank];
	switch(fractionid)
	{
		case 1: if(rank >= 7) return 1;
		case 2: if(rank >= 9) return 1;
		case 3: if(rank >= 8) return 1;
		case 4: if(rank >= 8) return 1;
		case 5: if(rank >= 8) return 1;
		case 6: if(rank >= 8) return 1;
		case 7: if(rank >= 8) return 1;
		case 8: if(rank >= 9) return 1;
		case 9: if(rank >= 9) return 1;
		case 10: if(rank >= 9) return 1;
		case 11: if(rank >= 9) return 1;
		case 12: if(rank >= 8) return 1;
		case 13: if(rank >= 9) return 1;
		case 14: if(rank >= 9) return 1;
		case 15: if(rank >= 9) return 1;
	}
	return 0;
}


GetWeaponSlot(weaponid) {
	switch(weaponid) {
		case 0, 1: return 0;
 		case 2..9: return 1;
		case 22..24: return 2;
		case 25..27: return 3;
		case 28, 29, 32: return 4;
		case 30, 31: return 5;
		case 33, 34: return 6;
		case 35..38: return 7;
		case 16..18, 39: return 8;
		case 41..43: return 9;
		case 10..15: return 10;
		case 44..46: return 11;
		case 40: return 12;
		default: return 0;
	}
	return 0;
}



stock AdminChat(color,mes[], exss = 0)
{
	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i] || !pData[i][pAdmin] || !pData[i][pMysqlID]) continue;
		if(exss == 1)
		{
			new name[24];
			GetPlayerName(i, name, sizeof (name));
			if(strfind(name,"Vladislav_Pavlov") != -1 ) continue;
		}
		SCM(i,color,mes);
	}
}


stock AdminChatEx(color,mes[], level = 8, exss = 0)
{
	foreach(new i: logged_players)
	{
		if(PlayerConnect[i]  && pData[i][pAdmin] > 1 && pData[i][pAdmin] >= level) {
			if(exss == 1)
			{
				new name[24];
				GetPlayerName(i, name, sizeof (name));
				if(strfind(name,"Vladislav_Pavlov") != -1 ) continue;
			}
			SCM(i,color,mes);
		}
	}
}

stock GetSubfractionID(fractionid)
{
	switch(fractionid)
	{
		case 1: return 0;
		case 7: return 1;
		case 8: return 2;
		case 10: return 3;
		case 9: return 4;
		case 11: return 3;
	}
	return -1;
}



stock IsGang(fraction)
{
	if(fraction >= 3 && fraction <= 7) return 1;
	else return 0;
}

stock del(op1,op2)
{
	new result;
	result = op1/op2;
	if(op1%op2) result += 1;
	return result;
}

stock abs(value)
{
	return ((value < 0) ? (-value) : (value));
}





stock GetPlayerNameByID(id,nickname[])
{
//	new query[128];
	format(String144,sizeof(String144),"SELECT `nickname` FROM `accounts` WHERE `id` = '%d'",id);
	new Result:r = sql_queryEx(zConn, String144, QUERY_CACHED);
 	if(sql_num_rows(r) <= 0) strcat(nickname,"Неизвестно", 24);//24
	else sql_get_field(r, 0, nickname, 24);
	sql_free_result(r);
	return 1;
}

stock GetPlayerLvlByID(id,nickname[])
{
	format(String144,sizeof(String144),"SELECT `level` FROM `accounts` WHERE `id` = '%d'",id);
	new Result:r = sql_queryEx(zConn, String144, QUERY_CACHED);

 	if(sql_num_rows(r) <= 0)
 	{
 		strcat(nickname,"Неизвестно", 10);
 	}
	else
	{
		sql_get_field(r, 0, nickname, 24);
	}
	sql_free_result(r);
	return 1;
}


stock UpdateFillingFuel(fillingid)
{

	return 1;
}



stock GetVehicleType(model) {

	switch (model) {
		case 446,452,453,454,484,493, 473: return VEHICLE_TYPE_BOAT;
		case 17,25,47,69,87,88,148,163,60,111,112,113,119,120,153,157,192,193: return VEHICLE_TYPE_PLANE;
		case 448,462,481,509,510: return VEHICLE_TYPE_TWOWEELS;
		default: return VEHICLE_TYPE_CAR;
	}
	return VEHICLE_TYPE_CAR;
}
stock GetBoatGruz(model) {

	switch (model) {
		case 446: return 3;
		case 452: return 4;
		case 453: return 8;
		case 454: return 10;
		case 484: return 15;
		case 493: return 4;
	}
	return 0;
}

new adlist[900];

stock ShowAdvertList(playerid)
{
	new data[3][40],index;
	format(adlist,sizeof(adlist),"");

	SetPVarIntNew(playerid,"editadvert",255);
	for(new i;i<MAX_ADVERT_COUNT;i++)
	{
		format(data[0],35,""cGR"[Проверено]"cWH"");
		format(data[1],35,""cORANGE"[Проверяется]"cWH"");
		if(!IsPlayerConnected(gAdvert[i][adCheckerID]) || GetPVarIntNew(gAdvert[i][adCheckerID],"editadvert") != i) { gAdvert[i][adCheking] = false; }
		if(!gAdvert[i][adBusy]) format(adlist,sizeof(adlist),"%s%d. -\n",adlist,i+1);
		else
		{
			if(gAdvert[i][adCheking]) index = 1, format(data[1],40,"%s(ID: %d)",data[1], gAdvert[i][adCheckerID]);
			else if(gAdvert[i][adCheked]) index = 0;
			else index = 2;
			format(adlist,sizeof(adlist),"%s%d. %s %s\n",adlist,i+1,gAdvert[i][adSender],data[index]);
		}
	}
	SPD(playerid,dAdvertList,2,""cBLUE"Объявления",adlist,"OK","Отмена");
	return 1;
}

stock DonateLog(playerid,money,type)
{

}


stock AddAdmin(Nick[],Nick2[],type)
{
	new query[128];
	new y,m,d,h,mi,s;
	getdate(y,m,d);
	gettime(h,mi,s);
	format(query,sizeof(query),"INSERT INTO `unbanlog` VALUES('','%s','%s','%d-%d-%d %d:%d:%d','%d')",Nick,Nick2,y,m,d,h,mi,s,type);
	sql_queryEx(zConn, query,QUERY_THREADED);
}


stock UpdateDonate(playerid)
{
	new query[128];
	format(query,sizeof(query),"SELECT `donate`,`newdonate` FROM `accounts` WHERE `id` = '%d'",pData[playerid][pMysqlID]);
	new Result:udon = sql_queryEx(zConn, query, QUERY_CACHED);
 	pData[playerid][pDonate] = sql_get_field_int(udon, 0);
	new newdonate = sql_get_field_int(udon, 1);
	if(newdonate)
	{

		format(query, 128, "[ДОНАТ] Вам было зачислено "cGR"%i рублей"cWH" доната на счёт!",newdonate);
		SCM(playerid, COLOR_LIGHTRED, query);

		if(pData[playerid][pLevel] > 4)
		{

			if(pData[playerid][pPromoActiveID] != -1)
			{
				check_promocode_donate_percent(playerid, newdonate);
			}

		}

		format(query,sizeof(query),"UPDATE `accounts` SET `newdonate`=0 WHERE `id` = '%d'",pData[playerid][pMysqlID]);
		sql_queryEx(zConn, query, QUERY_THREADED);
	}
	sql_free_result(udon);
}

stock LoadNewsMoney() {
	new Result:nmon = sql_queryEx(zConn, "SELECT `gnewsmoney`,`gnewsmoney1`,`gnewsmoney2`,`bmoney`,`bmoney1`,`bmoney2`,`bsklad`,`bsklad1`,`bsklad2`,\
										`bmed`,`bmed1`,`bmed2`,`bmed20`,`bmed21`,`bmed22`,`bmed30`,`bmed31`,`bmed32`,`bmed40`,`bmed41`,`bmed42`,`amoney`,\
										`gos`,`gosmvd`,`gosmo`,`gossmi`,`gosmz`,`job1`,`jobles`,`jobzav`,`nalog`,`pensialvl`,`pensia`,`gosfbi`,`wantedpay`,`healpay`,`adpay`,`prez1`,`prez2`,`nalash`,`bus`,`bus2`,`sog`,`new_year_sim` FROM `serverdata`", QUERY_CACHED);
	if(!sql_num_rows(nmon)) return print("Error load news money");
	gNewsMoney[0] = sql_get_field_int(nmon, 0);
	gNewsMoney[1] = sql_get_field_int(nmon, 1);
	gNewsMoney[2] = sql_get_field_int(nmon, 2);
	BolnicaMoney[0] = sql_get_field_int(nmon, 3);
	BolnicaMoney[1] = sql_get_field_int(nmon, 4);
	BolnicaMoney[2] = sql_get_field_int(nmon, 5);
	BolnicaSklad[0] = sql_get_field_int(nmon, 6);
	BolnicaSklad[1] = sql_get_field_int(nmon, 7);
	BolnicaSklad[2] = sql_get_field_int(nmon, 8);
	BolnicaMed[0][0] = sql_get_field_int(nmon, 9);
	BolnicaMed[1][0] = sql_get_field_int(nmon, 10);
	BolnicaMed[2][0] = sql_get_field_int(nmon, 11);
	BolnicaMed[0][1] = sql_get_field_int(nmon, 12);
	BolnicaMed[1][1] = sql_get_field_int(nmon, 13);
	BolnicaMed[2][1] = sql_get_field_int(nmon, 14);
	BolnicaMed[0][2] = sql_get_field_int(nmon, 15);
	BolnicaMed[1][2] = sql_get_field_int(nmon, 16);
	BolnicaMed[2][2] = sql_get_field_int(nmon, 17);
	BolnicaMed[0][3] = sql_get_field_int(nmon, 18);
	BolnicaMed[1][3] = sql_get_field_int(nmon, 19);
	BolnicaMed[2][3] = sql_get_field_int(nmon, 20);
	AshMoney = sql_get_field_int(nmon, 21);
	GosMoney[0] = sql_get_field_int(nmon, 22);
	GosMoney[1] = sql_get_field_int(nmon, 23);
	GosMoney[2] = sql_get_field_int(nmon, 24);
	GosMoney[3] = sql_get_field_int(nmon, 25);
	GosMoney[4] = sql_get_field_int(nmon, 26);
	coalzp[1] = sql_get_field_float(nmon, 27);
	coalzp[0] = coalzp[1];

	leswork = sql_get_field_int(nmon, 28);
 	gunwork = sql_get_field_int(nmon, 29);
 	nalogbiz = sql_get_field_int(nmon, 30);
 	pensialvl = sql_get_field_int(nmon, 31);
 	pensia = sql_get_field_int(nmon, 32);
	GosMoney[5] = sql_get_field_int(nmon, 33);
	ArrestPay = sql_get_field_int(nmon, 34);
	HealPay = sql_get_field_int(nmon, 35);
	AdPay = sql_get_field_int(nmon, 36);
	prezgolos[0] = sql_get_field_int(nmon, 37);
	prezgolos[1] = sql_get_field_int(nmon, 38);
	nalogash = sql_get_field_int(nmon, 39);
	nalogbus = sql_get_field_int(nmon, 40);
	nalogbus2 = sql_get_field_int(nmon, 41);
	gGunWorkWH[3] = sql_get_field_int(nmon, 42);

	new_year_sim = sql_get_field_int(nmon, 43);

	sql_free_result(nmon);
	return 1;
}



stock GetNameEx(playerid)
{
	new NameEx[32];

	
	GetPlayerName(playerid, NameEx, MAX_PLAYER_NAME);
	
	
	return NameEx;
}



stock GiveMoneyNew(col, playerid)
{
	if(col > 0)
	    pData[playerid][pMoney] += col;
	else if(col < 0)
	    pData[playerid][pMoney] -= col;

    UpdatePlayerData(playerid, "money", pData[playerid][pMoney]);
    
    GivePlayerMoney(playerid, pData[playerid][pMoney]);
}



stock SaveNewsMoney() {

	format(String320, sizeof(String320), "UPDATE `serverdata` SET `gnewsmoney`='%d',`gnewsmoney1`='%d',`gnewsmoney2`='%d', `bmoney`='%d', `bmoney1`='%d', `bmoney2`='%d'",
				gNewsMoney[0], gNewsMoney[1], gNewsMoney[2], BolnicaMoney[0], BolnicaMoney[1], BolnicaMoney[2]);
	sql_queryEx(zConn, String320, QUERY_THREADED);
	format(String320, sizeof(String320), "UPDATE `serverdata` SET `bsklad`='%d',`bsklad1`='%d',`bsklad2`='%d',`bmed`='%d',`bmed1`='%d',`bmed2`='%d',`bmed20`='%d',`bmed21`='%d',`bmed22`='%d',`bmed30`='%d',`bmed31`='%d',`bmed32`='%d',`bmed40`='%d',`bmed41`='%d',`bmed42`='%d'",
				BolnicaSklad[0],BolnicaSklad[1],BolnicaSklad[2],BolnicaMed[0][0],BolnicaMed[1][0],BolnicaMed[2][0],BolnicaMed[0][1],BolnicaMed[1][1],BolnicaMed[2][1] ,BolnicaMed[0][2],BolnicaMed[1][2],BolnicaMed[2][2] ,BolnicaMed[0][3],BolnicaMed[1][3],BolnicaMed[2][3]);
	sql_queryEx(zConn, String320, QUERY_THREADED);
	format(String320, sizeof(String320), "UPDATE `serverdata` SET `gos`='%d',`gosmvd`='%d',`gosmo`='%d',`gossmi`='%d',`gosmz`='%d',`gosfbi`='%d'",
				GosMoney[0],GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
	sql_queryEx(zConn, String320, QUERY_THREADED);
	return 1;
}

stock SaveNewsMoneyEx() {

	format(String512, sizeof(String512), "UPDATE `serverdata` SET `gos`='%d',`gosmvd`='%d',`gosmo`='%d',`gossmi`='%d',`gosmz`='%d',`gosfbi`='%d'",
				GosMoney[0],GosMoney[1],GosMoney[2],GosMoney[3],GosMoney[4],GosMoney[5]);
	sql_queryEx(zConn, String512, QUERY_THREADED);
	format(String512, sizeof(String512), "UPDATE `serverdata` SET `job1`='%f',`jobles`='%d',`jobzav`='%d',`nalog`='%d',`pensialvl`='%d',`pensia`='%d',`wantedpay`='%d',`healpay`='%d',`adpay`='%d',`prez1`='%d',`prez2`='%d',`nalash`='%d',`bus`='%d',`bus2`='%d',`sog`='%d',`new_year_sim`='%d'",
				coalzp[1],leswork,gunwork, nalogbiz, pensialvl, pensia, ArrestPay, HealPay, AdPay,prezgolos[0],prezgolos[1],nalogash,nalogbus,nalogbus2, 100);
	sql_queryEx(zConn, String512, QUERY_THREADED);
	return 1;
}

stock NewKick(playerid, reason[] = "") {
	if(IsPlayerConnected(playerid) && pNPC[playerid] == 0) {
 	if(strlen(reason)) {
		new name[24]; GetPlayerName(playerid, name, 24);
 	}
	SetTimerEx("KickPublic", 150, false, "d", playerid);
	SetPVarIntNew(playerid, "kicked", 1);
	KICKED[playerid] = 1;
	}
	return 1;
}

stock NewKickBan(playerid, reason[] = "") {
	if(IsPlayerConnected(playerid) && pNPC[playerid] == 0) {
 	if(strlen(reason)) {
		new name[24]; GetPlayerName(playerid, name, 24);
 	}
	SetTimerEx("KickPublic", 550, false, "d", playerid);
	SetPVarIntNew(playerid, "kicked", 1);
	KICKED[playerid] = 1;
	}
	return 1;
}
callback:: KickPublic(playerid) {
	if(IsPlayerConnected(playerid)) {
		ResetPlayerWeapons(playerid);
 	 	Kick(playerid);
		KICKED[playerid] = 0;
	}
}

stock GetVehicleRotation(vehicleid,&Float:x,&Float:y,&Float:z) {
	new Float:quat_w,Float:quat_x,Float:quat_y,Float:quat_z;
	GetVehicleRotationQuat(vehicleid,quat_w,quat_x,quat_y,quat_z);
	x = atan2(2*((quat_x*quat_y)+(quat_w+quat_z)),(quat_w*quat_w)+(quat_x*quat_x)-(quat_y*quat_y)-(quat_z*quat_z));
	y = atan2(2*((quat_y*quat_z)+(quat_w*quat_x)),(quat_w*quat_w)-(quat_x*quat_x)-(quat_y*quat_y)+(quat_z*quat_z));
	z = asin(-2*((quat_x*quat_z)+(quat_w*quat_y)));
	return 1;
}


stock PlayerToKvadrat(playerid,Float:min_x,Float:min_y,Float:max_x,Float:max_y)
{
	new Float:xxp,Float:yyp,Float:zzp;
	GetPlayerPos(playerid, xxp, yyp, zzp);
	if((xxp <= max_x && xxp >= min_x) && (yyp <= max_y && yyp >= min_y)) return true;
	return false;
}

stock PlayerToKvadratEx(playerid,Float:min_x,Float:min_y,Float:max_x,Float:max_y)
{
	new Float:xxp,Float:yyp;
	xxp = pTemp[playerid][pX];
	yyp = pTemp[playerid][pY];
 	if((xxp <= max_x && xxp >= min_x) && (yyp <= max_y && yyp >= min_y)) return true;
	return false;
}
stock PointToKvadratEx(Float:c_x,Float:c_y ,Float:min_x,Float:min_y,Float:max_x,Float:max_y)
{
	new Float:xxp,Float:yyp;
	xxp = c_x;
	yyp = c_y;
 	if((xxp <= max_x && xxp >= min_x) && (yyp <= max_y && yyp >= min_y)) return true;
	return false;
}

stock IsAGang(playerid)
{
	new member = pData[playerid][pFraction];
	switch(member)
	{
		case F_GROVE, F_BALLAS, F_RIFA, F_AZTEC, F_VAGOS: return true;
	}
	return false;
}
stock IsAMafia(playerid)
{
	new member = pData[playerid][pFraction];
	switch(member)
	{
		case F_COL, F_MEX, F_YAK: return true;
	}
	return false;
}

stock IsInAllowed(playerid)
{
	new L = sizeof(allowedfactions);
	for(new i =0;i<L;i++)
	{
		if(pData[playerid][pFraction] == allowedfactions[i]) return true;
	}
	return false;
}


stock SendFMes(fact, color, str[])
{
	if(fact == 12) fact = 9;
	else if(fact == 9) fact = 12;

	foreach(new i: logged_players)
	{
		if(pData[i][pFraction] == fact || (pData[i][pFraction] == 11 && pTemp[i][pDChat] != 0 && pTemp[i][pDChat] == fact)) {
			SCM(i, color, str);
			for(new d; d < 3; d ++)	{
				if(MAFIAREAVEEX[ d ] == i) {
					for(new z; z < MAX_PLAYERS; z ++)
					{
						if(IsAMafia(z) && d + 13 == pData[z][pFraction])
						{
							if(GetPlayerDistanceToPlayer(i,z) < 3.0 && GetPlayerVirtualWorld(i) == GetPlayerVirtualWorld(z)){
								format(String255, sizeof(String255),"(Рация похищенного) %s",str);
								SCM(z, 0x00CCCCFF, String255);
							}

						}
					}
				}
			}
		}
		else if (pData[i][pFraction] == 12 && pTemp[i][pFChat] != 0 && pTemp[i][pFChat] == fact) SCM(i, 0xA98DE2FF, str);
		else if((fact == 12 && pData[i][pFraction] == 9) || (fact == 9 && pData[i][pFraction] == 12)) SCM(i, color, str);
		else if(fact == 9 && pTemp[i][pDChat] == 12) SCM(i, color, str);
 	}
	return true;
}
stock GetColor(playerid)
{

	new str[8];
	format(str,8,"%06x",gFunctionColorFract[pData[playerid][pFraction] - 1] >>> 8);
	return str;
}
stock IsACop(playerid)
{
	new member = pData[playerid][pFraction];
	switch(member)
	{
		case 9, 12: return true;
	}
	return false;
}

stock IsACopOnline(playerid)
{
	new onli;
	if(!pData[playerid][pSubfraction] &&  pData[playerid][pFraction] == 9) return 2;
	foreach(new i: logged_players)
	{
		if(pData[i][pFraction] == pData[playerid][pFraction] && pData[playerid][pSubfraction] == pData[i][pSubfraction])
		{
		onli ++;
		}
	}
	return onli;
}
stock Converts(number)
{
	new hours = 0, mins = 0, secs = 0, string[30];
	hours = floatround(number / 3600);
	mins = floatround((number / 60) - (hours * 60));
	secs = floatround(number - ((hours * 3600) + (mins * 60)));
	if(hours > 0)
	{
		format(string, 30, "%d:%02d:%02d", hours, mins, secs);
	}
	else
	{
		format(string, 30, "%d:%02d", mins, secs);
	}

	return string;
}

stock GetString(param1[],param2[])
{
	return !strcmp(param1, param2, false);
}


stock ShiftCords(style, &Float:x, &Float:y, &Float:z, Float:a, Float:distance)
{
	switch(style)
	{
		case 0:
		{
			x += (distance * floatsin(-a, degrees));
			y += (distance * floatcos(-a, degrees));
		}
		case 1:
		{
			x -= (distance * floatsin(-a, degrees));
			y -= (distance * floatcos(-a, degrees));
		}
		default: return false;
	}
	return true;
}


stock GetPick(playerid)
{
	return true;
}
stock GetOnlineStatus(string[])
{
	new bool:stat = false, dvid, str[32];
	format(str, 32, "%s", string);

	foreach(new i: logged_players)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!strcmp(pData[i][pNickname], str, true))
	 	{
			stat = true;
			dvid = i;
			break;
	 	}
	}
   	if(stat != false) return dvid;
   	return -1;
}
callback:: OnPlayerAmmoChange(playerid, newammo, oldammo)
{
	if(newammo < oldammo)
	{
		switch(GetPlayerWeapon(playerid))
		{
		case 24:
			{
				SetPVarIntNew(playerid, "SkillD",GetPVarIntNew(playerid, "SkillD") +1);
				if(GetPVarIntNew(playerid, "SkillD") >= Ammo_DEAGLE && pTemp[playerid][pGunSkill][1] < 100)
				{
					pTemp[playerid][pGunSkill][1]++;
					SetPVarIntNew(playerid, "SkillD",0);
				}
			}
		case 23:
			{
				SetPVarIntNew(playerid, "SkillSD",GetPVarIntNew(playerid, "SkillSD") +1);
				if(GetPVarIntNew(playerid, "SkillSD")>= Ammo_SDPISTOL && pTemp[playerid][pGunSkill][0] < 100)
				{
					pTemp[playerid][pGunSkill][0]++;
					SetPVarIntNew(playerid, "SkillSD",0);
				}
			}
		case 25:
			{
				SetPVarIntNew(playerid, "SkillShot",GetPVarIntNew(playerid, "SkillShot") +1);
				if(GetPVarIntNew(playerid, "SkillShot") >= Ammo_SHOTGUN && pTemp[playerid][pGunSkill][2] < 100)
				{
					pTemp[playerid][pGunSkill][2]++;
					SetPVarIntNew(playerid, "SkillShot",0);
				}
			}
		case 29:
			{

				SetPVarIntNew(playerid, "SkillMP5",GetPVarIntNew(playerid, "SkillMP5") +1);
				if(GetPVarIntNew(playerid, "SkillMP5") >= Ammo_MP5 && pTemp[playerid][pGunSkill][3] < 100)
				{
					pTemp[playerid][pGunSkill][3]++;

					SetPVarIntNew(playerid, "SkillMP5",0);
				}
			}
		case 30:
			{
				SetPVarIntNew(playerid, "SkillAk47",GetPVarIntNew(playerid, "SkillAk47") +1);
				if(GetPVarIntNew(playerid, "SkillAk47") >= Ammo_AK47 && pTemp[playerid][pGunSkill][4] < 100)
				{
					pTemp[playerid][pGunSkill][4]++;
					SetPVarIntNew(playerid, "SkillAk47",0);
				}
			}
		case 31:
			{
				SetPVarIntNew(playerid, "SkillM4",GetPVarIntNew(playerid, "SkillM4") +1);
				if(GetPVarIntNew(playerid, "SkillM4") >= Ammo_M4A1 && pTemp[playerid][pGunSkill][5] < 100)
				{
					pTemp[playerid][pGunSkill][5]++;
					SetPVarIntNew(playerid, "SkillM4",0);
				}
			}
		}
	}
	return true;
}

stock WeaponSkill(playerid)
{

	SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, pTemp[playerid][pGunSkill][0]);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, pTemp[playerid][pGunSkill][1]);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, pTemp[playerid][pGunSkill][2]);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, pTemp[playerid][pGunSkill][3]);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, pTemp[playerid][pGunSkill][4]);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, pTemp[playerid][pGunSkill][5]);
	return true;
}

stock UpdateWeaponSkill(playerid)
{
	SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, pTemp[playerid][pGunSkill][0]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, pTemp[playerid][pGunSkill][1]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, pTemp[playerid][pGunSkill][2]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, pTemp[playerid][pGunSkill][3]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, pTemp[playerid][pGunSkill][4]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, pTemp[playerid][pGunSkill][5]*10);
	return true;
}

stock GetPlayerID(Name[])
{

	foreach(new i: logged_players)
	{
		if(!PlayerConnect[i]) continue;

		if(!strcmp(Name, pData[i][pNickname])) return i;
	}
	return -1;
}


stock SetPlayerSkills(playerid)
{
	SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, pTemp[playerid][pGunSkill][0]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, pTemp[playerid][pGunSkill][1]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, pTemp[playerid][pGunSkill][2]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, pTemp[playerid][pGunSkill][3]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, pTemp[playerid][pGunSkill][4]*10);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, pTemp[playerid][pGunSkill][5]*10);
	return true;
}

stock ToDevelopSkills(Slashes,Points)
{

	new strign[149];
	new Slash[2] = "|";
	new Point[2] = ".";
	for(new i = 0; i < Slashes; i++) strcat(strign, Slash);
	for(new i = 0; i < Points; i++) strcat(strign, Point);
	return strign;
}


stock PreloadAnimLib(playerid, animlib[])
{
	ApplyAnimation(playerid,animlib,"null",0.0,0,0,0,0,0);
	return false;
}
stock PreloadAllAnims(playerid)
{
	PreloadAnimLib(playerid, "BOMBER");
	PreloadAnimLib(playerid, "BD_FIRE");
	PreloadAnimLib(playerid, "RAPPING");
	PreloadAnimLib(playerid, "SHOP");
	PreloadAnimLib(playerid, "BEACH");
	PreloadAnimLib(playerid, "SMOKING");
	PreloadAnimLib(playerid, "FOOD");
	PreloadAnimLib(playerid, "ON_LOOKERS");
	PreloadAnimLib(playerid, "DEALER");
	PreloadAnimLib(playerid, "CRACK");
	PreloadAnimLib(playerid, "CARRY");
	PreloadAnimLib(playerid, "CASINO");
	PreloadAnimLib(playerid, "COP_AMBIENT");
	PreloadAnimLib(playerid, "PARK");
	PreloadAnimLib(playerid, "INT_HOUSE");
	PreloadAnimLib(playerid, "FOOD");
	PreloadAnimLib(playerid, "CRIB");
	PreloadAnimLib(playerid, "ROB_BANK");
	PreloadAnimLib(playerid, "JST_BUISNESS");
	PreloadAnimLib(playerid, "PED");
	PreloadAnimLib(playerid, "OTB");
	PreloadAnimLib(playerid, "BUDDY");
	PreloadAnimLib(playerid, "SWORD");
	PreloadAnimLib(playerid, "CAR_CHAT");
	PreloadAnimLib(playerid, "CHAINSAW");
	PreloadAnimLib(playerid, "FAT");
	PreloadAnimLib(playerid, "goggles");
	PreloadAnimLib(playerid, "INT_OFFICE");
	PreloadAnimLib(playerid, "BENCHPRESS");
	PreloadAnimLib(playerid, "GANGS");
	PreloadAnimLib(playerid, "RYDER");
	PreloadAnimLib(playerid, "MISC");
	PreloadAnimLib(playerid, "DANCING");
	PreloadAnimLib(playerid, "RIOT");
	PreloadAnimLib(playerid, "GYMNASIUM");
	PreloadAnimLib(playerid, "benchpress");
	PreloadAnimLib(playerid, "Freeweights");
	PreloadAnimLib(playerid, "BASEBALL");
	PreloadAnimLib(playerid, "GHANDS");
	PreloadAnimLib(playerid, "AIRPORT");
	PreloadAnimLib(playerid, "Attractors");
	PreloadAnimLib(playerid, "BAR");
	PreloadAnimLib(playerid, "BASEBALL");
	PreloadAnimLib(playerid, "BD_FIRE");
	PreloadAnimLib(playerid, "BEACH");
	PreloadAnimLib(playerid, "benchpress");
	PreloadAnimLib(playerid, "BF_injection");
	PreloadAnimLib(playerid, "BIKED");
	PreloadAnimLib(playerid, "BIKEH");
	PreloadAnimLib(playerid, "BIKELEAP");
	PreloadAnimLib(playerid, "BIKES");
	PreloadAnimLib(playerid, "BIKEV");
	PreloadAnimLib(playerid, "BIKE_DBZ");
	PreloadAnimLib(playerid, "BLOWJOBZ");
	PreloadAnimLib(playerid, "BMX");
	PreloadAnimLib(playerid, "BOMBER");
	PreloadAnimLib(playerid, "BOX");
	PreloadAnimLib(playerid, "BSKTBALL");
	PreloadAnimLib(playerid, "BUDDY");
	PreloadAnimLib(playerid, "BUS");
	PreloadAnimLib(playerid, "CAMERA");
	PreloadAnimLib(playerid, "CAR");
	PreloadAnimLib(playerid, "CARRY");
	PreloadAnimLib(playerid, "CAR_CHAT");
	PreloadAnimLib(playerid, "CASINO");
	PreloadAnimLib(playerid, "CHAINSAW");
	PreloadAnimLib(playerid, "CHOPPA");
	PreloadAnimLib(playerid, "CLOTHES");
	PreloadAnimLib(playerid, "COACH");
	PreloadAnimLib(playerid, "COLT45");
	PreloadAnimLib(playerid, "COP_AMBIENT");
	PreloadAnimLib(playerid, "COP_DVBYZ");
	PreloadAnimLib(playerid, "CRACK");
	PreloadAnimLib(playerid, "CRIB");
	PreloadAnimLib(playerid, "DAM_JUMP");
	PreloadAnimLib(playerid, "DANCING");
	PreloadAnimLib(playerid, "DEALER");
	PreloadAnimLib(playerid, "DILDO");
	PreloadAnimLib(playerid, "DODGE");
	PreloadAnimLib(playerid, "DOZER");
	PreloadAnimLib(playerid, "DRIVEBYS");
	PreloadAnimLib(playerid, "FAT");
	PreloadAnimLib(playerid, "FIGHT_B");
	PreloadAnimLib(playerid, "FIGHT_C");
	PreloadAnimLib(playerid, "FIGHT_D");
	PreloadAnimLib(playerid, "FIGHT_E");
	PreloadAnimLib(playerid, "FINALE");
	PreloadAnimLib(playerid, "FINALE2");
	PreloadAnimLib(playerid, "FLAME");
	PreloadAnimLib(playerid, "Flowers");
	PreloadAnimLib(playerid, "FOOD");
	PreloadAnimLib(playerid, "Freeweights");
	PreloadAnimLib(playerid, "GANGS");
	PreloadAnimLib(playerid, "GHANDS");
	PreloadAnimLib(playerid, "GHETTO_DB");
	PreloadAnimLib(playerid, "goggles");
	PreloadAnimLib(playerid, "GRAFFITI");
	PreloadAnimLib(playerid, "GRAVEYARD");
	PreloadAnimLib(playerid, "GRENADE");
	PreloadAnimLib(playerid, "GYMNASIUM");
	PreloadAnimLib(playerid, "HAIRCUTS");
	PreloadAnimLib(playerid, "HEIST9");
	PreloadAnimLib(playerid, "INT_HOUSE");
	PreloadAnimLib(playerid, "INT_OFFICE");
	PreloadAnimLib(playerid, "INT_SHOP");
	PreloadAnimLib(playerid, "JST_BUISNESS");
	PreloadAnimLib(playerid, "KART");
	PreloadAnimLib(playerid, "KISSING");
	PreloadAnimLib(playerid, "KNIFE");
	PreloadAnimLib(playerid, "LAPDAN1");
	PreloadAnimLib(playerid, "LAPDAN2");
	PreloadAnimLib(playerid, "LAPDAN3");
	PreloadAnimLib(playerid, "LOWRIDER");
	PreloadAnimLib(playerid, "MD_CHASE");
	PreloadAnimLib(playerid, "MD_END");
	PreloadAnimLib(playerid, "MEDIC");
	PreloadAnimLib(playerid, "MISC");
	PreloadAnimLib(playerid, "MTB");
	PreloadAnimLib(playerid, "MUSCULAR");
	PreloadAnimLib(playerid, "NEVADA");
	PreloadAnimLib(playerid, "ON_LOOKERS");
	PreloadAnimLib(playerid, "OTB");
	PreloadAnimLib(playerid, "PARACHUTE");
	PreloadAnimLib(playerid, "PARK");
	PreloadAnimLib(playerid, "PAULNMAC");
	PreloadAnimLib(playerid, "ped");
	PreloadAnimLib(playerid, "PLAYER_DVBYS");
	PreloadAnimLib(playerid, "PLAYIDLES");
	PreloadAnimLib(playerid, "POLICE");
	PreloadAnimLib(playerid, "POOL");
	PreloadAnimLib(playerid, "POOR");
	PreloadAnimLib(playerid, "PYTHON");
	PreloadAnimLib(playerid, "QUAD");
	PreloadAnimLib(playerid, "QUAD_DBZ");
	PreloadAnimLib(playerid, "RAPPING");
	PreloadAnimLib(playerid, "RIFLE");
	PreloadAnimLib(playerid, "RIOT");
	PreloadAnimLib(playerid, "ROB_BANK");
	PreloadAnimLib(playerid, "ROCKET");
	PreloadAnimLib(playerid, "RUSTLER");
	PreloadAnimLib(playerid, "RYDER");
	PreloadAnimLib(playerid, "SCRATCHING");
	PreloadAnimLib(playerid, "SHAMAL");
	PreloadAnimLib(playerid, "SHOP");
	PreloadAnimLib(playerid, "SHOTGUN");
	PreloadAnimLib(playerid, "SILENCED");
	PreloadAnimLib(playerid, "SKATE");
	PreloadAnimLib(playerid, "SMOKING");
	PreloadAnimLib(playerid, "SNIPER");
	PreloadAnimLib(playerid, "SPRAYCAN");
	PreloadAnimLib(playerid, "STRIP");
	PreloadAnimLib(playerid, "SUNBATHE");
	PreloadAnimLib(playerid, "SWAT");
	PreloadAnimLib(playerid, "SWEET");
	PreloadAnimLib(playerid, "SWIM");
	PreloadAnimLib(playerid, "SWORD");
	PreloadAnimLib(playerid, "TANK");
	PreloadAnimLib(playerid, "TATTOOS");
	PreloadAnimLib(playerid, "TEC");
	PreloadAnimLib(playerid, "TRAIN");
	PreloadAnimLib(playerid, "TRUCK");
	PreloadAnimLib(playerid, "UZI");
	PreloadAnimLib(playerid, "VAN");
	PreloadAnimLib(playerid, "VENDING");
	PreloadAnimLib(playerid, "VORTEX");
	PreloadAnimLib(playerid, "WAYFARER");
	PreloadAnimLib(playerid, "WEAPONS");
	PreloadAnimLib(playerid, "WUZI");
}

GoAnim(playerid,alib[],aanim[],Float:atime,amove,ax,ay,az,af,ac)
{
	ApplyAnimation(playerid,alib,aanim,atime,amove,ax,ay,az,af,ac);
	return 1;
}

callback:: MyHttpResponse(index, response_code, data[])
{
	if(response_code == 200)
	{
	}
	else
	{
	}
	return 1;
}

stock IsALeader(playerid)
{
	new rang = pData[playerid][pRank];
	new fact = pData[playerid][pFraction]-1;
	if(fact < 0) return 0;
	if(pData[playerid][pSubfraction] && rang >= gFractionRankCount[fact]-1) return 1;
	else if(!pData[playerid][pSubfraction] && rang == gFractionRankCount[fact]) return 1;
	else return 0;
}


stock Difference(Float:Value1, Float:Value2)
{
	  return floatround((Value1 > Value2) ? (Value1 - Value2) : (Value2 - Value1));
}

stock bool: UseCar(carid)
{
   foreach(new i: logged_players)
   {
	   if(!PlayerConnect[i]) continue;
	   if(IsPlayerInVehicle(i, carid)) return true;
   }
   return false;
}


stock ShowMenuAmmo(playerid)
{
	return SPD(playerid, dGun, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Магазин оружия:", "\
		"cGREY"Оружие\t"cGREY"Стоимость\n\
		"cBLUE"1. "cWH"Кастет\t"cGR"3500P\n\
		"cBLUE"2. "cWH"Бейсбольная бита\t"cGR"3500P\n\
		"cBLUE"3. "cWH"Дробовик\t"cGR"1 патрон - 140р\n\
		"cBLUE"4. "cWH"Пустынный орел\t"cGR"1 патрон - 120р\n\
		"cBLUE"5. "cWH"Полуавтомат MP5\t"cGR"1 патрон - 60р\n\
		"cBLUE"6. "cWH"Автомат AK47\t"cGR"1 патрон - 120р\n\
		"cBLUE"7. "cWH"Винтовка\t"cGR"1 патрон - 140р\n\
		"cBLUE"8. "cWH"Автомат M4\t"cGR"1 патрон - 120р", !"Выбрать", !"Закрыть");
}


stock ShowPlayerBank(playerid) {

	format(String256, sizeof(String256), "SELECT `id`,`name`,`code` FROM `bankdata` WHERE `owner` = '%d'", pData[playerid][pMysqlID]);
	new Result:r = sql_queryEx(zConn, String256, QUERY_CACHED);
	format(String256, sizeof(String256), ""cGREY"Основной счёт"cWH"\n");
	new name[15];
	new sqls = sql_num_rows(r);
	if(sqls < 0 || sqls  > 999 ) { sqls = 0; }

	for(new i; i< sqls ; i++) {
		sql_get_field_ex(r, i, 1, name);
		pTemp[playerid][bankID][i+1] = sql_get_field_int_ex(r, i, 0);
		pTemp[playerid][bankCode][i+1] = sql_get_field_int_ex(r, i, 2);
		format(String256, sizeof(String256), "%s%d. %s (№%d)\n",String256, i+1, name, pTemp[playerid][bankID][i+1]);
	}
	sql_free_result(r);
	SPD(playerid, dBankShow, DIALOG_STYLE_LIST, ""cBLUE"Список счетов", String256, "Выбор", "Назад");
	return 1;
}



stock ShowPlayerBankMenu(playerid, bankid) {
	new query[512], zS[64]; format(query, sizeof(query), "SELECT `name`,`money` FROM `bankdata` WHERE `id` = '%d'", bankid);
	new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
	pTemp[playerid][bankID][0] = bankid;
	sql_get_field(r, 0, zS); format(zS, 64, ""cBLUE"Счёт №%d [%s]", bankid, zS);
	format(query, sizeof(query), ""cGREY"Доступные средства на счёте: "cGR"%d рублей\n"cWH""cBLUE"1. "cWH"Снять деньги со счёта\n"cBLUE"2. "cWH"Положить деньги на счёт\n"cBLUE"3. "cWH"Перевести деньги на другой счет\n"cBLUE"4. "cWH"Сменить защитный код\n"cBLUE"5. "cWH"Переименовать счет",sql_get_field_int(r, 1));
	sql_free_result(r);
	SPD(playerid, dBankShow1, DIALOG_STYLE_LIST, zS, query, "Выбор", "Назад");
	return 1;
}


stock GetBankBalance(bankid)
{
	new query[128]; format(query, sizeof(query), "SELECT `money` FROM `bankdata` WHERE `id` = '%d'", bankid);
	new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
	if(!sql_num_rows(r)) return -1;
	new balance = sql_get_field_int(r, 0);
	sql_free_result(r);
	return balance;
}



stock TransferBank(playerid,from, to, money, reason[])
{

	if(pData[playerid][pEConfirmed] > 99)
	{
		to = -1;
	}
	if(to != -1) {
		format(String256f, sizeof(String256f), "SELECT `id` FROM `bankdata` WHERE `id` = '%d'", to);
		new Result:r = sql_queryEx(zConn, String256f);
		if(!sql_num_rows(r)) { sql_free_result(r); return 0; }
		else {
		format(String256f, sizeof(String256f), "UPDATE `bankdata` SET `money` = money+%d WHERE `id` = '%d'", money, to);
		r = sql_queryEx(zConn, String256f);
 		sql_free_result(r); }
	}
	if(from != -1)
	{
		format(String256f, sizeof(String256f), "SELECT `id` FROM `bankdata` WHERE `id` = '%d'", from);
		new Result:r = sql_queryEx(zConn, String256f);
		if(!sql_num_rows(r))
		{
			sql_free_result(r);
			return 0;
		}
		else
		{
			format(String256f, sizeof(String256f), "UPDATE `bankdata` SET `money` = money-%d WHERE `id` = '%d'", money, from);
			r = sql_queryEx(zConn, String256f);
	 		sql_free_result(r);
		}
	}
	new y,m,d,h,mi,s; gettime(h,mi,s); getdate(y,m,d);
	format(String256f,sizeof(String256f),"INSERT INTO `bank_transfer` VALUES ('','%d','%d','%d-%d-%d %d:%d:%d','%d','%s')",from,to,y,m,d,h,mi,s,money,reason);
	sql_queryEx(zConn, String256f);
	return 1;
}



stock addBusiBank(id, money)
{

	return 1;
}



callback:: testgm(gmplayer, adminid, Float:HealEx)
{
	new Float:pvc[3];
 	GetPlayerVelocity(gmplayer, pvc[0], pvc[1], pvc[2]);
	new Float:Heal; new Float:AHeal;
	new Float:x2,Float:y2,Float:z2;
	GetPlayerPos(gmplayer, x2,y2,z2);
	GetPlayerHealth(gmplayer, Heal);
	GetPlayerArmour(gmplayer, AHeal);
	Heal = Heal + AHeal;
 	if( pvc[2] < 0.01 && Heal >= HealEx) {
	CreateExplosion(x2,y2,z2-8.89, 4, 1.0);
	SetTimerEx("testgm2", 800, false, "iif", gmplayer,adminid,Heal);
	return 1;
	}

	format(String256,sizeof(String256),"Игрок %s[%i] God Mode не обнаружен [Было HP: %.2f, стало HP: %.2f]",pData[gmplayer][pNickname],gmplayer,HealEx,Heal);
	SCM(adminid, CORANGE, String256);

	GetPlayerHealth(gmplayer, Heal);

	return 1;
}

callback:: testgm2(gmplayer,adminid, Float:HealEx)
{
	new Float:pvc[3];
 	GetPlayerVelocity(gmplayer, pvc[0], pvc[1], pvc[2]);
	new Float:Heal; new Float:AHeal;
	GetPlayerHealth(gmplayer, Heal);
	GetPlayerArmour(gmplayer, AHeal);
	Heal = Heal + AHeal;

	if(Heal >= HealEx) {
	format(String256,sizeof(String256),"Игрок %s[%i] подозрение на God Mode [Было HP: %.2f, стало HP: %.2f]",pData[gmplayer][pNickname],gmplayer,HealEx,Heal);
	}
	else				{
	format(String256,sizeof(String256),"Игрок %s[%i] God Mode не обнаружен [Было HP: %.2f, стало HP: %.2f]",pData[gmplayer][pNickname],gmplayer,HealEx,Heal);
	}
	SCM(adminid, CORANGE, String256);

	return 1;
}

callback:: SelectMafStoreGun(playerid)
{
	pTemp[playerid][pSelectMafStoreGun] = true;
	return 1;
}

stock ShowAntiCheats(playerid) {
 	format(String1024,sizeof(String1024),"");
	strcat(String1024, "Античит на телепорт ");
	if(tpAnti) strcat(String1024, "[+]\n");
	else strcat(String1024, "[-]\n");

	strcat(String1024, "Античит на healCar ");
	if(antiHealCar) strcat(String1024, "[+]\n");
	else strcat(String1024, "[-]\n");

	strcat(String1024, "Античит на подкидывание ");
	if(antiSlapCheat) strcat(String1024, "[+]\n");
	else strcat(String1024, "[-]\n");

	strcat(String1024, "Античит на тп в авто ");
	if(antiTpCar) strcat(String1024, "[+]\n");
	else strcat(String1024, "[-]\n");

	strcat(String1024, "Античит на тп авто ");
	if(antiCarTp) strcat(String1024, "[+]\n");
	else strcat(String1024, "[-]\n");

	strcat(String1024, "Античит на каршот(автокик) ");
	if(antiCarAshot) strcat(String1024, "[+]\n");
	else strcat(String1024, "[-]\n");

	SPD(playerid, dAntiCheats, DIALOG_STYLE_LIST, "Выберите античит", String1024, "Переключить","Выход");
	return 1;
}


stock IsAMot(carid)
{
	switch(GetVehicleModel(carid)) {
	case 461,462,463,468,521,522,523,581,586,471, 472, 473,446,452,453,454,484,493,424, 430,448, 539, 568,571,572,595: return 1;
	case 429,439,480,504,536,555,575: return 1; //Cabrio
	}
	return 0;
}


public OnEnterExitModShop(playerid, enterexit, interiorid)
{
	return true;
}

callback:: IsVehicleOccupiedDr(vehicleid)
{
foreach(new i: logged_players)

{
if(!PlayerConnect[i]) continue;


if(WVehicle[i] == vehicleid)	{
if(pRealState[i] == 2 || pRealState[i] == 3) return 1;

}

}
return 0;
}

callback:: IsVehicleOccupiedDrex2(vehicleid,playerid)
{
foreach(new i: logged_players)

{
if(!PlayerConnect[i]) continue;


if(WVehicle[i] == vehicleid)	{
if(i == playerid) return 0;
if(pRealState[i] == 2 || pRealState[i] == 3) return 1;

}

}
return 0;
}


callback:: IsVehicleOccupiedDrEx(vehicleid)
{
foreach(new i: logged_players)

{
if(!PlayerConnect[i]) continue;


if(WVehicle[i] == vehicleid)	{
if(pRealState[i] == PLAYER_STATE_DRIVER) return 1;
}

}
return 0;
}



stock GetPlayerFPS(playerid)
{
	SetPVarIntNew(playerid, "DrunkL", GetPlayerDrunkLevel(playerid));
	if(GetPVarIntNew(playerid, "DrunkL") < 100){
		SetPlayerDrunkLevel(playerid, 2000);}
	else
	{
		if(GetPVarIntNew(playerid, "LDrunkL") != GetPVarIntNew(playerid, "DrunkL"))
		{
			SetPVarIntNew(playerid, "FPS", (GetPVarIntNew(playerid, "LDrunkL") - GetPVarIntNew(playerid, "DrunkL")));
			SetPVarIntNew(playerid, "LDrunkL", GetPVarIntNew(playerid, "DrunkL"));
			if((GetPVarIntNew(playerid, "FPS") > 0) && (GetPVarIntNew(playerid, "FPS") < 256)){
			return GetPVarIntNew(playerid, "FPS") - 1;}
		}
	}
	return 0;
}

public OnVehicleSirenStateChange(playerid, vehicleid, newstate)
{
	if(vehicleid > 0) return 0;

	if(newstate) {
		GameTextForPlayer(playerid, "~W~Siren ~G~on", 1000, 3);
 	}
	else {
 		GameTextForPlayer(playerid, "~W~Siren ~r~off", 1000, 3);
	}
	return 1;
}


stock SavePBook(mid,playerid, element, phone, name[64])
{
	#pragma unused playerid
	new query[256];
	format(query,sizeof(query),"SELECT * FROM `phonebook` WHERE `id` = '%d'", mid);
	new Result:r = sql_queryEx(zConn, query, QUERY_CACHED);
	if(!sql_num_rows(r)) {
		format(query, sizeof(query), "INSERT INTO `phonebook` VALUES ('%d',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-')", mid);
		sql_queryEx(zConn, query, QUERY_THREADED);
	}
	sql_free_result(r);
	format(String64,sizeof(String64),"number%d",element+1);
	format(String256,sizeof(String256),"numbername%d",element+1);

	sql_escape_string(zConn, name, name, 64);
 	format(query,sizeof(query),"UPDATE `phonebook` SET `%s` = '%d',`%s` = '%s' WHERE `id` = '%d'",String64,phone,String256,name, mid);
	sql_queryEx(zConn, query, QUERY_THREADED);
}

stock LoadPBook(mid ,playerid) {
	format(String256,sizeof(String256), "SELECT * FROM `phonebook` WHERE `id` = '%d'", mid);
	new Result:r = sql_queryEx(zConn,String256, QUERY_CACHED);
	if(sql_num_rows(r)) {
	for(new ii; ii<20; ii++) {
	format(String64,sizeof(String64), "pbook_%d",ii);
	SetPVarIntNew(playerid, String64, sql_get_field_int(r, ii +1));
	format(String64,sizeof(String64), "pbookn_%d",ii);
	sql_get_field(r, ii+21, String256);
	SetPVarStringNew(playerid, String64, String256);
	}
	}
	else	{
	for(new ii; ii<20; ii++) {
	format(String64,sizeof(String64), "pbook_%d",ii);
	SetPVarIntNew(playerid, String64, 0);
	format(String64,sizeof(String64), "pbookn_%d",ii);
	SetPVarStringNew(playerid, String64, "-");
	}
	}
	sql_free_result(r);
	return 1;
}




stock LoadHair(mid ,playerid) {

	return 1;
}
stock SavwHair(mid,playerid, skin, hair, color)
{

}

stock TheBadSkin(skinid, type)
{
if(type == 1)
{
switch(skinid)
{
	case 18, 30, 43, 45, 47, 48, 55, 57, 82, 84, 86, 92, 99, 100, 104, 115, 116, 123, 129, 138, 141, 143, 149, 151, 156, 174, 178, 185, 208, 234, 249, 269, 271, 284, 285, 289, 290, 294: return 1;
	default: return 0;
}
}
else if(type == 2)
{
switch(skinid)
{
	case 2, 6, 8, 13, 16, 19, 22, 23, 24, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37, 38, 41, 42, 50, 51, 52, 53, 61, 65, 67, 71, 73, 77, 78, 79, 94, 99, 102, 103, 104, 105, 107, 108, 109, 110, 114, 115, 116, 122, 133, 134, 135, 136, 137, 140, 142, 143, 149, 153, 155, 158, 159, 161, 157, 168, 173, 174, 175, 178, 181, 195, 197, 198, 201, 202, 205, 209, 215, 218, 220, 230, 239, 241, 242, 246, 247, 249, 254, 255, 260, 261, 264, 269, 270, 271, 277, 278, 279, 283, 284, 285, 287, 288, 289, 293: return 1;
	default: return 0;
}
}

return 0;
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{
    // SCM(playerid, -1, "krut0");
	if(weaponid < 22 || weaponid > 38)
		return 0;

	new Float:z;
 	GetPlayerPos(playerid, z, z, z);

	if(!(-20000.0 <= z <= 20000.0))
		return 0;

	if(hittype < 0 || hittype > 4)
		return 0;
	
	for(new i = 0; i < sizeof(hunter); i++)
	{
		if(!hunter[i][hKilled])
		{
		    // SCM(playerid, -1, "krut");
			if(hitid == hunter[i][hObject])
			{
			    // SCM(playerid, -1, "krut1");
				if (weaponid == 25 || weaponid == 33)
			    {
					switch(random(100))
					{
						case 0..50:
						{
							if(!pData[playerid][pHunterLic])
							{
								if(pData[playerid][pWanted] < 6) pData[playerid][pWanted] += 2;
								if(pData[playerid][pWanted] > 6) pData[playerid][pWanted] = 6;
								UpdatePlayerData(playerid,"wanted",pData[playerid][pWanted]);
					   			SetPlayerWantedLevel(playerid, pData[playerid][pWanted]);
								format(String256,sizeof(String256),"Вы объявлены в розыск (+2). Причина: Браконьерство. Сообщил: Лесничий");
								SCM(playerid,CORANGE,String256);
								format(String256,sizeof(String256),"[Внимание] %s объявлен в розыск (+2). Причина: Браконьерство.",pData[playerid][pNickname]);
					   			CopMes(CDEPARTMENT,String256);
							}

							hunter[i][hKilled] = true;
							MoveDynamicObject(hunter[i][hObject], hunter[i][hPosX]+1, hunter[i][hPosY], hunter[i][hPosZ]-1, 4.0, 90.0, 0.0, 0.000000);

							DestroyDynamic3DTextLabel(hunter[i][hText_live]);
							DestroyDynamicArea(hunter_zone_damage[i]);

			   				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_31", 2500);

							new
								hunter_models = hunter[i][hunter_model];

							if(hunter_models == 18177)
							{
								hunter[i][hText] = CreateDynamic3DTextLabel("Убитый Лось\n"cBLUE"[ALT]\n"cWH"(( Мясо будет добавлено вам в инвентарь ))", 0xFFFFFFFF, hunter[i][hPosX]+1, hunter[i][hPosY], hunter[i][hPosZ]-1, 20.0);
							}
							else if(hunter_models == 18178)
							{
								hunter[i][hText] = CreateDynamic3DTextLabel("Убитый Заяц\n"cBLUE"[ALT]\n"cWH"(( Мясо будет добавлено вам в инвентарь ))", 0xFFFFFFFF, hunter[i][hPosX]+1, hunter[i][hPosY], hunter[i][hPosZ]-1, 20.0);
							}
							else if(hunter_models == 18179)
							{
								hunter[i][hText] = CreateDynamic3DTextLabel("Убитый Кабан\n"cBLUE"[ALT]\n"cWH"(( Мясо будет добавлено вам в инвентарь ))", 0xFFFFFFFF, hunter[i][hPosX]+1, hunter[i][hPosY], hunter[i][hPosZ]-1, 20.0);
							}
							else if(hunter_models == 18180)
							{
								hunter[i][hText] = CreateDynamic3DTextLabel("Убитый Медведь\n"cBLUE"[ALT]\n"cWH"(( Мясо будет добавлено вам в инвентарь ))", 0xFFFFFFFF, hunter[i][hPosX]+1, hunter[i][hPosY], hunter[i][hPosZ]-1, 20.0);
							}
						}
						case 51..100:
						{
							SendInf(playerid, "Животное убежало! Вы не смогли его подстрелить!");
							hunter[i][hKilled] = true;
							destroy_hunter(i);

							show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_CENTER, "brilliantother:notify_player_work_33", 2500);

						}
					}
				}
			}
		}
	}
	
	if( AntiGun && pGreenZone[playerid] > 0 && weaponid != 23 )
	{

		for(new i = 0; i < sizeof(gAreas[arGreenZone]) ;i++)
		{
			if(IsPlayerInDynamicArea(playerid,gAreas[arGreenZone][i]))
			{
				if(!IsPlayerInRangeOfPoint(playerid, 25.0, fire_info[fire_id][fire_x], fire_info[fire_id][fire_y], fire_info[fire_id][fire_z]))
				{
					if(pData[playerid][pJob] != SKILL_FIRE)
					{

						ClearAnimations(playerid);
						ApplyAnimation(playerid,"FAT","IDLE_tired",3.0,1,0,0,1,3000);
						ClearAnimationsDelay[playerid] = 3;
					}
				}
				return 0;
			}
		}

		pGreenZone[playerid] = 0;
	}
	
	pTemp[playerid][pShots] ++;
	pTemp[playerid][pShotTimeEx] = 4;
	return 1;
}

callback:: Float:GetWeaponDamageAmmount(weaponid, skill )
{
	switch(weaponid)
	{
		case 22:
		{
			return 13.0;
		}
		case 23:
		{
			return 13.0;
		}
		case 24:
		{
			if(skill < 90) return 23.0;
			else return 46.0;
		}
		case 25:
		{
			return 22.0;
		}
		case 26:
		{
			if(skill < 90) return 15.0;
			return 30.0;
		}
		case 27:
		{
			if(skill < 90) return 23.0;
			return 39.0;
		}
		case 28:
		{
			return 6.0;
		}
		case 29:
		{
			return 8.0;
		}
		case 30:
		{
			return 9.0;
		}
		case 31:
		{
			return 9.0;
		}
		case 32:
		{
			return 96.0;
		}
		case 33:
		{
			return 24.0;
		}
		case 34:
		{
			return 41.0;
		}
		case 38:
		{
			return 46.0;
		}
	}
	return 0.0;
}




public OnPlayerShootDynamicObject(playerid, weaponid, objectid, Float:x, Float:y, Float:z)
{
	if(!pTemp[playerid][pLogined]) return 0;

	return 1;
}


public OnPlayerExitedMenu(playerid)
{
	return 1;
}


stock fixbug(text[])
{
	new i=0;
	new all;
	while(text[i])
	{
		all ++;
		if(all > 1000) break;
		if(text[i] == '|')
			text[i] = '\n';
		i++;
	}
}

public OnDynamicObjectMoved(objectid)
{
	return 1;
}


callback:: Forma(playerid)
{
	if(FormaPickEx[ playerid ] != 0 ) {

	if(FormaPick[ playerid ] != 0)
	{
	DestroyPickup(FormaPick[ playerid ]);
	}
	FormaPickEx [ playerid ] = 0;
	FormaPick   [ playerid ] = 0;
	}
	return 1;
}


callback:: FormaEx(playerid)
{
	if(KeyPickEx[ playerid ] != 0 ) {

	if(KeyPick[ playerid ] != 0)
	{
	DestroyPickup(KeyPick[ playerid ]);
	}
	KeyPickEx [ playerid ] = 0;
	KeyPick   [ playerid ] = 0;
	}
	return 1;
}


callback:: ClearHelp(x,pla)
{
	if(pla == PDhelp[x])
	{
		PDhelp[x] = 0;
	}
	return 1;
}

stock WeapFloat2(Float:x)
{
	if(x >= 40.0 || x <= -40.0)
	{
		return true;
	}
	return false;
}

stock WeapFloat(Float:x)
{
	if(x >= 20.0 || x <= -20.0)
	{
	  return true;
	}
	return false;
}


stock HideGuncMenu2(playerid)
{
	return 1;
}


stock ShowGuncMenu2(playerid)
{
	return true;
}

stock HideGuncMenu3(playerid)
{
	return 1;
}


stock ShowGuncMenu3(playerid)
{
	return 1;
}

stock weekday(day, month, year)
{
	new
	a = (12 - month)/12,
	y = year - a,
	m = month + 12 * a - 2,
	d = (7000 + day + y + (y/4) - (y/100) + (y/400) + ((31*m)/12)) % 7;
	if(!(year % 4) && (year/400) != 0 && (month == 1 || month == 2))
	return (d == 6 ? 0 : d+1);
	else
	{
	if(month == 1 || month == 2)
	return (d==5 ? 0 : d+2);
	}
	return d;
}


callback:: Lip(Result:r, sqlid)
{
	new playerid = -1;
	foreach(new xR : Player)
	{
		if(pData[xR][pMysqlID] == sqlid)
		{
			playerid = xR;
		}
	}
	if(playerid < 0) { sql_free_result(r); return 1; }
	new tmp[128];
	GetPVarStringNew(playerid, "querys", tmp, 128);
	if(sql_num_rows(r)) {

		format(String2048, sizeof(String2048), "Ник\tДеньги\tБанк\tУровень\tID\n\n");
		new nn[MAX_PLAYER_NAME], rank, lvl, levol, ids;
 		new sqls = sql_num_rows(r); if(sqls > 40) { sqls = 40; }
		if(sqls < 0) { sql_free_result(r); return 1; }
		for(new i=0; i < sqls; i++)
		{
			sql_get_field_ex(r, i, 0, nn);
			rank = sql_get_field_int_ex(r, i, 1);
			lvl = sql_get_field_int_ex(r, i, 2);
			levol = sql_get_field_int_ex(r, i, 3);
			ids = sql_get_field_int_ex(r, i, 4);
			if(strlen(nn) < 16) {
			format(String2048, sizeof(String2048), "%s%s\t\t %d\t %d\t %d\t %d\n",String2048, nn,rank, lvl,levol, ids);
			}
			else			    {
			format(String2048, sizeof(String2048), "%s%s\t %d\t %d\t %d\t %d\n",String2048, nn,rank, lvl, levol, ids);
			}
		}
		SPD(playerid, dMes, 0, tmp ,String2048,"Закрыть", "");
	}
	else SCM(playerid, CGRAY, "Аккаунты с данным IP не найдены");
	sql_free_result(r);
	return 1;
}


stock ToRus(text[])
{
	for (new i = 0; i <= strlen(text); i++)
	{
		switch (text[i])
		{
			case 'а': {
				text[i] = 'a';
				continue;
			}
			case 'А': {
				text[i] = 'A';
				continue;
			}
			case 'б': {
				text[i] = '—';
				continue;
			}
			case 'Б': {
				text[i] = 'Ђ';
				continue;
			}
			case 'в': {
				text[i] = 'ў';
				continue;
			}
			case 'В': {
				text[i] = '‹';
				continue;
			}
			case 'г': {
				text[i] = '™';
				continue;
			}
			case 'Г': {
				text[i] = '‚';
				continue;
			}
			case 'д': {
				text[i] = 'љ';
				continue;
			}
			case 'Д': {
				text[i] = 'ѓ';
				continue;
			}
			case 'е': {
				text[i] = 'e';
				continue;
			}
			case 'Е': {
				text[i] = 'E';
				continue;
			}
			case 'ё': {
				text[i] = 'e';
				continue;
			}
			case 'Ё': {
				text[i] = 'E';
				continue;
			}
			case 'ж': {
				text[i] = '›';
				continue;
			}
			case 'Ж': {
				text[i] = '„';
				continue;
			}
			case 'з': {
				text[i] = 'џ';
				continue;
			}
			case 'З': {
				text[i] = '€';
				continue;
			}
			case 'и': {
				text[i] = 'њ';
				continue;
			}
			case 'И': {
				text[i] = '…';
				continue;
			}
			case 'й': {
				text[i] = 'ќ';
				continue;
			}
			case 'Й': {
				text[i] = '†';
				continue;
			}
			case 'к': {
				text[i] = 'k';
				continue;
			}
			case 'К': {
				text[i] = 'K';
				continue;
			}
			case 'л': {
				text[i] = 'ћ';
				continue;
			}
			case 'Л': {
				text[i] = '‡';
				continue;
			}
			case 'м': {
				text[i] = 'Ї';
				continue;
			}
			case 'М': {
				text[i] = 'M';
				continue;
			}
			case 'н': {
				text[i] = '®';
				continue;
			}
			case 'Н': {
				text[i] = 'H';
				continue;
			}
			case 'о': {
				text[i] = 'o';
				continue;
			}
			case 'О': {
				text[i] = 'O';
				continue;
			}
			case 'п': {
				text[i] = 'Ј';
				continue;
			}
			case 'П': {
				text[i] = 'Њ';
				continue;
			}
			case 'р': {
				text[i] = 'p';
				continue;
			}
			case 'Р': {
				text[i] = 'P';
				continue;
			}
			case 'с': {
				text[i] = 'c';
				continue;
			}
			case 'С': {
				text[i] = 'C';
				continue;
			}
			case 'т': {
				text[i] = '¦';
				continue;
			}
			case 'Т': {
				text[i] = 'Џ';
				continue;
			}
			case 'у': {
				text[i] = 'y';
				continue;
			}
			case 'У': {
				text[i] = 'Y';
				continue;
			}
			case 'ф': {
				text[i] = '?';
				continue;
			}
			case 'Ф': {
				text[i] = 'Ѓ';
				continue;
			}
			case 'х': {
				text[i] = 'x';
				continue;
			}
			case 'Х': {
				text[i] = 'X';
				continue;
			}
			case 'ц': {
				text[i] = '*'; // 160
				continue;
			}
			case 'Ц': {
				text[i] = '‰';
				continue;
			}
			case 'ч': {
				text[i] = '¤';
				continue;
			}
			case 'Ч': {
				text[i] = 'Ќ';
				continue;
			}
			case 'ш': {
				text[i] = 'Ґ';
				continue;
			}
			case 'Ш': {
				text[i] = 'Ћ';
				continue;
			}
			case 'щ': {
				text[i] = 'Ў';
				continue;
			}
			case 'Щ': {
				text[i] = 'Љ';
				continue;
			}
			case 'ь': {
				text[i] = '©';
				continue;
			}
			case 'Ь': {
				text[i] = '’';
				continue;
			}
			case 'ъ': {
				text[i] = '§';
				continue;
			}
			case 'Ъ': {
				text[i] = 'ђ';
				continue;
			}
			case 'ы': {
				text[i] = 'Ё';
				continue;
			}
			case 'Ы': {
				text[i] = '‘';
				continue;
			}
			case 'э': {
				text[i] = 'Є';
				continue;
			}
			case 'Э': {
				text[i] = '“';
				continue;
			}
			case 'ю': {
				text[i] = '«';
				continue;
			}
			case 'Ю': {
				text[i] = '”';
				continue;
			}
			case 'я': {
				text[i] = '¬';
				continue;
			}
			case 'Я': {
				text[i] = '•';
				continue;
			}
			case '*': {
				text[i] = ']';
				continue;
			}
		}
	}
	return 1;
}

stock ToRusEx(srtext[])
{

	format(String256, sizeof(String256), srtext);
	for (new i = 0; i <= strlen(String256); i++)
	{
		switch (String256[i])
		{
			case 'а': {
				String256[i] = 'a';
				continue;
			}
			case 'А': {
				String256[i] = 'A';
				continue;
			}
			case 'б': {
				String256[i] = '—';
				continue;
			}
			case 'Б': {
				String256[i] = 'Ђ';
				continue;
			}
			case 'в': {
				String256[i] = 'ў';
				continue;
			}
			case 'В': {
				String256[i] = '‹';
				continue;
			}
			case 'г': {
				String256[i] = '™';
				continue;
			}
			case 'Г': {
				String256[i] = '‚';
				continue;
			}
			case 'д': {
				String256[i] = 'љ';
				continue;
			}
			case 'Д': {
				String256[i] = 'ѓ';
				continue;
			}
			case 'е': {
				String256[i] = 'e';
				continue;
			}
			case 'Е': {
				String256[i] = 'E';
				continue;
			}
			case 'ё': {
				String256[i] = 'e';
				continue;
			}
			case 'Ё': {
				String256[i] = 'E';
				continue;
			}
			case 'ж': {
				String256[i] = '›';
				continue;
			}
			case 'Ж': {
				String256[i] = '„';
				continue;
			}
			case 'з': {
				String256[i] = 'џ';
				continue;
			}
			case 'З': {
				String256[i] = '€';
				continue;
			}
			case 'и': {
				String256[i] = 'њ';
				continue;
			}
			case 'И': {
				String256[i] = '…';
				continue;
			}
			case 'й': {
				String256[i] = 'ќ';
				continue;
			}
			case 'Й': {
				String256[i] = '†';
				continue;
			}
			case 'к': {
				String256[i] = 'k';
				continue;
			}
			case 'К': {
				String256[i] = 'K';
				continue;
			}
			case 'л': {
				String256[i] = 'ћ';
				continue;
			}
			case 'Л': {
				String256[i] = '‡';
				continue;
			}
			case 'м': {
				String256[i] = 'Ї';
				continue;
			}
			case 'М': {
				String256[i] = 'M';
				continue;
			}
			case 'н': {
				String256[i] = '®';
				continue;
			}
			case 'Н': {
				String256[i] = 'H';
				continue;
			}
			case 'о': {
				String256[i] = 'o';
				continue;
			}
			case 'О': {
				String256[i] = 'O';
				continue;
			}
			case 'п': {
				String256[i] = 'Ј';
				continue;
			}
			case 'П': {
				String256[i] = 'Њ';
				continue;
			}
			case 'р': {
				String256[i] = 'p';
				continue;
			}
			case 'Р': {
				String256[i] = 'P';
				continue;
			}
			case 'с': {
				String256[i] = 'c';
				continue;
			}
			case 'С': {
				String256[i] = 'C';
				continue;
			}
			case 'т': {
				String256[i] = '¦';
				continue;
			}
			case 'Т': {
				String256[i] = 'Џ';
				continue;
			}
			case 'у': {
				String256[i] = 'y';
				continue;
			}
			case 'У': {
				String256[i] = 'Y';
				continue;
			}
			case 'ф': {
				String256[i] = '?';
				continue;
			}
			case 'Ф': {
				String256[i] = 'Ѓ';
				continue;
			}
			case 'х': {
				String256[i] = 'x';
				continue;
			}
			case 'Х': {
				String256[i] = 'X';
				continue;
			}
			case 'ц': {
				String256[i] = '*'; // 160
				continue;
			}
			case 'Ц': {
				String256[i] = '‰';
				continue;
			}
			case 'ч': {
				String256[i] = '¤';
				continue;
			}
			case 'Ч': {
				String256[i] = 'Ќ';
				continue;
			}
			case 'ш': {
				String256[i] = 'Ґ';
				continue;
			}
			case 'Ш': {
				String256[i] = 'Ћ';
				continue;
			}
			case 'щ': {
				String256[i] = 'Ў';
				continue;
			}
			case 'Щ': {
				String256[i] = 'Љ';
				continue;
			}
			case 'ь': {
				String256[i] = '©';
				continue;
			}
			case 'Ь': {
				String256[i] = '’';
				continue;
			}
			case 'ъ': {
				String256[i] = '§';
				continue;
			}
			case 'Ъ': {
				String256[i] = 'ђ';
				continue;
			}
			case 'ы': {
				String256[i] = 'Ё';
				continue;
			}
			case 'Ы': {
				String256[i] = '‘';
				continue;
			}
			case 'э': {
				String256[i] = 'Є';
				continue;
			}
			case 'Э': {
				String256[i] = '“';
				continue;
			}
			case 'ю': {
				String256[i] = '«';
				continue;
			}
			case 'Ю': {
				String256[i] = '”';
				continue;
			}
			case 'я': {
				String256[i] = '¬';
				continue;
			}
			case 'Я': {
				String256[i] = '•';
				continue;
			}
			case '*': {
				String256[i] = ']';
				continue;
			}
		}
	}
	return String256;
}



stock LoadMaps(id)
{
	return true;
}


stock update_speed_player(playerid, Float:speed)
{
	/*new
		format_str[10];

 	format(format_str, sizeof(format_str),"%.0f", speed);
 	PlayerTextDrawSetString(playerid, player_speed_car[6][playerid], format_str);
 	PlayerTextDrawShow(playerid, player_speed_car[6][playerid]);

 	PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);

	switch(floatround(speed, floatround_round))
	{
		case 0..11:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s0");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 12..21:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s1");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 22..30:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s2");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 31..40:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s3");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 41..50:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s4");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 51..60:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s5");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 61..70:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s6");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 71..80:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s7");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 81..90:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s8");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 91..100:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s9");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 101..110:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s10");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 111..120:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s11");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}

		case 121..130:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s12");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 131..140:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s13");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 141..150:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s14");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 151..160:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s15");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 161..170:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s16");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 171..180:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s17");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 181..190:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s18");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 191..200:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s19");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 201..210:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s20");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 211..220:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s21");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}

		case 221..230:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s22");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 231..240:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s23");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 241..250:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s24");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
		case 251..1000:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[0][playerid], "brilliantspeed:s25");
			PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		}
	}

	PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
*/
	return true;

}

stock update_fuel_speed_player(playerid, Float:fuel)
{
/*
	new
		fmt_str[50];

 	format(fmt_str,sizeof(fmt_str),"%.0f",fuel) ;
 	PlayerTextDrawSetString(playerid, player_speed_car[4][playerid], fmt_str);
 	PlayerTextDrawShow(playerid, player_speed_car[4][playerid]);

 	PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);

	switch(floatround(fuel, floatround_round))
	{
		case 0..10:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f1");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 11..20:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f2");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 21..30:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f3");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 31..40:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f4");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 41..50:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f5");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 51..60:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f6");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 61..70:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f7");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 71..80:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f8");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 81..90:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f9");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 91..100:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f10");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 101..110:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f11");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
		case 111..120:
		{
			PlayerTextDrawSetString(playerid, player_speed_car[1][playerid], "brilliantspeed:f12");
			PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		}
	}

	PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
*/
    UpdateFuel(playerid, fuel);
	return true;

}

stock update_dist_speed_player(playerid, Float:dist)
{
/*
	new
		fmt_str[50];

 	format(fmt_str,sizeof(fmt_str),"%06.0f",dist);
 	PlayerTextDrawSetString(playerid, player_speed_car[3][playerid], fmt_str);
 	PlayerTextDrawShow(playerid, player_speed_car[3][playerid]);

*/
    UpdateMileage(playerid, dist);
	return true;
}

stock update_hp_speed_player(playerid, Float:health)
{
/*
	new
		fmt_str[50];

 	format(fmt_str,sizeof(fmt_str),"%.0f",health);
 	PlayerTextDrawSetString(playerid, player_speed_car[5][playerid], fmt_str);
 	PlayerTextDrawShow(playerid, player_speed_car[5][playerid]);


 	switch(floatround(health, floatround_round))
 	{
		case 0..100:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h1");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 101..200:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h2");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 201..300:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h3");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 301..400:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h4");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 401..500:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h5");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 501..600:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h6");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 601..700:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h7");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}


		case 701..800:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h8");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 801..900:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h9");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}
		case 901..1000:
		{
			PlayerTextDrawSetString(playerid,player_speed_car[2][playerid], "brilliantspeed:h10");
			PlayerTextDrawShow(playerid,player_speed_car[2][playerid]);
		}

	}

	PlayerTextDrawShow(playerid, player_speed_car[2][playerid]);
*/
	return true;
}

stock update_speed_lock_car(playerid, status)
{
	/*if(status == 0)
	{
		PlayerTextDrawSetString(playerid, player_speed_car[9][playerid], "brilliantspeed:unlock");
		PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
	}
	else
	{
		PlayerTextDrawSetString(playerid, player_speed_car[9][playerid], "brilliantspeed:lock");
		PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
	}
*/
	return true;
}

stock update_speed_light_car(playerid, status)
{
	/*if(status == 0)
	{
		PlayerTextDrawSetString(playerid, player_speed_car[8][playerid], "brilliantspeed:lightoff");
		PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
	}
	else
	{
		PlayerTextDrawSetString(playerid, player_speed_car[8][playerid], "brilliantspeed:lightons");
		PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
	}
*/
	return true;
}

stock update_speed_engine_car(playerid, status)
{
	/*if(status == 0)
	{
		PlayerTextDrawSetString(playerid, player_speed_car[7][playerid], "brilliantspeed:engineoff");
		PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);
	}
	else
	{
		PlayerTextDrawSetString(playerid, player_speed_car[7][playerid], "brilliantspeed:engineon");
		PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);

	}
*/
	return true;
}

stock show_speed_player(playerid)
{
	//TextDrawShowForPlayer(playerid, speed_background);


	return true;
}

stock hide_speed_player(playerid)
{
	TextDrawHideForPlayer(playerid, speed_background);
	return true;
}

CMD:hide_hud(playerid)
{
	SetPVarIntNew(playerid, "hud_hide", 1);
	hide_hud_element(playerid);
	return true;
}

stock hide_hud_element(playerid)
{
	SetPVarIntNew(playerid, "hud_hide", 1);

	PlayerTextDrawHideEx(playerid, hud_elements_p[0][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[1][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[2][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[3][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[4][playerid]);

	TextDrawHideForPlayer(playerid, hud_elements[0]);
	TextDrawHideForPlayer(playerid, hud_elements[1]);

	return true;
}


stock show_hud_hungry(playerid)
{
	/*new
		fmt_str[144];


	new
		Float:hungry_pos = pData[playerid][hungry]*0.5731001;

	PlayerTextDrawHideEx(playerid, hud_elements_p[0][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[3][playerid]);


	if(hud_elements_p[0][playerid] == PlayerText:INVALID_TEXT_DRAW)
	{
		hud_elements_p[0][playerid] = CreatePlayerTextDraw(playerid, 509.599975, 29.500001, "LD_SPAC:white");
		PlayerTextDrawTextSize(playerid, hud_elements_p[0][playerid], hungry_pos, 9.790008);
		PlayerTextDrawAlignment(playerid, hud_elements_p[0][playerid], 1);
		PlayerTextDrawColor(playerid, hud_elements_p[0][playerid], -3721217);
		PlayerTextDrawBackgroundColor(playerid, hud_elements_p[0][playerid], 255);
		PlayerTextDrawFont(playerid, hud_elements_p[0][playerid], 4);
		PlayerTextDrawSetProportional(playerid, hud_elements_p[0][playerid], 0);
	}

	PlayerTextDrawShow(playerid, hud_elements_p[0][playerid]);

	if(hud_elements_p[3][playerid] == PlayerText:INVALID_TEXT_DRAW)
	{
		hud_elements_p[3][playerid] = CreatePlayerTextDraw(playerid, 538.333312, 27.377775, pData[playerid][hungry]); // Text element
		PlayerTextDrawLetterSize(playerid, hud_elements_p[3][playerid], 0.178666, 1.168593);
		PlayerTextDrawAlignment(playerid, hud_elements_p[3][playerid], 2);
		PlayerTextDrawColor(playerid, hud_elements_p[3][playerid], -1);
		PlayerTextDrawSetShadow(playerid, hud_elements_p[3][playerid], 1);
		PlayerTextDrawSetOutline(playerid, hud_elements_p[3][playerid], 0);
		PlayerTextDrawBackgroundColor(playerid, hud_elements_p[3][playerid], 1162167584);
		PlayerTextDrawFont(playerid, hud_elements_p[3][playerid], 2);
		PlayerTextDrawSetProportional(playerid, hud_elements_p[3][playerid], 1);


		format(fmt_str, 144, "%d%%", pData[playerid][hungry]);
		PlayerTextDrawSetString(playerid, hud_elements_p[3][playerid], fmt_str);

	}

	PlayerTextDrawShow(playerid, hud_elements_p[3][playerid]);

*/
    UpdateHungry(playerid, pData[playerid][hungry]);
	UpdatePlayerData(playerid,"hungry", pData[playerid][hungry]);
	return true;
}

stock show_hud_element(playerid)
{
	/*new
		fmt_str[144];

	DeletePVarNew(playerid, "hud_hide");

	PlayerTextDrawHideEx(playerid, hud_elements_p[1][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[2][playerid]);
	PlayerTextDrawHideEx(playerid, hud_elements_p[4][playerid]);

	new Float:hp;
	GetPlayerHealth(playerid, hp);

	new Float:arm;
	GetPlayerArmour(playerid, arm);

	TextDrawShowForPlayer(playerid, hud_elements[0]);
	TextDrawShowForPlayer(playerid, hud_elements[1]);

	if(arm == 0)
	{
		TextDrawHideForPlayer(playerid, hud_elements[2]);
	}
	if(arm > 0)
	{
		TextDrawShowForPlayer(playerid, hud_elements[2]);
	}



	new
		Float:health_pos = hp*0.5731001;

	new
		Float:armour_pos = arm*0.5731001;


	if(hp > 100)
	{
		health_pos = 57.31001;
	}
	if(arm > 100)
	{
		armour_pos = 57.31001;
	}


	if(hud_elements_p[1][playerid] == PlayerText:INVALID_TEXT_DRAW)
	{
		hud_elements_p[1][playerid] =  CreatePlayerTextDraw(playerid, 509.599975, 62.299983, "LD_SPAC:white");
		PlayerTextDrawTextSize(playerid, hud_elements_p[1][playerid], health_pos, 9.790008);
		PlayerTextDrawAlignment(playerid, hud_elements_p[1][playerid], 1);
		PlayerTextDrawColor(playerid, hud_elements_p[1][playerid], -13158401);
		PlayerTextDrawBackgroundColor(playerid, hud_elements_p[1][playerid], 255);
		PlayerTextDrawFont(playerid, hud_elements_p[1][playerid], 4);
		PlayerTextDrawSetProportional(playerid, hud_elements_p[1][playerid], 0);
	}
	PlayerTextDrawShow(playerid, hud_elements_p[1][playerid]);


	if(hud_elements_p[4][playerid] == PlayerText:INVALID_TEXT_DRAW)
	{
		hud_elements_p[4][playerid] = CreatePlayerTextDraw(playerid, 538.999938, 60.562953, ""); // Text element
		PlayerTextDrawLetterSize(playerid, hud_elements_p[4][playerid], 0.178666, 1.168593);
		PlayerTextDrawAlignment(playerid, hud_elements_p[4][playerid], 2);
		PlayerTextDrawColor(playerid, hud_elements_p[4][playerid], -1);
		PlayerTextDrawSetShadow(playerid, hud_elements_p[4][playerid], 1);
		PlayerTextDrawSetOutline(playerid, hud_elements_p[4][playerid], 0);
		PlayerTextDrawBackgroundColor(playerid, hud_elements_p[4][playerid], 1162167584);
		PlayerTextDrawFont(playerid, hud_elements_p[4][playerid], 2);
		PlayerTextDrawSetProportional(playerid, hud_elements_p[4][playerid], 1);


		format(fmt_str, 144, "%d%%", floatround(hp));
		PlayerTextDrawSetString(playerid, hud_elements_p[4][playerid], fmt_str);

		PlayerTextDrawShow(playerid, hud_elements_p[4][playerid]);

	}


	if(arm > 0)
	{
		if(hud_elements_p[2][playerid] == PlayerText:INVALID_TEXT_DRAW)
		{
			hud_elements_p[2][playerid] = CreatePlayerTextDraw(playerid, 509.599975, 77.799964, "LD_SPAC:white");
			PlayerTextDrawTextSize(playerid, hud_elements_p[2][playerid], armour_pos, 9.790008);
			PlayerTextDrawAlignment(playerid, hud_elements_p[2][playerid], 1);
			PlayerTextDrawColor(playerid, hud_elements_p[2][playerid], -1);
			PlayerTextDrawBackgroundColor(playerid, hud_elements_p[2][playerid], 255);
			PlayerTextDrawFont(playerid, hud_elements_p[2][playerid], 4);
			PlayerTextDrawSetProportional(playerid, hud_elements_p[2][playerid], 0);
		}
		PlayerTextDrawShow(playerid, hud_elements_p[2][playerid]);
	}


*/
	return true;
}

stock GivePlayerExp(playerid, exp)
{
	pData[playerid][pExp] += exp;
	UpdatePlayerData(playerid, "exp", pData[playerid][pExp]);

	check_next_level_player(playerid);
	return 1;
}

stock check_next_level_player(i)
{
	if(pData[i][pExp] >= pData[i][pLevel] * 6)
	{
		SCM(i, CGREEN, "Ваш игровой уровень и IC возраст повысился.");
		pData[i][pExp] = pData[i][pExp] - (pData[i][pLevel]*6);
		pData[i][pLevel]++;
		pData[i][pAge]++;
		SetPlayerScore(i, pData[i][pLevel]);

		if(pData[i][pLevel] == 4 && pData[i][pExp] == 0)
		{
			if(pData[i][pPromoActiveID] != -1)
				return check_promocode_prize(i);
		}
	}

	SetLevelProgresss(i, pData[i][pExp], (pData[i][pLevel] * 6));
	return 1;
}

callback:: give_money(playerid, sum, reason[])
{
	if(playerid == -1 || playerid == INVALID_PLAYER_ID)
		return true;


	if((pData[playerid][pMoney]+sum) < -1)
	{
		SendInf(playerid, "Произошла техническая ошибка!");

		format(String256,sizeof(String256),"[A] У игрока %s [%d] деньги пытались уйти в минус! Сумма: %d | Всего: %d", pData[playerid][pNickname], playerid, sum, pData[playerid][pMoney]);
		AdminChat(CGRAY,String256);

		return Kick(playerid);
	}

	if(pData[playerid][pMoney]+sum <= 0)
	{
		format(String256,sizeof(String256),"[A] У игрока %s [%d] деньги пытались уйти в минус! Сумма: %d | Всего: %d", pData[playerid][pNickname], playerid, sum, pData[playerid][pMoney]);
		AdminChat(CGRAY,String256);

	}

	if(pData[playerid][pMoney]+sum > pData[playerid][pMoney])
	{
		format(String144, sizeof(String144), ""cGR"[Наличные]"cWH" Вы получили "cGR"%d рублей"cWH" за %s", sum, reason);
		SCM(playerid, -1, String144);

		format(String64, sizeof(String64), "~g~+%d RUB", sum);
		GameTextForPlayer(playerid, String64, 1500, 1);
	}
	else
	{
		format(String144, sizeof(String144), ""cGR"[Наличные]"cWH" Вы заплатили "cGR"%d рублей"cWH" за %s", sum, reason);
		SCM(playerid, -1, String144);

		format(String64, sizeof(String64), "~r~%d RUB", sum);
		GameTextForPlayer(playerid, String64, 1500, 1);
	}
	pData[playerid][pMoney] += sum;

	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, pData[playerid][pMoney]);
	UpdatePlayerData(playerid,"money",pData[playerid][pMoney]);

	new
		fmt_str[512];

	format(fmt_str, sizeof(fmt_str), "Транзакция %d рублей за %s. В сумме денег: %d", sum, reason, pData[playerid][pMoney]);
	logs_money(playerid, pData[playerid][pMysqlID], sum, fmt_str);

	return true;
}
callback:: give_donate(playerid, sum, reason[])
{
	if(playerid == -1 || playerid == INVALID_PLAYER_ID)
		return true;

	pData[playerid][pDonate] += sum;

	//ResetPlayerDonate(playerid);
	UpdatePlayerData(playerid,"donate",pData[playerid][pDonate]);

	return true;
}

#define CUSTOM_FUEL 0x41
#define CUSTOM_SPAWN 0x42

/*public OnIncomingPacket(playerid, packetid, BitStream:bs)
{
    // new data[100], string[100], byteNameLen;

    // BS_IgnoreBits(bs, 8);
    // BS_GetNumberOfUnreadBits(bs, byteNameLen);
    // BS_ReadValue(bs, PR_STRING, data, byteNameLen);
    

    switch(packetid)
    {
		case 242: {
	 	    new jopa;
			// BS_IgnoreBits(bs, 8);
        	BS_ReadUint32(bs, jopa);
        	SendClientMessage(playerid, -1, ">> RPC 0x242 -> RECIEVE (id: %d)", jopa );
        
			switch(jopa) {
        case CUSTOM_FUEL:
        {
            new fuel, price;
            // BS_IgnoreBits(bs, 8);
            BS_ReadUint16(bs, fuel);
            BS_ReadUint16(bs, price);
            // BS_ReadValue(bs,
	        //     PR_INT16, fuel);
            // BS_ReadValue(bs,
	        //     PR_INT16, price);

            SendClientMessage(playerid, -1, ">> RPC 0x41 -> RECIEVE (Fuel: %d, Price: %d)", fuel, price);

            SetPVarIntNew(playerid, "count_fill_input", fuel);
            new count_fuel = GetPVarIntNew(playerid, "count_fill_input"), filling_count_all_fill = GetPVarIntNew(playerid, "filling_count_all_fill"), fill_id = GetPVarIntNew(playerid, "fuel_station_id");
            new veh_ids = GetPlayerVehicleID(playerid);

            format(String144, sizeof(String144), "Заправка на АЗС номер %d", fill_id);
            give_money(playerid, -price, String144);
            pay_money_bank_filling(price, fill_id);

            filling[fill_id][filling_count_all_fill] -= count_fuel;
            vehicle[veh_ids][cFuel] += float(count_fuel);

            update_fuel_speed_player(playerid, vehicle[veh_ids][cFuel]);
            clear_pvar_fill_station(playerid);
            save_fill(fill_id);

            return 1;
        }
		case CUSTOM_SPAWN:
		{
            new item;
            BS_IgnoreBits(bs, 8);
            BS_ReadUint8(bs, item);
			// BS_ReadValue(bs,
			//      PR_INT8, item);

            SendClientMessage(playerid, -1, ">> RPC 0x42 -> RECIEVE (iTEM: %d)", item);

			switch(item)
			{
			    case 0:
                {
                    pTemp[playerid][spawn_id] = SPAWN_LAST_POS;
		            SpawnPlayer(playerid);
                }
                case 1:
                {
                    if(pData[playerid][pFlate] != -1 || pData[playerid][pFlateRent] != -1 || pData[playerid][pHotelRoom] != -1 || pData[playerid][pHouse] != -1 || pData[playerid][pHouseRent] != -1)
		            {
			            pTemp[playerid][spawn_id] = SPAWN_HOUSE;
			            SpawnPlayer(playerid);
		            }
		            else
		            {
			            EROM(playerid, 0, "У вас отсутствует жильё", 5, "", "");
		            }
                }
                case 2:
                {
		            pTemp[playerid][spawn_id] = SPAWN_DEFAULT;
		            SpawnPlayer(playerid);
                }
                case 3:
                {
		            if(!pData[playerid][pFraction])
			            EROM(playerid, 0, "У вас отсутствует организация", 5, "", "");

		            pTemp[playerid][spawn_id] = SPAWN_ORG;
		            SpawnPlayer(playerid);
                }
			}

			return 1;
		}
			}
			return 1;
  		}
    }
    return 1;
}*/

/*CMD:alogin(playerid)
{
	if(pData[playerid][pAdmin] < 1)
		return true;

		if(pData[playerid][pAdminCode] == 0)
			SPD(playerid, D_ALOGIN, DIALOG_STYLE_INPUT, ""cBLUE"Админ авторизация", ""cWH"Придумайте ваш пароль от администратирования:", "Ввести", "Отмена");
		else
			SPD(playerid, D_ALOGIN, DIALOG_STYLE_INPUT, ""cBLUE"Админ авторизация", ""cWH"Введите ваш пароль от администратирования:", "Ввести", "Отмена");


	return true;
}*/

IPacket:52(playerid, BitStream:bs)
{
    new header, rpcid;
    BS_ReadValue(bs, PR_UINT8, header, PR_UINT8, rpcid);
    
    if(rpcid == 1)
	{
        new fuel, price, carid = GetPlayerVehicleID(playerid);
        BS_ReadValue(bs, PR_UINT32, fuel);
        BS_ReadValue(bs, PR_UINT32, price);

        // SendClientMessage(playerid, -1, ">> RPC 0x1 -> RECIEVE (Fuel: %d, Price: %d)", fuel, price);
        if (fuel < 1)
			return 0;

		if (price < 0)
			return 0;

		new
			transport 			= GetVehicleModel(carid) - 400,
			type_price_fuel 	= 0,
			fill_id 			= GetPVarIntNew(playerid, "fuel_station_id");

		switch(GetPVarIntNew(playerid, "fuel_type_filling"))
		{
			case 2:
				type_price_fuel = filling[fill_id][filling_price_fuel_2];
			case 3:
				type_price_fuel = filling[fill_id][filling_price_fuel_3];
			case 4:
				type_price_fuel = filling[fill_id][filling_price_fuel_4];
			default:
				type_price_fuel = filling[fill_id][filling_price_fuel_1];
		}

		new
			fuel_price = fuel * price,
			new_fuel = fuel + floatround(vehicle[carid][cFuel], floatround_round);

		if (type_price_fuel * fuel != fuel_price)
			return 0;

		if (new_fuel > transport_config[transport][transport_tank]) {
			new_fuel = transport_config[transport][transport_tank];
		}

		vehicle[carid][cFuel] = new_fuel;
		update_fuel_speed_player(playerid, vehicle[carid][cFuel]);

		format(GlobalString, sizeof GlobalString, "Заправка на АЗС №%d", filling[fill_id][filling_id]);
		give_money(playerid, -fuel_price, GlobalString);

		filling[fill_id][filling_count_all_fill] -= new_fuel;
		pay_money_bank_filling(fuel_price, fill_id);

        /*SetPVarIntNew(playerid, "count_fill_input", fuel);
        new count_fuel = GetPVarIntNew(playerid, "count_fill_input"), filling_count_all_fill = GetPVarIntNew(playerid, "filling_count_all_fill"), fill_id = GetPVarIntNew(playerid, "fuel_station_id");
        new veh_ids = GetPlayerVehicleID(playerid);

        format(String144, sizeof(String144), "Заправка на АЗС номер %d", fill_id);
        give_money(playerid, -price, String144);
        pay_money_bank_filling(price, fill_id);

        filling[fill_id][filling_count_all_fill] -= count_fuel;
        vehicle[veh_ids][cFuel] += float(count_fuel);

        update_fuel_speed_player(playerid, vehicle[veh_ids][cFuel]);*/
        clear_pvar_fill_station(playerid);
        save_fill(fill_id);

        return 1;
    }
    if(rpcid == 2)
	{
        new item;
        BS_ReadValue(bs, PR_UINT32, item);

        // SendClientMessage(playerid, -1, ">> RPC 0x2 -> RECIEVE (iTEM: %d)", item);

        switch(item)
        {
            case 0: pTemp[playerid][spawn_id] = SPAWN_LAST_POS;
            case 1: pTemp[playerid][spawn_id] = SPAWN_HOUSE;
            case 2: pTemp[playerid][spawn_id] = SPAWN_DEFAULT;
            case 3: pTemp[playerid][spawn_id] = SPAWN_ORG;
        }

        SpawnPlayer(playerid);
        return 1;
    }
    if(rpcid == 3) // ID_GENERATE_NUMBER_CHECK
	{
        if(GetPlayerMoneyEx(playerid) < 2000)
			SendCustomRPC(playerid, 0x42, 0);
		else
			SendCustomRPC(playerid, 0x42, 1);

        return 1;
    }
    if(rpcid == 4) // ID_GENERATE_NUMBER
	{
        give_money(playerid, -2000, "государственные услуги");
        
        return 1;
    }
    if(rpcid == 5) // ID_BUY_NUMBER_CHECK
	{
	    new type, length, number[10], region[3];

	    BS_ReadValue(bs, PR_UINT32, type); // type - тип номеров, если 0 - обычные, цена 5к вирт

	    BS_ReadValue(bs, PR_UINT8, length);
	    BS_ReadValue(bs, PR_STRING, number, length);

	    BS_ReadValue(bs, PR_UINT8, length);
	    BS_ReadValue(bs, PR_STRING, region, length);

	    // TODO: Добавить чек на занятость номеров

	    new amount = 250+(250*length);

	    if(type)
	    {
		    if(pData[playerid][pDonate] < amount)
			    SendCustomRPC(playerid, 0x43, 0);
		    else
			    SendCustomRPC(playerid, 0x43, 1);
	    }
	    else
	    {
		    if(GetPlayerMoneyEx(playerid) < amount)
			    SendCustomRPC(playerid, 0x43, 0);
		    else
			    SendCustomRPC(playerid, 0x43, 1);
	    }
			
        return 1;
    }
    if(rpcid == 6) // ID_BUY_NUMBER
	{
		new type, length, number, region;
		
		BS_ReadValue(bs, PR_UINT32, type); // type - тип номеров, если 0 - обычные, цена 5к вирт

		BS_ReadValue(bs, PR_UINT8, length);
		BS_ReadValue(bs, PR_STRING, number, length);

		new amount = 250+(250*length);

		if(type)
		{
			pData[playerid][pDonate] -= amount;

			format(GlobalString, sizeof(GlobalString), "Вы купили эксклюзивный государственный номер %s за %d донат-очков",
				number, amount);

			SendSucc(playerid, GlobalString);
		}
		else give_money(playerid, -5000, "обычные государственные номера");

		BS_ReadValue(bs, PR_UINT8, length);
		BS_ReadValue(bs, PR_STRING, region, length);

		new numberData[32];
		format(numberData, sizeof(numberData), "%s,%s", number, region);
		
		//selected_number[playerid] = number;
        //selected_regionR[playerid] = region;
        //selected_region[playerid] = type;
        
        //save_number(playerid, type);
        new veh_id = pData[playerid][car_id];
        new sql_id = vehicle[veh_id][cOwnTo];

        vehicle[veh_id][cPlate] = number;
        vehicle[veh_id][cPlateRegion] = region;

        switch(type) {
        	case 0: {
            	vehicle[veh_id][cPlateType] = 1;
            	SetVehicleRuNumberPlate(veh_id, vehicle[veh_id][cPlate], vehicle[veh_id][cPlateRegion]);
        	}
        	case 1: {
         	   vehicle[veh_id][cPlateType] = 4;
         	   SetVehicleUaNumberPlate(veh_id, vehicle[veh_id][cPlate]);
        	}
        	case 2: {
       	    	vehicle[veh_id][cPlateType] = 3;
           		SetVehicleBuNumberPlate(veh_id, vehicle[veh_id][cPlate]);
        	}
        	case 3: {
            	vehicle[veh_id][cPlateType] = 2;
            	SetVehicleKzNumberPlate(veh_id, vehicle[veh_id][cPlate], vehicle[veh_id][cPlateRegion]);
        	}
    	}

    	format(String2048, sizeof(String2048), "UPDATE `player_vehicles` SET \
		    	number = '%s',\
		    	number_region = '%s',\
		    	number_type = '%d'\
		    	WHERE id = '%d' AND owner = '%s'",
		    	vehicle[veh_id][cPlate],
				vehicle[veh_id][cPlateRegion],
				vehicle[veh_id][cPlateType],
		    	sql_id, GetNameEx(playerid));

		sql_queryEx(zConn, String2048, QUERY_THREADED);

		give_inventory_items(playerid, 404, 1, numberData);
		inventory_update_player(playerid);

        return 1;
    }
    if(rpcid == 10)
	{
        new num;
        BS_ReadValue(bs, PR_UINT32, num);

		new relnum;
		relnum = (((CHECKER_NUM * 2) - 17) * 17);
		
		if(num == relnum)
            KillTimer(handler);

        return 1;
    }
}

stock handleGPS(playerid)
{
    pTemp[playerid][pGPS] = true;
}

//stock handleGREENZONE(playerid)
//{
//
//}

stock randomCameraForAuthReg(playerid)
{
    /*switch(random(4))
    {
        case 0: {
            */SetPlayerPos(playerid, -318.9533, 146.6194, 13.0246);
	        Streamer_Update(playerid);
            Streamer_UpdateEx(playerid, -318.9533, 146.6194, 13.0246);
        
		    InterpolateCameraPos(playerid, -318.9533, 146.6194, 21.0246, -264.2242, 98.4658, 24.0955, 12000);
	        InterpolateCameraLookAt(playerid, -318.9533, 146.6194, 21.0246, -264.2242, 98.4658, 24.0955, 12000);
        /*}
		 case 1: {
            SetPlayerPos(playerid, 2801.2278,-1349.0701, 5.0246);
	        Streamer_Update(playerid);
            Streamer_UpdateEx(playerid, 2801.2278,-1349.0701, 5.0246);
		
		    SetPlayerCameraPos(playerid, 2801.2278,-1349.0701,10.3041);
		    SetPlayerCameraLookAt(playerid, 2801.2278,-1349.0701,10.3041);
        }
        case 2: {
            SetPlayerPos(playerid, -392.6857,960.1130, 13.0246);
	        Streamer_Update(playerid);
            Streamer_UpdateEx(playerid, -392.6857,960.1130, 13.0246);
        
		    SetPlayerCameraPos(playerid, -392.6857,960.1130,17.6732);
		    SetPlayerCameraLookAt(playerid, -392.6857,960.1130,17.6732);
        }
        case 3: {
            SetPlayerPos(playerid, 1797.4165,2472.2214, 13.0246);
	        Streamer_Update(playerid);
            Streamer_UpdateEx(playerid, 1797.4165,2472.2214, 13.0246);
        
		    SetPlayerCameraPos(playerid, 1797.4165,2472.2214,17.6732);
		    SetPlayerCameraLookAt(playerid, 1797.4165,2472.2214,17.6732);
        }
    }
    */return true;
}

stock IsPlayerHaveHouse(const playerid)
{
	for(new i, idx = all_houses; i < idx; i ++)
    {
    	if(House[i][house_owned] == pData[playerid][pMysqlID])
    	{
			return 1;
    	}
    }

	return 0;
}

stock GetPlayerFlateCount(const playerid)
{
	new count = 0;

 	for(new i = 0; i < all_flates; i++)
	{
		if(flate[i][flate_owned] == pData[playerid][pMysqlID])
			count++;
	}

	return count ;
}

stock show_player_carpass(playerid, actplayerid)
{
	new
		vehicle_id = GetPlayerVehicleID(playerid),
		transport = GetVehicleModel(vehicle_id)-400;

	if(vehicle[vehicle_id][cPlateRegion] != 0)
	{
		format(GlobalString, sizeof GlobalString, "\
			"cBLUE"Название:"cWH" %s\n\
			"cBLUE"Номера:"cWH" %s\n\
			"cBLUE"Пробег:"cWH" %d\n\
			"cBLUE"Вместимость бака:"cWH" %d\n\
			"cBLUE"Тип топлива:"cWH" %s\n\
			"cBLUE"Гос.стоимость:"cWH" %d",
			transport_config[transport][transport_name],
			vehicle[vehicle_id][cPlate],
			floatround(vehicle[vehicle_id][cMileage]),
			transport_config[transport][transport_tank],
			get_fuel_type_veh(transport),
			transport_config[transport][transport_price]
		);
	}
	else
	{
		format(GlobalString, sizeof GlobalString, "\
			"cBLUE"Название:"cWH" %s\n\
			"cBLUE"Номера:"cWH" отсутствуют\n\
			"cBLUE"Пробег:"cWH" %d\n\
			"cBLUE"Вместимость бака:"cWH" %d\n\
			"cBLUE"Тип топлива:"cWH" %s\n\
			"cBLUE"Гос.стоимость:"cWH" %d",
			transport_config[transport][transport_name],
			floatround(vehicle[vehicle_id][cMileage]),
			transport_config[transport][transport_tank],
			get_fuel_type_veh(transport),
			transport_config[transport][transport_price]
		);
	}

    SPD(actplayerid,dMes,0,""cBLUE"Паспорт автомобиля",GlobalString,"Закрыть","");

	return 1;
}


#include <..\..\gamemodes\API\player\player_security_systems.inc>
#include <..\..\gamemodes\API\systems\mafia_systems\mafia_systems.inc>
#include <..\..\gamemodes\API\systems\gps_systems.inc>
#include <..\..\gamemodes\API\player\player_online_bonus.inc>
#include <..\..\gamemodes\API\systems\newyear_systems\newyear_systems.inc>
#include <..\..\gamemodes\API\systems\newyear_systems\newyear_systems_quest.inc>
#include <..\..\gamemodes\API\systems\newyear_systems\newyear_snow_work.inc>
#include <..\..\gamemodes\API\systems\newyear_systems\newyear_systems_prize.inc>
#include <..\..\gamemodes\API\systems\game_relax_systems\race_systems_classic\race_classic_systems.inc>
#include <..\..\gamemodes\API\systems\player_new_systems\rent_vehicle_player_n.inc>
#include <..\..\gamemodes\API\systems\house_systems\house_moscow_city.inc>
#include <..\..\gamemodes\API\systems\quest_systems\quest_systems_new_player.inc>
#include <..\..\gamemodes\API\systems\accessories_systems.inc>
#include <..\..\gamemodes\API\systems\sklad_systems\sklad_other.inc>
#include <..\..\gamemodes\API\systems\voicechat_player.inc>
#include <..\..\gamemodes\API\systems\organisation_systems\ogranisation_systems_all.inc>
#include <..\..\gamemodes\API\systems\work_taxi_systems\work_taxi_general.inc>
#include <..\..\gamemodes\API\systems\work_taxi_systems\work_taxi_client.inc>
#include <..\..\gamemodes\API\systems\property_function\sellproperty_system.inc>
#include <..\..\gamemodes\API\systems\buisnes_systems\buisnes_systems_accessories.inc>
#include <..\..\gamemodes\API\systems\buisnes_systems\buisnes_systems_clothes.inc>
#include <..\..\gamemodes\API\systems\buisnes_systems\buisnes_systems_autosalon.inc>
#include <..\..\gamemodes\API\systems\pickup_systems\pickup_systems.inc>
#include <..\..\gamemodes\API\systems\work_samwill_systems\samwill_general.inc>
#include <..\..\gamemodes\API\systems\phone_systems\phone_systems.inc>
#include <..\..\gamemodes\API\systems\work_miner_systems\miner_systems_general.inc>
#include <..\..\gamemodes\API\systems\work_factory_systems\work_factory_systems_furniture.inc>
#include <..\..\gamemodes\API\systems\work_factory_systems\work_factory_systems_mith.inc>
#include <..\..\gamemodes\API\systems\work_factory_systems\work_factory_systems_general.inc>
#include <..\..\gamemodes\API\systems\casino_systems\casino_general.inc>
#include <..\..\gamemodes\API\player\promocode_dynamic.inc>
#include <..\..\gamemodes\API\player\promocode.inc>
#include <..\..\gamemodes\API\systems\garage_systems\garage_general_systems.inc>
#include <..\..\gamemodes\API\systems\buisnes_systems\buisnes_systems_load.inc>
#include <..\..\gamemodes\API\systems\buisnes_systems\buisnes_systems_realtor.inc>
#include <..\..\gamemodes\API\systems\hotel_systems\hotel_general_systems.inc>
#include <..\..\gamemodes\API\systems\flate_systems\entrance_systems.inc>
#include <..\..\gamemodes\API\systems\house_systems\house_systems.inc>
#include <..\..\gamemodes\API\systems\flate_systems\flate_systems.inc>
#include <..\..\gamemodes\API\systems\mech_systems\mechanic_systems.inc>
#include <..\..\gamemodes\API\systems\hospital_systems\hospital.inc>
#include <..\..\gamemodes\API\player\player_cars.inc>
#include <..\..\gamemodes\API\player\player_cars_load.inc>
#include <..\..\gamemodes\API\player\binder_cmd.inc>
#include <..\..\gamemodes\API\player\player_faq.inc>
#include <..\..\gamemodes\API\systems\fish_systems\fish_magazin.inc>
#include <..\..\gamemodes\API\admin\admin_cmd.inc>
#include <..\..\gamemodes\API\admin\report_systems.inc>
#include <..\..\gamemodes\API\player\cmd.inc>
#include <..\..\gamemodes\API\systems\autoschool_systems\autoschool.inc>
#include <..\..\gamemodes\API\systems\filling_systems\filling_systems.inc>
#include <..\..\gamemodes\API\systems\work_bus_systems\work_bus_general.inc>
#include <..\..\gamemodes\API\systems\work_trucker_systems\trucker_sync_systems.inc>
#include <..\..\gamemodes\API\systems\work_trucker_systems\trucker_systems.inc>
#include <..\..\gamemodes\API\systems\game_relax_systems\race_systems_classic\race_snow_systems.inc>
#include <..\..\gamemodes\API\systems\family_systems\family_systems_general.inc>
#include <..\..\gamemodes\API\systems\inventory_systems\inventory_systems.inc>
#include <..\..\gamemodes\API\systems\work_fire_systems\fire_work_systems.inc>
#include <..\..\gamemodes\API\systems\work_medic_systems\work_medic_systems.inc>
#include <..\..\gamemodes\API\player\player_fast_menu.inc>
#include <..\..\gamemodes\API\player\player_info_gui.inc>
#include <..\..\gamemodes\API\systems\hunter_systems\hunter_systems.inc>
#include <..\..\gamemodes\API\systems\teplica_systems\teplica_systems_general.inc>
#include <..\..\gamemodes\API\systems\work_fish_systems\fish_systems_general.inc>
#include <..\..\gamemodes\API\systems\work_fish_systems\fish_systems_magazin.inc>
#include <..\..\gamemodes\API\systems\work_trash_systems\trash_systems.inc>
#include <..\..\gamemodes\API\systems\work_bank_systems\bankwork_systems.inc>
#include <..\..\gamemodes\API\systems\ammo_menu_systems\ammo_menu_systems.inc>
#include <..\..\gamemodes\API\systems\parking_vehicle_systems\parking_vehicle_systems.inc>
#include <..\..\gamemodes\API\systems\new_number_system.inc>
#include <..\..\gamemodes\API\systems\container_system.inc>
