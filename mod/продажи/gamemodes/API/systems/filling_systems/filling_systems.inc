static const mounth_filling_stats[][] =
{	
	"ВЫ ЧЕ",
    "январь",
    "февраль",
    "март",
    "апрель",
    "май",
    "июнь",
    "июль",
    "августа",
    "сентябрь",
    "октябрь",
    "ноябрь",
    "декабрь"
};
 
static const Float:filling_general_text_pos[][] = 
{
	{-420.6937,924.3367,11.9898},
	{-2689.4778,6.4554,10.9056},
	{1996.0267,1927.9020,15.5245},
	{755.7379,2564.6294,11.9979},
	{712.8591,778.9937,11.9979},
	{2315.8357,-768.6655,12.9226},
	{2241.0867,-1785.5774,21.7090},	 
	{-586.8464,-1893.1982,40.8527}
};

static const Float:filling_1_coords_trigger_fuel[][] = 
{
	{-428.3645,924.3943,11.6314},
	{-423.3076,924.5023,11.6341},
	{-417.8442,924.4492,11.6358},
	{-413.4633,924.4599,11.6376}	
};

static const Float:filling_1_coords_trigger_energ[][] = 
{
	{-431.7977,932.8084,11.9833},
	{-435.6840,933.0549,11.9810}
};


static const Float:filling_2_coords_trigger_fuel[][] = 
{
	{-2683.3301,5.7045,10.9056},
	{-2686.5576,5.9394,10.9056},
	{-2692.4458,6.0317,10.9056},
	{-2695.3003,5.7462,10.9056}	
};

static const Float:filling_2_coords_trigger_energ[][] = 
{
	{-2708.5547,28.0515,10.9056},
	{-2708.4946,32.2912,10.9134}
};


static const Float:filling_3_coords_trigger_fuel[][] = 
{
	{1996.3447,1922.2401,15.5245},
	{1996.1564,1925.2153,15.5245},
	{1996.4828,1931.1283,15.5245},
	{1996.2836,1933.8607,15.5245}	
};

static const Float:filling_3_coords_trigger_energ[][] = 
{
	{2014.9342,1946.7086,15.5245},
	{2018.9026,1946.6534,15.5245}
};


static const Float:filling_4_coords_trigger_fuel[][] = 
{
	{759.0252,2559.3042,11.9979},
	{757.1962,2562.3062,11.9979},
	{754.3358,2567.1704,11.9979},
	{752.8960,2569.5933,11.9979}	
};

static const Float:filling_4_coords_trigger_energ[][] = 
{
	{765.9754,2591.9436,12.0057},
	{769.4137,2593.8967,12.0057}
};


static const Float:filling_5_coords_trigger_fuel[][] = 
{
	{715.0999,785.7443,11.9979},
	{713.8847,782.3536,11.9979},
	{711.4163,776.1812,11.9979},
	{710.2733,772.8842,11.9979}	
};

static const Float:filling_5_coords_trigger_energ[][] = 
{
	{698.8459,808.6059,11.9979},
	{700.2554,812.2184,11.9979}
};



static const Float:filling_6_coords_trigger_fuel[][] = 
{
	{2316.2666,-775.1224,12.8954},
	{2316.4226,-771.1117,12.9217},
	{2316.3938,-766.1722,12.9143},
	{2315.8657,-762.4176,12.9206}	
};

static const Float:filling_6_coords_trigger_energ[][] = 
{
	{2337.2546,-749.6885,12.8954},
	{2341.4758,-749.4843,12.8954}
};



static const Float:filling_7_coords_trigger_fuel[][] = 
{
	{2234.1978,-1785.0824,21.7090},
	{2237.8232,-1785.1566,21.7015},
	{2243.7185,-1785.2183,21.7090},
	{2247.9265,-1785.1394,21.7090}	
};

static const Float:filling_7_coords_trigger_energ[][] = 
{
	{2200.8242,-1798.8453,21.7090},
	{2200.9666,-1802.9314,21.7090}
};



static const Float:filling_8_coords_trigger_fuel[][] = 
{
	{-592.4221,-1889.0623,40.8611},
	{-588.6279,-1891.1621,40.8559},
	{-585.1470,-1893.3477,40.8509},
	{-581.3095,-1895.6649,40.8454}

};

static const Float:filling_8_coords_trigger_energ[][] = 
{
	{-582.7522,-1920.5490,40.8286},
	{-584.8342,-1924.3312,40.8279}
};

static const Float:filling_9_coords_trigger_fuel[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}	
};

static const Float:filling_9_coords_trigger_energ[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}
};


static const Float:filling_10_coords_trigger_fuel[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}	
};

static const Float:filling_10_coords_trigger_energ[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}
};

static const Float:filling_11_coords_trigger_fuel[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}	
};

static const Float:filling_11_coords_trigger_energ[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}
};

static const Float:filling_12_coords_trigger_fuel[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}	
};

static const Float:filling_12_coords_trigger_energ[][] = 
{
	{0.0, 0.0, 0.0},
	{0.0, 0.0, 0.0}
};


callback:: load_filling_all()
{
	new Result:filling_player = sql_queryEx(zConn, "SELECT * FROM `filling_station` ORDER BY `filling_id`", QUERY_CACHED);

	new all_filling_station = sql_num_rows(filling_player);

	new time = GetTickCount();


 	for(new i; i < all_filling_station; i++)
	{
		filling[i][filling_id]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_id"); 

		filling[i][filling_owner_id]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_owner_id"); 

		filling[i][filling_type_name]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_type_name"); 

		filling[i][filling_price]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_price"); 
		filling[i][filling_lock]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_lock"); 
		filling[i][filling_takings]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_takings"); 	
		filling[i][filling_day]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_day"); 

		filling[i][filling_bank]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_bank"); 

  		filling[i][filling_info_enter_x] = sql_get_field_assoc_float_ex(filling_player, i, "filling_info_enter_x");
  		filling[i][filling_info_enter_y] = sql_get_field_assoc_float_ex(filling_player, i, "filling_info_enter_y");
  		filling[i][filling_info_enter_z] = sql_get_field_assoc_float_ex(filling_player, i, "filling_info_enter_z");

		filling[i][filling_price_fuel_1]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_price_fuel_1"); 
		filling[i][filling_price_fuel_2]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_price_fuel_2"); 	
		filling[i][filling_price_fuel_3]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_price_fuel_3"); 

		filling[i][filling_price_fuel_4]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_price_fuel_4"); 

		filling[i][fillings_finka_ogran]  = sql_get_field_assoc_int_ex(filling_player, i, "fillings_finka_ogran"); 	
		filling[i][fillings_finka_day]  = sql_get_field_assoc_int_ex(filling_player, i, "fillings_finka_day"); 

		filling[i][filling_finka_max]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_finka_max"); 
		filling[i][filling_count_all_fill]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_count_all_fill"); 
		filling[i][filling_upgrade_1]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_upgrade_1"); 
		filling[i][filling_upgrade_2]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_upgrade_2"); 	
		filling[i][filling_upgrade_3]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_upgrade_3"); 
		filling[i][filling_upgrade_4]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_upgrade_4"); 
		filling[i][filling_upgrade_electro]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_upgrade_electro"); 	
		filling[i][filling_electro_energy]  = sql_get_field_assoc_int_ex(filling_player, i, "filling_electro_energy"); 

		filling[i][filling_count_energy] = sql_get_field_assoc_int_ex(filling_player, i, "filling_count_energy"); 


		filling[i][filling_buy_status] = sql_get_field_assoc_int_ex(filling_player, i, "filling_buy_status"); 
		filling[i][filling_sell_day_payday] = sql_get_field_assoc_int_ex(filling_player, i, "filling_sell_day_payday"); 

		create_dynamic_area(filling[i][filling_info_enter_x], filling[i][filling_info_enter_y], filling[i][filling_info_enter_z], -1, i, FILLING_ENTER);


		filling[i][filling_pickup] = CreateDynamicPickup(13729, 23, filling[i][filling_info_enter_x], filling[i][filling_info_enter_y], filling[i][filling_info_enter_z], -1, -1, -1, STREAM_DISTANCE_DYNAMIC_PICKUP);

		new 
			fmt_str[300];

		if(filling[i][filling_type_name] == 1)
		{

			if(filling[i][filling_owner_id] == -1)
			{
				format(fmt_str, 300, "\
				Автозаправочная Станция\n\
				"cBLUE"«%s»\n\n\
				"cWH"Владелец:"cBLUE" Отсутствует\n\
				"cWH"Стоимость:"cBLUE" %d\n\n\
				"cBLUE"Заправочная станция продаётся"cWH"\n\n\
				"cWH"Топлива:"cBLUE" %d литров"cWH"\n\
				Цена АИ-92: "cGR"%d рублей\n\
				Цена АИ-95: "cGR"%d рублей\n\
				Цена АИ-98: "cGR"%d рублей", get_name_filling(filling[i][filling_type_name]), filling[i][filling_count_all_fill]);
			}
			else
			{
				format(fmt_str, 300, "\
				Автозаправочная Станция\n\
				"cBLUE"«%s»\n\n\
				"cWH"Владелец:"cBLUE" Отсутствует\n\
				"cWH"Стоимость:"cBLUE" %d\n\n\
				"cWH"Топлива:"cBLUE" %d литров"cWH"\n\
				Цена АИ-92: "cGR"%d рублей\n\
				Цена АИ-95: "cGR"%d рублей\n\
				Цена АИ-98: "cGR"%d рублей", get_name_filling(filling[i][filling_type_name]), filling[i][filling_count_all_fill]);
			}
			filling[i][filling_mapicon] = CreateDynamicMapIcon(filling[i][filling_info_enter_x], filling[i][filling_info_enter_y], filling[i][filling_info_enter_z], 53, COLOR_RED, 0, -1, -1, 100.0);
			filling[i][filling_text3d_general] = CreateDynamic3DTextLabel(fmt_str, -1, filling_general_text_pos[i][0], filling_general_text_pos[i][1], filling_general_text_pos[i][2]+3.0, 15.0);
		}

		if(filling[i][filling_type_name] == 2)
		{


			if(filling[i][filling_owner_id] == -1)
			{
				format(fmt_str, 300, "\
				Автозаправочная Станция\n\
				"cLRED"«%s»\n\n\
				"cWH"Владелец:"cLRED" Отсутствует\n\
				"cWH"Стоимость:"cLRED" %d\n\n\
				"cLRED"Заправочная станция продаётся"cWH"\n\n\
				"cWH"Топлива:"cBLUE" %d литров"cWH"\n\
				Цена АИ-92: "cGR"%d рублей\n\
				Цена АИ-95: "cGR"%d рублей\n\
				Цена АИ-98: "cGR"%d рублей", get_name_filling(filling[i][filling_type_name]), filling[i][filling_count_all_fill]);
			}
			else
			{
				format(fmt_str, 300, "\
				Автозаправочная Станция\n\
				"cLRED"«%s»\n\n\
				"cWH"Владелец:"cLRED" Отсутствует\n\
				"cWH"Стоимость:"cLRED" %d\n\n\
				"cWH"Топлива:"cBLUE" %d литров"cWH"\n\
				Цена АИ-92: "cGR"%d рублей\n\
				Цена АИ-95: "cGR"%d рублей\n\
				Цена АИ-98: "cGR"%d рублей", get_name_filling(filling[i][filling_type_name]), filling[i][filling_count_all_fill]);
			}
			filling[i][filling_mapicon] = CreateDynamicMapIcon(filling[i][filling_info_enter_x], filling[i][filling_info_enter_y], filling[i][filling_info_enter_z], 20, COLOR_RED, 0, -1, -1, 100.0);
			filling[i][filling_text3d_general] = CreateDynamic3DTextLabel(fmt_str, -1, filling_general_text_pos[i][0], filling_general_text_pos[i][1], filling_general_text_pos[i][2]+3.0, 15.0);

		}

		CreateDynamic3DTextLabel(""cWH"Автозаправочная Станция\n"cBLUE"[ALT]",-1, \
		filling[i][filling_info_enter_x], filling[i][filling_info_enter_y], filling[i][filling_info_enter_z], 3.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1);	



  		all_filling++;
	}

	for(new i, idx = all_filling; i < idx; i ++)
	{
		update_filling_pickup(i);
	}



	printf("[АЗС]: <%i из %i>. Времени затрачено: <%d мс>" ,all_filling_station, all_filling, GetTickCount()-  time);

	return true;
}


callback:: save_fill(h)
{

    format(String2048, sizeof(String2048), "UPDATE `filling_station` SET \
    	filling_owner_id = '%d',\
    	filling_type_name = '%d',\
    	filling_price = '%d',\
    	filling_lock = '%d',\
    	filling_takings = '%d',\
    	filling_day = '%d',\
    	filling_bank = '%d',\
    	filling_info_enter_x = '%f',\
    	filling_info_enter_y = '%f',\
    	filling_info_enter_z = '%f',\
    	filling_price_fuel_1 = '%d',\
    	filling_price_fuel_2 = '%d',\
    	filling_price_fuel_3 = '%d',\
    	filling_price_fuel_4 = '%d',\
    	fillings_finka_ogran = '%d',\
    	fillings_finka_day = '%d',\
    	filling_finka_max = '%d',\
    	filling_count_all_fill = '%d',\
    	filling_upgrade_1 = '%d',\
    	filling_upgrade_2 = '%d',\
    	filling_upgrade_3 = '%d',\
    	filling_upgrade_4 = '%d',\
    	filling_upgrade_electro = '%d',\
    	filling_electro_energy = '%d',\
    	filling_count_energy = '%d',\
    	filling_buy_status = '%d',\
    	filling_sell_day_payday = '%d'\
    	WHERE filling_id = '%d'",
    	filling[h][filling_owner_id],
    	filling[h][filling_type_name],
    	filling[h][filling_price],
    	filling[h][filling_lock],
    	filling[h][filling_takings],
    	filling[h][filling_day],
    	filling[h][filling_bank],
    	filling[h][filling_info_enter_x],
    	filling[h][filling_info_enter_y],
    	filling[h][filling_info_enter_z],
    	filling[h][filling_price_fuel_1],
    	filling[h][filling_price_fuel_2],
    	filling[h][filling_price_fuel_3],
    	filling[h][filling_price_fuel_4],
    	filling[h][fillings_finka_ogran],
    	filling[h][fillings_finka_day],
    	filling[h][filling_finka_max],
    	filling[h][filling_count_all_fill],
    	filling[h][filling_upgrade_1],
    	filling[h][filling_upgrade_2],
    	filling[h][filling_upgrade_3],
    	filling[h][filling_upgrade_4],
    	filling[h][filling_upgrade_electro],
    	filling[h][filling_electro_energy],
    	filling[h][filling_count_energy],

		filling[h][filling_buy_status],
		filling[h][filling_sell_day_payday],

    	filling[h][filling_id]);

    sql_queryEx(zConn, String2048, QUERY_THREADED);	

    return true;
}

stock sell_filling_payday(f)
{


	new 
		owner_id = filling[f][filling_owner_id];

	new 
		owner_garage_name[32];


	GetPlayerNameByID(owner_id, owner_garage_name);

	new 
		player_id = GetPlayerID(owner_garage_name);	

	new 
		final_money = floatround(filling[f][filling_price]*0.8);


	if(IsPlayerConnected(player_id))
	{
		if(pData[player_id][pFillStation] == f)
		{	
			pData[player_id][pFillStation] = -1;
			UpdatePlayerData(player_id,"pFillStation", pData[player_id][pFillStation]);
			SFCM(player_id,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Ваша АЗС была продана за неуплату!");	

	        SendClientMessage(player_id, COLOR_LIGHTRED, "Вы можете вернуть 80 процентов от стоимости имущества");
	        SendClientMessage(player_id, COLOR_LIGHTRED, "Для этого введите команду /returnmoney");

	        pData[player_id][pReturnMoney] += final_money;
	        if(pData[player_id][pReturnMoney] > 20000000 ) pData[player_id][pReturnMoney] = 0;
		}
	}
	else
	{	
		new 
			formate_str[280];

		format(formate_str, 80, "UPDATE accounts SET pFillStation = '-1' WHERE pFillStation = '%d'", f);
		sql_queryEx(zConn, formate_str, QUERY_THREADED);	

		format(String256,sizeof(String256),"UPDATE `accounts` SET returnmoney = returnmoney + %d WHERE id = '%i'", final_money, owner_id);
		sql_queryEx(zConn, String256, QUERY_THREADED);

		send_off_message(-1, owner_garage_name, "Ваша АЗС была продана государству за неуплату. Мы вернули 80 процентов (/returnmoney)");
	}




	filling[f][filling_owner_id] = -1;	
	filling[f][filling_bank] = 0;

	filling[f][filling_upgrade_1] = 0;
	filling[f][filling_upgrade_2] = 0;
	filling[f][filling_upgrade_3] = 0;
	filling[f][filling_upgrade_4] = 0;
	filling[f][filling_upgrade_electro] = 0;

	filling[f][filling_buy_status] = 3;
	filling[f][filling_sell_day_payday] = RandomEx(2, 22);	

	update_filling_pickup(f);
	save_fill(f);
	return true;
}

stock sell_filling_payday3(f, count_payday)
{


	new 
		owner_id = filling[f][filling_owner_id];

	new 
		owner_garage_name[32];


	GetPlayerNameByID(owner_id, owner_garage_name);

	new 
		player_id = GetPlayerID(owner_garage_name);	

	new 
		final_money = floatround(filling[f][filling_price]*0.8);


	if(IsPlayerConnected(player_id))
	{
		if(pData[player_id][pFillStation] == f)
		{	
			pData[player_id][pFillStation] = -1;
			UpdatePlayerData(player_id,"pFillStation", pData[player_id][pFillStation]);
			SFCM(player_id,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Ваша АЗС была продана за неуплату!");	

	        SendClientMessage(player_id, COLOR_LIGHTRED, "Вы можете вернуть 80 процентов от стоимости имущества");
	        SendClientMessage(player_id, COLOR_LIGHTRED, "Для этого введите команду /returnmoney");

	        pData[player_id][pReturnMoney] += final_money;
	        if(pData[player_id][pReturnMoney] > 20000000 ) pData[player_id][pReturnMoney] = 0;
		}
	}
	else
	{	
		new 
			formate_str[280];

		format(formate_str, 80, "UPDATE accounts SET pFillStation = '-1' WHERE pFillStation = '%d'", f);
		sql_queryEx(zConn, formate_str, QUERY_THREADED);	

		format(String256,sizeof(String256),"UPDATE `accounts` SET returnmoney = returnmoney + %d WHERE id = '%i'", final_money, owner_id);
		sql_queryEx(zConn, String256, QUERY_THREADED);

		send_off_message(-1, owner_garage_name, "Ваша АЗС была продана государству за неуплату. Мы вернули 80 процентов (/returnmoney)");
	}




	filling[f][filling_owner_id] = -1;	
	filling[f][filling_bank] = 0;

	filling[f][filling_upgrade_1] = 0;
	filling[f][filling_upgrade_2] = 0;
	filling[f][filling_upgrade_3] = 0;
	filling[f][filling_upgrade_4] = 0;
	filling[f][filling_upgrade_electro] = 0;

	filling[f][filling_buy_status] = 3;
	filling[f][filling_sell_day_payday] = count_payday;	

	update_filling_pickup(f);
	save_fill(f);
	return true;
}

stock sell_filling_admin2(f)
{


	new 
		owner_id = filling[f][filling_owner_id];

	new 
		owner_garage_name[32];


	GetPlayerNameByID(owner_id, owner_garage_name);

	new 
		player_id = GetPlayerID(owner_garage_name);	

	new 
		final_money = floatround(filling[f][filling_price]*0.8);


	if(IsPlayerConnected(player_id))
	{
		if(pData[player_id][pFillStation] == f)
		{	
			pData[player_id][pFillStation] = -1;
			UpdatePlayerData(player_id,"pFillStation", pData[player_id][pFillStation]);
			SFCM(player_id,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Ваша АЗС была продана за неуплату!");	

	        SendClientMessage(player_id, COLOR_LIGHTRED, "Вы можете вернуть 80 процентов от стоимости имущества");
	        SendClientMessage(player_id, COLOR_LIGHTRED, "Для этого введите команду /returnmoney");

	        pData[player_id][pReturnMoney] += final_money;
	        if(pData[player_id][pReturnMoney] > 20000000 ) pData[player_id][pReturnMoney] = 0;
		}
	}
	else
	{	
		new 
			formate_str[280];

		format(formate_str, 80, "UPDATE accounts SET pFillStation = '-1' WHERE pFillStation = '%d'", f);
		sql_queryEx(zConn, formate_str, QUERY_THREADED);	

		format(String256,sizeof(String256),"UPDATE `accounts` SET returnmoney = returnmoney + %d WHERE id = '%i'", final_money, owner_id);
		sql_queryEx(zConn, String256, QUERY_THREADED);

		send_off_message(-1, owner_garage_name, "Ваша АЗС была продана государству за неуплату. Мы вернули 80 процентов (/returnmoney)");
	}




	filling[f][filling_owner_id] = -1;	
	filling[f][filling_bank] = 0;

	filling[f][filling_upgrade_1] = 0;
	filling[f][filling_upgrade_2] = 0;
	filling[f][filling_upgrade_3] = 0;
	filling[f][filling_upgrade_4] = 0;
	filling[f][filling_upgrade_electro] = 0;

	update_filling_pickup(f);
	save_fill(f);
	return true;
}


stock update_filling_pickup(f)
{

	static 
		fmt_str[700],
		fill_owner[24];


	if(filling[f][filling_owner_id] != -1)
	{
		GetPlayerNameByID(filling[f][filling_owner_id], filling[f][filling_owner]);
		format(fill_owner, 24, filling[f][filling_owner]);
	}
	else
	{
		format(fill_owner, 24, "Государство");	
	}


    if(filling[f][filling_owner_id] == -1)
    {
    	if(filling[f][filling_type_name] == 1)
    	{
			format(fmt_str, 500, "\
			"cWH"Автозаправочная Станция "cBLUE"№%d\n\
			"cBLUE"«%s»\n\n\
			"cWH"Владелец:"cBLUE" %s\n\
			"cWH"Стоимость:"cBLUE" %d\n\n\
			"cBLUE"Заправочная станция продаётся"cWH"\n\n\
			АИ-92: "cGR"%d рублей"cWH"\n\
			АИ-95: "cGR"%d рублей"cWH"\n\
			АИ-98: "cGR"%d рублей"cWH"\n\
			ДТ: "cGR"%d рублей"cWH"\n\n\
			"cBLUE"(( Для заправки нажмите ГУДОК у колонки ))",f+1, get_name_filling(f), fill_owner, filling[f][filling_price],
			filling[f][filling_price_fuel_1], filling[f][filling_price_fuel_2], filling[f][filling_price_fuel_3], filling[f][filling_price_fuel_4]);
    		UpdateDynamic3DTextLabelText(filling[f][filling_text3d_general], -1, fmt_str);
    	}
    	else
    	{
			format(fmt_str, 500, "\
			"cWH"Автозаправочная Станция "cLRED"№%d\n\
			"cLRED"«%s»\n\n\
			"cWH"Владелец:"cLRED" %s\n\
			"cWH"Стоимость:"cLRED" %d"cWH"\n\n\
			"cLRED"Заправочная станция продаётся"cWH"\n\n\
			АИ-92: "cGR"%d рублей"cWH"\n\
			АИ-95: "cGR"%d рублей"cWH"\n\
			АИ-98: "cGR"%d рублей"cWH"\n\
			ДТ: "cGR"%d рублей"cWH"\n\n\
			"cLRED"(( Для заправки нажмите ГУДОК у колонки ))", f+1, get_name_filling(f), fill_owner, filling[f][filling_price],
			filling[f][filling_price_fuel_1], filling[f][filling_price_fuel_2], filling[f][filling_price_fuel_3], filling[f][filling_price_fuel_4]); 		
			UpdateDynamic3DTextLabelText(filling[f][filling_text3d_general], -1, fmt_str);
    	}
    }
    else
    {
    	if(filling[f][filling_type_name] == 1)
    	{
			format(fmt_str, 500, "\
			"cWH"Автозаправочная Станция "cBLUE"№%d\n\
			"cBLUE"«%s»\n\n\
			"cWH"Владелец:"cBLUE" %s\n\
			"cWH"Стоимость:"cBLUE" %d"cWH"\n\n\
			АИ-92: "cGR"%d рублей"cWH"\n\
			АИ-95: "cGR"%d рублей"cWH"\n\
			АИ-98: "cGR"%d рублей"cWH"\n\
			ДТ: "cGR"%d рублей"cWH"\n\n\
			"cBLUE"(( Для заправки нажмите ГУДОК у колонки ))",f+1, get_name_filling(f), fill_owner, filling[f][filling_price],
			filling[f][filling_price_fuel_1], filling[f][filling_price_fuel_2], filling[f][filling_price_fuel_3], filling[f][filling_price_fuel_4]);
			UpdateDynamic3DTextLabelText(filling[f][filling_text3d_general], -1, fmt_str);
    	}
    	else
    	{
			format(fmt_str, 500, "\
			"cWH"Автозаправочная Станция "cLRED"№%d\n\
			"cLRED"«%s»\n\n\
			"cWH"Владелец:"cLRED" %s\n\
			"cWH"Стоимость:"cLRED" %d"cWH"\n\n\
			АИ-92: "cGR"%d рублей"cWH"\n\
			АИ-95: "cGR"%d рублей"cWH"\n\
			АИ-98: "cGR"%d рублей"cWH"\n\
			ДТ: "cGR"%d рублей"cWH"\n\n\
			"cLRED"(( Для заправки нажмите ГУДОК у колонки ))",f+1, get_name_filling(f), fill_owner, filling[f][filling_price],
			filling[f][filling_price_fuel_1], filling[f][filling_price_fuel_2], filling[f][filling_price_fuel_3], filling[f][filling_price_fuel_4]);
			UpdateDynamic3DTextLabelText(filling[f][filling_text3d_general], -1, fmt_str);	   		
    	}
    }
    return true;
}


stock get_name_filling(f)
{
	new 
		name[20],
		class = filling[f][filling_type_name];

	switch(class)
	{
		case 1: name = "Газпром Нефть";
		case 2: name = "Лукойл";
		default: name = "Отсутствует";
	}
	return name;
}

stock get_filling_color(filling_type)
{
	new 
		color[10];

	if(filling_type == 1) color = ""cBLUE"";
	if(filling_type == 2) color = ""cLRED"";

	return color;
}


stock show_filling_menu(playerid, f)
{

	SetPVarIntNew(playerid, "filling_menu_buy", f);

	if(filling[f][filling_owner_id] == -1)
	{
		if(filling[f][filling_type_name] == 1)
		{
		    format(String512, sizeof(String512), "\
		    "cGREY"Тип\t"cGREY"Информация\n\
		    "cBLUE"- "cWH"Купить АЗС\t"cBLUE"%d АЗС\n\
		    "cBLUE"- "cWH"Купить канистру с топливом\t"cGR"1000"cWH" рублей\n\
		    "cBLUE"- "cWH"Купить канистру с маслом\t"cGR"1500"cWH" рублей", f+1);
		    SPD(playerid, DIALOG_FILLING_SELECT_MENU, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"АЗС", String512, !"Выбрать", !"Закрыть"); 
		}
		else
		{
		    format(String512, sizeof(String512), "\
		    "cGREY"Тип\t"cGREY"Информация\n\
		    "cLRED"- "cWH"Купить АЗС\t"cLRED"%d АЗС\n\
		    "cLRED"- "cWH"Купить канистру с топливом\t"cGR"1000"cWH" рублей\n\
		    "cLRED"- "cWH"Купить канистру с маслом\t"cGR"1500"cWH" рублей", f+1);
		    SPD(playerid, DIALOG_FILLING_SELECT_MENU, DIALOG_STYLE_TABLIST_HEADERS, !""cLRED"АЗС", String512, !"Выбрать", !"Закрыть"); 
		}
	}
	else 
	{
		if(filling[f][filling_type_name] == 1)
		{
		    format(String512, sizeof(String512), "\
		    "cGREY"Тип\t"cGREY"Информация\n\
		    "cBLUE"- "cWH"Информация о АЗС\t"cBLUE"%d АЗС\n\
		    "cBLUE"- "cWH"Купить канистру с топливом\t"cGR"1000"cWH" рублей\n\
		    "cBLUE"- "cWH"Купить канистру с маслом\t"cGR"1500"cWH" рублей", f+1);
		    SPD(playerid, DIALOG_FILLING_SELECT_MENU, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"АЗС", String512, !"Выбрать", !"Закрыть"); 
		}
		else
		{
		    format(String512, sizeof(String512), "\
		    "cGREY"Тип\t"cGREY"Информация\n\
		    "cLRED"- "cWH"Информация о АЗС\t"cLRED"%d АЗС\n\
		    "cLRED"- "cWH"Купить канистру с топливом\t"cGR"1000"cWH" рублей\n\
		    "cLRED"- "cWH"Купить канистру с маслом\t"cGR"1500"cWH" рублей", f+1);
		    SPD(playerid, DIALOG_FILLING_SELECT_MENU, DIALOG_STYLE_TABLIST_HEADERS, !""cLRED"АЗС", String512, !"Выбрать", !"Закрыть"); 
		}		
	}

	return true;
}

stock buy_filling_canistra_1(playerid)
{


	if(GetPlayerMoneyEx(playerid) < 1000)
	{
		show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
		return SendErr(playerid, "У вас недостаточно денежных средств для покупки канистры!");
	}

	give_inventory_items(playerid, 377, 1);

	pay_money_bank_filling(1000, GetPVarIntNew(playerid, "filling_menu_buy"));

	format(String64, sizeof(String64), "Покупка канистры с топливом на АЗС №%d", GetPVarIntNew(playerid, "filling_menu_buy"));
	give_money(playerid, -1000, String64);
	SendSucc(playerid, "Вы успешно приобрели канистру с топливом!");
	SendInf(playerid, "Для заправки автомобиля топливом используйте - /fillcar");
	return true;
}

stock buy_filling_canistra_2(playerid)
{
	if(GetPlayerMoneyEx(playerid) < 1500)
	{
		show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
		return SendErr(playerid, "У вас недостаточно денежных средств для покупки канистры!");
	}

	give_inventory_items(playerid, 376, 1);

	format(String64, sizeof(String64), "Покупка канистры с топливом на АЗС №%d", GetPVarIntNew(playerid, "filling_menu_buy"));
	give_money(playerid, -1500, String64);

	SendSucc(playerid, "Вы успешно приобрели канистру с маслом!");
	SendInf(playerid, "Для заправки автомобиля маслом используйте - /filloil");
	return true;
}

stock info_filling_pickup(playerid, f)
{

	SetPVarIntNew(playerid, "filling_id_area_buy", f);

	static fill_owner[24];


	if(filling[f][filling_owner_id] != -1)
	{
		GetPlayerNameByID(filling[f][filling_owner_id], filling[f][filling_owner]);
		format(fill_owner, 24, filling[f][filling_owner]);
	}
	else
	{
		format(fill_owner, 24, "Государство");	
	}


	if(filling[f][filling_owner_id] == -1)
	{

    	if(filling[f][filling_type_name] == 1)
    	{
			format(String1024, sizeof(String1024), "\
			"cWH"Номер АЗС: 		\t\t"cBLUE"%d\n\
			"cWH"Наименование АЗС: 	\t\t"cBLUE"%s\n\
			"cWH"Владелец АЗС:		\t"cBLUE"%s\n\
			"cWH"Статус: 			\t\t%s\n\
			"cWH"Цена: 				\t"cGR"%d рублей\n\
			"cWH"Ежедневная оплата: \t\t\t"cGR"%d рублей\n\n\
			"cBLUE"Вы действительно хотите купить АЗС?",
			f+1,
			get_name_filling(f),
			fill_owner,
			(filling[f][filling_owner_id] == -1) ? (""cGR"Продается") : (""cLRED"Куплено"),
			filling[f][filling_price],
			filling[f][filling_takings]);
			SPD(playerid, DIALOG_BUY_FILLING, DIALOG_STYLE_MSGBOX, !""cBLUE"Покупка АЗС", String1024, !"Купить", !"Закрыть");	
		}
		else
		{
			format(String1024, sizeof(String1024), "\
			"cWH"Номер АЗС: 		\t\t"cLRED"%d\n\
			"cWH"Наименование АЗС: 	\t\t"cLRED"%s\n\
			"cWH"Владелец АЗС:		\t"cLRED"%s\n\
			"cWH"Статус: 			\t\t%s\n\
			"cWH"Цена: 				\t"cGR"%d рублей\n\
			"cWH"Ежедневная оплата: \t\t\t"cGR"%d рублей\n\n\
			"cLRED"Вы действительно хотите купить АЗС?",
			f+1,
			get_name_filling(f),
			fill_owner,
			(filling[f][filling_owner_id] == -1) ? (""cGR"Продается") : (""cLRED"Куплено"),
			filling[f][filling_price],
			filling[f][filling_takings]);
			SPD(playerid, DIALOG_BUY_FILLING, DIALOG_STYLE_MSGBOX, !""cLRED"Покупка АЗС", String1024, !"Купить", !"Закрыть");	
		}	
	}
	else
	{

    	if(filling[f][filling_type_name] == 1)
    	{
			format(String1024, sizeof(String1024), "\
			"cWH"Номер АЗС: 		\t\t"cBLUE"%d\n\
			"cWH"Наименование АЗС: 	\t\t"cBLUE"%s\n\
			"cWH"Владелец АЗС:		\t"cBLUE"%s\n\
			"cWH"Статус: 			\t\t%s\n\
			"cWH"Цена: 				\t"cGR"%d рублей\n\
			"cWH"Ежедневная оплата: \t\t\t"cGR"%d рублей",
			f+1,
			get_name_filling(f),
			fill_owner,
			(filling[f][filling_owner_id] == -1) ? (""cGR"Продается") : (""cLRED"Куплено"),
			filling[f][filling_price],
			filling[f][filling_takings]);
			SPD(playerid, 0, DIALOG_STYLE_MSGBOX, !""cBLUE"Информация о АЗС", String1024, !"Понял", "");	
		}	
		else
		{
			format(String1024, sizeof(String1024), "\
			"cWH"Номер АЗС: 		\t\t"cLRED"%d\n\
			"cWH"Наименование АЗС: 	\t\t"cLRED"%s\n\
			"cWH"Владелец АЗС:		\t"cLRED"%s\n\
			"cWH"Статус: 			\t\t%s\n\
			"cWH"Цена: 				\t"cGR"%d рублей\n\
			"cWH"Ежедневная оплата: \t\t\t"cGR"%d рублей",
			f+1,
			get_name_filling(f),
			fill_owner,
			(filling[f][filling_owner_id] == -1) ? (""cGR"Продается") : (""cLRED"Куплено"),
			filling[f][filling_price],
			filling[f][filling_takings]);
			SPD(playerid, 0, DIALOG_STYLE_MSGBOX, !""cLRED"Информация о АЗС", String1024, !"Понял", "");	
		}	
	}


	return true;
}

alias:pfill("filling", "fillpanel");
CMD:pfill(playerid)
{

	if(pData[playerid][pFillStation] == -1)
		return SendErr(playerid, "Вы не владеете АЗС, чтобы использовать данную команду!");

	new 
		f = pData[playerid][pFillStation];

	if(filling[f][filling_type_name] == 1)
	{

	    format(String1024, sizeof(String1024), "\
	        "cGREY"Тип\t"cGREY"Действие\n\
	        "cBLUE"- "cWH"%s\t"cBLUE"Информация\n\
	        "cBLUE"- "cWH"АЗС оплачено на\t"cBLUE"%d дней\n\
	        "cBLUE"- "cWH"Управление кассой\t"cGR"%d рублей\n\
	        "cBLUE"- "cWH"Статистика АЗС\t"cBLUE"Изучить\n\
	        "cBLUE"- "cWH"Продажа АЗС в гос.стоимость\t"cBLUE"Продать\n\
	        "cBLUE"\t\n\
	        "cBLUE"- "cWH"Общее количество топлива\t"cBLUE"%d литров\n\
	        "cBLUE"- "cWH"Общее количество энергии\t"cBLUE"%d кВт·ч\n\
	        "cBLUE"- "cWH"Изменение цены на АИ-92\t"cGR"%d рублей\n\
	        "cBLUE"- "cWH"Изменение цены на АИ-95\t"cGR"%d рублей\n\
	        "cBLUE"- "cWH"Изменение цены на АИ-98\t"cGR"%d рублей\n\
	        "cBLUE"- "cWH"Изменение цены на ДТ\t"cGR"%d рублей\n\
	        "cBLUE"\t\n\
	        "cBLUE"- "cWH"Расширенный бункер под топливо\t%s\n\
	        "cBLUE"- "cWH"Электричская зарядка 'Tesla SuperCharge'\t%s", get_name_filling(f), filling[f][filling_day], filling[f][filling_bank], filling[f][filling_count_all_fill], filling[f][filling_count_energy],
	        filling[f][filling_price_fuel_1], filling[f][filling_price_fuel_2], filling[f][filling_price_fuel_3], filling[f][filling_price_fuel_4],
	        (filling[f][filling_electro_energy]) ? (""cGR"Куплена") : (""cLRED"Купить улучшение"), (filling[f][filling_upgrade_1]) ? (""cGR"Куплен") : (""cLRED"Купить улучшение"));
	    SPD(playerid, DIALOG_CHANGE_FILLING, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Управление АЗС", String1024, !"Выбрать", !"Закрыть"); 	
	
	}
	else
	{
	    format(String1024, sizeof(String1024), "\
	        "cGREY"Тип\t"cGREY"Действие\n\
	        "cLRED"- "cWH"%s\t"cLRED"Информация\n\
	        "cLRED"- "cWH"АЗС оплачено на\t"cLRED"%d дней\n\
	        "cLRED"- "cWH"Управление кассой\t"cGR"%d рублей\n\
	        "cLRED"- "cWH"Статистика АЗС\t"cLRED"Изучить\n\
	        "cLRED"- "cWH"Продажа АЗС в гос.стоимость\t"cLRED"Продать\n\
	        "cLRED"\t\n\
	        "cLRED"- "cWH"Общее количество топлива\t"cLRED"%d литров\n\
	        "cLRED"- "cWH"Общее количество энергии\t"cLRED"%d кВт·ч\n\
	        "cLRED"- "cWH"Изменение цены на АИ-92\t"cGR"%d рублей\n\
	        "cLRED"- "cWH"Изменение цены на АИ-95\t"cGR"%d рублей\n\
	        "cLRED"- "cWH"Изменение цены на АИ-98\t"cGR"%d рублей\n\
	        "cLRED"- "cWH"Изменение цены на ДТ\t"cGR"%d рублей\n\
	        "cLRED"\t\n\
	        "cLRED"- "cWH"Расширенный бункер под топливо\t%s\n\
	        "cLRED"- "cWH"Электричская зарядка 'Tesla SuperCharge'\t%s", get_name_filling(f), filling[f][filling_day], filling[f][filling_bank], filling[f][filling_count_all_fill], filling[f][filling_count_energy],
	        filling[f][filling_price_fuel_1], filling[f][filling_price_fuel_2], filling[f][filling_price_fuel_3], filling[f][filling_price_fuel_4],
	        (filling[f][filling_electro_energy]) ? (""cGR"Куплена") : (""cLRED"Купить"), (filling[f][filling_upgrade_1]) ? (""cGR"Куплен") : (""cLRED"Купить"));
	    SPD(playerid, DIALOG_CHANGE_FILLING, DIALOG_STYLE_TABLIST_HEADERS, !""cLRED"Управление АЗС", String1024, !"Выбрать", !"Закрыть"); 			
	}
	return true;
}

stock free_fill_filling(playerid)
{
	new 
		f = pData[playerid][pFillStation];
	new 
		max_fill;

	if(filling[f][filling_upgrade_1] == 0)
	{
		max_fill = MAX_FILLING_BUNKER_STANDART;
	}
	else
	{
		max_fill = MAX_FILLING_BUNKER_UPDATE_1;
	}

	filling[f][filling_count_all_fill] = max_fill;
	SendSucc(playerid, "Количество топлива у АЗС изменено!");

	return true;
}

stock select_bank_fill_change(playerid, f)
{

	if(filling[f][filling_type_name] == 1)
	{

	    format(String256, sizeof(String256), "\
	        "cGREY"Тип\t"cGREY"Действие\n\
	        "cBLUE"- "cWH"Снять деньги с кассы\t"cGR"%d рублей\n\
	        "cBLUE"- "cWH"Положить деньги в кассу\t"cBLUE"Положить", filling[f][filling_bank]);
	    SPD(playerid, DIALOG_SELECT_BANK_FILLING, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Касса АЗС", String256, !"Выбрать", !"Закрыть"); 	
	}
	else
	{
	    format(String256, sizeof(String256), "\
	        "cGREY"Тип\t"cGREY"Действие\n\
	        "cLRED"- "cWH"Снять деньги с кассы\t"cGR"%d рублей\n\
	        "cLRED"- "cWH"Положить деньги в кассу\t"cLRED"Положить", filling[f][filling_bank]);
	    SPD(playerid, DIALOG_SELECT_BANK_FILLING, DIALOG_STYLE_TABLIST_HEADERS, !""cLRED"Касса АЗС", String256, !"Выбрать", !"Закрыть"); 			
	}


	return true;
}

stock input_money_bank_filling(playerid, f)
{


	if(filling[f][filling_type_name] == 1)
	{
		format(String256, sizeof(String256), "\
			"cWH"В кассе АЗС находится "cGR"%d рублей"cWH" на данный момент\n\n\
			"cBLUE"Сколько денег Вы хотите снять?", filling[f][filling_bank]);
		SPD(playerid, DIALOG_FILLING_INPUT_MONEY, DIALOG_STYLE_INPUT, !""cBLUE"Касса АЗС", String256, !"Далее", !"Назад");
	}
	else
	{
		format(String256, sizeof(String256), "\
			"cWH"В кассе АЗС находится "cGR"%d рублей"cWH" на данный момент\n\n\
			"cLRED"Сколько денег Вы хотите снять?", filling[f][filling_bank]);
		SPD(playerid, DIALOG_FILLING_INPUT_MONEY, DIALOG_STYLE_INPUT, !""cLRED"Касса АЗС", String256, !"Далее", !"Назад");
	}
	return true;

}
stock put_money_bank_filling(playerid, f)
{

	if(filling[f][filling_type_name] == 1)
	{
		format(String256, sizeof(String256), "\
			"cWH"В кассе АЗС находится "cGR"%d рублей"cWH" на данный момент\n\n\
			"cBLUE"Сколько денег Вы хотите положить?", filling[f][filling_bank]);
		SPD(playerid, DIALOG_FILLING_PUT_MONEY, DIALOG_STYLE_INPUT, !""cBLUE"Касса АЗС", String256, !"Далее", !"Назад");
	}
	else
	{
		format(String256, sizeof(String256), "\
			"cWH"В кассе АЗС находится "cGR"%d рублей"cWH" на данный момент\n\n\
			"cLRED"Сколько денег Вы хотите положить?", filling[f][filling_bank]);
		SPD(playerid, DIALOG_FILLING_PUT_MONEY, DIALOG_STYLE_INPUT, !""cLRED"Касса АЗС", String256, !"Далее", !"Назад");
	}

	return true;
}

stock accept_sell_filling_gos(playerid, f)
{
	if(pData[playerid][pFillStation] == -1)
		return SendErr(playerid, "Вы не владеете АЗС!");

	SPD(playerid, DIALOG_ACCEPT_SELL_AZS_GOS, DIALOG_STYLE_MSGBOX, !""cBLUE"Продажа АЗС", !"\
	"cWH"Вы уверены, что хотите продать транспортную компанию государству?\n\n\
	Вам будет возвращено 80% от стоимости!", !"Да", !"Нет");
	return true;
}

stock accept_sell_filling_final(playerid)
{

	new 
		f = pData[playerid][pFillStation];

	new 
		final_money = floatround(filling[f][filling_price]*0.8);

	
	pData[playerid][pFillStation] = -1;
	UpdatePlayerData(playerid,"pFillStation", pData[playerid][pFillStation]);
	SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Ваша АЗС была продана в гос.стоимость за %d!", final_money);	

	give_money(playerid, final_money, "Продажа АЗС в гос.стоимость");


	filling[f][filling_owner_id] = -1;	
	filling[f][filling_bank] = 0;

	filling[f][filling_upgrade_1] = 0;
	filling[f][filling_upgrade_2] = 0;
	filling[f][filling_upgrade_3] = 0;
	filling[f][filling_upgrade_4] = 0;
	filling[f][filling_upgrade_electro] = 0;

	filling[f][filling_buy_status] = 3;
	filling[f][filling_sell_day_payday] = RandomEx(2, 22);	

	update_filling_pickup(f);
	save_fill(f);

	return true;
}

stock delivery_fuel_order(playerid, f)
{

	new 
		max_fill;

	if(filling[f][filling_upgrade_1] == 0)
	{
		max_fill = MAX_FILLING_BUNKER_STANDART;
	}
	else
	{
		max_fill = MAX_FILLING_BUNKER_UPDATE_1;
	}

	new 
		fill_final_count_order = max_fill-filling[f][filling_count_all_fill];


	if(max_fill == filling[f][filling_count_all_fill])
	{
		PC_EmulateCommand(playerid, "/pfill");
		return SendErr(playerid, "У вас и так полные запасы топлива!");
	}

	if(filling[f][filling_type_name] == 1)
	{
		format(String256, sizeof(String256), "\
		"cWH"Текущая стоимость закупки топлива: "cGR"%d"cWH" рублей\n\n\
		"cWH"Вы можете заказать максимум "cBLUE"%d"cWH" литров топлива в бункер\n\n\
		"cBLUE"Сколько хотите закупить?",PRICE_BUY_FUEL_DELIVERY, fill_final_count_order);
		SPD(playerid, DIALOG_BUY_FILL_ORDER, DIALOG_STYLE_INPUT, !""cBLUE"Покупка топлива", String256, !"Далее", !"Назад");
	}
	else
	{
		format(String256, sizeof(String256), "\
		"cWH"Текущая стоимость закупки топлива: "cGR"%d"cWH" рублей\n\n\
		"cWH"Вы можете заказать максимум "cLRED"%d"cWH" литров топлива в бункер\n\n\
		"cLRED"Сколько хотите закупить?",PRICE_BUY_FUEL_DELIVERY, fill_final_count_order);
		SPD(playerid, DIALOG_BUY_FILL_ORDER, DIALOG_STYLE_INPUT, !""cLRED"Покупка топлива", String256, !"Далее", !"Назад");
	}
	return true;
}
stock change_price_fill_1(playerid, f)
{

	if(filling[f][filling_type_name] == 1)
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость АИ-92: "cGR"%d"cWH" рублей\n\n\
		"cBLUE"Введите новую стоимость АИ-92:",filling[f][filling_price_fuel_1]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_1, DIALOG_STYLE_INPUT, !""cBLUE"Изменение стоимости АИ-92", String144, !"Далее", !"Назад");
	}
	else
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость АИ-92: "cGR"%d"cWH" рублей\n\n\
		"cLRED"Введите новую стоимость АИ-92:",filling[f][filling_price_fuel_1]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_1, DIALOG_STYLE_INPUT, !""cLRED"Изменение стоимости АИ-92", String144, !"Далее", !"Назад");		
	}
	return true;

}

stock change_price_fill_2(playerid, f)
{
	if(filling[f][filling_type_name] == 1)
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость АИ-95: "cGR"%d"cWH" рублей\n\n\
		"cBLUE"Введите новую стоимость АИ-95:",filling[f][filling_price_fuel_2]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_2, DIALOG_STYLE_INPUT, !""cBLUE"Изменение стоимости АИ-95", String144, !"Далее", !"Назад");
	}
	else
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость АИ-95: "cGR"%d"cWH" рублей\n\n\
		"cLRED"Введите новую стоимость АИ-95:",filling[f][filling_price_fuel_2]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_2, DIALOG_STYLE_INPUT, !""cLRED"Изменение стоимости АИ-95", String144, !"Далее", !"Назад");		
	}
	return true;
}

stock change_price_fill_3(playerid, f)
{
	if(filling[f][filling_type_name] == 1)
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость АИ-98: "cGR"%d"cWH" рублей\n\n\
		"cBLUE"Введите новую стоимость АИ-98:",filling[f][filling_price_fuel_2]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_3, DIALOG_STYLE_INPUT, !""cBLUE"Изменение стоимости АИ-98", String144, !"Далее", !"Назад");
	}
	else
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость АИ-98: "cGR"%d"cWH" рублей\n\n\
		"cLRED"Введите новую стоимость АИ-98:",filling[f][filling_price_fuel_2]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_3, DIALOG_STYLE_INPUT, !""cLRED"Изменение стоимости АИ-98", String144, !"Далее", !"Назад");		
	}
	return true;
}

stock change_price_fill_4(playerid, f)
{
	if(filling[f][filling_type_name] == 1)
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость Дизельного Топлива: "cGR"%d"cWH" рублей\n\n\
		"cBLUE"Введите новую стоимость Дизельного Топлива:",filling[f][filling_price_fuel_2]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_4, DIALOG_STYLE_INPUT, !""cBLUE"Изменение стоимости ДТ", String144, !"Далее", !"Назад");
	}
	else
	{
		format(String144, sizeof(String144), "\
		"cWH"Текущая стоимость Дизельного Топлива: "cGR"%d"cWH" рублей\n\n\
		"cLRED"Введите новую стоимость Дизельного Топлива:",filling[f][filling_price_fuel_2]);
		SPD(playerid, DIALOG_CHANGE_FILL_PRICE_4, DIALOG_STYLE_INPUT, !""cLRED"Изменение стоимости ДТ", String144, !"Далее", !"Назад");		
	}
	return true;
}

stock buy_bunker_fill_plus(playerid, f)
{

	if(filling[f][filling_upgrade_1] == 1)
		return SendErr(playerid, "У вас уже имеется расширеный бункер для топлива!");

	if(filling[f][filling_type_name] == 1)
	{	
		SPD(playerid, DIALOG_FINAL_BUY_FILL_PLUS, DIALOG_STYLE_MSGBOX, !""cBLUE"Расширение запасов", !"\
		"cWH"Вы уверены, что хотите приобрести расширенный бункер для топлива?", !"Да", !"Нет");
	}
	else
	{
		SPD(playerid, DIALOG_FINAL_BUY_FILL_PLUS, DIALOG_STYLE_MSGBOX, !""cLRED"Расширение запасов", !"\
		"cWH"Вы уверены, что хотите приобрести расширенный бункер для топлива?", !"Да", !"Нет");		
	}
	return true;
}

stock final_buy_bunker_fill_plus(playerid)
{

	new 
		f = pData[playerid][pFillStation];

	filling[f][filling_upgrade_1] = 1;
		

	SendSucc(playerid, "Вы успешно приобрели Расширенный Бункер для топлива на АЗС!");
	SendInf(playerid, "Теперь Вы сможете заказывать больше топлива!");
	SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Максимальная вместительность увеличилась до - "cGR"%d"cWH" литров", MAX_FILLING_BUNKER_UPDATE_1);	
	return true;
}


stock buy_tesla_supercharge(playerid)
{
	new 
		f = pData[playerid][pFillStation];

	if(filling[f][filling_electro_energy] == 1)
		return SendErr(playerid, "У вас на АЗС уже имеется Tesla SuperCharge станция!");

	if(filling[f][filling_type_name] == 1)
	{	
		SPD(playerid, DIALOG_FINAL_BUY_CHARGE, DIALOG_STYLE_MSGBOX, !""cBLUE"Покупка Tesla SuperCharge", !"\
		"cWH"Вы уверены, что хотите приобрести электрозарядку Tesla SuperCharge?", !"Да", !"Нет");
	}
	else
	{
		SPD(playerid, DIALOG_FINAL_BUY_CHARGE, DIALOG_STYLE_MSGBOX, !""cLRED"Покупка Tesla SuperCharge", !"\
		"cWH"Вы уверены, что хотите приобрести электрозарядку Tesla SuperCharge?", !"Да", !"Нет");		
	}
	return true;
}

stock final_buy_tesla_supercharge(playerid)
{

	new 
		f = pData[playerid][pFillStation];

	filling[f][filling_electro_energy] = 1;
		

	SendSucc(playerid, "Вы успешно приобрели Tesla SuperCharge!");
	SendInf(playerid, "Теперь деньги с зарядки электромобилей будут попадать Вам в кассу!");
	return true;
}

stock info_name_fuel_station(playerid, type)
{

	switch(type)
	{
		case 1:
		{
			SPD(playerid, DIALOG_INFO_FUEL_ST, DIALOG_STYLE_MSGBOX, !""cBLUE"Газпром Нефть", !"\
			"cBLUE"«Газпром нефть»"cWH" — российская вертикально-интегрированная нефтяная компания. \n\
			Основные виды деятельности — разведка и разработка месторождений нефти и газа, \n\
			нефтепереработка, производство и реализация нефтепродуктов", !"Назад", "");		
	
		}
		case 2:
		{
			SPD(playerid, DIALOG_INFO_FUEL_ST, DIALOG_STYLE_MSGBOX, !""cLRED"Лукойл", !"\
			"cLRED"ПАО «Лукойл»"cWH" — российская нефтяная компания\n\n\
			Официальное название — ПАО «Нефтяная компания Лукойл»\n\
			Наименование компании происходит от первых букв названий \n\
			городов нефтяников (Лангепас, Урай, Когалым) и слова «ойл» (от англ. oil — нефть)", !"Назад", "");		
	
		}
	}



	return true;
}

stock dialog_all_fill(playerid, dialogid, response, listitem, inputtext[])
{

	switch(dialogid)
	{
		case DIALOG_INFO_FUEL_ST:
		{
			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");

			PC_EmulateCommand(playerid, "/pfill");			
		}
		case DIALOG_ACCEPT_SELL_AZS_GOS:
		{
			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");

			accept_sell_filling_final(playerid);			
		}
		case DIALOG_BUY_FILL_ORDER:
		{

			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");

			new 
				f = pData[playerid][pFillStation];


			if(!IsNumeric(inputtext)) 
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return delivery_fuel_order(playerid, f);
			}

			if(!strlen(inputtext) || strlen(inputtext) == 0)
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return delivery_fuel_order(playerid, f);
			}	

			new 
				count_fill_order = strval(inputtext);	


			new 
				max_fill;

			if(filling[f][filling_upgrade_1] == 0)
			{
				max_fill = MAX_FILLING_BUNKER_STANDART;
			}
			else
			{
				max_fill = MAX_FILLING_BUNKER_UPDATE_1;
			}

			new 
				fill_final_count_order = max_fill-filling[f][filling_count_all_fill];

			if(count_fill_order < 1 || count_fill_order > fill_final_count_order)
			{
			   SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"От "cGR"1"cWH" литра и до "cGR"%d"cWH" литров");	
			   return delivery_fuel_order(playerid, f);
			}		

		    format(String320, sizeof(String320), "INSERT INTO fuelorders(fuel_id, fuel_count) VALUES ('%d', '%d')",
		    f, count_fill_order);
		    sql_queryEx(zConn, String320, QUERY_THREADED);

		    SendSucc(playerid, "Вы успешно заказали топливо в своё АЗС!");				

		}
		case DIALOG_FILLING_INPUT_MONEY:
		{

			new 
				f = pData[playerid][pFillStation];

			if(!response)
				return select_bank_fill_change(playerid, f);

			if(!IsNumeric(inputtext) || !strlen(inputtext))
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return input_money_bank_filling(playerid, f);
			}



			new 
				count_money = strval(inputtext);

			if(count_money < 1)
			{
				SendErr(playerid,"У вас недостаточно денежных средств в кассе!");
				return input_money_bank_filling(playerid, f);				
			}

			if(filling[f][filling_bank] < count_money)
			{
				SendErr(playerid,"У вас недостаточно денежных средств в кассе!");
				return input_money_bank_filling(playerid, f);				
			}

			filling[f][filling_bank] -= count_money;


		 	format(String144, sizeof(String144), "Деньги с кассы АЗС №%d", f);
			give_money(playerid, count_money, String144);

			SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы взяли из кассы АЗС - "cGR"%d рублей"cWH"", count_money);	

			save_fill(f);

		}

		case DIALOG_FILLING_PUT_MONEY:
		{

			new 
				f = pData[playerid][pFillStation];

			if(!response)
				return select_bank_fill_change(playerid, f);

			if(!IsNumeric(inputtext) || !strlen(inputtext))
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return put_money_bank_filling(playerid, f);
			}

			new 
				count_money = strval(inputtext);


			if(count_money < 1)
			{
				SendErr(playerid,"У вас недостаточно денежных средств в кассе!");
				return input_money_bank_filling(playerid, f);				
			}

			if(GetPlayerMoneyEx(playerid) < count_money)
			{
				show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
				SendErr(playerid,"У вас недостаточно денежных средств для пополнения на такую сумму!");
				return put_money_bank_filling(playerid, f);				
			}

			filling[f][filling_bank] += count_money;

		 	format(String144, sizeof(String144), "Деньги в кассу АЗС №%d", f);
			give_money(playerid, -count_money, String144);

			SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы положили в кассу АЗС - "cGR"%d рублей"cWH"", count_money);	

			save_fill(f);	

		}

		case DIALOG_CHANGE_FILL_PRICE_1:
		{


			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");


			new 
				f = pData[playerid][pFillStation];

			if(!IsNumeric(inputtext)) 
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_1(playerid, f);
			}

			if(!strlen(inputtext) || strlen(inputtext) == 0)
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_1(playerid, f);
			}

			new 
				count_price_fill = strval(inputtext);

			if(count_price_fill < 30 || count_price_fill > 250)
			{
			   SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"От "cGR"30"cWH" рублей и до "cGR"250"cWH" рублей");	
			   return change_price_fill_1(playerid, f);
			}				

			filling[f][filling_price_fuel_1] = count_price_fill;

			update_filling_pickup(f);

			SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы успешно изменили цену на АИ-92, новая стоимость - "cGR"%d"cWH" рублей", count_price_fill);	

			PC_EmulateCommand(playerid, "/pfill");

			save_fill(f);

		}

		case DIALOG_CHANGE_FILL_PRICE_2:
		{


			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");


			new 
				f = pData[playerid][pFillStation];

			if(!IsNumeric(inputtext)) 
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_2(playerid, f);
			}

			if(!strlen(inputtext) || strlen(inputtext) == 0)
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_2(playerid, f);
			}

			new 
				count_price_fill = strval(inputtext);

			if(count_price_fill < 30 || count_price_fill > 250)
			{
			   SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"От "cGR"30"cWH" рублей и до "cGR"250"cWH" рублей");	
			   return change_price_fill_1(playerid, f);
			}				

			filling[f][filling_price_fuel_2] = count_price_fill;

			update_filling_pickup(f);

			SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы успешно изменили цену на АИ-95, новая стоимость - "cGR"%d"cWH" рублей", count_price_fill);	

			PC_EmulateCommand(playerid, "/pfill");

			save_fill(f);

		}

		case DIALOG_CHANGE_FILL_PRICE_3:
		{


			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");


			new 
				f = pData[playerid][pFillStation];

			if(!IsNumeric(inputtext)) 
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_3(playerid, f);
			}

			if(!strlen(inputtext) || strlen(inputtext) == 0)
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_3(playerid, f);
			}

			new 
				count_price_fill = strval(inputtext);

			if(count_price_fill < 30 || count_price_fill > 250)
			{
			   SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"От "cGR"30"cWH" рублей и до "cGR"250"cWH" рублей");	
			   return change_price_fill_1(playerid, f);
			}				

			filling[f][filling_price_fuel_3] = count_price_fill;

			update_filling_pickup(f);

			SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы успешно изменили цену на АИ-98, новая стоимость - "cGR"%d"cWH" рублей", count_price_fill);	

			PC_EmulateCommand(playerid, "/pfill");

			save_fill(f);

		}

		case DIALOG_CHANGE_FILL_PRICE_4:
		{


			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");


			new 
				f = pData[playerid][pFillStation];

			if(!IsNumeric(inputtext)) 
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_4(playerid, f);
			}

			if(!strlen(inputtext) || strlen(inputtext) == 0)
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return change_price_fill_4(playerid, f);
			}

			new 
				count_price_fill = strval(inputtext);

			if(count_price_fill < 30 || count_price_fill > 250)
			{
			   SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"От "cGR"30"cWH" рублей и до "cGR"250"cWH" рублей");	
			   return change_price_fill_1(playerid, f);
			}				

			filling[f][filling_price_fuel_4] = count_price_fill;

			update_filling_pickup(f);

			SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы успешно изменили цену на ДТ, новая стоимость - "cGR"%d"cWH" рублей", count_price_fill);	

			PC_EmulateCommand(playerid, "/pfill");

			save_fill(f);

		}
		case DIALOG_INPUT_COUNT_FUEL:
		{
			if(!response)
				return SelectTextDraw(playerid, COLOR_BLUE);

			if(!IsNumeric(inputtext)) 
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return show_select_count_fill(playerid);
			}

			if(!strlen(inputtext) || strlen(inputtext) == 0)
			{
				SendErr(playerid,"Вы указали неверное значение!");
				return show_select_count_fill(playerid);
			}

			new 
				count_fill = strval(inputtext);

			new 
				veh_ids = GetPlayerVehicleID(playerid);

			new 
				Float:fuel_count_car = vehicle[veh_ids][cFuel];

			new 
				max_fuel = transport_config[GetVehicleModel(veh_ids)-400][transport_tank]-floatround(fuel_count_car, floatround_round);


			new 
				fill_id = GetPVarIntNew(playerid, "fuel_station_id");
					
			if(count_fill < 1 || count_fill > max_fuel)
			{
			   SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"От "cGR"1"cWH" литра и до "cGR"%d"cWH" литров", max_fuel);	
			   return show_select_count_fill(playerid);
			}		

			if(filling[fill_id][filling_count_all_fill] < count_fill)
			{
			   SendErr(playerid, "На АЗС недостаточно топлива для заправки!");
			   return show_select_count_fill(playerid);
			}					

			SetPVarIntNew(playerid, "count_fill_input", count_fill);

			update_info_count_fuel(playerid);

			save_fill(fill_id);

		}

		case DIALOG_CHANGE_FILLING:
		{

			if(!response)
				return true;	

			new 
				f = pData[playerid][pFillStation];

			switch(listitem) 
			{
				case 0: return info_name_fuel_station(playerid, filling[f][filling_type_name]);
				case 1: return PC_EmulateCommand(playerid, "/pfill");
				case 2: return select_bank_fill_change(playerid, f);
				case 3: return change_statistic_filling(playerid);
				case 4: return accept_sell_filling_gos(playerid, f);
				case 5: return PC_EmulateCommand(playerid, "/pfill");
				case 6: return delivery_fuel_order(playerid, f);
				case 7: return PC_EmulateCommand(playerid, "/pfill");
				case 8: return change_price_fill_1(playerid, f);
				case 9: return change_price_fill_2(playerid, f);
				case 10: return change_price_fill_3(playerid, f);
				case 11: return change_price_fill_4(playerid, f);
				case 12: return PC_EmulateCommand(playerid, "/pfill");
				case 13: return buy_bunker_fill_plus(playerid, f);
				case 14: return buy_tesla_supercharge(playerid);
				case 15: return free_fill_filling(playerid);
			}

		}	

		case DIALOG_FILLING_SELECT_MENU:
		{
			if(!response)
				return true;	

			new 
				f = pTemp[playerid][area_item_id];

			switch(listitem)
			{
				case 0: return info_filling_pickup(playerid, f);
				case 1: return buy_filling_canistra_1(playerid);
				case 2: return buy_filling_canistra_2(playerid);
			}			
		}

		case DIALOG_SELECT_BANK_FILLING:
		{
			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");	

			new 
				f = pData[playerid][pFillStation];

			switch(listitem) 
			{
				case 0: return input_money_bank_filling(playerid, f);
				case 1: return put_money_bank_filling(playerid, f);
			}			
		}

		case DIALOG_FINAL_BUY_CHARGE:
		{

			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");	

			final_buy_tesla_supercharge(playerid);

		}
		case DIALOG_FINAL_BUY_FILL_PLUS:
		{
			if(!response)
				return PC_EmulateCommand(playerid, "/pfill");	

			final_buy_bunker_fill_plus(playerid);			
		}
		case DIALOG_BUY_FILLING:
		{
			if(!response)
				return true;	

			new 
				id_fill = GetPVarIntNew(playerid, "filling_id_area_buy");

			buy_fill(playerid, id_fill);	
		}
	}
	return true;
}

stock buy_fill(playerid, f)
{


	if(pData[playerid][pBusiness] != -1)
		return SendErr(playerid, "Вы не можете купить бизнес, так как уже владеете бизнесом!");

	if(pData[playerid][pHotelOwner] != -1)
		return SendErr(playerid, "Вы не можете купить бизнес, так как уже владеете отелем!");

	if(pData[playerid][pMechOwnerID] != -1)
		return SendErr(playerid,  "Вы не можете купить бизнес, так как уже владеете СТО!");

	if(pData[playerid][pFillStation] != -1)
		return SendErr(playerid,  "Вы не можете купить бизнес, так как уже владеете АЗС!");

	if(pData[playerid][pCasinoOwner] != -1)
		return SendErr(playerid, "Вы не можете купить бизнес, так как уже владеете казино!");

	if(filling[f][filling_buy_status] == 3)
		return SendErr(playerid, "АЗС недоступна в данный момент к продаже, так как оно опечатоно!");

	if(filling[f][filling_owner_id] != -1)
		return SendErr(playerid, "АЗС недоступно для покупки!");

	if(GetPlayerMoneyEx(playerid) < filling[f][filling_price]) 
	{
		show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
		return SendErr(playerid,"У вас недостаточно денежных средств для покупки АЗС!");	
	}


	show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_128_CENTER, "brilliantother:info_gui_buy_filling", 4000);


	filling[f][filling_owner_id] = pData[playerid][pMysqlID];
	format(filling[f][filling_owner], 24, pData[playerid][pNickname]);
	filling[f][filling_day] = 3;

	pData[playerid][pFillStation] = f;


	UpdatePlayerData(playerid,"pFillStation",pData[playerid][pFillStation]);	

 	format(String144, sizeof(String144), "Покупка АЗС №%d", f);
	give_money(playerid, -filling[f][filling_price], String144);

	update_filling_pickup(f);

	if(filling[f][filling_type_name] == 1)
	{
		format(String512, sizeof(String512), "\
			"cWH"Поздравляем Вас с приобретением АЗС!\n\n\
			Вы купили АЗС "cBLUE"№%d\n\
			"cWH"Ежедневная оплата: "cGR"%d"cWH" рублей\n\n\
			"cWH"АЗС оплачено на "cBLUE"%d"cWH" дней\n\
			Советутем Вам посетить банк для оплаты!",
			f,
			filling[f][filling_takings], filling[f][filling_day]);
		SPD(playerid, 0, DIALOG_STYLE_MSGBOX, !""cBLUE"Покупка АЗС", String512, !"Понял", !"");

	}
	else
	{
		format(String512, sizeof(String512), "\
			"cWH"Поздравляем Вас с приобретением АЗС!\n\n\
			Вы купили АЗС "cLRED"№%d\n\
			"cWH"Ежедневная оплата: "cGR"%d"cWH" рублей\n\n\
			"cWH"АЗС оплачено на "cLRED"%d"cWH" дней\n\
			Советутем Вам посетить банк для оплаты!",
			f,
			filling[f][filling_takings], filling[f][filling_day]);
		SPD(playerid, 0, DIALOG_STYLE_MSGBOX, !""cLRED"Покупка АЗС", String512, !"Понял", !"");		
	}

	save_fill(f);

	return true;

}

stock create_filling_other()
{

	create_filling_other_pickup();

	return true;
}

stock get_type_fill(playerid)
{
	new 
		name[20],
		f = GetPVarIntNew(playerid, "fuel_type_filling");

	switch(f)
	{
		case 1: name = "АИ-92";
		case 2: name = "АИ-95";
		case 3: name = "АИ-98";
		case 4: name = "Дизельного топлива";
		default: name = "Отсутствует";
	}
	return name;
}

stock update_info_count_fuel(playerid)
{
	new 
		type_price_fuel;

	new 
		fill_id = GetPVarIntNew(playerid, "fuel_station_id");
	new 
		type = filling[fill_id][filling_type_name];


	if(GetPVarIntNew(playerid, "fuel_type_filling") == 1) type_price_fuel = filling[fill_id][filling_price_fuel_1];
	if(GetPVarIntNew(playerid, "fuel_type_filling") == 2) type_price_fuel = filling[fill_id][filling_price_fuel_2];
	if(GetPVarIntNew(playerid, "fuel_type_filling") == 3) type_price_fuel = filling[fill_id][filling_price_fuel_3];
	if(GetPVarIntNew(playerid, "fuel_type_filling") == 4) type_price_fuel = filling[fill_id][filling_price_fuel_4];

	switch(type)
	{
		case 1:
		{
			new 
				fmt_str[80];

			SetPVarIntNew(playerid, "price_fuel_final", type_price_fuel*GetPVarIntNew(playerid, "count_fill_input"));

			format(fmt_str, 32, "%d_L", GetPVarIntNew(playerid, "count_fill_input"));
			PlayerTextDrawSetString(playerid, filling_gazprom_p[3][playerid], fmt_str);

			format(fmt_str, 32, "%d_RUB", type_price_fuel*GetPVarIntNew(playerid, "count_fill_input"));
			PlayerTextDrawSetString(playerid, filling_gazprom_p[2][playerid], fmt_str);

			PlayerTextDrawShow(playerid, filling_gazprom_p[3][playerid]);
			PlayerTextDrawShow(playerid, filling_gazprom_p[2][playerid]);

			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

			SelectTextDraw(playerid, COLOR_BLUE);
		}
		case 2:
		{
			new 
				fmt_str[80];

			SetPVarIntNew(playerid, "price_fuel_final", type_price_fuel*GetPVarIntNew(playerid, "count_fill_input"));

			format(fmt_str, 32, "%d_L", GetPVarIntNew(playerid, "count_fill_input"));
			PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[1][playerid], fmt_str);

			format(fmt_str, 32, "%d_RUB", type_price_fuel*GetPVarIntNew(playerid, "count_fill_input"));
			PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[2][playerid], fmt_str);

			PlayerTextDrawShow(playerid, fill_lukoil_panel_p[1][playerid]);
			PlayerTextDrawShow(playerid, fill_lukoil_panel_p[2][playerid]);

			SelectTextDraw(playerid, COLOR_BLUE);			
		}
	}
	return true;

}

stock show_select_count_fill(playerid)
{
	new 
		type_price_fuel;

	new 
		fill_id = GetPVarIntNew(playerid, "fuel_station_id");
	new 
		type = filling[fill_id][filling_type_name];

	new 
		veh_ids = GetPlayerVehicleID(playerid);

	new 
		Float:fuel_count_car = vehicle[veh_ids][cFuel];

	new 
		max_fuel = transport_config[GetVehicleModel(veh_ids)-400][transport_tank]-floatround(fuel_count_car, floatround_round);


	if(GetPVarIntNew(playerid, "fuel_type_filling") == 1) type_price_fuel = filling[fill_id][filling_price_fuel_1];
	if(GetPVarIntNew(playerid, "fuel_type_filling") == 2) type_price_fuel = filling[fill_id][filling_price_fuel_2];
	if(GetPVarIntNew(playerid, "fuel_type_filling") == 3) type_price_fuel = filling[fill_id][filling_price_fuel_3];
	if(GetPVarIntNew(playerid, "fuel_type_filling") == 4) type_price_fuel = filling[fill_id][filling_price_fuel_4];


	switch(type)
	{
		case 1:
		{
			format(String512, sizeof(String512), "\
			"cWH"На сколько литров Вы хотите заправить транспорт?\n\n\
			"cBLUE"-"cWH" Стоимость %s"cWH": "cGR"%d"cWH" рублей\n\
			"cBLUE"-"cWH" Объем бензобака: "cBLUE"%d"cWH" литров\n\
			"cBLUE"-"cWH" В вашем баке: "cBLUE"%.0f"cWH" литров\n\
			"cBLUE"-"cWH" Можно заправить: "cBLUE"%d"cWH" литров\n\n\
			"cBLUE"Введите количество топлива:", get_type_fill(playerid), type_price_fuel, transport_config[GetVehicleModel(veh_ids)-400][transport_tank], vehicle[veh_ids][cFuel], max_fuel);

			SPD(playerid, DIALOG_INPUT_COUNT_FUEL, DIALOG_STYLE_INPUT, !""cBLUE"Выбор количества топлива", String512, !"Далее", !"Назад");

		}
		case 2:
		{
			format(String512, sizeof(String512), "\
			"cWH"На сколько литров Вы хотите заправить транспорт?\n\n\
			"cLRED"-"cWH" Стоимость "cLRED"%s"cWH": "cGR"%d"cWH" рублей\n\
			"cLRED"-"cWH" Объем бензобака: "cLRED"%d"cWH" литров\n\
			"cLRED"-"cWH" В вашем баке: "cLRED"%.0f"cWH" литров\n\
			"cLRED"-"cWH" Можно заправить: "cLRED"%d"cWH" литров\n\n\
			"cLRED"Введите количество топлива:", get_type_fill(playerid), type_price_fuel, transport_config[GetVehicleModel(veh_ids)-400][transport_tank], vehicle[veh_ids][cFuel], max_fuel);

			SPD(playerid, DIALOG_INPUT_COUNT_FUEL, DIALOG_STYLE_INPUT, !""cLRED"Выбор количества топлива", String512, !"Далее", !"Назад");
		}
	}

	return true;
}

stock start_filling_car(playerid)
{
	new 
		price_fuel = GetPVarIntNew(playerid, "price_fuel_final"),
		count_fuel = GetPVarIntNew(playerid, "count_fill_input"),
		fill_id = GetPVarIntNew(playerid, "fuel_station_id");
	new 
		veh_ids = GetPlayerVehicleID(playerid);

	if(GetPlayerMoneyEx(playerid) < price_fuel) 
	{
		show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_256_RIGHT, "brilliantother:notify_player_21", 3000);
		return SendErr(playerid,"У вас недостаточно денежных средств для заправки такого количества топлива!");	
	}

 	format(String144, sizeof(String144), "Заправка на АЗС №%d", fill_id);
	give_money(playerid, -price_fuel, String144);

	pay_money_bank_filling(price_fuel, fill_id);

	filling[fill_id][filling_count_all_fill] -= count_fuel;
	vehicle[veh_ids][cFuel] += float(count_fuel);


	if(count_fuel != 0)
	{
		show_notify_gui(playerid, TEXTDRAW_SHOW, NOTIFY_GUI_128_RIGHT, "brilliantother:info_gui_filling_final", 3500);
		SendSucc(playerid, "Вы успешно заправили транспортное средство!");
		SFCM(playerid,0xFFFFFFFF,"• {FFC800}[Подсказка] "cWH"Вы заплатили "cGR"%d"cWH" рублей за "cGR"%d"cWH" литров топлива на АЗС №%d", price_fuel, count_fuel, fill_id);	
	}

	CancelSelectTextDraw(playerid);

	filling_panel_car(playerid, 1, TEXTDRAW_HIDE);
	filling_panel_car(playerid, 2, TEXTDRAW_HIDE);

	if(pData[playerid][pSettings][10] == 1)
	{
	    new engine, lights, alarm, doors, bonnet, boot, objective;
	    GetVehicleParamsEx(veh_ids, engine, lights, alarm, doors, bonnet, boot, objective);


		show_speed_player(playerid);

		PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[2][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[3][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[4][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[5][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[6][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[10][playerid]);

		veh_timer_ex(playerid, veh_ids);

		update_fuel_speed_player(playerid, vehicle[veh_ids][cFuel]);
		update_speed_lock_car(veh_ids, doors);
		update_speed_light_car(veh_ids, lights);
		vehicle_engine_status(veh_ids, engine);

		update_hp_speed_player(veh_ids, vehicle[veh_ids][cHealth]);
		update_dist_speed_player(veh_ids, vehicle[veh_ids][cMileage]);
	}

	clear_pvar_fill_station(playerid);

	save_fill(fill_id);

	return true;
}


stock close_filling_car(playerid)
{
	new 
		veh_ids = GetPlayerVehicleID(playerid);

	CancelSelectTextDraw(playerid);

	filling_panel_car(playerid, 1, TEXTDRAW_HIDE);
	filling_panel_car(playerid, 2, TEXTDRAW_HIDE);

	if(pData[playerid][pSettings][10] == 1)
	{
	    new engine, lights, alarm, doors, bonnet, boot, objective;
	    GetVehicleParamsEx(veh_ids, engine, lights, alarm, doors, bonnet, boot, objective);


		show_speed_player(playerid);

		PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[2][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[3][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[4][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[5][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[6][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[10][playerid]);

		veh_timer_ex(playerid, veh_ids);

		update_fuel_speed_player(playerid, vehicle[veh_ids][cFuel]);
		update_speed_lock_car(veh_ids, doors);
		update_speed_light_car(veh_ids, lights);
		vehicle_engine_status(veh_ids, engine);

		update_hp_speed_player(veh_ids, vehicle[veh_ids][cHealth]);
		update_dist_speed_player(veh_ids, vehicle[veh_ids][cMileage]);
	}

	clear_pvar_fill_station(playerid);
	return true;
}



stock clear_pvar_fill_station(playerid)
{

	DeletePVarNew(playerid, "fuel_type_filling");
	DeletePVarNew(playerid, "fuel_type_filling");
	DeletePVarNew(playerid, "price_fuel_final");
	DeletePVarNew(playerid, "count_fill_input");
	DeletePVarNew(playerid, "car_in_filling_station");
	DeletePVarNew(playerid, "fuel_timer_count");
	DeletePVarNew(playerid, "in_fuel_station");
	DeletePVarNew(playerid, "fuel_station_id");
	DeletePVarNew(playerid, "fuel_station_type");
	return true;

}


stock clear_pvar_fill_disconnect(playerid)
{
	DeletePVarNew(playerid, "fuel_type_filling");
	DeletePVarNew(playerid, "fuel_type_filling");
	DeletePVarNew(playerid, "price_fuel_final");
	DeletePVarNew(playerid, "count_fill_input");
	DeletePVarNew(playerid, "car_in_filling_station");
	DeletePVarNew(playerid, "fuel_timer_count");

	DeletePVarNew(playerid, "tesla_charge");
	DeletePVarNew(playerid, "in_fuel_station");
	DeletePVarNew(playerid, "fuel_station_id");

	return true;
}

stock charge_panel_car(playerid, action)
{

	switch(action)
	{
		case TEXTDRAW_SHOW:
		{
			TogglePlayerAllHudElements(playerid, HUD_ELEMENT_HIDE);

			create_charge_tesla_p(playerid);

			new 
				fmt_str[32];
				
			new 
				veh_ids = GetPlayerVehicleID(playerid);

			format(fmt_str, 32, "%d_%s", transport_config[GetVehicleModel(veh_ids)-400][transport_tank], ToRusEx("КВТч"));
			PlayerTextDrawSetString(playerid, charge_tesla_panel_p[3][playerid], fmt_str);

			format(fmt_str, 32, "%d_%s", floatround(vehicle[veh_ids][cEnergy], floatround_round), ToRusEx("КВТч"));
			PlayerTextDrawSetString(playerid, charge_tesla_panel_p[2][playerid], fmt_str);

			format(fmt_str, 32, "%d_KM", floatround(vehicle[veh_ids][cBatteryEnergy], floatround_round));
			PlayerTextDrawSetString(playerid, charge_tesla_panel_p[5][playerid], fmt_str);

			format(fmt_str, 32, "%d%", floatround(vehicle[veh_ids][cBatteryEnergy], floatround_round));
			PlayerTextDrawSetString(playerid, charge_tesla_panel_p[5][playerid], fmt_str);

			format(fmt_str, 32,"0%");
			PlayerTextDrawSetString(playerid, charge_tesla_panel_p[6][playerid], fmt_str);
			PlayerTextDrawShow(playerid, charge_tesla_panel_p[6][playerid]);

			for(new i = 0; i < 7; i++)
			{
				PlayerTextDrawShow(playerid, charge_tesla_panel_p[i][playerid]);
			}
			
			TextDrawShowForPlayer(playerid, charge_tesla_button[0]);
			TextDrawShowForPlayer(playerid, charge_tesla_button[1]);

			PlayerTextDrawHideEx(playerid, player_info_td[playerid]);
			
			SetPVarIntNew(playerid, "car_in_filling_station", 1);
			SelectTextDraw(playerid, COLOR_BLUE);
		}
		case TEXTDRAW_HIDE:
		{

			PlayerTextDrawHide(playerid, charge_tesla_panel_p[0][playerid]);
			PlayerTextDrawHide(playerid, charge_tesla_panel_p[1][playerid]);
			PlayerTextDrawHide(playerid, charge_tesla_panel_p[2][playerid]);
			PlayerTextDrawHide(playerid, charge_tesla_panel_p[3][playerid]);
			PlayerTextDrawHide(playerid, charge_tesla_panel_p[4][playerid]);
			PlayerTextDrawHide(playerid, charge_tesla_panel_p[5][playerid]);
			PlayerTextDrawHide(playerid, charge_tesla_panel_p[6][playerid]);


			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[0][playerid]);
			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[1][playerid]);
			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[2][playerid]);
			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[3][playerid]);
			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[4][playerid]);
			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[5][playerid]);
			PlayerTextDrawDestroy(playerid, charge_tesla_panel_p[6][playerid]);

			TogglePlayerAllHudElements(playerid, HUD_ELEMENT_SHOW);

			TextDrawHideForPlayer(playerid, charge_tesla_button[0]);
			TextDrawHideForPlayer(playerid, charge_tesla_button[1]);

			DeletePVarNew(playerid, "car_in_filling_station");
		}
	}


	return true;
}


stock start_charging_tesla(playerid)
{
	new 
		veh_ids = GetPlayerVehicleID(playerid);

	TogglePlayerControllable(playerid, false);

	new status, status_percent, status_fuel;

	new 
		fill_id = GetPVarIntNew(playerid, "fuel_station_id");

	new 
		fmt_str[144];

	status = 0;

	status_fuel = floatround(vehicle[veh_ids][cEnergy], floatround_round);

	status_percent = 0;

	while(IsPlayerConnected(playerid) && status != 265)
	{
		wait_ms(1000);

		status += 53;
		status_percent += 20;

		vehicle[veh_ids][cEnergy] += float((get_fuel_max_veh(veh_ids)-status_fuel)/5);

		if(status >= 318)
		{
			charge_panel_car(playerid, TEXTDRAW_HIDE);
			break;
		} 

		format(fmt_str, 32, "%d_%s", floatround(vehicle[veh_ids][cEnergy], floatround_round), ToRusEx("КВТч"));
		PlayerTextDrawSetString(playerid, charge_tesla_panel_p[2][playerid], fmt_str);
		PlayerTextDrawShow(playerid, charge_tesla_panel_p[2][playerid]);

		format(fmt_str, 32,"%d%", status_percent);
		PlayerTextDrawSetString(playerid, charge_tesla_panel_p[6][playerid], fmt_str);
		PlayerTextDrawShow(playerid, charge_tesla_panel_p[6][playerid]);

		PlayerTextDrawTextSize(playerid, charge_tesla_panel_p[1][playerid], status, 20.740722);
		PlayerTextDrawShow(playerid, charge_tesla_panel_p[1][playerid]);
	}

 	format(String144, sizeof(String144), "Зарядка на АЗС №%d", fill_id);
	give_money(playerid, -1500, String144);

	pay_money_bank_filling(1500, fill_id);

	vehicle[veh_ids][cEnergy] = 85;

	if(pData[playerid][pSettings][10] == 1)
	{
		show_speed_player(playerid);

		PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[2][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[3][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[4][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[5][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[6][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[10][playerid]);

		veh_timer_ex(playerid, veh_ids);

		charge_panel_car(playerid, TEXTDRAW_HIDE);

		update_fuel_speed_player(playerid, vehicle[veh_ids][cEnergy]);
	}

	CancelSelectTextDraw(playerid);
	TogglePlayerControllable(playerid, true);

	clear_pvar_fill_station(playerid);


	return true;
}

stock close_charging_tesla(playerid)
{
	new 
		veh_ids = GetPlayerVehicleID(playerid);

	if(pData[playerid][pSettings][10] == 1)
	{
		show_speed_player(playerid);

		PlayerTextDrawShow(playerid, player_speed_car[0][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[1][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[2][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[3][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[4][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[5][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[6][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[7][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[8][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[9][playerid]);
		PlayerTextDrawShow(playerid, player_speed_car[10][playerid]);

		veh_timer_ex(playerid, veh_ids);

		charge_panel_car(playerid, TEXTDRAW_HIDE);

		update_fuel_speed_player(playerid, vehicle[veh_ids][cEnergy]);
	}

	CancelSelectTextDraw(playerid);
	TogglePlayerControllable(playerid, true);
	clear_pvar_fill_station(playerid);


	return true;
}

stock filling_panel_car(playerid, type, action)
{
	switch(type)
	{
		case 1:
		{	
			switch(action)
			{
				case TEXTDRAW_SHOW:
				{

					//filling_panel_car(playerid, 1, TEXTDRAW_HIDE);
					//filling_panel_car(playerid, 2, TEXTDRAW_HIDE);

					TogglePlayerAllHudElements(playerid, HUD_ELEMENT_HIDE);

					create_fill_gazprom_p(playerid);

					new 
						fmt_str[32];
						
					new 
						veh_ids = GetPlayerVehicleID(playerid);

					format(fmt_str, 32, "%dL", transport_config[GetVehicleModel(veh_ids)-400][transport_tank]);
					PlayerTextDrawSetString(playerid, filling_gazprom_p[1][playerid], fmt_str);

					for(new i = 0; i < 4; i++)
					{
						PlayerTextDrawShow(playerid, filling_gazprom_p[i][playerid]);
					}

					TextDrawShowForPlayer(playerid, fill_gazprom_panel[0]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[1]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[2]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[3]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[4]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[5]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[6]);
					TextDrawShowForPlayer(playerid, fill_gazprom_panel[7]);

					PlayerTextDrawHideEx(playerid, player_info_td[playerid]);

					SetPVarIntNew(playerid, "car_in_filling_station", 1);
					SelectTextDraw(playerid, COLOR_BLUE);
				}
				case TEXTDRAW_HIDE:
				{
				
					TogglePlayerAllHudElements(playerid, HUD_ELEMENT_SHOW);

					PlayerTextDrawHide(playerid, filling_gazprom_p[0][playerid]);
					PlayerTextDrawHide(playerid, filling_gazprom_p[1][playerid]);
					PlayerTextDrawHide(playerid, filling_gazprom_p[2][playerid]);
					PlayerTextDrawHide(playerid, filling_gazprom_p[3][playerid]);

					PlayerTextDrawDestroy(playerid, filling_gazprom_p[0][playerid]);
					PlayerTextDrawDestroy(playerid, filling_gazprom_p[1][playerid]);
					PlayerTextDrawDestroy(playerid, filling_gazprom_p[2][playerid]);
					PlayerTextDrawDestroy(playerid, filling_gazprom_p[3][playerid]);

					TextDrawHideForPlayer(playerid, fill_gazprom_panel[0]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[1]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[2]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[3]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[4]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[5]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[6]);
					TextDrawHideForPlayer(playerid, fill_gazprom_panel[7]);
					DeletePVarNew(playerid, "car_in_filling_station");
				}
			}
		}
		case 2:
		{
			switch(action)
			{
				case TEXTDRAW_SHOW:
				{

					//filling_panel_car(playerid, 1, TEXTDRAW_HIDE);
					//filling_panel_car(playerid, 2, TEXTDRAW_HIDE);

					TogglePlayerAllHudElements(playerid, HUD_ELEMENT_HIDE);
									
					create_fill_lukoil_p(playerid);

					new 
						fmt_str[32];
						
					new 
						veh_ids = GetPlayerVehicleID(playerid);

					format(fmt_str, 32, "%dL", transport_config[GetVehicleModel(veh_ids)-400][transport_tank]);
					PlayerTextDrawSetString(playerid, fill_lukoil_panel_p[3][playerid], fmt_str);

					for(new i = 0; i < 4; i++)
					{
						PlayerTextDrawShow(playerid, fill_lukoil_panel_p[i][playerid]);
					}
					for(new i = 0; i < 7; i++)
					{
						TextDrawShowForPlayer(playerid, fill_lukoil_panel[i]);
					}
					SetPVarIntNew(playerid, "car_in_filling_station", 1);
					SelectTextDraw(playerid, COLOR_BLUE);
				}
				case TEXTDRAW_HIDE:
				{
					TogglePlayerAllHudElements(playerid, HUD_ELEMENT_SHOW);

					for(new i = 0; i < 4; i++)
					{
						PlayerTextDrawHide(playerid, fill_lukoil_panel_p[i][playerid]);
						PlayerTextDrawDestroy(playerid, fill_lukoil_panel_p[i][playerid]);
					}

					for(new i = 0; i < 7; i++)
					{
						TextDrawHideForPlayer(playerid, fill_lukoil_panel[i]);
					}

					DeletePVarNew(playerid, "car_in_filling_station");
				}
			}
		}
	}
	return true;
}

stock pay_money_bank_filling(sum, fill_stations_num)
{
	
	if(filling[fill_stations_num][fillings_finka_day] >= filling[fill_stations_num][fillings_finka_ogran])
		return true;

	if(filling[fill_stations_num][filling_owner_id] == -1)
		return true;

	filling[fill_stations_num][filling_bank] += sum;
	filling[fill_stations_num][fillings_finka_day] += sum;

	save_fill(fill_stations_num);

	format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_all_time` = `stats_all_time`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
	sql_queryEx(zConn, String256, QUERY_THREADED);	
	format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_mounth` = `stats_mounth`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
	sql_queryEx(zConn, String256, QUERY_THREADED);	

    new 
    	lyear, lmonth, lday;
	getdate(lyear, lmonth, lday);

	new 
		lwday = weekday(lday, lmonth, lyear);

	switch(lwday)
	{
		case 0:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_1` = `stats_day_1`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	

			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	

		}
		case 1:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_2` = `stats_day_2`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		}	

		case 2:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_3` = `stats_day_3`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		}
		case 3:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_4` = `stats_day_4`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		}

		case 4:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_5` = `stats_day_5`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		}	
		case 5:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_6` = `stats_day_6`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		}
		case 6:
		{
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_7` = `stats_day_7`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		
			format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = `stats_today`+'%d' WHERE `filling_id` = '%d'" , sum, fill_stations_num);
			sql_queryEx(zConn, String256, QUERY_THREADED);	
		}

	}	

	return true;
}

stock clear_stats_fillings_newday()
{


    new 
    	lyear, lmonth, lday;
	getdate(lyear, lmonth, lday);

	new 
		lwday = weekday(lday, lmonth, lyear);

	for(new i, idx = all_hotels; i < idx; i ++)
	{
		switch(lwday)
		{
			case 0:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_1` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	

				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	

			}
			case 1:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_2` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			}	

			case 2:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_3` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			}
			case 3:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_4` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			}

			case 4:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_5` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			}	
			case 5:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_6` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			}
			case 6:
			{
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_day_7` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			
				format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_today` = '0' WHERE `filling_id` = '%d'" , i);
				sql_queryEx(zConn, String256, QUERY_THREADED);	
			}

		}	
	}
	return true;
}

stock clear_stats_fillings_newmouth()
{
	for(new i, idx = all_hotels; i < idx; i ++)
	{
		format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_mounth_back` = `stats_mounth` WHERE `filling_id` = '%d'" , i);
		sql_queryEx(zConn, String256, QUERY_THREADED);	
	}

	format(String256,sizeof(String256),"UPDATE `filling_stats` SET `stats_mounth` = '0'");
	sql_queryEx(zConn, String256, QUERY_THREADED);	

	return true;
}

stock change_statistic_filling(playerid)
{
	new 
		filling_ids = pData[playerid][pFillStation];

	format(String512, sizeof(String512), "SELECT * FROM filling_stats WHERE filling_id = '%d' LIMIT 1", filling_ids);
	new Result:filling_stats = sql_queryEx(zConn, String512, QUERY_CACHED);

	if(sql_num_rows(filling_stats)) 
	{
		new 
			ye, m, d;

		getdate(ye, m, d);

		new 
			filling_stats_day[8],
			filling_stats_today,
			filling_stats_mounth,
			fillings_status_all,
			filling_stats_prewiow;

  		filling_stats_day[1] = sql_get_field_assoc_int(filling_stats, "stats_day_1");
  		filling_stats_day[2] = sql_get_field_assoc_int(filling_stats, "stats_day_2");
  		filling_stats_day[3] = sql_get_field_assoc_int(filling_stats, "stats_day_3");
  		filling_stats_day[4] = sql_get_field_assoc_int(filling_stats, "stats_day_4");
  		filling_stats_day[5] = sql_get_field_assoc_int(filling_stats, "stats_day_5");
  		filling_stats_day[6] = sql_get_field_assoc_int(filling_stats, "stats_day_6");
  		filling_stats_day[7] = sql_get_field_assoc_int(filling_stats, "stats_day_7");

  		filling_stats_today = sql_get_field_assoc_int(filling_stats, "stats_today");
  		filling_stats_mounth = sql_get_field_assoc_int(filling_stats, "stats_mounth");
  		fillings_status_all = sql_get_field_assoc_int(filling_stats, "stats_all_time");
  		filling_stats_prewiow = sql_get_field_assoc_int(filling_stats, "stats_mounth_back");

  		new 
  			all_day_seven = filling_stats_day[1]+filling_stats_day[2]+filling_stats_day[3]+filling_stats_day[4]+filling_stats_day[5]+filling_stats_day[6]+filling_stats_day[7];


	    format(String2048, sizeof(String2048), "\
        "cGREY"Дата\t"cGREY"Сумма\t"cGREY"Выгода/Убыток\n\
        "cBLUE"- "cWH"Понедельник\t%s %d рублей\t"cGR"Не изменилась\n\
        "cBLUE"- "cWH"Вторник\t%s %d рублей\t%s %d рублей\n\
        "cBLUE"- "cWH"Среда\t%s %d рублей\t%s %d рублей\n\
        "cBLUE"- "cWH"Четверг\t%s %d рублей\t%s %d рублей\n\
        "cBLUE"- "cWH"Пятница\t%s %d рублей\t%s %d рублей\n\
        "cBLUE"- "cWH"Суббота\t%s %d рублей\t%s %d рублей\n\
        "cBLUE"- "cWH"Воскресенье\t%s %d рублей\t%s %d рублей\n\
        "cBLUE"\t\n\
        "cBLUE"- "cWH"За %s\t%s%d рублей\t%s %d рублей\n\
        "cBLUE"- "cWH"За %s\t"cGR"%d рублей\n\
        "cBLUE"- "cWH"За неделю\t"cGR"%d рублей\n\
        "cBLUE"- "cWH"За все время\t"cGR"%d рублей\n\
        "cBLUE"- "cWH"За текущий день\t"cGR"%d рублей", 

        get_stats_color(filling_stats_day[1], filling_stats_day[1]), filling_stats_day[1],
        get_stats_color(filling_stats_day[2], filling_stats_day[1]), filling_stats_day[2], get_stats_phrase(filling_stats_day[2], filling_stats_day[1]), get_percent_pribil(filling_stats_day[2], filling_stats_day[1]), 
        get_stats_color(filling_stats_day[3], filling_stats_day[2]), filling_stats_day[3], get_stats_phrase(filling_stats_day[3], filling_stats_day[1]), get_percent_pribil(filling_stats_day[3], filling_stats_day[2]), 
        get_stats_color(filling_stats_day[4], filling_stats_day[3]), filling_stats_day[4], get_stats_phrase(filling_stats_day[4], filling_stats_day[1]), get_percent_pribil(filling_stats_day[4], filling_stats_day[3]), 
        get_stats_color(filling_stats_day[5], filling_stats_day[4]), filling_stats_day[5], get_stats_phrase(filling_stats_day[5], filling_stats_day[1]), get_percent_pribil(filling_stats_day[5], filling_stats_day[4]), 
        get_stats_color(filling_stats_day[6], filling_stats_day[5]), filling_stats_day[6], get_stats_phrase(filling_stats_day[6], filling_stats_day[1]), get_percent_pribil(filling_stats_day[6], filling_stats_day[5]), 
        get_stats_color(filling_stats_day[7], filling_stats_day[6]), filling_stats_day[7], get_stats_phrase(filling_stats_day[7], filling_stats_day[1]), get_percent_pribil(filling_stats_day[7], filling_stats_day[6]), 
        mounth_filling_stats[m], get_stats_color(filling_stats_mounth, filling_stats_prewiow), filling_stats_mounth, get_stats_phrase(filling_stats_mounth, filling_stats_prewiow), get_percent_pribil(filling_stats_mounth, filling_stats_prewiow), 
        mounth_filling_stats[m-1], filling_stats_prewiow,
        all_day_seven,
        fillings_status_all,
        filling_stats_today);
	    SPD(playerid, 0, DIALOG_STYLE_TABLIST_HEADERS, !""cBLUE"Статистика АЗС", String2048, !"Закрыть", ""); 

  	}
  	else
  	{
  		SendErr(playerid, "Статистика по некоторым причинам не доступна!");
  	}
  	sql_free_result(filling_stats);


	return true;
}

stock create_filling_other_pickup()
{

	// Основные круговые пикапы (быдло - чтобы было проще ориентироваться, а не создавать гемор себе :( )
 

	filling_trigger_1_fill[0] = create_circle_pickup_big(filling_1_coords_trigger_fuel[0][0], filling_1_coords_trigger_fuel[0][1], filling_1_coords_trigger_fuel[0][2], TRIGGER_LBLUE);	
	filling_trigger_1_fill[1] = create_circle_pickup_big(filling_1_coords_trigger_fuel[1][0], filling_1_coords_trigger_fuel[1][1], filling_1_coords_trigger_fuel[1][2], TRIGGER_LBLUE);	
	filling_trigger_1_fill[2] = create_circle_pickup_big(filling_1_coords_trigger_fuel[2][0], filling_1_coords_trigger_fuel[2][1], filling_1_coords_trigger_fuel[2][2], TRIGGER_LBLUE);	
	filling_trigger_1_fill[3] = create_circle_pickup_big(filling_1_coords_trigger_fuel[3][0], filling_1_coords_trigger_fuel[3][1], filling_1_coords_trigger_fuel[3][2], TRIGGER_LBLUE);

	filling_trigger_2_fill[0] = create_circle_pickup_big(filling_2_coords_trigger_fuel[0][0], filling_2_coords_trigger_fuel[0][1], filling_2_coords_trigger_fuel[0][2], TRIGGER_LRED);	
	filling_trigger_2_fill[1] = create_circle_pickup_big(filling_2_coords_trigger_fuel[1][0], filling_2_coords_trigger_fuel[1][1], filling_2_coords_trigger_fuel[1][2], TRIGGER_LRED);	
	filling_trigger_2_fill[2] = create_circle_pickup_big(filling_2_coords_trigger_fuel[2][0], filling_2_coords_trigger_fuel[2][1], filling_2_coords_trigger_fuel[2][2], TRIGGER_LRED);	
	filling_trigger_2_fill[3] = create_circle_pickup_big(filling_2_coords_trigger_fuel[3][0], filling_2_coords_trigger_fuel[3][1], filling_2_coords_trigger_fuel[3][2], TRIGGER_LRED);

	filling_trigger_3_fill[0] = create_circle_pickup_big(filling_3_coords_trigger_fuel[0][0], filling_3_coords_trigger_fuel[0][1], filling_3_coords_trigger_fuel[0][2], TRIGGER_LRED);	
	filling_trigger_3_fill[1] = create_circle_pickup_big(filling_3_coords_trigger_fuel[1][0], filling_3_coords_trigger_fuel[1][1], filling_3_coords_trigger_fuel[1][2], TRIGGER_LRED);	
	filling_trigger_3_fill[2] = create_circle_pickup_big(filling_3_coords_trigger_fuel[2][0], filling_3_coords_trigger_fuel[2][1], filling_3_coords_trigger_fuel[2][2], TRIGGER_LRED);	
	filling_trigger_3_fill[3] = create_circle_pickup_big(filling_3_coords_trigger_fuel[3][0], filling_3_coords_trigger_fuel[3][1], filling_3_coords_trigger_fuel[3][2], TRIGGER_LRED);

	filling_trigger_4_fill[0] = create_circle_pickup_big(filling_4_coords_trigger_fuel[0][0], filling_4_coords_trigger_fuel[0][1], filling_4_coords_trigger_fuel[0][2], TRIGGER_LRED);	
	filling_trigger_4_fill[1] = create_circle_pickup_big(filling_4_coords_trigger_fuel[1][0], filling_4_coords_trigger_fuel[1][1], filling_4_coords_trigger_fuel[1][2], TRIGGER_LRED);	
	filling_trigger_4_fill[2] = create_circle_pickup_big(filling_4_coords_trigger_fuel[2][0], filling_4_coords_trigger_fuel[2][1], filling_4_coords_trigger_fuel[2][2], TRIGGER_LRED);	
	filling_trigger_4_fill[3] = create_circle_pickup_big(filling_4_coords_trigger_fuel[3][0], filling_4_coords_trigger_fuel[3][1], filling_4_coords_trigger_fuel[3][2], TRIGGER_LRED);

	filling_trigger_5_fill[0] = create_circle_pickup_big(filling_5_coords_trigger_fuel[0][0], filling_5_coords_trigger_fuel[0][1], filling_5_coords_trigger_fuel[0][2], TRIGGER_LBLUE);	
	filling_trigger_5_fill[1] = create_circle_pickup_big(filling_5_coords_trigger_fuel[1][0], filling_5_coords_trigger_fuel[1][1], filling_5_coords_trigger_fuel[1][2], TRIGGER_LBLUE);	
	filling_trigger_5_fill[2] = create_circle_pickup_big(filling_5_coords_trigger_fuel[2][0], filling_5_coords_trigger_fuel[2][1], filling_5_coords_trigger_fuel[2][2], TRIGGER_LBLUE);	
	filling_trigger_5_fill[3] = create_circle_pickup_big(filling_5_coords_trigger_fuel[3][0], filling_5_coords_trigger_fuel[3][1], filling_5_coords_trigger_fuel[3][2], TRIGGER_LBLUE);

	filling_trigger_6_fill[0] = create_circle_pickup_big(filling_6_coords_trigger_fuel[0][0], filling_6_coords_trigger_fuel[0][1], filling_6_coords_trigger_fuel[0][2], TRIGGER_LRED);	
	filling_trigger_6_fill[1] = create_circle_pickup_big(filling_6_coords_trigger_fuel[1][0], filling_6_coords_trigger_fuel[1][1], filling_6_coords_trigger_fuel[1][2], TRIGGER_LRED);	
	filling_trigger_6_fill[2] = create_circle_pickup_big(filling_6_coords_trigger_fuel[2][0], filling_6_coords_trigger_fuel[2][1], filling_6_coords_trigger_fuel[2][2], TRIGGER_LRED);	
	filling_trigger_6_fill[3] = create_circle_pickup_big(filling_6_coords_trigger_fuel[3][0], filling_6_coords_trigger_fuel[3][1], filling_6_coords_trigger_fuel[3][2], TRIGGER_LRED);

	filling_trigger_7_fill[0] = create_circle_pickup_big(filling_7_coords_trigger_fuel[0][0], filling_7_coords_trigger_fuel[0][1], filling_7_coords_trigger_fuel[0][2], TRIGGER_LBLUE);	
	filling_trigger_7_fill[1] = create_circle_pickup_big(filling_7_coords_trigger_fuel[1][0], filling_7_coords_trigger_fuel[1][1], filling_7_coords_trigger_fuel[1][2], TRIGGER_LBLUE);	
	filling_trigger_7_fill[2] = create_circle_pickup_big(filling_7_coords_trigger_fuel[2][0], filling_7_coords_trigger_fuel[2][1], filling_7_coords_trigger_fuel[2][2], TRIGGER_LBLUE);	
	filling_trigger_7_fill[3] = create_circle_pickup_big(filling_7_coords_trigger_fuel[3][0], filling_7_coords_trigger_fuel[3][1], filling_7_coords_trigger_fuel[3][2], TRIGGER_LBLUE);

	filling_trigger_8_fill[0] = create_circle_pickup_big(filling_8_coords_trigger_fuel[0][0], filling_8_coords_trigger_fuel[0][1], filling_8_coords_trigger_fuel[0][2], TRIGGER_LRED);	
	filling_trigger_8_fill[1] = create_circle_pickup_big(filling_8_coords_trigger_fuel[1][0], filling_8_coords_trigger_fuel[1][1], filling_8_coords_trigger_fuel[1][2], TRIGGER_LRED);	
	filling_trigger_8_fill[2] = create_circle_pickup_big(filling_8_coords_trigger_fuel[2][0], filling_8_coords_trigger_fuel[2][1], filling_8_coords_trigger_fuel[2][2], TRIGGER_LRED);	
	filling_trigger_8_fill[3] = create_circle_pickup_big(filling_8_coords_trigger_fuel[3][0], filling_8_coords_trigger_fuel[3][1], filling_8_coords_trigger_fuel[3][2], TRIGGER_LRED);


	// Основные круговые пикапы у зарядок (быдло - чтобы было проще ориентироваться, а не создавать гемор себе :( )


	filling_trigger_1_eng[0] = create_circle_pickup_big(filling_1_coords_trigger_energ[0][0], filling_1_coords_trigger_energ[0][1], filling_1_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_1_eng[1] = create_circle_pickup_big(filling_1_coords_trigger_energ[1][0], filling_1_coords_trigger_energ[1][1], filling_1_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_2_eng[0] = create_circle_pickup_big(filling_2_coords_trigger_energ[0][0], filling_2_coords_trigger_energ[0][1], filling_2_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_2_eng[1] = create_circle_pickup_big(filling_2_coords_trigger_energ[1][0], filling_2_coords_trigger_energ[1][1], filling_2_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_3_eng[0] = create_circle_pickup_big(filling_3_coords_trigger_energ[0][0], filling_3_coords_trigger_energ[0][1], filling_3_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_3_eng[1] = create_circle_pickup_big(filling_3_coords_trigger_energ[1][0], filling_3_coords_trigger_energ[1][1], filling_3_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_4_eng[0] = create_circle_pickup_big(filling_4_coords_trigger_energ[0][0], filling_4_coords_trigger_energ[0][1], filling_4_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_4_eng[1] = create_circle_pickup_big(filling_4_coords_trigger_energ[1][0], filling_4_coords_trigger_energ[1][1], filling_4_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_5_eng[0] = create_circle_pickup_big(filling_5_coords_trigger_energ[0][0], filling_5_coords_trigger_energ[0][1], filling_5_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_5_eng[1] = create_circle_pickup_big(filling_5_coords_trigger_energ[1][0], filling_5_coords_trigger_energ[1][1], filling_5_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_6_eng[0] = create_circle_pickup_big(filling_6_coords_trigger_energ[0][0], filling_6_coords_trigger_energ[0][1], filling_6_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_6_eng[1] = create_circle_pickup_big(filling_6_coords_trigger_energ[1][0], filling_6_coords_trigger_energ[1][1], filling_6_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_7_eng[0] = create_circle_pickup_big(filling_7_coords_trigger_energ[0][0], filling_7_coords_trigger_energ[0][1], filling_7_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_7_eng[1] = create_circle_pickup_big(filling_7_coords_trigger_energ[1][0], filling_7_coords_trigger_energ[1][1], filling_7_coords_trigger_energ[1][2], TRIGGER_GREEN);	

	filling_trigger_8_eng[0] = create_circle_pickup_big(filling_8_coords_trigger_energ[0][0], filling_8_coords_trigger_energ[0][1], filling_8_coords_trigger_energ[0][2], TRIGGER_GREEN);	
	filling_trigger_8_eng[1] = create_circle_pickup_big(filling_8_coords_trigger_energ[1][0], filling_8_coords_trigger_energ[1][1], filling_8_coords_trigger_energ[1][2], TRIGGER_GREEN);	
	return true;
}


CMD:addfilling(playerid, params[])
{
    if(pData[playerid][pAdmin] < 8) 
    	return NoCMD(playerid);

    new 
    	Float:x,Float:y,Float:z;

    if(sscanf(params, "ddd",params[0], params[1], params[2])) 
    	return SendInf(playerid, "Используйте: /addfilling [1 - Газпром 2 - Лукойл] [Цена] [Топлива]");

    if(params[0] < 1 || params[0] > 2) 
    	return SendInf(playerid, "1 - Газпром 2 - Лукойл");

    GetPlayerPos(playerid, x, y, z);
    
	static 
		formate_str[310];

    format(formate_str, 310, "INSERT INTO filling_station(filling_info_enter_x, filling_info_enter_y, filling_info_enter_z, filling_type_name, filling_price, filling_count_all_fill) VALUES ('%f','%f','%f','%d','%d','%d')",
    x, y, z, params[0], params[1], params[2]);
    sql_queryEx(zConn, formate_str, QUERY_THREADED);	

    formate_str[0] = EOS;

    SendSucc(playerid, "Вы добавили АЗС! Оно появится после рестарта!");
	return true;
}

CMD:gotofill(playerid, params[])
{
    if(pData[playerid][pAdmin] < 8) 
    	return NoCMD(playerid);

	if(sscanf(params, "d", params[0]))
	{
		SendInf(playerid, "Используйте: /gotofill "cWH"[ID АЗС]");
		return true;
	}

	new 
		id_fill = params[0];

	SetPlayerPos(playerid, filling[id_fill][filling_info_enter_x], filling[id_fill][filling_info_enter_y], filling[id_fill][filling_info_enter_z]);

	new 
		fmt_str[144];

    format(fmt_str, sizeof(fmt_str), "Вы телепортировались к АЗС №%d", id_fill);
    SendSucc(playerid, fmt_str);
	return true;
}

CMD:asellfill(playerid, params[])
{
    if(pData[playerid][pAdmin] < 8) 
    	return NoCMD(playerid);

	if(sscanf(params, "d", params[0]))
	{
		SendInf(playerid, "Используйте: /asellfill "cWH"[ID АЗС]");
		return true;
	}
	
	sell_filling_admin2(params[0]);

	return true;
}

CMD:asellfill2(playerid, params[])
{
    if(pData[playerid][pAdmin] < 8) 
    	return NoCMD(playerid);

	if(sscanf(params, "dd", params[0], params[1]))
	{
		SendInf(playerid, "Используйте: /asellfill2 "cWH"[ID АЗС] [HOUR]");
		return true;
	}
	

	sell_filling_payday3(params[0], params[1]);
	return true;
}

CMD:afillfin(playerid, params[])
{


    if(pData[playerid][pAdmin] < 8) 
    	return NoCMD(playerid);

	if(sscanf(params, "dd", params[0], params[1]))
	{
		SendInf(playerid, "Используйте: /afillfin "cWH"[ID АЗС] [Ограничение]");
		return true;
	}

	filling[params[0]][fillings_finka_ogran] = params[1];
	save_fill(params[0]);

    format(String144, sizeof(String144), "Вы успешно изменили максимальную прибыль для АЗС №%d на "cGR"%d "cWH"рублей!", params[0], params[1]);
    SendSucc(playerid, String144);

	return true;
}


CMD:afillfull(playerid)
{

	for(new i, idx = all_filling; i < idx; i ++)
	{
		filling[i][filling_count_all_fill] = 10000;
		save_fill(i);	 
	}
	SendSucc(playerid, "Вы пополнили топливом все АЗС!");
	return true;
}

























